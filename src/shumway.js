/*
 * Copyright 2013 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// This file is automatically generated

(function(a){function b(a,b,e,r,s){void 0===r&&d("Missing required offset argument");(0>r||r+e>a.byteLength)&&d("Invalid index: "+r);if(1===e||!!s===f){if(0===(a.byteOffset+r)%e)return(new b(a.buffer,a.byteOffset+r,1))[0];for(s=0;s<e;s++)g[s]=a._bytes[r+s];return(new b(g.buffer))[0]}for(s=0;s<e;s++)g[e-s-1]=a._bytes[r+s];return(new b(g.buffer))[0]}function e(a,b,e,r,s,w){void 0===r&&d("Missing required offset argument");void 0===s&&d("Missing required value argument");(0>r||r+e>a.byteLength)&&d("Invalid index: "+
r);if(1===e||!!w===f)if(0===(a.byteOffset+r)%e)(new b(a.buffer,a.byteOffset+r,1))[0]=s;else{(new b(g.buffer))[0]=s;for(b=0;b<e;b++)a._bytes[b+r]=g[b]}else{(new b(g.buffer))[0]=s;for(b=0;b<e;b++)a._bytes[r+b]=g[e-1-b]}}function d(a){throw Error(a);}if(!a.DataView){a.ArrayBuffer||d("ArrayBuffer not supported");Object.defineProperties||d("This module requires ECMAScript 5");var f=1===(new Int8Array((new Int32Array([1])).buffer))[0],g=new Uint8Array(8);a.DataView=function(a,b,e){a instanceof ArrayBuffer||
d("Bad ArrayBuffer");b=b||0;e=e||a.byteLength-b;(0>b||0>e||b+e>a.byteLength)&&d("Illegal offset and/or length");Object.defineProperties(this,{buffer:{value:a,enumerable:!1,writable:!1,configurable:!1},byteOffset:{value:b,enumerable:!1,writable:!1,configurable:!1},byteLength:{value:e,enumerable:!1,writable:!1,configurable:!1},_bytes:{value:new Uint8Array(a,b,e),enumerable:!1,writable:!1,configurable:!1}})};a.DataView.prototype={constructor:DataView,getInt8:function(a){return b(this,Int8Array,1,a)},
getUint8:function(a){return b(this,Uint8Array,1,a)},getInt16:function(a,d){return b(this,Int16Array,2,a,d)},getUint16:function(a,d){return b(this,Uint16Array,2,a,d)},getInt32:function(a,d){return b(this,Int32Array,4,a,d)},getUint32:function(a,d){return b(this,Uint32Array,4,a,d)},getFloat32:function(a,d){return b(this,Float32Array,4,a,d)},getFloat64:function(a,d){return b(this,Float64Array,8,a,d)},setInt8:function(a,b){e(this,Int8Array,1,a,b)},setUint8:function(a,b){e(this,Uint8Array,1,a,b)},setInt16:function(a,
b,d){e(this,Int16Array,2,a,b,d)},setUint16:function(a,b,d){e(this,Uint16Array,2,a,b,d)},setInt32:function(a,b,d){e(this,Int32Array,4,a,b,d)},setUint32:function(a,b,d){e(this,Uint32Array,4,a,b,d)},setFloat32:function(a,b,d){e(this,Float32Array,4,a,b,d)},setFloat64:function(a,b,d){e(this,Float64Array,8,a,b,d)}}}})(this);
(function(a){var b=function(){this.args=[]},e=function(a,b,d,e){this.shortName=a;this.longName=b;this.type=d;e=e||{};this.positional=e.positional;this.parseFn=e.parse;this.value=e.defaultValue};e.prototype.parse=function(a){"boolean"===this.type?(!0,this.value=a):"number"===this.type?(!0,this.value=parseInt(a,10)):this.value=a;this.parseFn&&this.parseFn(this.value)};b.prototype.addArgument=function(a,b,d,f){a=new e(a,b,d,f);this.args.push(a);return a};b.prototype.addBoundOption=function(a){this.args.push(new e(a.shortName,
a.longName,a.type,{parse:function(b){a.value=b}}))};b.prototype.addBoundOptionSet=function(a){var b=this;a.options.forEach(function(a){a instanceof d?b.addBoundOptionSet(a):(!0,b.addBoundOption(a))})};b.prototype.getUsage=function(){var a="";this.args.forEach(function(b){a=b.positional?a+b.longName:a+("[-"+b.shortName+"|--"+b.longName+("boolean"===b.type?"":" "+b.type[0].toUpperCase())+"]");a+=" "});return a};b.prototype.parse=function(a){var b={},d=[];this.args.forEach(function(a){a.positional?d.push(a):
(b["-"+a.shortName]=a,b["--"+a.longName]=a)});for(var e=[];a.length;){var f=a.shift(),s=null,w=f;if("--"==f){e=e.concat(a);break}else if("-"==f.slice(0,1)||"--"==f.slice(0,2)){s=b[f];!0;if(!s)continue;"boolean"!==s.type?(w=a.shift(),!0):w=!0}else d.length?s=d.shift():e.push(w);s&&s.parse(w)}!0;return e};var d,f=function(a){this.name=a;this.options=[]};f.prototype.register=function(a){this.options.push(a);return a};f.prototype.trace=function(a){a.enter(this.name+" {");this.options.forEach(function(b){b.trace(a)});
a.leave("}")};d=f;f=function(a,b,d,e,f){this.longName=b;this.shortName=a;this.type=d;this.value=this.defaultValue=e;this.description=f};f.prototype.parse=function(a){this.value=a};f.prototype.trace=function(a){a.writeLn(("-"+this.shortName+"|--"+this.longName).padRight(" ",30)+" = "+this.type+" "+this.value+" ["+this.defaultValue+"] ("+this.description+")")};a.Option=f;a.OptionSet=d;a.ArgumentParser=b})("undefined"===typeof exports?options={}:exports);
var Option=options.Option,OptionSet=options.OptionSet,coreOptions=new OptionSet("Core Options"),create=Object.create,defineProperty=Object.defineProperty,keys=Object.keys,isArray=Array.isArray,fromCharCode=String.fromCharCode,logE=Math.log,max=Math.max,min=Math.min,pow=Math.pow,push=Array.prototype.push,slice=Array.prototype.slice,splice=Array.prototype.splice;function fail(a,b){throw Error((b?b+": ":"")+a);}function assert(a,b,e){a||fail(b,e)}
function scriptProperties(a,b){return b.reduce(function(b,d){b[d]=a+" "+d;return b},{})}function cloneObject(a){var b=Object.create(null),e;for(e in a)b[e]=a[e];return b}function sortByDepth(a,b){var e=a._level,d=b._level;if(a._parent!==b._parent&&-1<a._index&&-1<b._index){for(;a._level>d;)a=a._parent;for(;b._level>e;)b=b._parent;for(;1<a._level&&a._parent!==b._parent;)a=a._parent,b=b._parent}return a===b?e-d:a._index-b._index}function sortNumeric(a,b){return a-b}
function rgbaObjToStr(a){return"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha/255+")"}function rgbIntAlphaToStr(a,b){a|=0;if(1<=b){for(var e=a.toString(16);6>e.length;)e="0"+e;return"#"+e}return"rgba("+(a>>16&255)+","+(a>>8&255)+","+(a&255)+","+b+")"}function argbUintToStr(a){return"rgba("+(a>>>16&255)+","+(a>>>8&255)+","+(a&255)+","+(a>>>24&255)/255+")"}
(function(){eval("function t() {} t.name === 't'")||Object.defineProperty(Function.prototype,"name",{get:function(){if(this.__name)return this.__name;var a=/function\s([^\(]+)/.exec(this.toString());return this.__name=a=a&&"anonymous"!==a[1]?a[1]:null},configurable:!0,enumerable:!1})})();var randomStyleCache,nextStyle=0;
function randomStyle(){randomStyleCache||(randomStyleCache="#ff5e3a #ff9500 #ffdb4c #87fc70 #52edc7 #1ad6fd #c644fc #ef4db6 #4a4a4a #dbddde #ff3b30 #ff9500 #ffcc00 #4cd964 #34aadc #007aff #5856d6 #ff2d55 #8e8e93 #c7c7cc #5ad427 #c86edf #d1eefc #e0f8d8 #fb2b69 #f7f7f7 #1d77ef #d6cec3 #55efcb #ff4981 #ffd3e0 #f7f7f7 #ff1300 #1f1f21 #bdbec2 #ff3a2d".split(" "));return randomStyleCache[nextStyle++%randomStyleCache.length]}
var Promise=function(){function a(a){if("function"!==typeof a)throw new TypeError("Invalid deferred constructor");var b,d=function(a,b){d.resolve=a;d.reject=b};b=d;a=new a(b);var e=b.resolve;if("function"!==typeof e)throw new TypeError("Invalid resolve construction function");b=b.reject;if("function"!==typeof b)throw new TypeError("Invalid reject construction function");return{promise:a,resolve:e,reject:b}}function b(a,b){if("object"!==typeof a||null===a)return!1;try{var d=a.then;if("function"!==
typeof d)return!1;d.call(a,b.resolve,b.reject)}catch(e){d=b.reject,d(e)}return!0}function e(a){return"object"===typeof a&&null!==a&&"undefined"!==typeof a.promiseStatus}function d(a,b){if("unresolved"===a.promiseStatus){var d=a.rejectReactions;a.result=b;a.resolveReactions=void 0;a.rejectReactions=void 0;a.promiseStatus="has-rejection";f(d,b)}}function f(a,b){for(var d=0;d<a.length;d++)g({reaction:a[d],argument:b})}function g(a){0===w.length&&setTimeout(m,0);w.push(a)}function l(a,d){var e=a.deferred,
f=a.handler,g,l;try{g=f(d)}catch(m){return e=e.reject,e(m)}if(g===e.promise)return e=e.reject,e(new TypeError("Self resolution"));try{if(l=b(g,e),!l){var r=e.resolve;return r(g)}}catch(p){return e=e.reject,e(p)}}function m(){for(;0<w.length;){var a=w[0];try{l(a.reaction,a.argument)}catch(b){if("function"===typeof s.onerror)s.onerror(b)}w.shift()}}function p(a){throw a;}function r(a){return a}function s(a){if("function"!==typeof a)throw new TypeError("resolver is not a function");if("object"!==typeof this)throw new TypeError("Promise to initialize is not an object");
this.promiseStatus="unresolved";this.resolveReactions=[];this.rejectReactions=[];this.result=void 0;var b,e=this;b=function(a){if("unresolved"===e.promiseStatus){var b=e.resolveReactions;e.result=a;e.resolveReactions=void 0;e.rejectReactions=void 0;e.promiseStatus="has-resolution";f(b,a)}};var g,l=this;g=function(a){d(l,a)};try{a(b,g)}catch(m){d(this,m)}this.promiseConstructor=s;return this}var w=[];s.all=function(b){var d=a(this),e=[],f=0,g=0;b.forEach(function(a){a=this.cast(a);var b=g;a.then(function(a){e[b]=
a;f--;0===f&&d.resolve(e)},d.reject);g++;f++},this);0===g&&d.resolve(e);return d.promise};s.cast=function(b){if(e(b))return b;var d=a(this);d.resolve(b);return d.promise};s.reject=function(b){var d=a(this);d.reject(b);return d.promise};s.resolve=function(b){var d=a(this);d.resolve(b);return d.promise};s.prototype={"catch":function(a){this.then(void 0,a)},then:function(d,f){if(!e(this))throw new TypeError("this is not a Promises");var l=a(this.promiseConstructor),m="function"===typeof f?f:p,s=this,
w="function"===typeof d?d:r,D={deferred:l,handler:function(d){if(d===s)return m(new TypeError("Self resolution"));var f=s.promiseConstructor;if(e(d)&&d.promiseConstructor===f)return d.then(w,m);f=a(f);return b(d,f)?f.promise.then(w,m):w(d)}},F={deferred:l,handler:m};switch(this.promiseStatus){case "unresolved":this.resolveReactions.push(D);this.rejectReactions.push(F);break;case "has-resolution":g({reaction:D,argument:this.result});break;case "has-rejection":g({reaction:F,argument:this.result})}return l.promise}};
return s}(),QuadTree=function(a,b,e,d,f){this.x=a|0;this.y=b|0;this.width=e|0;this.height=d|0;this.level=f|0;this.stuckObjects=[];this.objects=[];this.nodes=[]};QuadTree.prototype._findIndex=function(a,b,e,d){var f=this.x+(this.width/2|0),g=this.y+(this.height/2|0);d=b<g&&d<g;b=b>g;if(a<f&&e<f){if(d)return 1;if(b)return 2}else if(a>f){if(d)return 0;if(b)return 3}return-1};
QuadTree.prototype.insert=function(a){var b=this.nodes;if(b.length){var e=this._findIndex(a.xMin,a.yMin,a.xMax,a.yMax);-1<e?b[e].insert(a):(this.stuckObjects.push(a),a._qtree=this)}else if(b=this.objects,b.push(a),4<b.length&&10>this.level)for(this._subdivide();b.length;)this.insert(b.shift());else a._qtree=this};
QuadTree.prototype.delete=function(a){if(a._qtree===this){var b=this.objects.indexOf(a);-1<b?this.objects.splice(b,1):(b=this.stuckObjects.indexOf(a),this.stuckObjects.splice(b,1));a._qtree=null}};QuadTree.prototype._stack=[];QuadTree.prototype._out=[];
QuadTree.prototype.retrieve=function(a,b,e,d){var f=this._stack,g=this._out;g.length=0;var l=this;do{if(l.nodes.length){var m=l._findIndex(a,b,e,d);-1<m?f.push(l.nodes[m]):f.push.apply(f,l.nodes)}g.push.apply(g,l.stuckObjects);g.push.apply(g,l.objects);l=f.pop()}while(l);return g};
QuadTree.prototype._subdivide=function(){var a=this.width/2|0,b=this.height/2|0,e=this.x+a,d=this.y+b,f=this.level+1;this.nodes[0]=new QuadTree(e,this.y,a,b,f);this.nodes[1]=new QuadTree(this.x,this.y,a,b,f);this.nodes[2]=new QuadTree(this.x,d,a,b,f);this.nodes[3]=new QuadTree(e,d,a,b,f)};var EXTERNAL_INTERFACE_FEATURE=1,CLIPBOARD_FEATURE=2,SHAREDOBJECT_FEATURE=3,VIDEO_FEATURE=4,SOUND_FEATURE=5,NETCONNECTION_FEATURE=6;this.performance||(this.performance={});
this.performance.now||(this.performance.now=Date.now);
var SWF_TAG_CODE_CSM_TEXT_SETTINGS=74,SWF_TAG_CODE_DEFINE_BINARY_DATA=87,SWF_TAG_CODE_DEFINE_BITS=6,SWF_TAG_CODE_DEFINE_BITS_JPEG2=21,SWF_TAG_CODE_DEFINE_BITS_JPEG3=35,SWF_TAG_CODE_DEFINE_BITS_JPEG4=90,SWF_TAG_CODE_DEFINE_BITS_LOSSLESS=20,SWF_TAG_CODE_DEFINE_BITS_LOSSLESS2=36,SWF_TAG_CODE_DEFINE_BUTTON=7,SWF_TAG_CODE_DEFINE_BUTTON2=34,SWF_TAG_CODE_DEFINE_BUTTON_CXFORM=23,SWF_TAG_CODE_DEFINE_BUTTON_SOUND=17,SWF_TAG_CODE_DEFINE_EDIT_TEXT=37,SWF_TAG_CODE_DEFINE_FONT=10,SWF_TAG_CODE_DEFINE_FONT2=48,SWF_TAG_CODE_DEFINE_FONT3=
75,SWF_TAG_CODE_DEFINE_FONT4=91,SWF_TAG_CODE_DEFINE_FONT_ALIGN_ZONES=73,SWF_TAG_CODE_DEFINE_FONT_INFO=13,SWF_TAG_CODE_DEFINE_FONT_INFO2=62,SWF_TAG_CODE_DEFINE_FONT_NAME=88,SWF_TAG_CODE_DEFINE_MORPH_SHAPE=46,SWF_TAG_CODE_DEFINE_MORPH_SHAPE2=84,SWF_TAG_CODE_DEFINE_SCALING_GRID=78,SWF_TAG_CODE_DEFINE_SCENE_AND_FRAME_LABEL_DATA=86,SWF_TAG_CODE_DEFINE_SHAPE=2,SWF_TAG_CODE_DEFINE_SHAPE2=22,SWF_TAG_CODE_DEFINE_SHAPE3=32,SWF_TAG_CODE_DEFINE_SHAPE4=83,SWF_TAG_CODE_DEFINE_SOUND=14,SWF_TAG_CODE_DEFINE_SPRITE=
39,SWF_TAG_CODE_DEFINE_TEXT=11,SWF_TAG_CODE_DEFINE_TEXT2=33,SWF_TAG_CODE_DEFINE_VIDEO_STREAM=60,SWF_TAG_CODE_DO_ABC=82,SWF_TAG_CODE_DO_ABC_=72,SWF_TAG_CODE_DO_ACTION=12,SWF_TAG_CODE_DO_INIT_ACTION=59,SWF_TAG_CODE_ENABLE_DEBUGGER=58,SWF_TAG_CODE_ENABLE_DEBUGGER2=64,SWF_TAG_CODE_END=0,SWF_TAG_CODE_EXPORT_ASSETS=56,SWF_TAG_CODE_FILE_ATTRIBUTES=69,SWF_TAG_CODE_FRAME_LABEL=43,SWF_TAG_CODE_IMPORT_ASSETS=57,SWF_TAG_CODE_IMPORT_ASSETS2=71,SWF_TAG_CODE_JPEG_TABLES=8,SWF_TAG_CODE_METADATA=77,SWF_TAG_CODE_PLACE_OBJECT=
4,SWF_TAG_CODE_PLACE_OBJECT2=26,SWF_TAG_CODE_PLACE_OBJECT3=70,SWF_TAG_CODE_PROTECT=24,SWF_TAG_CODE_REMOVE_OBJECT=5,SWF_TAG_CODE_REMOVE_OBJECT2=28,SWF_TAG_CODE_SCRIPT_LIMITS=65,SWF_TAG_CODE_SET_BACKGROUND_COLOR=9,SWF_TAG_CODE_SET_TAB_INDEX=66,SWF_TAG_CODE_SHOW_FRAME=1,SWF_TAG_CODE_SOUND_STREAM_BLOCK=19,SWF_TAG_CODE_SOUND_STREAM_HEAD=18,SWF_TAG_CODE_SOUND_STREAM_HEAD2=45,SWF_TAG_CODE_START_SOUND=15,SWF_TAG_CODE_START_SOUND2=89,SWF_TAG_CODE_SYMBOL_CLASS=76,SWF_TAG_CODE_VIDEO_FRAME=61;self.SWF={};
for(var codeLengthOrder=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],distanceCodes=[],distanceExtraBits=[],i=0,j=0,code=1;30>i;++i)distanceCodes[i]=code,code+=1<<(distanceExtraBits[i]=~~((j+=2<i?1:0)/2));for(var bitLengths=[],i=0;32>i;++i)bitLengths[i]=5;for(var fixedDistanceTable=makeHuffmanTable(bitLengths),lengthCodes=[],lengthExtraBits=[],j=i=0,code=3;29>i;++i)lengthCodes[i]=code-(28==i?1:0),code+=1<<(lengthExtraBits[i]=~~((j+=4<i?1:0)/4%6));
for(i=0;288>i;++i)bitLengths[i]=144>i||279<i?8:256>i?9:7;var fixedLiteralTable=makeHuffmanTable(bitLengths);function makeHuffmanTable(a){for(var b=max.apply(null,a),e=a.length,d=1<<b,f=new Uint32Array(d),g=0,l=1,m=2;l<=b;g<<=1,++l,m<<=1)for(var p=0;p<e;++p)if(a[p]===l){for(var r=0,s=0;s<l;++s)r=2*r+(g>>s&1);for(s=r;s<d;s+=m)f[s]=l<<16|p;++g}return{codes:f,maxBits:b}}function verifyDeflateHeader(){}
function createInflatedStream(a,b){verifyDeflateHeader(a);var e=new Stream(a,2),d={data:new Uint8Array(b),available:0,completed:!1},f={};do inflateBlock(e,d,f);while(!d.completed&&e.pos<e.end);return new Stream(d.data,0,d.available)}var InflateNoDataError={};
function inflateBlock(a,b,e){var d=void 0!==e.header?e.header:e.header=readBits(a.bytes,a,3);switch(d>>1){case 0:a.align();var f=a.pos;if(4>a.end-f)throw InflateNoDataError;var g=a.getUint16(f,!0);a.getUint16(f+2,!0);if(a.end-f<4+g)throw InflateNoDataError;var l=f+4,m=a.pos=l+g,f=a.bytes;splice.apply(b.data,[b.available,g].concat(slice.call(f,l,m)));b.available+=g;break;case 1:inflate(a,b,fixedLiteralTable,fixedDistanceTable,e);break;case 2:if(void 0!==e.distanceTable)f=e.distanceTable,g=e.literalTable;
else{var f=a.bytes,l=a.pos,m=a.bitBuffer,p=a.bitLength,g=[],r,s;try{r=readBits(f,a,5)+257;s=readBits(f,a,5)+1;for(var w=r+s,v=readBits(f,a,4)+4,z=0;19>z;++z)g[codeLengthOrder[z]]=z<v?readBits(f,a,3):0;for(var A=makeHuffmanTable(g),g=[],v=z=0;z<w;){var u=1,B=readCode(f,a,A);switch(B){case 16:u=readBits(f,a,2)+3;B=v;break;case 17:u=readBits(f,a,3)+3;B=0;break;case 18:u=readBits(f,a,7)+11;B=0;break;default:v=B}for(;u--;)g[z++]=B}}catch(y){throw a.pos=l,a.bitBuffer=m,a.bitLength=p,y;}f=e.distanceTable=
makeHuffmanTable(g.splice(r,s));g=e.literalTable=makeHuffmanTable(g)}inflate(a,b,g,f,e);delete e.distanceTable;delete e.literalTable;break;default:fail("unknown block type","inflate")}delete e.header;b.completed=!!(d&1)}function readBits(a,b,e){var d=b.bitBuffer,f=b.bitLength;if(e>f){var g=b.pos,l=b.end;do{if(g>=l)throw b.pos=g,b.bitBuffer=d,b.bitLength=f,InflateNoDataError;d|=a[g++]<<f;f+=8}while(e>f);b.pos=g}b.bitBuffer=d>>>e;b.bitLength=f-e;return d&(1<<e)-1}
function inflate(a,b,e,d,f){for(var g=b.available,l=b.data,m=a.bytes,p=void 0!==f.sym?f.sym:readCode(m,a,e);256!==p;){if(256>p)l[g++]=p;else{f.sym=p;for(var p=p-257,p=void 0!==f.len?f.len:f.len=lengthCodes[p]+readBits(m,a,lengthExtraBits[p]),r=void 0!==f.sym2?f.sym2:f.sym2=readCode(m,a,d),r=distanceCodes[r]+readBits(m,a,distanceExtraBits[r]),r=g-r;p--;)l[g++]=l[r++];delete f.sym2;delete f.len;delete f.sym}b.available=g;p=readCode(m,a,e)}}
function readCode(a,b,e){var d=b.bitBuffer,f=b.bitLength,g=e.maxBits;if(g>f){var l=b.pos,m=b.end;do{if(l>=m)throw b.pos=l,b.bitBuffer=d,b.bitLength=f,InflateNoDataError;d|=a[l++]<<f;f+=8}while(g>f);b.pos=l}a=e.codes[d&(1<<g)-1];e=a>>16;b.bitBuffer=d>>>e;b.bitLength=f-e;return a&65535}
for(var StreamNoDataError={},Stream=function(){function a(){this.bitBuffer=this.bitLength=0}function b(a){if(this.pos+a>this.end)throw StreamNoDataError;}function e(){return this.end-this.pos}function d(a,b){var d=new g(this.bytes);d.pos=a;d.end=b;return d}function f(a){var b=this.bytes,d=this.end+a.length;if(d>b.length)throw"stream buffer overfow";b.set(a,this.end);this.end=d}function g(g,m,p,r){void 0===m&&(m=0);g.buffer instanceof ArrayBuffer&&(m+=g.byteOffset,g=g.buffer);void 0===p&&(p=g.byteLength-
m);void 0===r&&(r=p);var s=new Uint8Array(g,m,r);g=new DataView(g,m,r);g.bytes=s;g.pos=0;g.end=p;g.bitBuffer=0;g.bitLength=0;g.align=a;g.ensure=b;g.remaining=e;g.substream=d;g.push=f;return g}return g}(),FORMAT_COLORMAPPED=3,FORMAT_15BPP=4,FORMAT_24BPP=5,FACTOR_5BBP=255/31,crcTable=[],i=0;256>i;i++){for(var c=i,h=0;8>h;h++)c=c&1?3988292384^c>>1&2147483647:c>>1&2147483647;crcTable[i]=c}function crc32(a,b,e){for(var d=-1;b<e;b++)d=d>>>8^crcTable[(d^a[b])&255];return d^-1}
function createPngChunk(a,b){var e=new Uint8Array(12+b.length),d=0,f=b.length;e[d]=f>>24&255;e[d+1]=f>>16&255;e[d+2]=f>>8&255;e[d+3]=f&255;e[d+4]=a.charCodeAt(0)&255;e[d+5]=a.charCodeAt(1)&255;e[d+6]=a.charCodeAt(2)&255;e[d+7]=a.charCodeAt(3)&255;b instanceof Uint8Array&&e.set(b,8);d=8+f;f=crc32(e,4,d);e[d]=f>>24&255;e[d+1]=f>>16&255;e[d+2]=f>>8&255;e[d+3]=f&255;return e}function adler32(a,b,e){for(var d=1,f=0;b<e;++b)d=(d+(a[b]&255))%65521,f=(f+d)%65521;return f<<16|d}
function defineBitmap(a){var b=a.width,e=a.height,d=a.hasAlpha,f="",g="",l,m=a.bmpData;switch(a.format){case 3:var p=3,r=b+3&-4;l=(a.colorTableSize+1)*(a.hasAlpha?4:3);var s=l+r*e,w=createInflatedStream(m,s),v=w.bytes,m=0;w.ensure(l);if(d){for(var f=new Uint8Array(3*(l/4)),z=0,g=new Uint8Array(l/4),d=0;m<l;)f[z++]=v[m],f[z++]=v[m+1],f[z++]=v[m+2],g[d++]=v[m+3],m+=4;f=createPngChunk("PLTE",f);g=createPngChunk("tRNS",g)}else f=createPngChunk("PLTE",v.subarray(m,m+l)),m+=l;l=new Uint8Array(b*e+e);for(z=
0;m<s;){w.ensure(r);var d=m,A=d+b;z++;l.set(v.subarray(d,A),z);z+=A-d;w.pos=m+=r}break;case 4:p=2;r=2*b+3&-4;w=createInflatedStream(m,r*e);m=0;l=new Uint8Array(3*b*e+e);for(s=z=0;s<e;++s){z++;w.ensure(r);for(A=0;A<b;++A)v=w.getUint16(m),m+=2,l[z++]=0|FACTOR_5BBP*(v>>10&31),l[z++]=0|FACTOR_5BBP*(v>>5&31),l[z++]=0|FACTOR_5BBP*(v&31);w.pos=m+=r}break;case 5:var u;d?(p=6,u=0,l=new Uint8Array(4*b*e+e)):(p=2,u=1,l=new Uint8Array(3*b*e+e));r=4*b;w=createInflatedStream(m,r*e);v=w.bytes;for(s=z=m=0;s<e;++s){w.ensure(r);
z++;for(A=0;A<b;++A){m+=u;if(d){var B=v[m];if(B){var y=B/255;l[z++]=0|v[m+1]/y;l[z++]=0|v[m+2]/y;l[z++]=0|v[m+3]/y;l[z++]=B}else z+=4}else l[z++]=v[m],l[z++]=v[m+1],l[z++]=v[m+2];m+=4-u}w.pos=m}break;default:fail("invalid format","bitmap")}p=new Uint8Array([b>>24&255,b>>16&255,b>>8&255,b&255,e>>24&255,e>>16&255,e>>8&255,e&255,8,p,0,0,0]);v=l.length;r=new Uint8Array(2+v+5*Math.ceil(v/65535)+4);w=0;r[w++]=120;r[w++]=156;for(m=0;65535<v;)r[w++]=0,r[w++]=255,r[w++]=255,r[w++]=0,r[w++]=0,r.set(l.subarray(m,
m+65535),w),w+=65535,m+=65535,v-=65535;r[w++]=1;r[w++]=v&255;r[w++]=v>>8&255;r[w++]=~v&255;r[w++]=(~v&65535)>>8&255;r.set(l.subarray(m),w);w+=l.length-m;m=adler32(l,0,l.length);r[w++]=m>>24&255;r[w++]=m>>16&255;r[w++]=m>>8&255;r[w++]=m&255;m=[new Uint8Array([137,80,78,71,13,10,26,10]),createPngChunk("IHDR",p),f,g,createPngChunk("IDAT",r),createPngChunk("IEND","")];return{type:"image",id:a.id,width:b,height:e,mimeType:"image/png",data:new Blob(m,{type:"image/png"})}}
function defineButton(a,b){for(var e=a.characters,d={up:{},over:{},down:{},hitTest:{}},f=0,g;(g=e[f++])&&!g.eob;){var l={symbolId:b[g.symbolId].id,hasMatrix:!!g.matrix,matrix:g.matrix};g.stateUp&&(d.up[g.depth]=l);g.stateOver&&(d.over[g.depth]=l);g.stateDown&&(d.down[g.depth]=l);g.stateHitTest&&(d.hitTest[g.depth]=l)}return{type:"button",id:a.id,buttonActions:a.buttonActions,states:d}}var nextFontId=1;function maxPower2(a){for(var b=0;2<=a;)a/=2,++b;return pow(2,b)}
function toString16(a){return fromCharCode(a>>8&255,a&255)}function toString32(a){return toString16(a>>16)+toString16(a)}
function defineFont(a){var b={},e=[],d={},f=[],g=a.glyphs,l=g.length;if(a.codes){for(var e=e.concat(a.codes),m=0,p;p=e[m];++m)d[p]=m;e.sort(function(a,b){return a-b});for(m=0;p=e[m++];){for(var r=p,s=r,w=[m-1];(p=e[m])&&s+1===p;)++s,w.push(m),++m;f.push([r,s,w])}}else{w=[];for(m=0;m<l;m++)p=57344+m,e.push(p),d[p]=m,w.push(m);f.push([57344,57344+l-1,w])}var v=a.resolution||1,w=Math.ceil(a.ascent/v)||1024,z=-Math.ceil(a.descent/v)|0,A=a.leading/v|0;b["OS/2"]="\x00\u0001\x00\x00"+toString16(a.bold?700:
400)+"\x00\u0005\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00ALF "+toString16((a.italic?1:0)|(a.bold?32:0))+toString16(e[0])+toString16(e[e.length-1])+toString16(w)+toString16(z)+toString16(A)+toString16(w)+toString16(-z)+"\x00\x00\x00\x00\x00\x00\x00\x00";for(var u="",B="",y="",D="",m=0,F;F=f[m++];)r=F[0],s=F[1],p=F[2][0],u+=toString16(r),B+=toString16(s),
y+=toString16(p-r+1&65535),D+=toString16(0);B+="\u00ff\u00ff";u+="\u00ff\u00ff";y+="\x00\u0001";D+="\x00\x00";f=f.length+1;m=2*maxPower2(f);r=2*f-m;m="\x00\x00"+toString16(2*f)+toString16(m)+toString16(logE(f)/logE(2))+toString16(r)+B+"\x00\x00"+u+y+D;b.cmap="\x00\x00\x00\u0001\x00\u0003\x00\u0001\x00\x00\x00\f\x00\u0004"+toString16(m.length+4)+m;f="\x00\u0001\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x001\x00";B="\x00\x00";u=16;y=0;r=[];s=[];F=[];for(var E=[],m=D=0;p=e[m++];){var C=g[d[p]].records;
p=1;for(var M=0,Q="",R="",S="",K="",G=0,H=0,I=1024,J=-1024,N=1024,P=-1024,U=0,L;L=C[U];++U)if(L.type){if(L.isStraight)if(L.isGeneral){var R=R+"\u0001",O=L.deltaX/v;L=-L.deltaY/v;S+=toString16(O);K+=toString16(L);G+=O;H+=L}else L.isVertical?(R+="\u0011",L=-L.deltaY/v,K+=toString16(L),H+=L):(R+="!",O=L.deltaX/v,S+=toString16(O),G+=O);else{var R=R+"\x00",W=L.controlDeltaX/v,fa=-L.controlDeltaY/v,S=S+toString16(W),K=K+toString16(fa),R=R+"\u0001",O=L.anchorDeltaX/v;L=-L.anchorDeltaY/v;S+=toString16(O);
K+=toString16(L);++M;G+=W+O;H+=fa+L}G<I&&(I=G);G>J&&(J=G);H<N&&(N=H);H>P&&(P=H);++M}else{if(L.eos)break;L.move&&(M&&(++p,Q+=toString16(M-1)),R+="\u0001",W=L.moveX/v,fa=-L.moveY/v,O=W-G,L=fa-H,S+=toString16(O),K+=toString16(L),G=W,H=fa,M>y&&(y=M),G<I&&(I=G),G>J&&(J=G),H<N&&(N=H),H>P&&(P=H),++M)}Q+=toString16((M||1)-1);U||(I=J=N=P=0,R+="1");C=toString16(p)+toString16(I)+toString16(N)+toString16(J)+toString16(P)+Q+"\x00\x00"+R+S+K;C.length&1&&(C+="\x00");f+=C;B+=toString16(u/2);u+=C.length;r.push(I);
s.push(J);F.push(N);E.push(P);p>D&&(D=p);M>y&&(y=M)}B+=toString16(u/2);b.glyf=f;b.head="\x00\u0001\x00\x00\x00\u0001\x00\x00\x00\x00\x00\x00_\u000f<\u00f5\x00\v\u0004\x00\x00\x00\x00\x00"+toString32(Date.now())+"\x00\x00\x00\x00"+toString32(Date.now())+toString16(min.apply(null,r))+toString16(min.apply(null,F))+toString16(max.apply(null,s))+toString16(max.apply(null,E))+toString16((a.italic?2:0)|(a.bold?1:0))+"\x00\b\x00\u0002\x00\x00\x00\x00";g=a.advance;b.hhea="\x00\u0001\x00\x00"+toString16(w)+
toString16(z)+toString16(A)+toString16(g?max.apply(null,g):1024)+"\x00\x00\x00\x00\u0003\u00b8\x00\u0001\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"+toString16(l+1);u="\x00\x00\x00\x00";for(m=0;m<l;++m)u+=toString16(g?g[m]/v:1024)+"\x00\x00";b.hmtx=u;if(a.kerning){v=a.kerning;g=v.length;m=2*maxPower2(g);g="\x00\x00\x00\u0001\x00\x00"+toString16(14+6*g)+"\x00\u0001"+toString16(g)+toString16(m)+toString16(logE(g)/logE(2))+toString16(2*g-m);for(m=0;L=v[m++];)g+=toString16(d[L.code1])+toString16(d[L.code2])+
toString16(L.adjustment);b.kern=g}b.loca=B;b.maxp="\x00\u0001\x00\x00"+toString16(l+1)+toString16(y)+toString16(D)+"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00";d="swf-font-"+nextFontId++;l=a.name||d;v=l.replace(/ /g,"");B=[a.copyright||"Original licence",l,"Unknown",d,l,"1.0",v,"Unknown","Unknown","Unknown"];m=B.length;g="\x00\x00"+toString16(m)+toString16(12*m+6);for(m=u=0;y=B[m++];)g+="\x00\u0001\x00\x00\x00\x00"+toString16(m-1)+toString16(y.length)+
toString16(u),u+=y.length;b.name=g+B.join("");b.post="\x00\u0003\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00";B=keys(b);m=B.length;y="\x00\u0001\x00\x00"+toString16(m)+"\x00\u0080\x00\u0003\x00 ";D="";u=16*m+y.length;for(m=0;g=B[m++];){f=b[g];r=f.length;for(y+=g+"\x00\x00\x00\x00"+toString32(u)+toString32(r);r&3;)f+="\x00",++r;for(D+=f;u&3;)++u;u+=r}return{type:"font",id:a.id,name:l,uniqueName:v+d,codes:e,metrics:{ascent:w/
1024,descent:-z/1024,leading:A/1024},bold:1===a.bold,italic:1===a.italic,data:y+D}}function getUint16(a,b){return a[b]<<8|a[b+1]}function parseJpegChunks(a,b){var e=0,d=b.length,f=[],g;do{for(var l=e;e<d&&255!==b[e];)++e;for(;e<d&&255===b[e];)++e;g=b[e++];if(218===g)e=d;else if(217===g){e+=2;continue}else if(208>g||216<g){var m=getUint16(b,e);192<=g&&195>=g&&(a.height=getUint16(b,e+3),a.width=getUint16(b,e+5));e+=m}f.push(b.subarray(l,e))}while(e<d);return f}
function defineImage(a,b){var e={type:"image",id:a.id,mimeType:a.mimeType},d=a.imgData;if("image/jpeg"===a.mimeType){var d=parseJpegChunks(e,d),f=a.alphaData;f&&(e.mask=createInflatedStream(f,e.width*e.height).bytes);if(a.incomplete&&(f=b[0].data)&&f.size)d[0]=d[0].subarray(2),d.unshift(f.slice(0,f.size-2))}else d=[d];e.data=new Blob(d,{type:a.mimeType});return e}
function defineLabel(a,b){for(var e=a.records,d=a.matrix,f=["c.save()","c.transform("+[d.a,d.b,d.c,d.d,d.tx/20,d.ty/20].join()+")","c.scale(0.05, 0.05)"],d=[],g=0,l=0,m=0,p,r;(p=e[m++])&&!p.eot;){if(p.hasFont){var s=b[p.fontId];r=s.codes;f.push('c.font="'+p.fontHeight+"px '"+s.uniqueName+"'\"");d.push(s.id)}p.hasColor?(f.push('ct.setFillStyle(c,"'+rgbaObjToStr(p.color)+'")'),f.push("ct.setAlpha(c)")):f.push("ct.setAlpha(c,true)");p.hasMoveX&&(g=p.moveX);p.hasMoveY&&(l=p.moveY);p=p.entries;for(var s=
0,w;w=p[s++];){var v=r[w.glyphIndex],v=32<=v&&34!=v&&92!=v?fromCharCode(v):"\\u"+(v+65536).toString(16).substring(1);f.push('c.fillText("'+v+'",'+g+","+l+")");g+=w.advance}}f.push("c.restore()");e={type:"label",id:a.id,bbox:a.bbox,data:f.join("\n")};d.length&&(e.require=d);return e}
var GRAPHICS_FILL_CLIPPED_BITMAP=65,GRAPHICS_FILL_FOCAL_RADIAL_GRADIENT=19,GRAPHICS_FILL_LINEAR_GRADIENT=16,GRAPHICS_FILL_NONSMOOTHED_CLIPPED_BITMAP=67,GRAPHICS_FILL_NONSMOOTHED_REPEATING_BITMAP=66,GRAPHICS_FILL_RADIAL_GRADIENT=18,GRAPHICS_FILL_REPEATING_BITMAP=64,GRAPHICS_FILL_SOLID=0;
function applySegmentToStyles(a,b,e,d,f){if(a){var g=a.commands,l=a.data;a=a.morphData;var m,p;if(b.fill0){d=d[b.fill0-1];!b.fill1&&!b.line?(m=d.head(),m.commands=[],m.data=[],m.morphData=f?[]:null):m=d.addSegment([],[],f?[]:null);d=m.commands;var r=m.data,s=m.morphData;d.push(SHAPE_MOVE_TO);var w=l.length-2;r.push(l[w],l[w+1]);f&&s.push(a[w],a[w+1]);for(p=g.length;1<p--;w-=2)m=g[p],d.push(m),r.push(l[w-2],l[w-1]),f&&s.push(a[w-2],a[w-1]),m===SHAPE_CURVE_TO&&(r.push(l[w-4],l[w-3]),f&&s.push(a[w-4],
a[w-3]),w-=2)}b.line&&b.fill1&&(d=e[b.line-1],d.addSegment(g,l,a))}}
function convertRecordsToStyledPaths(a,b,e,d,f,g,l){for(var m=null!==g,p={fill0:0,fill1:0,line:0},r=null,s,w,v=a.length-1,z=0,A=0,u=0,B=0,y,D=0,F=0;D<v;D++){var E=a[D],C;m&&(C=g[F++]);if(0===E.type)r&&applySegmentToStyles(r,p,e,b,m),E.hasNewStyles&&(s||(s=[]),push.apply(s,b),b=createPathsList(E.fillStyles,!1,d,f),push.apply(s,e),e=createPathsList(E.lineStyles,!0,d,f),w&&(s.push(w),w=null),p={fill0:0,fill1:0,line:0}),E.hasFillStyle0&&(p.fill0=E.fillStyle0),E.hasFillStyle1&&(p.fill1=E.fillStyle1),E.hasLineStyle&&
(p.line=E.lineStyle),p.fill1?y=b[p.fill1-1]:p.line?y=e[p.line-1]:p.fill0&&(y=b[p.fill0-1]),E.move&&(z=E.moveX|0,A=E.moveY|0),y&&(r=y.addSegment([],[],m?[]:null),r.commands.push(SHAPE_MOVE_TO),r.data.push(z,A),m&&(0===C.type?(u=C.moveX|0,B=C.moveY|0):(u=z,B=A,F--),r.morphData.push(u,B)));else{r||(w||(w=new SegmentedPath(null,processStyle({color:{red:0,green:0,blue:0,alpha:255},width:20},!0))),r=w.addSegment([],[],m?[]:null),r.commands.push(SHAPE_MOVE_TO),r.data.push(z,A),m&&r.morphData.push(u,B));
if(m){for(;C&&0===C.type;)C=g[F++];C||(C=E)}if(E.isStraight&&(!m||C.isStraight))z+=E.deltaX|0,A+=E.deltaY|0,r.commands.push(SHAPE_LINE_TO),r.data.push(z,A),m&&(u+=C.deltaX|0,B+=C.deltaY|0,r.morphData.push(u,B));else{var M,Q,R;E.isStraight?(R=E.deltaX|0,E=E.deltaY|0,M=z+(R>>1),Q=A+(E>>1),z+=R,A+=E):(M=z+E.controlDeltaX|0,Q=A+E.controlDeltaY|0,z=M+E.anchorDeltaX|0,A=Q+E.anchorDeltaY|0);r.commands.push(SHAPE_CURVE_TO);r.data.push(M,Q,z,A);m&&(C.isStraight?(R=C.deltaX|0,E=C.deltaY|0,M=u+(R>>1),Q=B+(E>>
1),u+=R,B+=E):(M=u+C.controlDeltaX|0,Q=B+C.controlDeltaY|0,u=M+C.anchorDeltaX|0,B=Q+C.anchorDeltaY|0),r.morphData.push(M,Q,u,B))}}}applySegmentToStyles(r,p,e,b,m);s?push.apply(s,b):s=b;push.apply(s,e);w&&s.push(w);for(D=a=0;D<s.length;D++)y=s[D],y.head()?s[D-a]=segmentedPathToShapePath(y,m,l):a++;s.length-=a;return s}
function segmentedPathToShapePath(a,b,e){for(var d=a.head(),f=d,g=null,l=null,m=0,p=d.prev;d;){for(;p;)a.segmentsConnect(p,d)?(p.next!==d&&(a.removeSegment(p),a.insertSegment(p,d)),d=p,p=d.prev,m++):a.segmentsConnect(f,p)?(a.removeSegment(p),f.next=p,p=p.prev,f.next.prev=f,f.next.next=null,f=f.next,m++):p=p.prev;p=d.prev;g?(l.next=d,d.prev=l,l=f,l.next=null):(g=d,l=f);if(!p)break;d=f=p;p=d.prev}d=-m;m=-m<<1;for(p=g;p;)d+=p.commands.length,m+=p.data.length,p=p.next;a=new ShapePath(a.fillStyle,a.lineStyle,
d,m,b,e);e=a.commands;m=a.data;d=a.morphData;l=f=0;for(p=g;p;){for(var g=p.commands,r=p.data,s=p.morphData,w=+(r[0]===m[l-2]&&r[1]===m[l-1]),v=w;v<g.length;v++,f++)e[f]=g[v];for(v=w<<1;v<r.length;v++,l++)m[l]=r[v],b&&(d[l]=s[v]);p=p.next}return a}var CAPS_STYLE_TYPES=["round","none","square"],JOIN_STYLE_TYPES=["round","bevel","miter"];
function processStyle(a,b,e,d){if(b&&(a.lineCap=CAPS_STYLE_TYPES[a.endCapStyle|0],a.lineJoin=JOIN_STYLE_TYPES[a.joinStyle|0],a.miterLimit=2*(a.miterLimitFactor||1.5),!a.color&&a.hasFill)){var f=processStyle(a.fillStyle,!1,e,d);a.style=f.style;a.type=f.type;a.transform=f.transform;a.records=f.records;a.focalPoint=f.focalPoint;a.bitmapId=f.bitmapId;a.repeat=f.repeat;a.fillStyle=null;return a}if(void 0===a.type||0===a.type)return f=a.color,a.style="rgba("+f.red+","+f.green+","+f.blue+","+f.alpha/255+
")",a.color=null,a;switch(a.type){case 16:case 18:case 19:f=819.2;break;case 64:case 65:case 66:case 67:e[a.bitmapId]&&(d.push(e[a.bitmapId].id),f=0.05);break;default:fail("invalid fill style","shape")}if(!a.matrix)return a;b=a.matrix;a.transform={a:b.a*f,b:b.b*f,c:b.c*f,d:b.d*f,e:b.tx,f:b.ty};a.matrix=null;return a}function createPathsList(a,b,e,d){for(var f=[],g=0;g<a.length;g++){var l=processStyle(a[g],b,e,d);f[g]=b?new SegmentedPath(null,l):new SegmentedPath(l,null)}return f}
function defineShape(a,b){var e=[],d=[],f=createPathsList(a.fillStyles,!1,b,e),g=createPathsList(a.lineStyles,!0,b,e),f=convertRecordsToStyledPaths(a.records,f,g,b,e,a.recordsMorph||null,d);if(a.bboxMorph&&(g=a.bboxMorph,extendBoundsByPoint(a.bbox,g.xMin,g.yMin),extendBoundsByPoint(a.bbox,g.xMax,g.yMax),g=a.strokeBboxMorph))extendBoundsByPoint(a.strokeBbox,g.xMin,g.yMin),extendBoundsByPoint(a.strokeBbox,g.xMax,g.yMax);return{type:"shape",id:a.id,strokeBbox:a.strokeBbox,strokeBboxMorph:a.strokeBboxMorph,
bbox:a.bbox,bboxMorph:a.bboxMorph,isMorph:a.isMorph,paths:f,require:e.length?e:null,transferables:d}}function logShape(a,b){var e='{"bounds":'+JSON.stringify(b)+',"paths":['+a.map(function(a){return a.serialize()}).join()+"]}";console.log(e)}function SegmentedPath(a,b){this.fillStyle=a;this.lineStyle=b;this._head=null}
SegmentedPath.prototype={addSegment:function(a,b,e){a={commands:a,data:b,morphData:e,prev:this._head,next:null};this._head&&(this._head.next=a);return this._head=a},removeSegment:function(a){a.prev&&(a.prev.next=a.next);a.next&&(a.next.prev=a.prev)},insertSegment:function(a,b){var e=b.prev;a.prev=e;a.next=b;e&&(e.next=a);b.prev=a},head:function(){return this._head},segmentsConnect:function(a,b){var e=a.data.length;return a.data[e-2]===b.data[0]&&a.data[e-1]===b.data[1]}};
var SHAPE_MOVE_TO=1,SHAPE_LINE_TO=2,SHAPE_CURVE_TO=3,SHAPE_WIDE_MOVE_TO=4,SHAPE_WIDE_LINE_TO=5,SHAPE_CUBIC_CURVE_TO=6,SHAPE_CIRCLE=7,SHAPE_ELLIPSE=8;
function ShapePath(a,b,e,d,f,g){this.fillStyle=a;this.lineStyle=b;e?(this.commands=new Uint8Array(e),this.data=new Int32Array(d),this.morphData=f?new Int32Array(d):null):(this.commands=[],this.data=[]);this.strokeBounds=this.bounds=null;this.isMorph=!!f;this.fullyInitialized=!1;inWorker?(this.buffers=[this.commands.buffer,this.data.buffer],g.push(this.commands.buffer,this.data.buffer),f&&(this.buffers.push(this.morphData.buffer),g.push(this.morphData.buffer))):this.buffers=null}
ShapePath.prototype={moveTo:function(a,b){1===this.commands[this.commands.length-1]?(this.data[this.data.length-2]=a,this.data[this.data.length-1]=b):(this.commands.push(1),this.data.push(a,b))},lineTo:function(a,b){this.commands.push(2);this.data.push(a,b)},curveTo:function(a,b,e,d){this.commands.push(3);this.data.push(a,b,e,d)},cubicCurveTo:function(a,b,e,d,f,g){this.commands.push(6);this.data.push(a,b,e,d,f,g)},rect:function(a,b,e,d){e=a+e;d=b+d;this.commands.push(1,2,2,2,2);this.data.push(a,b,
e,b,e,d,a,d,a,b)},circle:function(a,b,e){this.commands.push(7);this.data.push(a,b,e)},ellipse:function(a,b,e,d){this.commands.push(8);this.data.push(a,b,e,d)},draw:function(a,b,e,d){if(!b||this.fillStyle){a.beginPath();var f=this.commands,g=this.data,l=this.morphData,m=!1,p=0,r=0;if(this.isMorph)for(w=s=0;s<f.length;s++)switch(f[s]){case 1:a.moveTo(morph(g[w]/20,l[w++]/20,e),morph(g[w]/20,l[w++]/20,e));break;case 2:a.lineTo(morph(g[w]/20,l[w++]/20,e),morph(g[w]/20,l[w++]/20,e));break;case 3:a.quadraticCurveTo(morph(g[w]/
20,l[w++]/20,e),morph(g[w]/20,l[w++]/20,e),morph(g[w]/20,l[w++]/20,e),morph(g[w]/20,l[w++]/20,e));break;default:console.warn("Drawing command not supported for morph shapes: "+f[s])}else for(var s=0,w=0;s<f.length;s++)switch(f[s]){case 1:m=!0;p=g[w++]/20;r=g[w++]/20;a.moveTo(p,r);break;case 4:a.moveTo(g[w++]/20,g[w++]/20);w+=2;break;case 2:a.lineTo(g[w++]/20,g[w++]/20);break;case 5:a.lineTo(g[w++]/20,g[w++]/20);w+=2;break;case 3:a.quadraticCurveTo(g[w++]/20,g[w++]/20,g[w++]/20,g[w++]/20);break;case 6:a.bezierCurveTo(g[w++]/
20,g[w++]/20,g[w++]/20,g[w++]/20,g[w++]/20,g[w++]/20);break;case 7:m&&(a.lineTo(p,r),m=!1);a.moveTo((g[w]+g[w+2])/20,g[w+1]/20);a.arc(g[w++]/20,g[w++]/20,g[w++]/20,0,2*Math.PI,!1);break;case 8:m&&(a.lineTo(p,r),m=!1);e=g[w++];var l=g[w++],v=g[w++],z=g[w++],A;if(v!==z){a.save();var u;v>z?(u=v/z,A=z,e/=u,a.scale(u,1)):(u=z/v,A=v,l/=u,a.scale(1,u))}a.moveTo((e+A)/20,l/20);a.arc(e/20,l/20,A/20,0,2*Math.PI,!1);v!==z&&a.restore();break;default:if(0===f[s]&&s===f.length-1)break;console.warn("Unknown drawing command encountered: "+
f[s])}if(b)a.fill();else{if(b=this.fillStyle)d.setFillStyle(a,b.style),a.imageSmoothingEnabled=a.mozImageSmoothingEnabled=b.smooth,b=b.transform,a.save(),d.setAlpha(a),b&&a.transform(b.a,b.b,b.c,b.d,b.e/20,b.f/20),a.fill(),a.restore();if(b=this.lineStyle)d.setStrokeStyle(a,b.style),a.save(),d.setAlpha(a),a.lineWidth=Math.max(b.width/20,1),a.lineCap=b.lineCap,a.lineJoin=b.lineJoin,a.miterLimit=b.miterLimit,a.stroke(),a.restore()}a.closePath()}},isPointInPath:function(a,b){if(!this.fillStyle&&!this.lineStyle)return!1;
var e=this.strokeBounds||this.bounds||this._calculateBounds();return a<e.xMin||a>e.xMax||b<e.yMin||b>e.yMax?!1:this.fillStyle&&this.isPointInFill(a,b)?!0:this.lineStyle&&void 0!==this.lineStyle.width&&this.isPointInStroke(a,b)},isPointInFill:function(a,b){for(var e=this.commands,d=this.data,f=e.length,g=!1,l=0,m=0,p=0,r=0,s,w,v=!1,z=0,A=0,u=0,B=0;u<f;u++){switch(e[u]){case 4:B+=2;case 1:p=d[B++];r=d[B++];v&&intersectsLine(a,b,l,m,z,A)&&(g=!g);v=!0;z=p;A=r;break;case 5:B+=2;case 2:p=d[B++];r=d[B++];
intersectsLine(a,b,l,m,p,r)&&(g=!g);break;case 3:s=d[B++];w=d[B++];p=d[B++];r=d[B++];if(w>b===m>b&&r>b===m>b)break;if(l>=a&&s>=a&&p>=a){g=!g;break}var y=m-2*w+r;w=2*(w-m);var D=w*w-4*y*(m-b);if(0>D)break;D=Math.sqrt(D);y=1/(y+y);m=(D-w)*y;w=(-w-D)*y;0<=m&&(1>=m&&quadraticBezier(l,s,p,m)>a)&&(g=!g);0<=w&&(1>=w&&quadraticBezier(l,s,p,w)>a)&&(g=!g);break;case 6:s=d[B++];w=d[B++];y=d[B++];D=d[B++];p=d[B++];r=d[B++];if(w>b===m>b&&D>b===m>b&&r>b===m>b)break;if(l>=a&&s>=a&&y>=a&&p>=a){g=!g;break}s=cubicXAtY(l,
m,s,w,y,D,p,r,b);for(l=s.length;l--;)s[l]>=a&&(g=!g);break;case 7:p=d[B++];r=d[B++];s=d[B++];l=a-p;m=b-r;l*l+m*m<s*s&&(g=!g);p+=s;break;case 8:s=d[B++];w=d[B++];p=d[B++];r=d[B++];l=a-s;m=b-w;1>=l*l/(p*p)+m*m/(r*r)&&(g=!g);p=s+p;r=w;break;default:inWorker||console.warn("Drawing command not handled in isPointInPath: "+e[u])}l=p;m=r}v&&intersectsLine(a,b,l,m,z,A)&&(g=!g);return g},isPointInStroke:function(a,b){for(var e=this.commands,d=this.data,f=e.length,g=this.lineStyle.width,l=g/2,m=l*l,p=a-l,r=
a+l,s=b-l,w=b+l,v=0,z=0,A=0,u=0,B,y,D,F,E,C=0,M=0;C<f;C++){switch(e[C]){case 4:M+=2;case 1:A=d[M++];u=d[M++];break;case 5:M+=2;case 2:A=d[M++];u=d[M++];if(v===A&&z===u)break;if(r<v&&r<A||p>v&&p>A||w<z&&w<u||s>z&&s>u)break;if(A===v||u===z)return!0;E=((a-v)*(A-v)+(b-z)*(u-z))/distanceSq(v,z,A,u);if(0>E){if(distanceSq(a,b,v,z)<=m)return!0;break}if(1<E){if(distanceSq(a,b,A,u)<=m)return!0;break}if(distanceSq(a,b,v+E*(A-v),z+E*(u-z))<=m)return!0;break;case 3:B=d[M++];y=d[M++];var A=d[M++],u=d[M++],Q=quadraticBezierExtreme(v,
B,A);if(r<v&&r<Q&&r<A||p>v&&p>Q&&p>A)break;Q=quadraticBezierExtreme(z,y,u);if(w<z&&w<Q&&w<u||s>z&&s>Q&&s>u)break;for(E=0;1>E;E+=0.02)if(D=quadraticBezier(v,B,A,E),!(D<p||D>r))if(F=quadraticBezier(z,y,u,E),!(F<s||F>w)&&(a-D)*(a-D)+(b-F)*(b-F)<m)return!0;break;case 6:B=d[M++];y=d[M++];var Q=d[M++],R=d[M++],A=d[M++],u=d[M++];for(D=cubicBezierExtremes(v,B,Q,A);2>D.length;)D.push(A);if(r<v&&r<A&&r<D[0]&&r<D[1]||p>v&&p>A&&p>D[0]&&p>D[1])break;for(D=cubicBezierExtremes(z,y,R,u);2>D.length;)D.push(u);if(w<
z&&w<u&&w<D[0]&&w<D[1]||s>z&&s>u&&s>D[0]&&s>D[1])break;for(E=0;1>E;E+=0.02)if(D=cubicBezier(v,B,Q,A,E),!(D<p||D>r))if(F=cubicBezier(z,y,R,u,E),!(F<s||F>w)&&(a-D)*(a-D)+(b-F)*(b-F)<m)return!0;break;case 7:B=d[M++];y=d[M++];v=d[M++];A=B+v;u=y;if(r<B-v||p>B+v||w<y-v||s>y+v)break;B=a-B;y=b-y;z=v-l;v+=l;y=B*B+y*y;if(y>=z*z&&y<=v*v)return!0;break;case 8:B=d[M++];y=d[M++];v=d[M++];z=d[M++];A=B+v;u=y;B=Math.abs(a-B);y=Math.abs(b-y);B-=l;y-=l;if(1<B*B/(v*v)+y*y/(z*z))break;B+=g;y+=g;if(1<B*B/(v*v)+y*y/(z*
z))return!0;break;default:inWorker||console.warn("Drawing command not handled in isPointInPath: "+e[C])}v=A;z=u}return!1},getBounds:function(a){var b=a?this.strokeBounds:this.bounds;b||(this._calculateBounds(),b=a?this.strokeBounds:this.bounds);return b},_calculateBounds:function(){var a=this.commands,b=this.data,e=a.length,d;d=1===a[0]||6<a[0]?{xMin:b[0],yMin:b[1]}:{xMin:0,yMin:0};d.xMax=d.xMin;d.yMax=d.yMin;for(var f=d.xMin,g=d.yMin,l=0,m=0;l<e;l++){var p,r,s,w;switch(a[l]){case 4:m+=2;case 1:p=
b[m++];r=b[m++];extendBoundsByPoint(d,p,r);break;case 5:m+=2;case 2:p=b[m++];r=b[m++];extendBoundsByPoint(d,p,r);break;case 3:s=b[m++];w=b[m++];p=b[m++];r=b[m++];extendBoundsByPoint(d,p,r);(s<f||s>p)&&extendBoundsByX(d,quadraticBezierExtreme(f,s,p));(w<g||w>r)&&extendBoundsByY(d,quadraticBezierExtreme(g,w,r));break;case 6:s=b[m++];w=b[m++];var v=b[m++],z=b[m++];p=b[m++];r=b[m++];extendBoundsByPoint(d,p,r);if(s<f||v<f||s>p||v>p){f=cubicBezierExtremes(f,s,v,p);for(s=f.length;s--;)extendBoundsByX(d,
f[s])}if(w<g||z<g||w>r||z>r){f=cubicBezierExtremes(g,w,z,r);for(s=f.length;s--;)extendBoundsByY(d,f[s])}break;case 7:p=b[m++];r=b[m++];g=b[m++];extendBoundsByPoint(d,p-g,r-g);extendBoundsByPoint(d,p+g,r+g);p+=g;break;case 8:p=b[m++];r=b[m++];g=b[m++];w=b[m++];extendBoundsByPoint(d,p-g,r-w);extendBoundsByPoint(d,p+g,r+w);p+=g;break;default:inWorker||console.warn("Drawing command not handled in bounds calculation: "+a[l])}f=p;g=r}this.bounds=d;return this.lineStyle?(a=this.lineStyle.width/2,this.strokeBounds=
{xMin:d.xMin-a,yMin:d.yMin-a,xMax:d.xMax+a,yMax:d.yMax+a}):this.strokeBounds=d},serialize:function(){var a="{";this.fillStyle&&(a+='"fill":'+JSON.stringify(this.fillStyle)+",");this.lineStyle&&(a+='"stroke":'+JSON.stringify(this.lineStyle)+",");a+='"commands":['+Array.apply([],this.commands).join()+"],";a+='"data":['+Array.apply([],this.data).join()+"]";return a+"}"}};
ShapePath.fromPlainObject=function(a){var b=new ShapePath(a.fill||null,a.stroke||null);b.commands=new Uint8Array(a.commands);b.data=new Int32Array(a.data);inWorker||finishShapePath(b);return b};function distanceSq(a,b,e,d){a=e-a;b=d-b;return a*a+b*b}function intersectsLine(a,b,e,d,f,g){return g>b!==d>b&&a<(e-f)*(b-g)/(d-g)+f}function quadraticBezier(a,b,e,d){var f=1-d;return a*f*f+2*b*f*d+e*d*d}
function quadraticBezierExtreme(a,b,e){var d=(a-b)/(a-2*b+e);return 0>d?a:1<d?e:quadraticBezier(a,b,e,d)}function cubicBezier(a,b,e,d,f){var g=f*f,l=1-f,m=l*l;return a*l*m+3*b*f*m+3*e*l*g+d*f*g}function cubicBezierExtremes(a,b,e,d){var f=b-a,g;g=2*(e-b);var l=d-e;f+l===g&&(l*=1.0001);var m=2*f-g,p=g-2*f,p=Math.sqrt(p*p-4*f*(f-g+l));g=2*(f-g+l);f=(m+p)/g;m=(m-p)/g;p=[];0<=f&&1>=f&&p.push(cubicBezier(a,b,e,d,f));0<=m&&1>=m&&p.push(cubicBezier(a,b,e,d,m));return p}
function cubicXAtY(a,b,e,d,f,g,l,m,p){function r(a){return a*(z+a*(u+a*y))+b-p}function s(b){0>b?b=0:1<b&&(b=1);return a+b*(v+b*(A+b*B))}function w(a,b,d,e){if(!(Math.abs(d-b)<=e)){var f=0.5*(b+d);0>=a(b)*a(d)?(D=b,F=d):(w(a,b,f,e),w(a,f,d,e))}}var v=3*(e-a),z=3*(d-b),A=3*(f-e)-v,u=3*(g-d)-z,B=l-a-v-A,y=m-b-z-u,D=0,F=1;w(r,0,1,0.05);g=findRoot(D,F,r,50,1E-6);if(1E-5<Math.abs(r(g)))return[];e=[];1>=g&&e.push(s(g));d=y;f=g*d+u;l=f*f-4*d*(g*f+z);if(0>l)return e;l=Math.sqrt(l);d=1/(d+d);g=(l-f)*d;d*=
-f-l;0<=g&&1>=g&&e.push(s(g));0<=d&&1>=d&&e.push(s(d));return e}function findRoot(a,b,e,d,f){var g,l,m,p,r,s,w=a;l=e(a);if(0===l)return a;p=e(b);if(0===p)return b;if(0<p*l)return a;for(var v=0,z=0;z<d;++z){v++;g=0.5*(b+a);m=e(g);if(0===m)break;if(Math.abs(g-a)<f)break;0<m*l&&(a=b,b=l,l=p,p=b);b=m-l;s=p-m;r=p-l;if(p*r<2*m*b)b=g,p=m;else{p=(g-a)/b;b=(b-s)/(s*r);b=a-p*l*(1-b*m);p=e(b);if(0===p||Math.abs(b-w)<f)return b;w=b;0>p*l||(a=b,l=p,b=g,p=m)}}return g}
function extendBoundsByPoint(a,b,e){b<a.xMin?a.xMin=b:b>a.xMax&&(a.xMax=b);e<a.yMin?a.yMin=e:e>a.yMax&&(a.yMax=e)}function extendBoundsByX(a,b){b<a.xMin?a.xMin=b:b>a.xMax&&(a.xMax=b)}function extendBoundsByY(a,b){b<a.yMin?a.yMin=b:b>a.yMax&&(a.yMax=b)}function morph(a,b,e){return a+(b-a)*e}
function finishShapePath(a,b){if(a.fullyInitialized)return a;if(!(a instanceof ShapePath)){var e=a;a=new ShapePath(a.fillStyle,a.lineStyle,0,0,a.isMorph);a.commands=new Uint8Array(e.buffers[0]);a.data=new Int32Array(e.buffers[1]);e.isMorph&&(a.morphData=new Int32Array(e.buffers[2]));a.buffers=null}a.fillStyle&&initStyle(a.fillStyle,b);a.lineStyle&&initStyle(a.lineStyle,b);a.fullyInitialized=!0;return a}
var inWorker="undefined"===typeof window,factoryCtx=!inWorker?document.createElement("canvas").getContext("2d"):null;function buildLinearGradientFactory(a){for(var b=factoryCtx.createLinearGradient(-1,0,1,0),e=0;e<a.length;e++)b.addColorStop(a[e].ratio,a[e].color);e=function(b,e){for(var g=b.createLinearGradient(-1,0,1,0),l=0;l<a.length;l++)e.addGradientColorStop(g,a[l].ratio,a[l].color);return g};e.defaultFillStyle=b;return e}
function buildRadialGradientFactory(a,b){for(var e=factoryCtx.createRadialGradient(a,0,0,0,0,1),d=0;d<b.length;d++)e.addColorStop(b[d].ratio,b[d].color);d=function(d,e){for(var l=d.createRadialGradient(a,0,0,0,0,1),m=0;m<b.length;m++)e.addGradientColorStop(l,b[m].ratio,b[m].color);return l};d.defaultFillStyle=e;return d}
function buildBitmapPatternFactory(a,b){var e=factoryCtx.createPattern(a,b),d,f,g=function(g,m){if(!m.mode)return e;var p=m.getTransformFingerprint();if(p===f)return d;var r=document.createElement("canvas");r.width=a.width;r.height=a.height;g=r.getContext("2d");m.setAlpha(g,!0);g.drawImage(a,0,0);d=g.createPattern(r,b);f=p;return d};g.defaultFillStyle=e;return g}
function initStyle(a,b){if(void 0!==a.type)switch(a.type){case 0:break;case 16:case 18:case 19:for(var e=a.records,d=[],f=0,g=e.length;f<g;f++){var l=e[f],m=rgbaObjToStr(l.color);d.push({ratio:l.ratio/255,color:m})}e=16===a.type?buildLinearGradientFactory(d):buildRadialGradientFactory((a.focalPoint|0)/20,d);a.style=e;break;case 64:case 65:case 66:case 67:a.style=buildBitmapPatternFactory(b[a.bitmapId].props.img,64===a.type||66===a.type?"repeat":"no-repeat");break;default:fail("invalid fill style",
"shape")}}var SOUND_SIZE_8_BIT=0,SOUND_SIZE_16_BIT=1,SOUND_TYPE_MONO=0,SOUND_TYPE_STEREO=1,SOUND_FORMAT_PCM_BE=0,SOUND_FORMAT_ADPCM=1,SOUND_FORMAT_MP3=2,SOUND_FORMAT_PCM_LE=3,SOUND_FORMAT_NELLYMOSER_16=4,SOUND_FORMAT_NELLYMOSER_8=5,SOUND_FORMAT_NELLYMOSER=6,SOUND_FORMAT_SPEEX=11,SOUND_RATES=[5512,11250,22500,44100],WaveHeader=new Uint8Array([82,73,70,70,0,0,0,0,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,0,0,0,0]);
function packageWave(a,b,e,d,f){var g=d>>3,l=e*b*g,g=e*g,m=a.length+(a.length&1),p=new ArrayBuffer(WaveHeader.length+m),r=new Uint8Array(p);r.set(WaveHeader);if(f){f=0;for(var s=WaveHeader.length;f<a.length;f+=2,s+=2)r[s]=a[f+1],r[s+1]=a[f]}else r.set(a,WaveHeader.length);a=new DataView(p);a.setUint32(4,m+36,!0);a.setUint16(22,e,!0);a.setUint32(24,b,!0);a.setUint32(28,l,!0);a.setUint16(32,g,!0);a.setUint16(34,d,!0);a.setUint32(40,m,!0);return{data:r,mimeType:"audio/wav"}}
function defineSound(a){var b=1==a.soundType?2:1,e=a.samplesCount,d=SOUND_RATES[a.soundRate],f=a.soundData,g;switch(a.soundFormat){case 0:g=new Float32Array(e*b);if(1==a.soundSize){for(var l=e=0;e<g.length;e++,l+=2)g[e]=(f[l]<<24|f[l+1]<<16)/2147483648;f=packageWave(f,d,b,16,!0)}else{for(e=0;e<g.length;e++)g[e]=(f[e]-128)/128;f=packageWave(f,d,b,8,!1)}break;case 3:g=new Float32Array(e*b);if(1==a.soundSize){for(l=e=0;e<g.length;e++,l+=2)g[e]=(f[l+1]<<24|f[l]<<16)/2147483648;f=packageWave(f,d,b,16,
!1)}else{for(e=0;e<g.length;e++)g[e]=(f[e]-128)/128;f=packageWave(f,d,b,8,!1)}break;case 2:f={data:new Uint8Array(f.subarray(2)),mimeType:"audio/mpeg"};break;case 1:l=new Int16Array(e*b);decodeACPCMSoundData(f,l,b);g=new Float32Array(e*b);for(e=0;e<g.length;e++)g[e]=l[e]/32768;f=packageWave(new Uint8Array(l.buffer),d,b,16,!(new Uint8Array((new Uint16Array([1])).buffer))[0]);break;default:throw Error("Unsupported audio format: "+a.soundFormat);}a={type:"sound",id:a.id,sampleRate:d,channels:b,pcm:g};
f&&(a.packaged=f);return a}
var ACPCMIndexTables=[[-1,2],[-1,-1,2,4],[-1,-1,-1,-1,2,4,6,8],[-1,-1,-1,-1,-1,-1,-1,-1,1,2,4,6,8,10,13,16]],ACPCMStepSizeTable=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767];
function decodeACPCMSoundData(a,b,e){function d(b){for(;l<b;)g=g<<8|a[f++],l+=8;l-=b;return g>>>l&(1<<b)-1}for(var f=0,g=0,l=0,m=0,p=d(2),r=ACPCMIndexTables[p];m<b.length;){var s=b[m++]=d(16)<<16>>16,w,v=d(6),z;1<e&&(w=b[m++]=d(16)<<16>>16,z=d(6));for(var A=1<<p+1,u=0;4095>u;u++){for(var B=d(p+2),y=ACPCMStepSizeTable[v],D=0,F=A>>1;F;F>>=1,y>>=1)B&F&&(D+=y);s+=(B&A?-1:1)*(D+y);b[m++]=s=-32768>s?-32768:32767<s?32767:s;v+=r[B&~A];v=0>v?0:88<v?88:v;if(1<e){B=d(p+2);y=ACPCMStepSizeTable[z];D=0;for(F=A>>
1;F;F>>=1,y>>=1)B&F&&(D+=y);w+=(B&A?-1:1)*(D+y);b[m++]=w=-32768>w?-32768:32767<w?32767:w;z+=r[B&~A];z=0>z?0:88<z?88:z}}}}var nextSoundStreamId=0;function SwfSoundStream(a,b,e){this.streamId=nextSoundStreamId++;this.samplesCount=a;this.sampleRate=b;this.channels=e;this.format=null;this.currentSample=0}
SwfSoundStream.prototype={get info(){return{samplesCount:this.samplesCount,sampleRate:this.sampleRate,channels:this.channels,format:this.format,streamId:this.streamId}},decode:function(){throw Error("SwfSoundStream.decode: not implemented");}};function SwfSoundStream_decode_PCM(a){for(var b=new Float32Array(a.length),e=0;e<b.length;e++)b[e]=(a[e]-128)/128;this.currentSample+=b.length/this.channels;return{streamId:this.streamId,samplesCount:b.length/this.channels,pcm:b}}
function SwfSoundStream_decode_PCM_be(a){for(var b=new Float32Array(a.length/2),e=0,d=0;e<b.length;e++,d+=2)b[e]=(a[d]<<24|a[d+1]<<16)/2147483648;this.currentSample+=b.length/this.channels;return{streamId:this.streamId,samplesCount:b.length/this.channels,pcm:b}}
function SwfSoundStream_decode_PCM_le(a){for(var b=new Float32Array(a.length/2),e=0,d=0;e<b.length;e++,d+=2)b[e]=(a[d+1]<<24|a[d]<<16)/2147483648;this.currentSample+=b.length/this.channels;return{streamId:this.streamId,samplesCount:b.length/this.channels,pcm:b}}function SwfSoundStream_decode_MP3(a){var b=a[1]<<8|a[0],e=a[3]<<8|a[2];this.currentSample+=b;return{streamId:this.streamId,samplesCount:b,data:new Uint8Array(a.subarray(4)),seek:e}}
function createSoundStream(a){var b=new SwfSoundStream(a.samplesCount,SOUND_RATES[a.streamRate],1==a.streamType?2:1);switch(a.streamCompression){case 0:b.format="wave";b.decode=1==a.soundSize?SwfSoundStream_decode_PCM_be:SwfSoundStream_decode_PCM;break;case 3:b.format="wave";b.decode=1==a.soundSize?SwfSoundStream_decode_PCM_le:SwfSoundStream_decode_PCM;break;case 2:b.format="mp3";b.decode=SwfSoundStream_decode_MP3;break;default:throw Error("Unsupported audio format: "+a.soundFormat);}return b}
function defineText(a,b){var e=[];if(a.hasFont){var d=b[a.fontId];a.font=d.uniqueName;e.push(d.id)}d={type:"text",id:a.id,variableName:a.variableName,tag:a};e.length&&(d.require=e);return d}var isWorker="undefined"===typeof window;
if(isWorker){importScripts("../../../lib/mp3/mp3.js");self.addEventListener("message",function(a){a=a.data;var b=a.sessionId;try{switch(a.action){case "create":var e=new Session(b);sessions[b]=e;break;case "close":if(e=sessions[b])e.close(),delete sessions[b];break;case "decode":e=sessions[b];if(!e)throw Error("mp3 decoding session is unavailable");e.decode(a.data)}}catch(d){self.postMessage({sessionId:b,action:"error",message:d.message})}},!1);var sessions={},Session=function(a){this.id=a;if("undefined"===
typeof MP3Decoder)throw Error("mp3 decoder is not available");a=new MP3Decoder;a.onframedata=function(a,e,d,f){self.postMessage({sessionId:this.id,action:"frame",frameData:a,channels:e,sampleRate:d,bitRate:f})}.bind(this);a.onid3tag=function(a){self.postMessage({sessionId:this.id,action:"id3",id3Data:a})}.bind(this);this.decoder=a};Session.prototype={decode:function(a){this.decoder.push(a)},close:function(){self.postMessage({sessionId:this.id,action:"closed"})}};self.console={log:function(a){self.postMessage({action:"console",
method:"log",message:a})},error:function(a){self.postMessage({action:"console",method:"error",message:a})}}}else{var mp3Worker,createMP3Worker=function(){var a=new Worker(SHUMWAY_ROOT+"swf/mp3worker.js");a.addEventListener("message",function(a){"console"===a.data.action&&console[a.data.method].call(console,a.data.message)});return a},nextSessionId=0,MP3DecoderSession=function(){mp3Worker=mp3Worker||createMP3Worker();var a=nextSessionId++;this.id=a;this.onworkermessage=function(b){if(b.data.sessionId===
a)switch(b.data.action){case "closed":if(this.onclosed)this.onclosed();mp3Worker.removeEventListener("message",this.onworkermessage,!1);break;case "frame":this.onframedata(b.data.frameData,b.data.channels,b.data.sampleRate,b.data.bitRate);break;case "id3":if(this.onid3tag)this.onid3tag(b.data.id3Data);break;case "error":if(this.onerror)this.onerror(b.data.message)}}.bind(this);mp3Worker.addEventListener("message",this.onworkermessage,!1);mp3Worker.postMessage({sessionId:a,action:"create"})};MP3DecoderSession.prototype=
{pushAsync:function(a){mp3Worker.postMessage({sessionId:this.id,action:"decode",data:a})},close:function(){mp3Worker.postMessage({sessionId:this.id,action:"close"})}};MP3DecoderSession.processAll=function(a,b){var e=8E3,d=new Float32Array(e),f=0,g=[],l=!1,m=new MP3DecoderSession;m.onframedata=function(a){var b=a.length+f;if(b>e){do e*=2;while(b>e);b=new Float32Array(e);b.set(d);d=b}d.set(a,f);f+=a.length};m.onid3tag=function(a){g.push(a)};m.onclosed=function(){l||b(d.subarray(0,f),g)};m.onerror=function(a){l||
(l=!0,b(null,null,a))};m.pushAsync(a);m.close()}}
SWF.embed=function(a,b,e,d){function f(a,b){if(1===s)g.width=a|0,g.height=b|0;else{var d=Math.floor(a*s),e=Math.floor(b*s);g.style.width=d/s+"px";g.style.height=e/s+"px";g.width=d;g.height=e}}var g=b.createElement("canvas"),l=g.getContext("2d"),m=new flash.display.Loader,p=m._contentLoaderInfo,r=new flash.display.Stage,s=1,w=forceHidpi.value;r._loader=m;p._parameters=d.movieParams;p._url=d.url||("string"===typeof a?a:null);p._loaderURL=d.loaderURL||p._url;m._parent=r;m._stage=r;p._addEventListener("init",
function(){if(w||18<=p._swfVersion)s="devicePixelRatio"in window?window.devicePixelRatio:1;g._pixelRatio=s;r._contentsScaleFactor=s;e.clientHeight?(f(e.clientWidth,e.clientHeight),r._invalid=!0,window.addEventListener("resize",function(){f(e.clientWidth,e.clientHeight);r._invalid=!0})):f(r._stageWidth/20,r._stageHeight/20);e.setAttribute("style","position: relative");g.addEventListener("click",function(){ShumwayKeyboardListener.focus=r;r._mouseTarget._dispatchEvent("click")});g.addEventListener("dblclick",
function(){r._mouseTarget._doubleClickEnabled&&r._mouseTarget._dispatchEvent("doubleClick")});g.addEventListener("mousedown",function(){r._mouseEvents.push("mousedown")});g.addEventListener("mousemove",function(a){var b=this,d=0,e=0;if(b.offsetParent){do d+=b.offsetLeft,e+=b.offsetTop;while(b=b.offsetParent)}b=r._concatenatedTransform;d=((a.pageX-d)*s-b.tx/20)/b.a;a=((a.pageY-e)*s-b.ty/20)/b.d;if(d!==r._mouseX||a!==r._mouseY)r._mouseMoved=!0,r._mouseX=20*d,r._mouseY=20*a});g.addEventListener("mouseup",
function(){r._mouseEvents.push("mouseup")});g.addEventListener("mouseover",function(){r._mouseMoved=!0;r._mouseOver=!0});g.addEventListener("mouseout",function(){r._mouseMoved=!0;r._mouseOver=!1});window.addEventListener("message",function(a){a=a.data;if(!("object"!==typeof a||null===a)){var b=a.type;switch(b){case "mousemove":case "mouseup":case "mousedown":r._mouseMoved=!0;r._mouseOver=!0;r._mouseX=20*a.x;r._mouseY=20*a.y;"mousemove"===b||r._mouseEvents.push(b);break;case "mouseover":case "mouseout":r._mouseMoved=
!0;r._mouseOver="mouseover"===b;break;case "keyup":case "keydown":r._dispatchEvent(new flash.events.KeyboardEvent("keyup"===b?"keyUp":"keyDown",!0,!1,a.charCode,a.keyCode,a.keyLocation,a.ctrlKey||!1,a.altKey||!1,a.shiftKey||!1))}}},!1);var a=p._backgroundColor;if(d.objectParams){var b;if(d.objectParams.bgcolor&&(b=/#([0-9A-F]{6})/i.exec(d.objectParams.bgcolor)))a=parseInt(b[1],16),a={red:a>>16&255,green:a>>8&255,blue:a&255,alpha:255};"transparent"===d.objectParams.wmode&&(a={red:0,green:0,blue:0,
alpha:0})}r._color=a;l.fillStyle=rgbaObjToStr(a);l.fillRect(0,0,g.width,g.height);a=m._content;a._dispatchEvent("added",void 0,!0);a._dispatchEvent("addedToStage");e.appendChild(g);if(d.onStageInitialized)d.onStageInitialized(r);renderStage(r,l,d)});d.onComplete&&p._addEventListener("complete",function(){d.onComplete()});m._load("string"===typeof a?new flash.net.URLRequest(a):a);return m};
var rendererOptions=coreOptions.register(new OptionSet("Renderer Options")),traceRenderer=rendererOptions.register(new Option("tr","traceRenderer","number",0,"trace renderer execution")),disablePreVisitor=rendererOptions.register(new Option("dpv","disablePreVisitor","boolean",!1,"disable pre visitor")),disableRenderVisitor=rendererOptions.register(new Option("drv","disableRenderVisitor","boolean",!1,"disable render visitor")),disableMouseVisitor=rendererOptions.register(new Option("dmv","disableMouseVisitor",
"boolean",!1,"disable mouse visitor")),showRedrawRegions=rendererOptions.register(new Option("rr","showRedrawRegions","boolean",!1,"show redraw regions")),renderAsWireframe=rendererOptions.register(new Option("raw","renderAsWireframe","boolean",!1,"render as wireframe")),showQuadTree=rendererOptions.register(new Option("qt","showQuadTree","boolean",!1,"show quad tree")),turboMode=rendererOptions.register(new Option("","turbo","boolean",!1,"turbo mode")),forceHidpi=rendererOptions.register(new Option("",
"forceHidpi","boolean",!1,"force hidpi")),enableConstructChildren=rendererOptions.register(new Option("","constructChildren","boolean",!0,"Construct Children")),enableEnterFrame=rendererOptions.register(new Option("","enterFrame","boolean",!0,"Enter Frame")),enableAdvanceFrame=rendererOptions.register(new Option("","advanceFrame","boolean",!0,"Advance Frame"));
"undefined"!==typeof FirefoxCom&&(turboMode.value=FirefoxCom.requestSync("getBoolPref",{pref:"shumway.turboMode",def:!1}),forceHidpi.value=FirefoxCom.requestSync("getBoolPref",{pref:"shumway.force_hidpi",def:!1}));var CanvasCache={cache:[],getCanvas:function(a){var b=this.cache.shift();b||(b={canvas:document.createElement("canvas")},b.ctx=b.canvas.getContext("2d"));b.canvas.width=a.width;b.canvas.height=a.height;b.ctx.save();return b},releaseCanvas:function(a){a.ctx.restore();this.cache.push(a)}};
function isCanvasVisible(a){return a.ownerDocument.hidden||!1===a.mozVisible?!1:!0}function visitContainer(a,b,e){var d=a._children;b.childrenStart(a);for(var f=0,g=d.length;f<g;f++){var l=d[f];l&&(b.ignoreVisibleAttribute||l._visible&&!l._maskedObject)&&b.visit(l,visitContainer,e)}b.childrenEnd(a)}var BlendModeNameMap={normal:"normal",multiply:"multiply",screen:"screen",lighten:"lighten",darken:"darken",difference:"difference",overlay:"overlay",hardlight:"hard-light"};
function getBlendModeName(a){return BlendModeNameMap[a]||"normal"}function RenderVisitor(a,b,e,d){this.root=a;this.ctx=b;this.depth=0;this.invalidPath=e;this.refreshStage=d;this.clipStack=this.clipDepth=null}
RenderVisitor.prototype={ignoreVisibleAttribute:!1,start:function(){visitContainer(this.root,this,new RenderingContext(this.refreshStage,this.invalidPath))},startFragment:function(a){var b=this.root,e=b._currentTransform,d=e;a&&(d=b._currentTransform={a:a.a,b:a.b,c:a.c,d:a.d,tx:20*a.tx|0,ty:20*a.ty|0},b._invalidateTransform());var f;d&&(f=new flash.geom.Matrix(d.a,d.b,d.c,d.d,d.tx/20,d.ty/20),f.invert(),this.ctx.save(),this.ctx.transform(f.a,f.b,f.c,f.d,f.tx,f.ty));this.visit(b,visitContainer,new RenderingContext(this.refreshStage,
this.invalidPath));d&&this.ctx.restore();a&&(b._currentTransform=e,b._invalidateTransform())},childrenStart:function(){if(0===this.depth){var a=this.ctx;a.save();this.invalidPath&&(!this.refreshStage&&!renderAsWireframe.value)&&(this.invalidPath.draw(a),a.clip());var b=this.root._color;b&&(255>b.alpha&&a.clearRect(0,0,a.canvas.width,a.canvas.height),0<b.alpha&&(a.fillStyle=rgbaObjToStr(b),this.invalidPath&&!this.refreshStage&&!renderAsWireframe.value?a.fill():a.fillRect(0,0,a.canvas.width,a.canvas.height)));
a.mozFillRule="evenodd"}this.depth++;this.clipDepth&&0<this.clipDepth.length&&(this.clipStack={depth:this.depth,clip:this.clipDepth,next:this.clipStack},this.clipDepth=null)},childrenEnd:function(){if(this.clipDepth){for(;0<this.clipDepth.length;){var a=this.clipDepth.pop();this.clipEnd(a);this.ctx=a.ctx}this.clipDepth=null}this.clipStack&&this.clipStack.depth===this.depth&&(this.clipDepth=this.clipStack.clip,this.clipStack=this.clipStack.next);this.depth--;0===this.depth&&(this.ctx.restore(),this.invalidPath=
null)},visit:function(a,b,e){var d=this.ctx,f=e.isClippingMask,g=e.colorTransform,l=!0===f;a._cxform&&(e.colorTransform=g.applyCXForm(a._cxform));if(!l){for(;this.clipDepth&&0<this.clipDepth.length&&a._depth>this.clipDepth[0].clipDepth;)d=this.clipDepth.shift(),this.clipEnd(d),d=this.ctx=d.ctx;a._clipDepth?(e.isClippingMask=l=!0,d=this.clipStart(a),this.clipDepth?this.clipDepth.unshift(d):this.clipDepth=[d],d=this.ctx=d.mask.ctx):this.clipDepth&&(0<this.clipDepth.length&&a._depth<=this.clipDepth[0].clipDepth)&&
(d=this.ctx=this.clipDepth[0].maskee.ctx)}if(l&&a._isContainer){d.save();renderDisplayObject(a,d,e);for(var l=0,m=a._children.length;l<m;l++){var p=a._children[l];p&&(this.ignoreVisibleAttribute||p._visible&&!p._maskedObject)&&this.visit(p,b,e)}d.restore();d.fill()}else{d.save();d.globalCompositeOperation=getBlendModeName(a._blendMode);if(a._mask){var m=this.clipStart(a),p=m.mask,r=m.maskee,s=this.clipDepth;this.clipDepth=null;this.ctx=p.ctx;this.visit(a._mask,b,new RenderingContext(this.refreshStage));
this.ctx=d;this.clipDepth=s;renderDisplayObject(a,r.ctx,e);a._isContainer&&(this.ctx=r.ctx,b(a,this,e),this.ctx=d);this.clipEnd(m)}else renderDisplayObject(a,d,e),a._isContainer&&b(a,this,e);d.restore();l&&d.fill()}e.isClippingMask=f;e.colorTransform=g},clipStart:function(a){var b=a._parent._getConcatenatedTransform(null,!0),e=b.tx/20,d=b.ty/20,f=CanvasCache.getCanvas(this.ctx.canvas);f.ctx.setTransform(b.a,b.b,b.c,b.d,e,d);var g=CanvasCache.getCanvas(this.ctx.canvas);g.ctx.setTransform(b.a,b.b,b.c,
b.d,e,d);return{ctx:this.ctx,mask:f,maskee:g,clipDepth:a._clipDepth}},clipEnd:function(a){var b=a.ctx,e=a.mask;a=a.maskee;a.ctx.globalCompositeOperation="destination-in";a.ctx.setTransform(1,0,0,1,0,0);a.ctx.drawImage(e.canvas,0,0);b.save();b.setTransform(1,0,0,1,0,0);b.drawImage(a.canvas,0,0);b.restore();CanvasCache.releaseCanvas(e);CanvasCache.releaseCanvas(a)}};function RenderingColorTransform(){this.mode=null;this.transform=[1,1,1,1,0,0,0,0]}
RenderingColorTransform.prototype={applyCXForm:function(a){var b=this.transform,b=[b[0]*a.redMultiplier/256,b[1]*a.greenMultiplier/256,b[2]*a.blueMultiplier/256,b[3]*a.alphaMultiplier/256,b[4]*a.redMultiplier/256+a.redOffset,b[5]*a.greenMultiplier/256+a.greenOffset,b[6]*a.blueMultiplier/256+a.blueOffset,b[7]*a.alphaMultiplier/256+a.alphaOffset];a=1E-4>Math.abs(b[0]-1)&&1E-4>Math.abs(b[1]-1)&&1E-4>Math.abs(b[2]-1)&&0<=b[3]&&1E-4>Math.abs(b[4])&&1E-4>Math.abs(b[5])&&1E-4>Math.abs(b[6])&&1E-4>Math.abs(b[7])?
1E-4>Math.abs(b[3]-1)?null:"simple":"complex";var e=Object.create(RenderingColorTransform.prototype);e.mode=a;e.transform=b;return e},setFillStyle:function(a,b){"complex"===this.mode?b="function"===typeof b?b(a,this):this.convertColor(b):"number"===typeof b?b=this.convertNumericColor(b):"function"===typeof b&&(b=b.defaultFillStyle);a.fillStyle=b},setStrokeStyle:function(a,b){"complex"===this.mode?b="function"===typeof b?b(a,this):this.convertColor(b):"number"===typeof b?b=this.convertNumericColor(b):
"function"===typeof b&&(b=b.defaultFillStyle);a.strokeStyle=b},addGradientColorStop:function(a,b,e){"complex"===this.mode?e=this.convertColor(e):"number"===typeof e&&(e=this.convertNumericColor(e));a.addColorStop(b,e)},setAlpha:function(a,b){if("simple"===this.mode||b)a.globalAlpha=Math.min(1,Math.max(0,a.globalAlpha*this.transform[3]))},convertNumericColor:function(a){return"#"+(a|16777216).toString(16).substr(1)},convertColor:function(a){var b=this.transform,e;switch(typeof a){case "string":"#"===
a[0]&&(e=[void 0,parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16),1]);e=e||/rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)/.exec(a);if(!e)return a;break;case "number":e=[a,a>>16&255,a>>8&255,a&255,1];break;default:return a}a=Math.min(255,Math.max(0,e[1]*b[0]+b[4]))|0;var d=Math.min(255,Math.max(0,e[2]*b[1]+b[5]))|0,f=Math.min(255,Math.max(0,e[3]*b[2]+b[6]))|0,b=Math.min(1,Math.max(0,e[4]*b[3]+b[7]/256));return"rgba("+a+","+d+","+f+","+b+")"},getTransformFingerprint:function(){return this.transform.join("|")}};
function RenderingContext(a,b){this.refreshStage=!0===a;this.invalidPath=b;this.isClippingMask=!1;this.colorTransform=new RenderingColorTransform}
function renderDisplayObject(a,b,e){var d=a._currentTransform;d&&(d.a*d.d==d.b*d.c?(b.closePath(),b.rect(0,0,0,0),b.clip()):b.transform(d.a,d.b,d.c,d.d,d.tx/20,d.ty/20));if(renderAsWireframe.value){if(!a._invalid&&!e.refreshStage)return;if(a.getBounds&&(e=a.getBounds(null))&&0<e.xMax-e.xMin&&0<e.yMax-e.yMin){a._wireframeStrokeStyle||(a._wireframeStrokeStyle=randomStyle());b.save();b.strokeStyle=a._wireframeStrokeStyle;var d=e.xMin/20,f=e.yMin/20;b.strokeRect(d+0.5,f+0.5,e.xMax/20-d-1,e.yMax/20-f-
1);b.restore()}}else{1!==a._alpha&&(b.globalAlpha*=a._alpha);if(e.invalidPath&&!a._invalid&&!e.refreshStage)return;a._graphics&&(d=a._graphics,d._bitmap?(b.save(),b.translate(a._bbox.xMin/20,a._bbox.yMin/20),e.colorTransform.setAlpha(b,!0),b.drawImage(d._bitmap,0,0),b.restore()):d.draw(b,e.isClippingMask,a.ratio,e.colorTransform));a.draw&&a.draw(b,a.ratio,e.colorTransform)}a._invalid=!1}
function renderQuadTree(a,b){a.strokeRect(b.x/20,b.y/20,b.width/20,b.height/20);for(var e=b.nodes,d=0;d<e.length;d++)renderQuadTree(a,e[d])}var renderingTerminated=!1,samplesLeftPlusOne=0;function triggerSampling(a){samplesLeftPlusOne=-a-1}function sampleStart(){samplesLeftPlusOne&&(0>samplesLeftPlusOne&&(console.profile("Sample"),samplesLeftPlusOne*=-1),0<samplesLeftPlusOne&&console.info("Sampling Frame: "+(samplesLeftPlusOne-1)))}
function sampleEnd(){samplesLeftPlusOne&&(samplesLeftPlusOne--,1===samplesLeftPlusOne&&console.profileEnd("Sample"))}var timeline;function timelineEnter(a){timeline&&timeline.enter(a)}function timelineLeave(a){timeline&&timeline.leave(a)}function timelineWrapBroadcastMessage(a,b){timelineEnter(b);a.broadcastMessage(b);timelineLeave(b)}
function renderStage(a,b,e){function d(){f=b.canvas.width;g=b.canvas.height;var d=20*(f/a._stageWidth),e=20*(g/a._stageHeight);switch(a._scaleMode){case "noBorder":d>e?e=d:d=e;break;case "noScale":d=e=b.canvas._pixelRatio||1;break;case "showAll":d<e?e=d:d=e}var m=a._align,l;l=0<=m.indexOf("L")?0:0<=m.indexOf("R")?f-d*a._stageWidth/20:(f-d*a._stageWidth/20)/2;m=0<=m.indexOf("T")?0:0<=m.indexOf("B")?g-e*a._stageHeight/20:(g-e*a._stageHeight/20)/2;b.setTransform(d,0,0,e,l,m);var r=a._concatenatedTransform;
r.a=d;r.d=e;r.tx=20*l;r.ty=20*m}var f,g;d();var l=0,m=1E3/a._frameRate,p=performance.now(),r=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.setTimeout,s,w;if("undefined"!==typeof FirefoxCom&&FirefoxCom.requestSync("getBoolPref",{pref:"shumway.dummyMode",def:!1})){var v=a._concatenatedTransform,z=v.a,A=v.d;w=[];for(v=0;10>v;v++)w.push({position:{x:10+Math.random()*((b.canvas.width-
20)/z),y:10+Math.random()*((b.canvas.height-20)/A)},velocity:{x:1*(Math.random()-0.5),y:1*(Math.random()-0.5)}});b.fillStyle="black";b.lineWidth=2;b.fillRect(0,0,b.canvas.width,b.canvas.height);s=function(){b.fillStyle="black";b.fillRect(0,0,b.canvas.width,b.canvas.height);b.strokeStyle="green";w.forEach(function(a){var d=a.position;a=a.velocity;b.beginPath();b.arc(d.x,d.y,10,0,2*Math.PI,!0);b.stroke();var e=d.x+a.x,f=d.y+a.y;if(10>e||e>b.canvas.width/z-10)a.x*=-1;if(10>f||f>b.canvas.height/A-10)a.y*=
-1;d.x+=a.x;d.y+=a.y})}}console.timeEnd("Initialize Renderer");console.timeEnd("Total");var u=!0,B=0,y=new metrics.Average(120);(function F(){var f=performance.now(),g=f>=p;g&&e.onBeforeFrame&&(g={cancel:!1},e.onBeforeFrame(g),g=!g.cancel);if(g&&s)l=f,p=l+m,s(),r(F);else{sampleStart();var v=!1;a._invalid&&(d(),a._invalid=!1,v=!0);var A=!1;a._mouseMoved?(a._mouseMoved=!1,A=a._mouseOver):a._handleMouseButtons();if(g||v||A){FrameCounter.clear();var w=performance.now();traceRenderer.value&&appendToFrameTerminal("Begin Frame #"+
B++,"purple");var z=avm2.systemDomain;if(g){l=f;m=1E3/a._frameRate;if(!turboMode.value)for(;p<f;)p+=m;timelineEnter("EVENTS");u?u=!1:(enableAdvanceFrame.value&&timelineWrapBroadcastMessage(z,"advanceFrame"),enableEnterFrame.value&&timelineWrapBroadcastMessage(z,"enterFrame"),enableConstructChildren.value&&timelineWrapBroadcastMessage(z,"constructChildren"));timelineWrapBroadcastMessage(z,"frameConstructed");timelineWrapBroadcastMessage(z,"executeFrame");timelineWrapBroadcastMessage(z,"exitFrame");
timelineLeave("EVENTS")}a._deferRenderEvent&&(a._deferRenderEvent=!1,z.broadcastMessage("render","render"));if(isCanvasVisible(b.canvas)&&(v||g))f=null,disablePreVisitor.value?a._processInvalidRegions(!1):(traceRenderer.value&&frameWriter.enter("> Pre Visitor"),timelineEnter("PRE"),f=a._processInvalidRegions(!0),timelineLeave("PRE"),traceRenderer.value&&frameWriter.leave("< Pre Visitor")),disableRenderVisitor.value||(timelineEnter("RENDER"),traceRenderer.value&&frameWriter.enter("> Render Visitor"),
(new RenderVisitor(a,b,f,v)).start(),traceRenderer.value&&frameWriter.leave("< Render Visitor"),timelineLeave("RENDER")),showQuadTree.value&&(b.strokeStyle="green",renderQuadTree(b,a._qtree)),f&&(!v&&showRedrawRegions.value)&&(b.strokeStyle="red",f.draw(b),b.stroke());A&&!disableMouseVisitor.value&&(g&&timelineEnter("MOUSE"),traceRenderer.value&&frameWriter.enter("> Mouse Visitor"),a._handleMouse(),traceRenderer.value&&frameWriter.leave("< Mouse Visitor"),g&&timelineLeave("MOUSE"),b.canvas.style.cursor=
a._cursor);if(g&&e.onAfterFrame)e.onAfterFrame();if(traceRenderer.value){frameWriter.enter("> Frame Counters");for(var K in FrameCounter.counts)frameWriter.writeLn(K+": "+FrameCounter.counts[K]);frameWriter.leave("< Frame Counters");K=performance.now()-w;f=1E3/K;y.push(f);traceRenderer.value&&appendToFrameTerminal("End Frame Time: "+K.toFixed(2)+" ("+f.toFixed(2)+" fps, "+y.average().toFixed(2)+" average fps)","purple")}}else traceRenderer.value&&appendToFrameTerminal("Skip Frame","black");sampleEnd();
if(renderingTerminated){if(e.onTerminated)e.onTerminated()}else r(F)}})()}
var tagHandler=function(){function a(a,b,d,e,f){d||(d={});d.id=readUi16(a,b);var g=d.bbox={};v(a,b,g,e,f);if(g=d.isMorph=46===f||84===f){var m=d.bboxMorph={};v(a,b,m,e,f)}if(m=d.hasStrokes=83===f||84===f){var l=d.strokeBbox={};v(a,b,l,e,f);g&&(l=d.strokeBboxMorph={},v(a,b,l,e,f));readUb(a,b,5);d.fillWinding=readUb(a,b,1);d.nonScalingStrokes=readUb(a,b,1);d.scalingStrokes=readUb(a,b,1)}if(g){d.offsetMorph=readUi32(a,b);var r=d,p,s,l=D(a,b,r,e,f,g,m),u=l.lineBits,A=l.fillBits,w=r.records=[];do{var E=
{},l=y(a,b,E,e,f,g,A,u,m,s);p=l.eos;A=l.fillBits;u=l.lineBits;s=l.bits;w.push(E)}while(!p);l=F(a,b,r,e,f);A=l.fillBits;u=l.lineBits;r=r.recordsMorph=[];do w={},l=y(a,b,w,e,f,g,A,u,m,s),p=l.eos,A=l.fillBits,u=l.lineBits,s=l.bits,r.push(w);while(!p)}else{A=d;s=D(a,b,A,e,f,g,m);l=s.fillBits;u=s.lineBits;r=A.records=[];do w={},s=y(a,b,w,e,f,g,l,u,m,p),A=s.eos,l=s.fillBits,u=s.lineBits,p=s.bits,r.push(w);while(!A)}return d}function b(a,b,d,e,f){var g,m,l,r,p,s,v,A,w,E,z,y,F;d||(d={});if(4<f){g=26<f?readUi16(a,
b):readUi8(a,b);m=d.hasEvents=g>>7&1;l=d.clip=g>>6&1;r=d.hasName=g>>5&1;p=d.hasRatio=g>>4&1;s=d.hasCxform=g>>3&1;v=d.hasMatrix=g>>2&1;A=d.place=g>>1&1;d.move=g&1;70===f?(w=d.hasBackgroundColor=g>>15&1,E=d.hasVisibility=g>>14&1,d.hasImage=g>>12&1,z=d.hasClassName=g>>11&1,y=d.cache=g>>10&1,F=d.blend=g>>9&1,g=d.hasFilters=g>>8&1):(y=d.cache=0,F=d.blend=0,g=d.hasFilters=0);d.depth=readUi16(a,b);z&&(d.className=readString(a,b,0));A&&(d.symbolId=readUi16(a,b));v&&(v=d.matrix={},u(a,b,v,e,f));s&&(s=d.cxform=
{},B(a,b,s,e,f));p&&(d.ratio=readUi16(a,b));r&&(d.name=readString(a,b,0));l&&(d.clipDepth=readUi16(a,b));if(g){r=readUi8(a,b);for(l=d.filters=[];r--;)p={},C(a,b,p,e,f),l.push(p)}F&&(d.blendMode=readUi8(a,b));y&&(d.bmpCache=readUi8(a,b));if(m){readUi16(a,b);6<=e?readUi32(a,b):readUi16(a,b);f=d.events=[];do m={},y=a,F=b,l=m,s=e,r=g=void 0,g=6<=s?readUi32(y,F):readUi16(y,F),p=l.eoe=!g,l.onKeyUp=g>>7&1,l.onKeyDown=g>>6&1,l.onMouseUp=g>>5&1,l.onMouseDown=g>>4&1,l.onMouseMove=g>>3&1,l.onUnload=g>>2&1,l.onEnterFrame=
g>>1&1,l.onLoad=g&1,6<=s&&(l.onDragOver=g>>15&1,l.onRollOut=g>>14&1,l.onRollOver=g>>13&1,l.onReleaseOutside=g>>12&1,l.onRelease=g>>11&1,l.onPress=g>>10&1,l.onInitialize=g>>9&1,l.onData=g>>8&1,l.onConstruct=7<=s?g>>18&1:0,r=l.keyPress=g>>17&1,l.onDragOut=g>>16&1),p||(s=l.length=readUi32(y,F),r&&(l.keyCode=readUi8(y,F)),l.actionsData=readBinary(y,F,s-(r?1:0))),y=p,f.push(m);while(!y)}w&&(e=d.backgroundColor={},e.alpha=readUi8(a,b),e.red=readUi8(a,b),e.green=readUi8(a,b),e.blue=readUi8(a,b));E&&(d.visibility=
readUi8(a,b))}else d.place=1,d.symbolId=readUi16(a,b),d.depth=readUi16(a,b),d.hasMatrix=1,E=d.matrix={},u(a,b,E,e,f),b.remaining()&&(d.hasCxform=1,E=d.cxform={},B(a,b,E,e,f));return d}function e(a,b,d,e,f){d||(d={});5===f&&(d.symbolId=readUi16(a,b));d.depth=readUi16(a,b);return d}function d(a,b,d,e,f){d||(d={});d.id=readUi16(a,b);21<f?(e=readUi32(a,b),90===f&&(d.deblock=readFixed8(a,b)),e=d.imgData=readBinary(a,b,e),d.alphaData=readBinary(a,b,0)):e=d.imgData=readBinary(a,b,0);switch(e[0]<<8|e[1]){case 65496:case 65497:d.mimeType=
"image/jpeg";break;case 35152:d.mimeType="image/png";break;case 18249:d.mimeType="image/gif";break;default:d.mimeType="application/octet-stream"}6===f&&(d.incomplete=1);return d}function f(a,b,d,e,f){var g,l,m,r;d||(d={});d.id=readUi16(a,b);if(7==f){r=d.characters=[];do{var p={};g=a;var s=b,v=p;l=e;m=f;var A=void 0,w=void 0,E=readUi8(g,s),z=v.eob=!E;8<=l?(w=v.blend=E>>5&1,A=v.hasFilters=E>>4&1):(w=v.blend=0,A=v.hasFilters=0);v.stateHitTest=E>>3&1;v.stateDown=E>>2&1;v.stateOver=E>>1&1;v.stateUp=E&
1;z||(v.symbolId=readUi16(g,s),v.depth=readUi16(g,s),E=v.matrix={},u(g,s,E,l,m),34===m&&(E=v.cxform={},B(g,s,E,l,m)),A&&(v.filterCount=readUi8(g,s),A=v.filters={},C(g,s,A,l,m)),w&&(v.blendMode=readUi8(g,s)));g=z;r.push(p)}while(!g);d.actionsData=readBinary(a,b,0)}else{g=readUi8(a,b);d.trackAsMenu=g>>7&1;p=readUi16(a,b);s=d.characters=[];do{v={};m=readUi8(a,b);g=v.eob=!m;8<=e?(r=v.blend=m>>5&1,l=v.hasFilters=m>>4&1):(r=v.blend=0,l=v.hasFilters=0);v.stateHitTest=m>>3&1;v.stateDown=m>>2&1;v.stateOver=
m>>1&1;v.stateUp=m&1;if(!g){v.symbolId=readUi16(a,b);v.depth=readUi16(a,b);m=v.matrix={};u(a,b,m,e,f);34===f&&(m=v.cxform={},B(a,b,m,e,f));if(l){m=readUi8(a,b);for(l=d.filters=[];m--;)w={},C(a,b,w,e,f),l.push(w)}r&&(v.blendMode=readUi8(a,b))}s.push(v)}while(!g);if(p){e=d.buttonActions=[];do f={},g=a,r=b,p=f,s=readUi16(g,r),v=readUi16(g,r),p.idleToOverDown=v>>7&1,p.outDownToIdle=v>>6&1,p.outDownToOverDown=v>>5&1,p.overDownToOutDown=v>>4&1,p.overDownToOverUp=v>>3&1,p.overUpToOverDown=v>>2&1,p.overUpToIdle=
v>>1&1,p.idleToOverUp=v&1,p.mouseEventFlags=v&511,p.keyPress=v>>9&127,p.overDownToIdle=v>>8&1,p.actionsData=s?readBinary(g,r,s-4):readBinary(g,r,0),e.push(f);while(0<b.remaining())}}return d}function g(a,b,d,e,f){var g;d||(d={});d.id=readUi16(a,b);var l=d.bbox={};v(a,b,l,e,f);l=d.matrix={};u(a,b,l,e,f);var l=d.glyphBits=readUi8(a,b),m=d.advanceBits=readUi8(a,b),r=d.records=[];do{var p={};g=a;var s=b,w=p,E=e,y=f,F=l,D=m,C=void 0;align(g,s);var ia=readUb(g,s,8),B=w.eot=!ia,C=g,M=s,ga=w,Z=E,ea=ia,ia=
ga.hasFont=ea>>3&1,na=ga.hasColor=ea>>2&1,ha=ga.hasMoveY=ea>>1&1,ea=ga.hasMoveX=ea&1;ia&&(ga.fontId=readUi16(C,M));na&&(33===y?(na=ga.color={},A(C,M,na,Z,y)):(na=ga.color={},z(C,M,na,Z,y)));ea&&(ga.moveX=readSi16(C,M));ha&&(ga.moveY=readSi16(C,M));ia&&(ga.fontHeight=readUi16(C,M));if(!B){C=readUi8(g,s);C=6<E?w.glyphCount=C:w.glyphCount=C&127;w=w.entries=[];for(E=C;E--;)C={},M=g,ga=s,Z=C,y=D,Z.glyphIndex=readUb(M,ga,F),Z.advance=readSb(M,ga,y),w.push(C)}g=B;r.push(p)}while(!g);return d}function l(a,
b,d,e,f){d||(d={});59===f&&(d.spriteId=readUi16(a,b));d.actionsData=readBinary(a,b,0);return d}function m(a,b,d,e,f){d||(d={});15==f&&(d.soundId=readUi16(a,b));89==f&&(d.soundClassName=readString(a,b,0));e=d.soundInfo={};readUb(a,b,2);e.stop=readUb(a,b,1);e.noMultiple=readUb(a,b,1);f=e.hasEnvelope=readUb(a,b,1);var g=e.hasLoops=readUb(a,b,1),l=e.hasOutPoint=readUb(a,b,1);if(e.hasInPoint=readUb(a,b,1))e.inPoint=readUi32(a,b);l&&(e.outPoint=readUi32(a,b));g&&(e.loopCount=readUi16(a,b));if(f){f=e.envelopeCount=
readUi8(a,b);for(e=e.envelopes=[];f--;){var g={},l=a,m=b,r=g;r.pos44=readUi32(l,m);r.volumeLeft=readUi16(l,m);r.volumeRight=readUi16(l,m);e.push(g)}}return d}function p(a,b,d){d||(d={});var e=readUi8(a,b);d.playbackRate=e>>2&3;d.playbackSize=e>>1&1;d.playbackType=e&1;var e=readUi8(a,b),f=d.streamCompression=e>>4&15;d.streamRate=e>>2&3;d.streamSize=e>>1&1;d.streamType=e&1;d.samplesCount=readUi32(a,b);2==f&&(d.latencySeek=readSi16(a,b));return d}function r(a,b,d,e,f){d||(d={});d.id=readUi16(a,b);e=
d.format=readUi8(a,b);d.width=readUi16(a,b);d.height=readUi16(a,b);d.hasAlpha=36===f;3===e&&(d.colorTableSize=readUi8(a,b));d.bmpData=readBinary(a,b,0);return d}function s(a,b,d,e,f){d||(d={});d.id=readUi16(a,b);var g=d.hasLayout=readUb(a,b,1);5<e?d.shiftJis=readUb(a,b,1):readUb(a,b,1);d.smallText=readUb(a,b,1);d.ansi=readUb(a,b,1);var l=d.wideOffset=readUb(a,b,1),m=d.wide=readUb(a,b,1);d.italic=readUb(a,b,1);d.bold=readUb(a,b,1);5<e?d.language=readUi8(a,b):(readUi8(a,b),d.language=0);var r=readUi8(a,
b);d.name=readString(a,b,r);75===f&&(d.resolution=20);r=d.glyphCount=readUi16(a,b);if(l){for(var l=d.offsets=[],p=r;p--;)l.push(readUi32(a,b));d.mapOffset=readUi32(a,b)}else{l=d.offsets=[];for(p=r;p--;)l.push(readUi16(a,b));d.mapOffset=readUi16(a,b)}l=d.glyphs=[];for(p=r;p--;){var s={};M(a,b,s,e,f);l.push(s)}if(m){l=d.codes=[];for(p=r;p--;)l.push(readUi16(a,b))}else{l=d.codes=[];for(p=r;p--;)l.push(readUi8(a,b))}if(g){d.ascent=readUi16(a,b);d.descent=readUi16(a,b);d.leading=readSi16(a,b);g=d.advance=
[];for(l=r;l--;)g.push(readSi16(a,b));for(g=d.bbox=[];r--;)l={},v(a,b,l,e,f),g.push(l);f=readUi16(a,b);for(e=d.kerning=[];f--;)r={},g=a,l=b,p=r,m?(p.code1=readUi16(g,l),p.code2=readUi16(g,l)):(p.code1=readUi8(g,l),p.code2=readUi8(g,l)),p.adjustment=readUi16(g,l),e.push(r)}return d}function w(a,b,d,e,f){d||(d={});d.flags=82===f?readUi32(a,b):0;d.name=82===f?readString(a,b,0):"";d.data=readBinary(a,b,0);return d}function v(a,b,d){align(a,b);var e=readUb(a,b,5),f=readSb(a,b,e),g=readSb(a,b,e),l=readSb(a,
b,e),e=readSb(a,b,e);d.xMin=f;d.xMax=g;d.yMin=l;d.yMax=e;align(a,b)}function z(a,b,d){d.red=readUi8(a,b);d.green=readUi8(a,b);d.blue=readUi8(a,b);d.alpha=255}function A(a,b,d){d.red=readUi8(a,b);d.green=readUi8(a,b);d.blue=readUi8(a,b);d.alpha=readUi8(a,b)}function u(a,b,d){align(a,b);if(readUb(a,b,1)){var e=readUb(a,b,5);d.a=readFb(a,b,e);d.d=readFb(a,b,e)}else d.a=1,d.d=1;readUb(a,b,1)?(e=readUb(a,b,5),d.b=readFb(a,b,e),d.c=readFb(a,b,e)):(d.b=0,d.c=0);var e=readUb(a,b,5),f=readSb(a,b,e),e=readSb(a,
b,e);d.tx=f;d.ty=e;align(a,b)}function B(a,b,d,e,f){align(a,b);e=readUb(a,b,1);var g=readUb(a,b,1),l=readUb(a,b,4);g?(d.redMultiplier=readSb(a,b,l),d.greenMultiplier=readSb(a,b,l),d.blueMultiplier=readSb(a,b,l),d.alphaMultiplier=4<f?readSb(a,b,l):256):(d.redMultiplier=256,d.greenMultiplier=256,d.blueMultiplier=256,d.alphaMultiplier=256);e?(d.redOffset=readSb(a,b,l),d.greenOffset=readSb(a,b,l),d.blueOffset=readSb(a,b,l),d.alphaOffset=4<f?readSb(a,b,l):0):(d.redOffset=0,d.greenOffset=0,d.blueOffset=
0,d.alphaOffset=0);align(a,b)}function y(a,b,d,e,f,g,l,m,r,p){var s=d.type=readUb(a,b,1),u=readUb(a,b,5),v=d.eos=!(s||u);if(s)e=p,f=f=f=0,f=d.isStraight=u>>4,e=(u&15)+2,f?(f=d.isGeneral=readUb(a,b,1))?(d.deltaX=readSb(a,b,e),d.deltaY=readSb(a,b,e)):(f=d.isVertical=readUb(a,b,1))?d.deltaY=readSb(a,b,e):d.deltaX=readSb(a,b,e):(d.controlDeltaX=readSb(a,b,e),d.controlDeltaY=readSb(a,b,e),d.anchorDeltaX=readSb(a,b,e),d.anchorDeltaY=readSb(a,b,e)),a=e;else{var A=0,w=0,E=0,z=0,y=0,A=2<f?d.hasNewStyles=u>>
4:d.hasNewStyles=0,w=d.hasLineStyle=u>>3&1,E=d.hasFillStyle1=u>>2&1,z=d.hasFillStyle0=u>>1&1;if(y=d.move=u&1)p=readUb(a,b,5),d.moveX=readSb(a,b,p),d.moveY=readSb(a,b,p);z&&(d.fillStyle0=readUb(a,b,l));E&&(d.fillStyle1=readUb(a,b,l));w&&(d.lineStyle=readUb(a,b,m));A&&(a=D(a,b,d,e,f,g,r),m=a.lineBits,l=a.fillBits);a=p}return{type:s,flags:u,eos:v,fillBits:l,lineBits:m,bits:a}}function D(a,b,d,e,f,g,l){var m,r=readUi8(a,b);m=2<f&&255===r?readUi16(a,b):r;for(r=d.fillStyles=[];m--;){var p={};E(a,b,p,e,
f,g);r.push(p)}r=readUi8(a,b);m=2<f&&255===r?readUi16(a,b):r;for(r=d.lineStyles=[];m--;){var p={},s=a,u=b,v=p,w=e,y=f,D=g,C=l;v.width=readUi16(s,u);D&&(v.widthMorph=readUi16(s,u));if(C){align(s,u);v.startCapStyle=readUb(s,u,2);var C=v.joinStyle=readUb(s,u,2),ia=v.hasFill=readUb(s,u,1);v.noHscale=readUb(s,u,1);v.noVscale=readUb(s,u,1);v.pixelHinting=readUb(s,u,1);readUb(s,u,5);v.noClose=readUb(s,u,1);v.endCapStyle=readUb(s,u,2);2===C&&(v.miterLimitFactor=readFixed8(s,u));ia?(v=v.fillStyle={},E(s,u,
v,w,y,D)):(C=v.color={},A(s,u,C,w,y),D&&(D=v.colorMorph={},A(s,u,D,w,y)))}else 22<y?(C=v.color={},A(s,u,C,w,y)):(C=v.color={},z(s,u,C,w,y)),D&&(D=v.colorMorph={},A(s,u,D,w,y));r.push(p)}a=F(a,b,d,e,f);return{fillBits:a.fillBits,lineBits:a.lineBits}}function F(a,b){align(a,b);var d=readUb(a,b,4),e=readUb(a,b,4);return{fillBits:d,lineBits:e}}function E(a,b,d,e,f,g){var l=d.type=readUi8(a,b);switch(l){case 0:22<f||g?(l=d.color={},A(a,b,l,e,f)):(l=d.color={},z(a,b,l,e,f));g&&(d=d.colorMorph={},A(a,b,
d,e,f));break;case 16:case 18:case 19:var m=d.matrix={};u(a,b,m,e,f);g&&(m=d.matrixMorph={},u(a,b,m,e,f));83===f?(d.spreadMode=readUb(a,b,2),d.interpolationMode=readUb(a,b,2)):readUb(a,b,4);for(var r=d.count=readUb(a,b,4),m=d.records=[];r--;){var p={},s=a,v=b,w=p,E=e,y=f,F=g;w.ratio=readUi8(s,v);if(22<y){var D=w.color={};A(s,v,D,E,y)}else D=w.color={},z(s,v,D,E,y);F&&(w.ratioMorph=readUi8(s,v),w=w.colorMorph={},A(s,v,w,E,y));m.push(p)}19===l&&(d.focalPoint=readFixed8(a,b),g&&(d.focalPointMorph=readFixed8(a,
b)));break;case 64:case 65:case 66:case 67:d.bitmapId=readUi16(a,b),m=d.matrix={},u(a,b,m,e,f),g&&(g=d.matrixMorph={},u(a,b,g,e,f)),d.condition=64===l||67===l}}function C(a,b,d,e,f){var g=d.type=readUi8(a,b);switch(g){case 0:case 2:case 3:case 4:case 7:var l;l=4===g||7===g?readUi8(a,b):1;for(var m=d.colors=[],r=l;r--;){var p={};A(a,b,p,e,f);m.push(p)}3===g&&(m=d.higlightColor={},A(a,b,m,e,f));if(4===g||7===g){e=d.ratios=[];for(f=l;f--;)e.push(readUi8(a,b))}d.blurX=readFixed(a,b);d.blurY=readFixed(a,
b);2!==g&&(d.angle=readFixed(a,b),d.distance=readFixed(a,b));d.strength=readFixed8(a,b);d.innerShadow=readUb(a,b,1);d.knockout=readUb(a,b,1);d.compositeSource=readUb(a,b,1);3===g?d.onTop=readUb(a,b,1):readUb(a,b,1);4===g||7===g?d.passes=readUb(a,b,4):readUb(a,b,4);break;case 1:d.blurX=readFixed(a,b);d.blurY=readFixed(a,b);d.passes=readUb(a,b,5);readUb(a,b,3);break;case 5:l=d.columns=readUi8(a,b);m=d.rows=readUi8(a,b);d.divisor=readFloat(a,b);d.bias=readFloat(a,b);g=d.weights=[];for(l*=m;l--;)g.push(readFloat(a,
b));g=d.defaultColor={};A(a,b,g,e,f);readUb(a,b,6);d.clamp=readUb(a,b,1);d.preserveAlpha=readUb(a,b,1);break;case 6:d=d.matrix=[];for(e=20;e--;)d.push(readFloat(a,b))}}function M(a,b,d,e,f){var g=F(a,b,d,e,f),l=g.fillBits,g=g.lineBits,m=d.records=[];do{var r={},g=y(a,b,r,e,f,!1,l,g,!1,p);d=g.eos;var l=g.fillBits,g=g.lineBits,p=p;m.push(r)}while(!d)}return{"0":void 0,1:void 0,2:a,4:b,5:e,6:d,7:f,8:function(a,b,d){d||(d={});d.id=0;d.imgData=readBinary(a,b,0);d.mimeType="application/octet-stream";return d},
9:function(a,b,d,e,f){d||(d={});var g=d.color={};z(a,b,g,e,f);return d},10:function(a,b,d,e,f){d||(d={});d.id=readUi16(a,b);for(var g=readUi16(a,b),l=d.glyphCount=g/2,m=[],r=l-1;r--;)m.push(readUi16(a,b));d.offsets=[g].concat(m);for(g=d.glyphs=[];l--;)m={},M(a,b,m,e,f),g.push(m);return d},11:g,12:l,13:void 0,14:function(a,b,d){d||(d={});d.id=readUi16(a,b);var e=readUi8(a,b);d.soundFormat=e>>4&15;d.soundRate=e>>2&3;d.soundSize=e>>1&1;d.soundType=e&1;d.samplesCount=readUi32(a,b);d.soundData=readBinary(a,
b,0);return d},15:m,17:void 0,18:p,19:function(a,b,d){d||(d={});d.data=readBinary(a,b,0);return d},20:r,21:d,22:a,23:void 0,24:void 0,26:b,28:e,32:a,33:g,34:f,35:d,36:r,37:function(a,b,d,e,f){d||(d={});d.id=readUi16(a,b);var g=d.bbox={};v(a,b,g,e,f);var l=readUi16(a,b),g=d.hasText=l>>7&1;d.wordWrap=l>>6&1;d.multiline=l>>5&1;d.password=l>>4&1;d.readonly=l>>3&1;var m=d.hasColor=l>>2&1,r=d.hasMaxLength=l>>1&1,p=d.hasFont=l&1,s=d.hasFontClass=l>>15&1;d.autoSize=l>>14&1;var u=d.hasLayout=l>>13&1;d.noSelect=
l>>12&1;d.border=l>>11&1;d.wasStatic=l>>10&1;d.html=l>>9&1;d.useOutlines=l>>8&1;p&&(d.fontId=readUi16(a,b));s&&(d.fontClass=readString(a,b,0));p&&(d.fontHeight=readUi16(a,b));m&&(l=d.color={},A(a,b,l,e,f));r&&(d.maxLength=readUi16(a,b));u&&(d.align=readUi8(a,b),d.leftMargin=readUi16(a,b),d.rightMargin=readUi16(a,b),d.indent=readSi16(a,b),d.leading=readSi16(a,b));d.variableName=readString(a,b,0);g&&(d.initialText=readString(a,b,0));return d},39:void 0,43:function(a,d,b){b||(b={});b.name=readString(a,
d,0);return b},45:p,46:a,48:s,56:function(a,d,b){b||(b={});for(var e=readUi16(a,d),f=b.exports=[];e--;){var g={};g.symbolId=readUi16(a,d);g.className=readString(a,d,0);f.push(g)}return b},57:void 0,58:void 0,59:l,60:void 0,61:void 0,62:void 0,64:void 0,65:void 0,66:void 0,69:function(a,d,b){b||(b={});readUb(a,d,1);b.useDirectBlit=readUb(a,d,1);b.useGpu=readUb(a,d,1);b.hasMetadata=readUb(a,d,1);b.doAbc=readUb(a,d,1);b.noCrossDomainCaching=readUb(a,d,1);b.relativeUrls=readUb(a,d,1);b.network=readUb(a,
d,1);readUb(a,d,24);return b},70:b,71:void 0,72:w,73:void 0,74:void 0,75:s,76:function(a,d,b){b||(b={});for(var e=readUi16(a,d),f=b.exports=[];e--;){var g={};g.symbolId=readUi16(a,d);g.className=readString(a,d,0);f.push(g)}return b},77:void 0,78:function(a,d,b,e,f){b||(b={});b.symbolId=readUi16(a,d);var g=b.splitter={};v(a,d,g,e,f);return b},82:w,83:a,84:a,86:function(a,b,d){d||(d={});for(var e=readEncodedU32(a,b),f=d.scenes=[];e--;){var g={};g.offset=readEncodedU32(a,b);g.name=readString(a,b,0);
f.push(g)}e=readEncodedU32(a,b);for(f=d.labels=[];e--;)g={},g.frame=readEncodedU32(a,b),g.name=readString(a,b,0),f.push(g);return d},87:function(a,b,d){d||(d={});d.id=readUi16(a,b);readUi32(a,b);d.data=readBinary(a,b,0);return d},88:void 0,89:m,90:d,91:void 0}}(this),readHeader=function(a,b,e){e||(e={});var d=e.bbox={};align(a,b);var f=readUb(a,b,5),g=readSb(a,b,f),l=readSb(a,b,f),m=readSb(a,b,f),f=readSb(a,b,f);d.xMin=g;d.xMax=l;d.yMin=m;d.yMax=f;align(a,b);d=readUi8(a,b);e.frameRate=readUi8(a,b)+
d/256;e.frameCount=readUi16(a,b);return e};
function readTags(a,b,e,d,f){var g=a.tags,l=b.bytes,m,p=null;a._readTag&&(p=a._readTag,delete a._readTag);try{for(;b.pos<b.end;){m=b.pos;b.ensure(2);var r=readUi16(l,b);if(!r){d=!0;break}var s=r>>6,w=r&63;63===w&&(b.ensure(4),w=readUi32(l,b));if(p){if(1===s&&1===p.code){p.repeat++;b.pos+=w;continue}g.push(p);f&&void 0!==p.id&&f(a);p=null}b.ensure(w);var v=b.substream(b.pos,b.pos+=w),z=v.bytes,w={code:s};if(39===s)w.type="sprite",w.id=readUi16(z,v),w.frameCount=readUi16(z,v),w.tags=[],readTags(w,v,
e,!0);else if(1===s)w.repeat=1;else{var A=tagHandler[s];A&&A(z,v,w,e,s)}p=w}p&&d?(p.finalTag=!0,g.push(p),f&&f(a)):a._readTag=p}catch(u){if(u!==StreamNoDataError)throw u;b.pos=m;a._readTag=p}}function HeadTailBuffer(a){this.bufferSize=a||16;this.buffer=new Uint8Array(this.bufferSize);this.pos=0}
HeadTailBuffer.prototype={push:function(a,b){var e=this.pos+a.length;if(this.bufferSize<e){for(var d=this.bufferSize;d<e;)d<<=1;e=new Uint8Array(d);0<this.bufferSize&&e.set(this.buffer);this.buffer=e;this.bufferSize=d}this.buffer.set(a,this.pos);this.pos+=a.length;if(b)return this.pos>=b},getHead:function(a){return this.buffer.subarray(0,a)},getTail:function(a){return this.buffer.subarray(a,this.pos)},removeHead:function(a){a=this.getTail(a);this.buffer=new Uint8Array(this.bufferSize);this.buffer.set(a);
this.pos=a.length},get arrayBuffer(){return this.buffer.buffer},get length(){return this.pos},createStream:function(){return new Stream(this.arrayBuffer,0,this.length)}};function CompressedPipe(a,b){this.target=a;this.length=b;this.initialize=!0;this.buffer=new HeadTailBuffer(8096);this.state={bitBuffer:0,bitLength:0,compression:{}};this.output={data:new Uint8Array(b),available:0,completed:!1}}
CompressedPipe.prototype={push:function(a,b){var e=this.buffer;if(this.initialize){if(!e.push(a,2))return;var d=e.getHead(2);verifyDeflateHeader(d);e.removeHead(2);this.initialize=!1}else e.push(a);d=e.createStream();d.bitBuffer=this.state.bitBuffer;d.bitLength=this.state.bitLength;var f=this.output,g=f.available;try{do inflateBlock(d,f,this.state.compression);while(d.pos<e.length&&!f.completed)}catch(l){if(l!==InflateNoDataError)throw l;}finally{this.state.bitBuffer=d.bitBuffer,this.state.bitLength=
d.bitLength}e.removeHead(d.pos);this.target.push(f.data.subarray(g,f.available),b)}};function BodyParser(a,b,e){this.swf={swfVersion:a,parseTime:0};this.buffer=new HeadTailBuffer(32768);this.initialize=!0;this.totalRead=0;this.length=b;this.options=e}
BodyParser.prototype={push:function(a,b){if(0!==a.length){var e=this.swf,d=e.swfVersion,f=this.buffer,g=this.options,l;if(this.initialize){if(!f.push(a,27))return;l=f.createStream();var m=l.bytes;readHeader(m,l,e);if(4420==readUi16(m,l)){l.ensure(4);var m=l.substream(l.pos,l.pos+=4),p={code:69};(0,tagHandler[69])(m.bytes,m,p,d,69);e.fileAttributes=p}else l.pos-=2,e.fileAttributes={};if(g.onstart)g.onstart(e);e.tags=[];this.initialize=!1}else f.push(a),l=f.createStream();m=!1;b&&(e.bytesLoaded=b.bytesLoaded,
e.bytesTotal=b.bytesTotal,m=b.bytesLoaded>=b.bytesTotal);p=performance.now();readTags(e,l,d,m,g.onprogress);e.parseTime+=performance.now()-p;d=l.pos;f.removeHead(d);this.totalRead+=d;if(g.oncomplete&&e.tags[e.tags.length-1].finalTag)g.oncomplete(e)}}};
SWF.parseAsync=function(a){var b=new HeadTailBuffer,e={push:function(d,f){if(void 0!==this.target)return this.target.push(d,f);if(!b.push(d,8))return null;var g=b.getHead(8),l=g[0],m=g[1],p=g[2];if((70===l||67===l)&&87===m&&83===p)l=67===l,g=g[3],m=b.createStream(),m.pos+=4,m=readUi32(null,m)-8,g=new BodyParser(g,m,a),l&&(g=new CompressedPipe(g,m)),g.push(b.getTail(8),f),e.target=g;else{var g=!1,r;255===l&&216===m&&255===p?(g=!0,r="image/jpeg"):137===l&&(80===m&&78===p)&&(g=!0,r="image/png");if(g){var s=
r,w=new Uint8Array(f.bytesTotal);w.set(d);var v=d.length;e.target={push:function(a){w.set(a,v);v+=a.length},close:function(){var b={},d;d="image/jpeg"==s?parseJpegChunks(b,w):[w];b={type:"image",props:b,data:new Blob(d,{type:s})};a.oncomplete&&a.oncomplete(b)}}}}b=null},close:function(){if(b){var d={command:"empty",data:b.buffer.subarray(0,b.pos)};a.oncomplete&&a.oncomplete(d)}void 0!==this.target&&this.target.close&&this.target.close()}};return e};
SWF.parse=function(a,b){b||(b={});var e=SWF.parseAsync(b),d=new Uint8Array(a);e.push(d,{bytesLoaded:d.length,bytesTotal:d.length})};var $RELEASE=!1,isWorker="undefined"===typeof window;
function defineSymbol(a,b){var e;switch(a.code){case 6:case 21:case 35:case 90:case 8:e=defineImage(a,b);break;case 20:case 36:e=defineBitmap(a);break;case 7:case 34:e=defineButton(a,b);break;case 37:e=defineText(a,b);break;case 10:case 48:case 75:case 91:e=defineFont(a,b);break;case 46:case 84:case 2:case 22:case 32:case 83:e=defineShape(a,b);break;case 14:e=defineSound(a,b);break;case 87:e={type:"binary",id:a.id,data:a.data};break;case 39:e={};for(var d={type:"frame"},f=[],g=a.tags,l=null,m=0,p=
null,r=0,s=g.length;r<s;r++){var w=g[r];switch(w.code){case 12:l||(l=[]);l.push(m);l.push(w.actionsData);break;case 15:(d.startSounds||(d.startSounds=[])).push(w);break;case 18:try{p=createSoundStream(w),d.soundStream=p.info}catch(v){}break;case 19:p&&(d.soundStreamBlock=p.decode(w.data));break;case 43:d.labelName=w.name;break;case 4:case 26:case 70:e[w.depth]=w;break;case 5:case 28:e[w.depth]=null;break;case 1:m+=w.repeat,d.repeat=w.repeat,d.depths=e,f.push(d),e={},d={type:"frame"}}}e={type:"sprite",
id:a.id,frameCount:a.frameCount,frames:f,frameScripts:l};break;case 11:case 33:e=defineLabel(a,b)}if(!e)return{command:"error",message:"unknown symbol type: "+a.code};e.isSymbol=!0;return b[a.id]=e}
function createParsingContext(a){var b={},e={},d={type:"frame"},f=0,g=null,l=0;return{onstart:function(b){a({command:"init",result:b})},onprogress:function(m){if(Date.now()-l>1E3/24||m.bytesLoaded===m.bytesTotal)a({command:"progress",result:{bytesLoaded:m.bytesLoaded,bytesTotal:m.bytesTotal}}),l=Date.now();m=m.tags;for(var p=m.length;f<p;f++){var r=m[f];if("id"in r)r=defineSymbol(r,e),a(r,r.transferables);else switch(r.code){case 86:d.sceneData=r;break;case 78:a({isSymbol:!0,id:r.symbolId,updates:{scale9Grid:r.splitter}});
break;case 82:case 72:var s=d.abcBlocks;s?s.push({data:r.data,flags:r.flags}):d.abcBlocks=[{data:r.data,flags:r.flags}];break;case 12:(s=d.actionBlocks)?s.push(r.actionsData):d.actionBlocks=[r.actionsData];break;case 59:(d.initActionBlocks||(d.initActionBlocks=[])).push({spriteId:r.spriteId,actionsData:r.actionsData});break;case 15:s=d.startSounds;s||(d.startSounds=s=[]);s.push(r);break;case 18:try{g=createSoundStream(r),d.soundStream=g.info}catch(w){}break;case 19:g&&(d.soundStreamBlock=g.decode(r.data));
break;case 56:s=d.exports;d.exports=s?s.concat(r.exports):r.exports.slice(0);break;case 76:s=d.symbolClasses;d.symbolClasses=s?s.concat(r.exports):r.exports.slice(0);break;case 43:d.labelName=r.name;break;case 4:case 26:case 70:b[r.depth]=r;break;case 5:case 28:b[r.depth]=null;break;case 9:d.bgcolor=r.color;break;case 1:d.repeat=r.repeat,d.depths=b,d.complete=!!r.finalTag,a(d),b={},d={type:"frame"}}}},oncomplete:function(b){a(b);var d;"number"===typeof b.swfVersion&&(d=b.bbox,d={topic:"parseInfo",
parseTime:b.parseTime,bytesTotal:b.bytesTotal,swfVersion:b.swfVersion,frameRate:b.frameRate,width:(d.xMax-d.xMin)/20,height:(d.yMax-d.yMin)/20,isAvm2:!!b.fileAttributes.doAbc});a({command:"complete",stats:d})}}}function parseBytes(a,b){SWF.parse(a,createParsingContext(b))}function ResourceLoader(a){this.subscription=null;var b=this;isWorker?(this.messenger=a,a.onmessage=function(a){b.listener(a.data)}):this.messenger={postMessage:function(a){b.onmessage({data:a})}}}
ResourceLoader.prototype={terminate:function(){this.listener=this.messenger=null},onmessage:function(a){this.listener(a.data)},postMessage:function(a){this.listener&&this.listener(a)},listener:function(a){this.subscription?this.subscription.callback(a.data,a.progress):"pipe:"===a?(this.subscription={subscribe:function(a){this.callback=a}},this.parseLoadedData(this.messenger,this.subscription)):this.parseLoadedData(this.messenger,a)},parseLoadedData:function(a,b){function e(b,d){try{a.postMessage(b,
d)}catch(e){if("DataCloneError"!=e)throw e;a.postMessage(b)}}if(b instanceof ArrayBuffer)parseBytes(b,e);else if("subscribe"in b){var d=SWF.parseAsync(createParsingContext(e));b.subscribe(function(a,b){a?d.push(a,b):d.close()})}else if("undefined"!==typeof FileReaderSync){var f=new FileReaderSync,f=f.readAsArrayBuffer(b);parseBytes(f,e)}else f=new FileReader,f.onload=function(){parseBytes(this.result,e)},f.readAsArrayBuffer(b)}};if(isWorker)var loader=new ResourceLoader(this);
function ActionsDataStream(a,b){this.array=a;this.position=0;this.end=a.length;this.readString=6<=b?this.readUTF8String:this.readANSIString;var e=new ArrayBuffer(4);(new Int32Array(e))[0]=1;if(!(new Uint8Array(e))[0])throw Error("big-endian platform");}
ActionsDataStream.prototype={readUI8:function(){return this.array[this.position++]},readUI16:function(){var a=this.position,b=this.array,b=b[a+1]<<8|b[a];this.position=a+2;return b},readSI16:function(){var a=this.position,b=this.array,b=b[a+1]<<8|b[a];this.position=a+2;return 32768>b?b:b-65536},readInteger:function(){var a=this.position,b=this.array,b=b[a]|b[a+1]<<8|b[a+2]<<16|b[a+3]<<24;this.position=a+4;return b},readFloat:function(){var a=this.position,b=this.array,e=new ArrayBuffer(4),d=new Uint8Array(e);
d[0]=b[a];d[1]=b[a+1];d[2]=b[a+2];d[3]=b[a+3];this.position=a+4;return(new Float32Array(e))[0]},readDouble:function(){var a=this.position,b=this.array,e=new ArrayBuffer(8),d=new Uint8Array(e);d[4]=b[a];d[5]=b[a+1];d[6]=b[a+2];d[7]=b[a+3];d[0]=b[a+4];d[1]=b[a+5];d[2]=b[a+6];d[3]=b[a+7];this.position=a+8;return(new Float64Array(e))[0]},readBoolean:function(){return!!this.readUI8()},readANSIString:function(){for(var a="",b;b=this.readUI8();)a+=String.fromCharCode(b);return a},readUTF8String:function(){for(var a=
"",b;b=this.readUI8();)if(128>b)a+=String.fromCharCode(b);else{if(128===(b&192))throw Error("Invalid UTF8 encoding");var e=192,d=5;do{var f=e>>1|128;if((b&f)===e)break;e=f;--d}while(0<=d);e=b&(1<<d)-1;for(f=5;f>=d;--f){b=this.readUI8();if(128!==(b&192))throw Error("Invalid UTF8 encoding");e=e<<6|b&63}a=65536<=e?a+String.fromCharCode(e-65536>>10&1023|55296,e&1023|56320):a+String.fromCharCode(e)}return a},readBytes:function(a){var b=this.position,e=Math.max(this.end-b,0);e<a&&(a=e);e=this.array.subarray(b,
b+a);this.position=b+a;return e}};"undefined"!==typeof GLOBAL&&(GLOBAL.ActionsDataStream=ActionsDataStream);var AVM1_TRACE_ENABLED=!1,AVM1_ERRORS_IGNORED=!0,MAX_AVM1_INSTRUCTIONS_LIMIT=1E5,MAX_AVM1_ERRORS_LIMIT=1E3,MAX_AVM1_STACK_LIMIT=256;function AS2ScopeListItem(a,b){this.scope=a;this.next=b}AS2ScopeListItem.prototype={create:function(a){return new AS2ScopeListItem(a,this)}};
function AS2Context(a){this.swfVersion=a;this.globals=new avm1lib.AS2Globals(this);this.initialScope=new AS2ScopeListItem(this.globals,null);this.assets={};this.stackDepth=this.instructionsExecuted=0;this.isTryCatchListening=!1;this.errorsIgnored=0;this.deferScriptExecution=!0;this.pendingScripts=[]}AS2Context.instance=null;
AS2Context.prototype={addAsset:function(a,b){this.assets[a]=b},resolveTarget:function(a){a?"string"===typeof a&&(a=lookupAS2Children(a,this.defaultTarget,this.globals.asGetPublicProperty("_root"))):a=this.defaultTarget;if("object"!==typeof a||null===a||!("$nativeObject"in a))throw Error("Invalid AS2 target object: "+Object.prototype.toString.call(a));return a},resolveLevel:function(a){return this.resolveTarget(this.globals["_level"+a])},addToPendingScripts:function(a){if(!this.deferScriptExecution)return a();
this.pendingScripts.push(a)},flushPendingScripts:function(){for(var a=this.pendingScripts;a.length;)a.shift()();this.deferScriptExecution=!1}};function AS2Error(a){this.error=a}function AS2CriticalError(a,b){this.message=a;this.error=b}AS2CriticalError.prototype=Object.create(Error.prototype);function isAS2MovieClip(a){return"object"===typeof a&&a&&a instanceof avm1lib.AS2MovieClip}
function as2GetType(a){if(null===a)return"null";var b=typeof a;return"function"===b?"object":"object"===b&&isAS2MovieClip(a)?"movieclip":b}function as2ToPrimitive(a){return"object"!==as2GetType(a)?a:a.valueOf()}function as2ToAddPrimitive(a){return"object"!==as2GetType(a)?a:a instanceof Date&&6<=AS2Context.instance.swfVersion?a.toString():a.valueOf()}
function as2ToBoolean(a){switch(as2GetType(a)){default:case "undefined":case "null":return!1;case "boolean":return a;case "number":return 0!==a&&!isNaN(a);case "string":return 0!==a.length;case "movieclip":case "object":return!0}}
function as2ToNumber(a){a=as2ToPrimitive(a);switch(as2GetType(a)){case "undefined":case "null":return 7<=AS2Context.instance.swfVersion?NaN:0;case "boolean":return a?1:0;case "number":return a;case "string":return""===a&&5>AS2Context.instance.swfVersion?0:+a;default:return 5<=AS2Context.instance.swfVersion?NaN:0}}function as2ToInteger(a){a=as2ToNumber(a);return isNaN(a)?0:!isFinite(a)||0===a?a:(0>a?-1:1)*Math.abs(a)|0}
function as2ToInt32(a){a=as2ToNumber(a);return isNaN(a)||!isFinite(a)||0===a?0:a|0}
function as2ToString(a){switch(as2GetType(a)){case "undefined":return 7<=AS2Context.instance.swfVersion?"undefined":"";case "null":return"null";case "boolean":return a?"true":"false";case "number":return a.toString();case "string":return a;case "movieclip":return a.$targetPath;case "object":var b=a.toString!==Function.prototype.toString?a.toString():a;return"string"===typeof b?b:"function"===typeof a?"[type Function]":"[type Object]"}}
function as2Compare(a,b){var e=as2ToPrimitive(a),d=as2ToPrimitive(b);return"string"===typeof e&&"string"===typeof d?e<d:as2ToNumber(e)<as2ToNumber(d)}function as2InstanceOf(a,b){return a instanceof b?!0:!1}function as2ResolveProperty(a,b){var e=Multiname.getPublicQualifiedName(b);if(e in a)return b;if(isNumeric(b))return null;var e=e.toLowerCase(),d;for(d in a)if(d.toLowerCase()===e)return d.substr(Multiname.PUBLIC_QUALIFIED_NAME_PREFIX.length);return null}
function as2GetPrototype(a){return a&&a.asGetPublicProperty("prototype")}function isAvm2Class(a){return"object"===typeof a&&null!==a&&"instanceConstructor"in a}
function as2CreatePrototypeProxy(a){var b=a.asGetPublicProperty("prototype");return"undefined"===typeof Proxy?(console.error("ES6 proxies are not found"),b):Proxy.create({getOwnPropertyDescriptor:function(a){return Object.getOwnPropertyDescriptor(b,a)},getPropertyDescriptor:function(a){for(var d=b;d;d=Object.getPrototypeOf(d)){var f=Object.getOwnPropertyDescriptor(d,a);if(f)return f}},getOwnPropertyNames:function(){return Object.getOwnPropertyNames(b)},getPropertyNames:function(){for(var a=Object.getOwnPropertyNames(b),
d=Object.getPrototypeOf(b);d;d=Object.getPrototypeOf(d))a=a.concat(Object.getOwnPropertyNames(d));return a},defineProperty:function(e,d){d&&("function"===typeof d.value&&d.value._setClass&&d.value._setClass(a),"function"===typeof d.get&&d.get._setClass&&d.get._setClass(a),"function"===typeof d.set&&d.set._setClass&&d.set._setClass(a));return Object.defineProperty(b,e,d)},"delete":function(a){return delete b[a]},fix:function(){}})}
function executeActions(a,b,e){var d=ActionTracerFactory.get(),f=b.initialScope.create(e),g=AS2Context.instance;try{AS2Context.instance=b,b.defaultTarget=e,b.globals.asSetPublicProperty("this",e),d.message("ActionScript Execution Starts"),d.indent(),interpretActions(a,f,null,[])}finally{b.instructionsExecuted=0,b.errorsIgnored=0,d.unindent(),d.message("ActionScript Execution Stops"),AS2Context.instance=g}}
function lookupAS2Children(a,b,e){var d=a.split(/[\/.]/g);""===d[d.length-1]&&d.pop();if(""===d[0]||"_level0"===d[0]||"_root"===d[0])b=e,d.shift();for(;0<d.length;){e=b;b=b.$lookupChild(d[0]);if(!b)throw Error(d[0]+" (expr "+a+") is not found in "+e._target);d.shift()}return b}
function createBuiltinType(a,b){if(a===Array){var e=b;1==b.length&&"number"===typeof b[0]&&(e=[],e.length=b[0]);return e}if(a===Boolean||a===Number||a===String||a===Function)return a.apply(null,b);if(a===Date)switch(b.length){case 0:return new Date;case 1:return new Date(b[0]);default:return new Date(b[0],b[1],2<b.length?b[2]:1,3<b.length?b[3]:0,4<b.length?b[4]:0,5<b.length?b[5]:0,6<b.length?b[6]:0)}if(a===Object)return{}}var AS2_SUPER_STUB={};
function interpretActions(a,b,e,d){function f(a){if(a)try{z.defaultTarget=lookupAS2Children(a,B,u.asGetPublicProperty("_root"))}catch(b){throw z.defaultTarget=null,b;}else z.defaultTarget=D}function g(a,d,f,g){var l,m=function(){var a={};a.asSetPublicProperty("this",this);a.asSetPublicProperty("arguments",arguments);a.asSetPublicProperty("super",AS2_SUPER_STUB);a.asSetPublicProperty("__class",l);var m=b.create(a),r;for(r=0;r<arguments.length||r<d.length;r++)a.asSetPublicProperty(d[r],arguments[r]);
a=[];if(f)for(r=0;r<f.length;r++){var p=f[r];if(p)if("param"==p.type)a[r]=arguments[p.index];else switch(p.name){case "this":a[r]=this;break;case "arguments":a[r]=arguments;break;case "super":a[r]=AS2_SUPER_STUB;break;case "_global":a[r]=u;break;case "_parent":a[r]=D.asGetPublicProperty("_parent");break;case "_root":a[r]=u.asGetPublicProperty("_root")}}r=AS2Context.instance;var s;try{AS2Context.instance=z;s=0===z.instructionsExecuted;z.defaultTarget=D;E.indent();z.stackDepth++;if(256<=z.stackDepth)throw new AS2CriticalError("long running script -- AVM1 recursion limit is reached");
return interpretActions(g,m,e,a)}finally{s&&(z.instructionsExecuted=0,z.errorsIgnored=0),z.stackDepth--,E.unindent(),z.defaultTarget=B,AS2Context.instance=r}};l=m;m._setClass=function(a){l=a};m.instanceConstructor=m;m.debugName="avm1 "+(a||"<function>");a&&(m.name=a);return m}function l(a,b){var d,e,f;if(0<=a.indexOf(":")){e=a.split(":");d=lookupAS2Children(e[0],B,u.asGetPublicProperty("_root"));if(!d)throw Error(e[0]+" is undefined");e=e[1]}else if(0<=a.indexOf(".")){var g=a.split(".");e=g.pop();
d=u;for(f=0;f<g.length;f++)if(d=d.asGetPublicProperty(g[f])||d[g[f]],!d)throw Error(g.slice(0,f+1)+" is undefined");}if(!d)return null;f=as2ResolveProperty(d,e);return(g=null!==f)||b?{obj:d,name:f||e,resolved:g}:null}function m(){var a=D.asGetPublicProperty("this");if(a)return a;for(a=b;a;a=a.next)if(ja=as2ResolveProperty(a.scope,"this"),null!==ja)return a.scope.asGetPublicProperty(ja)}function p(a){if(D.asHasProperty(void 0,a,0))return D.asGetPublicProperty(a);var d=l(a);if(d)return d.obj.asGetPublicProperty(d.name);
for(var e,d=m(),f=b;f;f=f.next)if(e=as2ResolveProperty(f.scope,a),null!==e)return f.scope.asGetPublicProperty(e);if(d&&(e=as2ResolveProperty(d,a)))return d.asGetPublicProperty(e);if(a=isAS2MovieClip(B)&&B.$lookupChild(a))return a}function r(a){var d=p(a);if(!(d instanceof Object))throw Error('Object "'+a+'" is not found');return d}function s(a,d){if(isNaN(a)||0>a||a>d||a!=(0|a))throw Error("Invalid number of arguments: "+a);}function w(a){var d=+a.pop();s(d,a.length);for(var b=[],e=0;e<d;e++)b.push(a.pop());
return b}function v(a){for(;0<a&&A.position<A.end;){var d=128<=A.readUI8()?A.readUI16():0;A.position+=d;a--}C=A.position}var z=AS2Context.instance,A=new ActionsDataStream(a,z.swfVersion),u=z.globals,B=z.defaultTarget,y=[],D=b.scope,F=5<=z.swfVersion,E=ActionTracerFactory.get(),C;D.$nativeObject&&D.$nativeObject._deferScriptExecution&&(z.deferScriptExecution=!0);for(var M=!1,Q;A.position<A.end;)try{for(;A.position<A.end;){if(1E5<=z.instructionsExecuted++)throw new AS2CriticalError("long running script -- AVM1 instruction limit is reached");
var R=A.readUI8(),S=128<=R?A.readUI16():0;C=A.position+S;Q=0;E.print(A.position,R,y);var K,G,H,I,J,N,P,U,L,O,W,fa,ca,da,ia,ja,la,ga,Z,ea,na,ha,oa,Aa,$,ra,Ea,pa,sa,ta,aa,Oa;switch(R|0){case 129:K=A.readUI16();var Ia=A.readUI8();C++;fa=6===Ia?"gotoAndPlay":"gotoAndStop";u[fa](K+1);break;case 131:var Fa=A.readString(),Pa=A.readString();u.getURL(Fa,Pa);break;case 4:u.nextFrame();break;case 5:u.prevFrame();break;case 6:u.play();break;case 7:u.stop();break;case 8:u.toggleHighQuality();break;case 9:u.stopAllSounds();
break;case 138:K=A.readUI16();H=A.readUI8();u.ifFrameLoaded(K)||v(H);break;case 139:da=A.readString();f(da);break;case 140:var ua=A.readString();u.gotoLabel(ua);break;case 150:for(;A.position<C;){G=A.readUI8();switch(G){case 0:ga=A.readString();break;case 1:ga=A.readFloat();break;case 2:ga=null;break;case 3:ga=void 0;break;case 4:ga=d[A.readUI8()];break;case 5:ga=A.readBoolean();break;case 6:ga=A.readDouble();break;case 7:ga=A.readInteger();break;case 8:ga=e[A.readUI8()];break;case 9:ga=e[A.readUI16()];
break;default:throw Error("Unknown value type: "+G);}y.push(ga)}break;case 23:y.pop();break;case 10:Z=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());y.push(Z+ea);break;case 11:Z=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());y.push(ea-Z);break;case 12:Z=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());y.push(Z*ea);break;case 13:Z=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());na=ea/Z;y.push(F?na:isFinite(na)?na:"#ERROR#");break;case 14:Z=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());ha=Z==ea;y.push(F?ha:ha?
1:0);break;case 15:Z=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());ha=ea<Z;y.push(F?ha:ha?1:0);break;case 16:Z=as2ToBoolean(y.pop());ea=as2ToBoolean(y.pop());ha=Z&&ea;y.push(F?ha:ha?1:0);break;case 17:Z=as2ToBoolean(y.pop());ea=as2ToBoolean(y.pop());ha=Z||ea;y.push(F?ha:ha?1:0);break;case 18:ha=!as2ToBoolean(y.pop());y.push(F?ha:ha?1:0);break;case 19:oa=as2ToString(y.pop());Aa=as2ToString(y.pop());ha=oa==Aa;y.push(F?ha:ha?1:0);break;case 20:case 49:oa=as2ToString(y.pop());y.push(u.length(oa));break;
case 33:oa=as2ToString(y.pop());Aa=as2ToString(y.pop());y.push(Aa+oa);break;case 21:H=y.pop();I=y.pop();ga=as2ToString(y.pop());y.push(u.substring(ga,I,H));break;case 53:H=y.pop();I=y.pop();ga=as2ToString(y.pop());y.push(u.mbsubstring(ga,I,H));break;case 41:oa=as2ToString(y.pop());Aa=as2ToString(y.pop());ha=Aa<oa;y.push(F?ha:ha?1:0);break;case 24:y.push(u.int(y.pop()));break;case 50:y.push(u.chr(y.pop()));break;case 54:y.push(u.mbchr(y.pop()));break;case 51:y.push(u.ord(y.pop()));break;case 55:y.push(u.mbord(y.pop()));
break;case 153:L=A.readSI16();C+=L;break;case 157:L=A.readSI16();(ha=!!y.pop())&&(C+=L);break;case 158:ua=y.pop();u.call(ua);break;case 28:W=""+y.pop();Q++;y.push(p(W));break;case 29:ga=y.pop();W=""+y.pop();a:{var xa=W,Ma=ga;if(D.asHasProperty(void 0,xa,0))D.asSetPublicProperty(xa,Ma);else{var ya=l(xa,!0);if(ya)ya.obj.asSetPublicProperty(ya.name,Ma);else{var ka=void 0,za=m();if(za&&(ka=as2ResolveProperty(za,xa)))za.asSetPublicProperty(ka,Ma);else{for(var Qa=b;Qa.next;Qa=Qa.next)if(ka=as2ResolveProperty(Qa.scope,
xa),null!==ka){Qa.scope.asSetPublicProperty(ka,Ma);break a}(za||D).asSetPublicProperty(xa,Ma)}}}}break;case 154:sa=A.readUI8();var Sa;switch(sa>>6&3){case 1:Sa="GET";break;case 2:Sa="POST"}var $a=sa&2?sa&1?u.loadVariables:u.loadMovie:sa&1?u.loadVariablesNum:u.loadMovieNum;J=y.pop();var ab=y.pop();$a.call(u,ab,J,Sa);break;case 159:sa=A.readUI8();var Xa=[y.pop()];sa&2&&Xa.push(A.readUI16());(sa&1?u.gotoAndPlay:u.gotoAndStop).apply(u,Xa);break;case 32:J=y.pop();f(J);break;case 34:I=y.pop();J=y.pop();
Q++;y.push(u.getAS2Property(J,I));break;case 35:ga=y.pop();I=y.pop();J=y.pop();u.setAS2Property(J,I,ga);break;case 36:var bb=y.pop();J=y.pop();var cb=y.pop();u.duplicateMovieClip(cb,J,bb);break;case 37:J=y.pop();u.removeMovieClip(J);break;case 39:J=y.pop();var db=y.pop(),Ta=!y.pop()?null:{y2:y.pop(),x2:y.pop(),y1:y.pop(),x1:y.pop()};aa=[J,db];Ta&&(aa=aa.push(Ta.x1,Ta.y1,Ta.x2,Ta.y2));u.startDrag.apply(u,aa);break;case 40:u.stopDrag();break;case 141:H=A.readUI8();K=y.pop();u.ifFrameLoaded(K)||v(H);
break;case 38:ga=y.pop();u.trace(ga);break;case 52:y.push(u.getTimer());break;case 48:y.push(u.random(y.pop()));break;case 61:ca=y.pop();ra=w(y);Q++;var Ya=ca,Za=p(Ya);if(!(Za instanceof Function))throw Error('Function "'+Ya+'" is not found');Ea=Za;pa=Ea.apply(D,ra);y.push(pa);break;case 82:fa=y.pop();$=y.pop();ra=w(y);Q++;if(null!==fa&&void 0!==fa&&""!==fa){if(null===$||void 0===$)throw Error("Cannot call method "+fa+" of "+typeof $);$!==AS2_SUPER_STUB?J=Object($):(J=as2GetPrototype(p("__class").__super),
$=p("this"));ja=as2ResolveProperty(J,fa);if(null===ja)throw Error("Method "+fa+" is not defined.");pa=J.asGetPublicProperty(ja).apply($,ra)}else pa=$!==AS2_SUPER_STUB?$.apply($,ra):p("__class").__super.apply(p("this"),ra);y.push(pa);break;case 136:H=A.readUI16();e=[];for(ta=0;ta<H;ta++)e.push(A.readString());break;case 155:ca=A.readString();H=A.readUI16();ra=[];for(ta=0;ta<H;ta++)ra.push(A.readString());U=A.readUI16();C+=U;Ea=g(ca,ra,null,A.readBytes(U));ca?D.asSetPublicProperty(ca,Ea):y.push(Ea);
break;case 60:ga=y.pop();O=y.pop();D.asSetPublicProperty(O,ga);break;case 65:O=y.pop();D.asSetPublicProperty(O,void 0);break;case 58:O=y.pop();$=y.pop();$.asSetPublicProperty(O,void 0);y.push($.asDeleteProperty(void 0,O,0));break;case 59:O=y.pop();a:{for(var Wa=O,ma=b;ma;ma=ma.next)if(ma.scope.asHasProperty(void 0,Wa,0)){ma.scope.asSetPublicProperty(Wa,void 0);pa=ma.scope.asDeleteProperty(void 0,Wa,0);break a}pa=!1}y.push(pa);break;case 70:la=y.pop();y.push(null);$=r(la);forEachPublicProperty($,function(a){y.push(a)});
break;case 73:Z=y.pop();ea=y.pop();y.push(Z==ea);break;case 78:O=y.pop();$=y.pop();"prototype"===O?y.push(as2CreatePrototypeProxy($)):(ja=as2ResolveProperty(Object($),O),y.push(null===ja?void 0:$.asGetPublicProperty(ja)));break;case 66:$=w(y);y.push($);break;case 67:H=+y.pop();s(H,y.length>>1);$={};for(ta=0;ta<H;ta++)ga=y.pop(),O=y.pop(),$.asSetPublicProperty(O,ga);y.push($);break;case 83:fa=y.pop();$=y.pop();ra=w(y);Q++;if(null!==fa&&void 0!==fa&&""!==fa){ja=as2ResolveProperty($,fa);if(null===ja)throw Error("Method "+
fa+" is not defined.");if(null===$||void 0===$)throw Error("Cannot call new using method "+ja+" of "+typeof $);N=$.asGetPublicProperty(ja)}else{if(null===$||void 0===$)throw Error("Cannot call new using "+typeof $);N=$}isAvm2Class($)?pa=construct($,ra):(pa=Object.create(as2GetPrototype(N)||as2GetPrototype(Object)),N.apply(pa,ra));pa.constructor=N;y.push(pa);break;case 64:la=y.pop();$=r(la);ra=w(y);Q++;pa=createBuiltinType($,ra);"undefined"===typeof pa&&(isAvm2Class($)?pa=construct($,ra):(pa=Object.create(as2GetPrototype($)||
as2GetPrototype(Object)),$.apply(pa,ra)),pa.constructor=$);y.push(pa);break;case 79:ga=y.pop();O=y.pop();$=y.pop();$.asSetPublicProperty(O,ga);break;case 69:$=y.pop();y.push("movieclip"===as2GetType($)?$._target:void 0);break;case 148:U=A.readUI16();$=y.pop();C+=U;var eb=A.readBytes(U),fb=b.create(Object($));interpretActions(eb,fb,e,d);break;case 74:y.push(as2ToNumber(y.pop()));break;case 75:y.push(as2ToString(y.pop()));break;case 68:$=y.pop();pa=as2GetType($);y.push(pa);break;case 71:Z=as2ToAddPrimitive(y.pop());
ea=as2ToAddPrimitive(y.pop());"string"===typeof Z||"string"===typeof ea?y.push(as2ToString(ea)+as2ToString(Z)):y.push(as2ToNumber(ea)+as2ToNumber(Z));break;case 72:Z=y.pop();ea=y.pop();y.push(as2Compare(ea,Z));break;case 63:Z=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());y.push(ea%Z);break;case 96:Z=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea&Z);break;case 99:Z=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea<<Z);break;case 97:Z=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea|Z);
break;case 100:Z=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea>>Z);break;case 101:Z=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea>>>Z);break;case 98:Z=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea^Z);break;case 81:Z=as2ToNumber(y.pop());Z--;y.push(Z);break;case 80:Z=as2ToNumber(y.pop());Z++;y.push(Z);break;case 76:y.push(y[y.length-1]);break;case 62:return y.pop();case 77:y.push(y.pop(),y.pop());break;case 135:Oa=A.readUI8();d[Oa]=y[y.length-1];break;case 84:P=y.pop();$=y.pop();
y.push(as2InstanceOf(Object($),P));break;case 85:$=y.pop();y.push(null);forEachPublicProperty($,function(a){y.push(a)});break;case 102:Z=y.pop();ea=y.pop();y.push(ea===Z);break;case 103:Z=y.pop();ea=y.pop();y.push(as2Compare(Z,ea));break;case 104:oa=as2ToString(y.pop());Aa=as2ToString(y.pop());ha=Aa>oa;y.push(F?ha:ha?1:0);break;case 142:ca=A.readString();H=A.readUI16();A.readUI8();sa=A.readUI16();var La=[];ra=[];for(ta=0;ta<H;ta++)Oa=A.readUI8(),ia=A.readString(),ra.push(ia),Oa&&(La[Oa]={type:"param",
name:ia,index:ta});U=A.readUI16();C+=U;var va=1;sa&1&&(La[va++]={type:"var",name:"this"});sa&4&&(La[va++]={type:"var",name:"arguments"});sa&16&&(La[va++]={type:"var",name:"super"});sa&64&&(La[va++]={type:"var",name:"_root"});sa&128&&(La[va++]={type:"var",name:"_parent"});sa&256&&(La[va++]={type:"var",name:"_global"});Ea=g(ca,ra,La,A.readBytes(U));ca?D.asSetPublicProperty(ca,Ea):y.push(Ea);break;case 105:var Ca=y.pop();P=y.pop();$=Object.create(Ca.traitsPrototype||as2GetPrototype(Ca),{constructor:{value:P,
enumerable:!1}});P.__super=Ca;P.prototype=$;break;case 43:$=y.pop();P=y.pop();y.push(as2InstanceOf($,P)?$:null);break;case 44:P=y.pop();H=+y.pop();s(H,y.length);var Ra=[];for(ta=0;ta<H;ta++)Ra.push(y.pop());P.$interfaces=Ra;break;case 143:sa=A.readUI8();var qa=!!(sa&4),Ba=!!(sa&2),Ja=!!(sa&1),X=A.readUI16(),Y=A.readUI16(),Da=A.readUI16(),Ga=qa?A.readUI8():A.readString();C+=X+Y+Da;var Ka=Ba,T=Ja,ba=Ga,Ha=A.readBytes(X),V=A.readBytes(Y),wa=A.readBytes(Da),Na=z.isTryCatchListening;try{z.isTryCatchListening=
!0,interpretActions(Ha,b,e,d)}catch(Ua){z.isTryCatchListening=Na;if(!T)throw Ua;if(!(Ua instanceof AS2Error))throw Ua;"string"===typeof ba?D[ba]=Ua.error:d[ba]=Ua.error;interpretActions(V,b,e,d)}finally{z.isTryCatchListening=Na,Ka&&interpretActions(wa,b,e,d)}break;case 42:throw $=y.pop(),new AS2Error($);case 45:ra=w(y);Q++;pa=u.fscommand.apply(null,ra);y.push(pa);break;case 137:A.readUI8();break;case 0:return;default:throw Error("Unknown action code: "+R);}A.position=C;M=!1}}catch(Va){if(Va instanceof
AS2CriticalError)throw Va;if(Va instanceof AS2Error)throw Va;TelemetryService.reportTelemetry({topic:"error",error:1});A.position=C;if(0<Q)for(;Q--;)y.push(void 0);if(!M){if(1E3<=z.errorsIgnored++)throw new AS2CriticalError("long running script -- AVM1 errors limit is reached");console.error("AVM1 error: "+Va);M=!0}}}
var ActionTracerFactory=function(){function a(){}var b={print:function(){},indent:function(){},unindent:function(){},message:function(){}};a.get=function(){return b};return a}(),ActionNamesMap={"0":"EOA",4:"ActionNextFrame",5:"ActionPreviousFrame",6:"ActionPlay",7:"ActionStop",8:"ActionToggleQuality",9:"ActionStopSounds",10:"ActionAdd",11:"ActionSubtract",12:"ActionMultiply",13:"ActionDivide",14:"ActionEquals",15:"ActionLess",16:"ActionAnd",17:"ActionOr",18:"ActionNot",19:"ActionStringEquals",20:"ActionStringLength",
21:"ActionStringExtract",23:"ActionPop",24:"ActionToInteger",28:"ActionGetVariable",29:"ActionSetVariable",32:"ActionSetTarget2",33:"ActionStringAdd",34:"ActionGetProperty",35:"ActionSetProperty",36:"ActionCloneSprite",37:"ActionRemoveSprite",38:"ActionTrace",39:"ActionStartDrag",40:"ActionEndDrag",41:"ActionStringLess",42:"ActionThrow",43:"ActionCastOp",44:"ActionImplementsOp",45:"ActionFSCommand2",48:"ActionRandomNumber",49:"ActionMBStringLength",50:"ActionCharToAscii",51:"ActionAsciiToChar",52:"ActionGetTime",
53:"ActionMBStringExtrac",54:"ActionMBCharToAscii",55:"ActionMBAsciiToChar",58:"ActionDelete",59:"ActionDelete2",60:"ActionDefineLocal",61:"ActionCallFunction",62:"ActionReturn",63:"ActionModulo",64:"ActionNewObject",65:"ActionDefineLocal2",66:"ActionInitArray",67:"ActionInitObject",68:"ActionTypeOf",69:"ActionTargetPath",70:"ActionEnumerate",71:"ActionAdd2",72:"ActionLess2",73:"ActionEquals2",74:"ActionToNumber",75:"ActionToString",76:"ActionPushDuplicate",77:"ActionStackSwap",78:"ActionGetMember",
79:"ActionSetMember",80:"ActionIncrement",81:"ActionDecrement",82:"ActionCallMethod",83:"ActionNewMethod",84:"ActionInstanceOf",85:"ActionEnumerate2",96:"ActionBitAnd",97:"ActionBitOr",98:"ActionBitXor",99:"ActionBitLShift",100:"ActionBitRShift",101:"ActionBitURShift",102:"ActionStrictEquals",103:"ActionGreater",104:"ActionStringGreater",105:"ActionExtends",129:"ActionGotoFrame",131:"ActionGetURL",135:"ActionStoreRegister",136:"ActionConstantPool",137:"ActionStrictMode",138:"ActionWaitForFrame",139:"ActionSetTarget",
140:"ActionGoToLabel",141:"ActionWaitForFrame2",142:"ActionDefineFunction",143:"ActionTry",148:"ActionWith",150:"ActionPush",153:"ActionJump",154:"ActionGetURL2",155:"ActionDefineFunction",157:"ActionIf",158:"ActionCall",159:"ActionGotoFrame2"};"undefined"!==typeof GLOBAL&&(GLOBAL.createBuiltinType=createBuiltinType,GLOBAL.executeActions=executeActions,GLOBAL.AS2Context=AS2Context);
var $DEBUG,release=!0,checkArguments=!0,useSurrogates=!0,useAsAdd=!0,sealConstTraits=!1,c4CoerceNonPrimitiveParameters=!1,c4CoerceNonPrimitive=!1,c4AsTypeLate=!0,inBrowser="undefined"!=typeof console;this.performance||(this.performance={});this.performance.now||(this.performance.now=dateNow);function backtrace(){try{throw Error();}catch(a){return a.stack?a.stack.split("\n").slice(2).join("\n"):""}}function error(a){inBrowser||console.warn(backtrace());throw Error(a);}
function assert(a){""===a&&(a=!0);if(!a){var b=Array.prototype.slice.call(arguments);b.shift();error(b.join(""))}}function assertNotImplemented(a,b){a||error("NotImplemented: "+b)}function warning(){!0}function notUsed(){!0}function notImplemented(){!0}function somewhatImplemented(a){warning("somewhatImplemented: "+a)}function unexpected(){}function makeForwardingGetter(a){return new Function('return this["'+a+'"]')}
function makeForwardingSetter(a){return new Function("value",'this["'+a+'"] = value;')}function defineReadOnlyProperty(a,b,e){Object.defineProperty(a,b,{value:e,writable:!1,configurable:!0,enumerable:!1})}function bindSafely(a,b){!0;var e=a.bind(b);e.boundTo=b;return e}function createEmptyObject(){return Object.create(null)}
function getOwnPropertyDescriptors(a){for(var b=createEmptyObject(),e=Object.getOwnPropertyNames(a),d=0;d<e.length;d++)b[e[d]]=Object.getOwnPropertyDescriptor(a,e[d]);return b}function cloneObject(a){var b=Object.create(null),e;for(e in a)b[e]=a[e];return b}function extendObject(a,b){var e=Object.create(a);if(b)for(var d in b)e[d]=b[d];return e}function copyProperties(a,b){for(var e in b)a[e]=b[e]}
function toSafeString(a){return"string"===typeof a?'"'+a+'"':"number"===typeof a||"boolean"===typeof a?String(a):typeof a}function toSafeArrayString(a){for(var b=[],e=0;e<a.length;e++)b.push(toSafeString(a[e]));return b.join(", ")}function getLatestGetterOrSetterPropertyDescriptor(a,b){for(var e={};a;){var d=Object.getOwnPropertyDescriptor(a,b);d&&(e.get=e.get||d.get,e.set=e.set||d.set);if(e.get&&e.set)break;a=Object.getPrototypeOf(a)}return e}
function defineNonEnumerableGetterOrSetter(a,b,e,d){var f=getLatestGetterOrSetterPropertyDescriptor(a,b);f.configurable=!0;f.enumerable=!1;d?f.get=e:f.set=e;Object.defineProperty(a,b,f)}function defineNonEnumerableGetter(a,b,e){Object.defineProperty(a,b,{get:e,configurable:!0,enumerable:!1})}function defineNonEnumerableSetter(a,b,e){Object.defineProperty(a,b,{set:e,configurable:!0,enumerable:!1})}
function defineNonEnumerableProperty(a,b,e){Object.defineProperty(a,b,{value:e,writable:!0,configurable:!0,enumerable:!1})}function defineNonEnumerableForwardingProperty(a,b,e){Object.defineProperty(a,b,{get:makeForwardingGetter(e),set:makeForwardingSetter(e),writable:!0,configurable:!0,enumerable:!1})}function defineNewNonEnumerableProperty(a,b,e){!0;defineNonEnumerableProperty(a,b,e)}function isNullOrUndefined(a){return void 0==a}function isPowerOfTwo(a){return a&&0===(a&a-1)}
function time(a,b){for(var e=performance.now(),d=0;d<b;d++)a();e=(performance.now()-e)/b;console.info("Took: "+e.toFixed(2)+"ms.");return e}function clamp(a,b,e){return a<b?b:a>e?e:a}function fromCharCodeArray(a){for(var b="",e=0;e<a.length;e+=16384)var d=Math.min(a.length-e,16384),b=b+String.fromCharCode.apply(null,a.subarray(e,e+d));return b}function hasOwnProperty(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
function toKeyValueArray(a){var b=Object.prototype.hasOwnProperty,e=[],d;for(d in a)b.call(a,d)&&e.push([d,a[d]]);return e}function isNumeric(a){if("number"===typeof a)return a===(a|0);if("string"!==typeof a||0===a.length)return!1;if("0"===a)return!0;var b=a.charCodeAt(0);if(49<=b&&57>=b){for(var e=1,d=a.length;e<d;e++)if(b=a.charCodeAt(e),!(48<=b&&57>=b))return!1;return!0}return!1}function boxValue(a){return isNullOrUndefined(a)||isObject(a)?a:Object(a)}
function isObject(a){return"object"===typeof a||"function"===typeof a}function isString(a){return"string"===typeof a}function isFunction(a){return"function"===typeof a}function isNumber(a){return"number"===typeof a}function toNumber(a){return+a}function setBitFlags(a,b,e){return e?a|b:a&~b}function getBitFlags(a,b){return!!(a&b)}function popManyInto(a,b,e){!0;for(var d=b-1;0<=d;d--)e[d]=a.pop();e.length=b}
(function(){function a(a,d,b){a[d]||Object.defineProperty(a,d,{value:b,writable:!0,configurable:!0,enumerable:!1})}var b=String.prototype;a(b,"padRight",function(a,d){var b=this,g=b.replace(/\033\[[0-9]*m/g,"").length;if(!a||g>=d)return b;for(var g=(d-g)/a.length,l=0;l<g;l++)b+=a;return b});a(b,"padLeft",function(a,d){var b=this,g=b.length;if(!a||g>=d)return b;for(var g=(d-g)/a.length,l=0;l<g;l++)b=a+b;return b});a(b,"trim",function(){return this.replace(/^\s+|\s+$/g,"")});a(b,"endsWith",function(a){return-1!==
this.indexOf(a,this.length-a.length)});b=Array.prototype;a(b,"popMany",function(a){!0;var d=this.length-a,b=this.slice(d,this.length);this.splice(d,a);return b});a(b,"pushMany",function(a){for(var d=0;d<a.length;d++)this.push(a[d])});a(b,"clone",function(){return this.slice(0)});a(b,"first",function(){!0;return this[0]});a(b,"last",function(){!0;return this[this.length-1]});a(b,"peek",function(){!0;return this[this.length-1]});a(b,"empty",function(){return 0===this.length});a(b,"pushUnique",function(a){for(var d=
0,b=this.length;d<b;d++)if(this[d]===a)return;this.push(a)});a(b,"unique",function(){for(var a=[],d=0;d<this.length;d++)a.pushUnique(this[d]);return a});a(b,"replace",function(a,d){if(a===d)return 0;for(var b=0,g=0;g<this.length;g++)this[g]===a&&(this[g]=d,b++);return b});a(b,"count",function(a){for(var b=0,f=0;f<this.length;f++)this[f]===a&&b++;return b});a(b,"notEmpty",function(){return 0<this.length});a(b,"contains",function(a){return 0<=this.indexOf(a)});a(b,"top",function(){return this.length&&
this[this.length-1]});a(b,"mapWithIndex",function(a){for(var b=[],f=0;f<this.length;f++)b.push(a(this[f],f));return b})})();
function utf8decode(a){for(var b=new Uint8Array(4*a.length),e=0,d=0,f=a.length;d<f;d++){var g=a.charCodeAt(d);if(127>=g)b[e++]=g;else{if(55296<=g&&56319>=g){var l=a.charCodeAt(d+1);56320<=l&&57343>=l&&(g=((g&1023)<<10)+(l&1023)+65536,++d)}0!==(g&4292870144)?(b[e++]=248|g>>>24&3,b[e++]=128|g>>>18&63,b[e++]=128|g>>>12&63,b[e++]=128|g>>>6&63):0!==(g&4294901760)?(b[e++]=240|g>>>18&7,b[e++]=128|g>>>12&63,b[e++]=128|g>>>6&63):0!==(g&4294965248)?(b[e++]=224|g>>>12&15,b[e++]=128|g>>>6&63):b[e++]=192|g>>>
6&31;b[e++]=128|g&63}}return b.subarray(0,e)}
function utf8encode(a){for(var b=0,e="";b<a.length;){var d=a[b++]&255;if(127>=d)e+=String.fromCharCode(d);else{var f=192,g=5;do{if((d&(f>>1|128))===f)break;f=f>>1|128;--g}while(0<=g);if(0>=g)e+=String.fromCharCode(d);else{for(var d=d&(1<<g)-1,f=!1,l=5;l>=g;--l){var m=a[b++];if(128!=(m&192)){f=!0;break}d=d<<6|m&63}if(f)for(g=b-(7-l);g<b;++g)e+=String.fromCharCode(a[g]&255);else e=65536<=d?e+String.fromCharCode(d-65536>>10&1023|55296,d&1023|56320):e+String.fromCharCode(d)}}}return e}
function getFlags(a,b){for(var e="",d=0;d<b.length;d++)a&1<<d&&(e+=b[d]+" ");return 0===e.length?"":e.trim()}function bitCount(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}function escapeString(a){void 0!==a&&(a=a.replace(/[^\w$]/gi,"$"),/^\d/.test(a)&&(a="$"+a));return a}
function BitSetFunctor(a){function b(){this.dirty=this.count=0;this.size=d;this.bits=new Uint32Array(d>>5)}function e(){this.dirty=this.count=0;this.size=d;this.bits=0}var d=a+31>>5<<5,f=1===d>>5,g=f?e:b;g.ADDRESS_BITS_PER_WORD=5;g.BITS_PER_WORD=32;g.BIT_INDEX_MASK=31;g.singleword=f;b.prototype={recount:function(){if(this.dirty){for(var a=this.bits,b=0,d=0,e=a.length;d<e;d++)var f=a[d],f=f-(f>>1&1431655765),f=(f&858993459)+(f>>2&858993459),b=b+(16843009*(f+(f>>4)&252645135)>>24);this.count=b;this.dirty=
0}},set:function(a){var b=a>>5,d=this.bits[b];a=d|1<<(a&31);this.bits[b]=a;this.dirty|=d^a},setAll:function(){for(var a=this.bits,b=0,d=a.length;b<d;b++)a[b]=4294967295;this.count=this.size;this.dirty=0},assign:function(a){this.count=a.count;this.dirty=a.dirty;this.size=a.size;for(var b=0,d=this.bits.length;b<d;b++)this.bits[b]=a.bits[b]},clear:function(a){var b=a>>5,d=this.bits[b];a=d&~(1<<(a&31));this.bits[b]=a;this.dirty|=d^a},get:function(a){return 0!==(this.bits[a>>5]&1<<(a&31))},clearAll:function(){for(var a=
this.bits,b=0,d=a.length;b<d;b++)a[b]=0;this.dirty=this.count=0},_union:function(a){var b=this.dirty,d=this.bits;a=a.bits;for(var e=0,f=d.length;e<f;e++){var g=d[e],v=g|a[e];d[e]=v;b|=g^v}this.dirty=b},intersect:function(a){var b=this.dirty,d=this.bits;a=a.bits;for(var e=0,f=d.length;e<f;e++){var g=d[e],v=g&a[e];d[e]=v;b|=g^v}this.dirty=b},subtract:function(a){var b=this.dirty,d=this.bits;a=a.bits;for(var e=0,f=d.length;e<f;e++){var g=d[e],v=g&~a[e];d[e]=v;b|=g^v}this.dirty=b},negate:function(){for(var a=
this.dirty,b=this.bits,d=0,e=b.length;d<e;d++){var f=b[d],g=~f;b[d]=g;a|=f^g}this.dirty=a},forEach:function(a){!0;for(var b=this.bits,d=0,e=b.length;d<e;d++){var f=b[d];if(f)for(var g=0;32>g;g++)f&1<<g&&a(32*d+g)}},toArray:function(){for(var a=[],b=this.bits,d=0,e=b.length;d<e;d++){var f=b[d];if(f)for(var g=0;32>g;g++)f&1<<g&&a.push(32*d+g)}return a},equals:function(a){if(this.size!==a.size)return!1;var b=this.bits;a=a.bits;for(var d=0,e=b.length;d<e;d++)if(b[d]!==a[d])return!1;return!0},contains:function(a){if(this.size!==
a.size)return!1;var b=this.bits;a=a.bits;for(var d=0,e=b.length;d<e;d++)if((b[d]|a[d])!==b[d])return!1;return!0},toBitString:function(b,d){b=b||"1";d=d||"0";for(var e="",f=0;f<a;f++)e+=this.get(f)?b:d;return e},length:a,toString:function(b){for(var d=[],e=0;e<a;e++)this.get(e)&&d.push(b?b[e]:e);return d.join(", ")},isEmpty:function(){this.recount();return 0===this.count},clone:function(){var a=new b;a._union(this);return a}};e.prototype={recount:function(){if(this.dirty){var a=this.bits,a=a-(a>>1&
1431655765),a=(a&858993459)+(a>>2&858993459);this.count=0+(16843009*(a+(a>>4)&252645135)>>24);this.dirty=0}},set:function(a){var b=this.bits;this.bits=a=b|1<<(a&31);this.dirty|=b^a},setAll:function(){this.bits=4294967295;this.count=this.size;this.dirty=0},assign:function(a){this.count=a.count;this.dirty=a.dirty;this.size=a.size;this.bits=a.bits},clear:function(a){var b=this.bits;this.bits=a=b&~(1<<(a&31));this.dirty|=b^a},get:function(a){return 0!==(this.bits&1<<(a&31))},clearAll:function(){this.dirty=
this.count=this.bits=0},_union:function(a){var b=this.bits;this.bits=a=b|a.bits;this.dirty=b^a},intersect:function(a){var b=this.bits;this.bits=a=b&a.bits;this.dirty=b^a},subtract:function(a){var b=this.bits;this.bits=a=b&~a.bits;this.dirty=b^a},negate:function(){var a=this.bits,b=~a;this.bits=b;this.dirty=a^b},forEach:function(a){!0;var b=this.bits;if(b)for(var d=0;32>d;d++)b&1<<d&&a(d)},toArray:function(){var a=[],b=this.bits;if(b)for(var d=0;32>d;d++)b&1<<d&&a.push(d);return a},equals:function(a){return this.bits===
a.bits},contains:function(a){var b=this.bits;return(b|a.bits)===b},isEmpty:function(){this.recount();return 0===this.count},clone:function(){var a=new e;a._union(this);return a},toBitString:b.prototype.toBitString,toString:b.prototype.toString,length:a};return g}
function base64ArrayBuffer(a){var b="";a=new Uint8Array(a);for(var e=a.byteLength,d=e%3,e=e-d,f,g,l,m,p=0;p<e;p+=3)m=a[p]<<16|a[p+1]<<8|a[p+2],f=(m&16515072)>>18,g=(m&258048)>>12,l=(m&4032)>>6,m&=63,b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m];1==d?(m=a[e],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&
252)>>2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&3)<<4]+"=="):2==d&&(m=a[e]<<8|a[e+1],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&64512)>>10]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&1008)>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&15)<<2]+"=");return b}
var PURPLE="\u001b[94m",YELLOW="\u001b[93m",GREEN="\u001b[92m",RED="\u001b[91m",ENDC="\u001b[0m",IndentingWriter=function(){function a(a,d){this.tab="  ";this.padding="";this.suppressOutput=a;this.out=d||b}var b=inBrowser?console.info.bind(console):print;a.prototype.writeLn=function(a){this.suppressOutput||this.out(this.padding+a)};a.prototype.writeLns=function(a){a=a.split("\n");for(var b=0;b<a.length;b++)this.writeLn(a[b])};a.prototype.debugLn=function(a){this.colorLn("\u001b[94m",a)};a.prototype.yellowLn=
function(a){this.colorLn("\u001b[93m",a)};a.prototype.greenLn=function(a){this.colorLn("\u001b[92m",a)};a.prototype.redLn=function(a){this.colorLn("\u001b[91m",a)};a.prototype.colorLn=function(a,b){this.suppressOutput||(inBrowser?this.out(this.padding+b):this.out(this.padding+a+b+"\u001b[0m"))};a.prototype.enter=function(a){this.suppressOutput||this.out(this.padding+a);this.indent()};a.prototype.leaveAndEnter=function(a){this.leave(a);this.indent()};a.prototype.leave=function(a){this.outdent();this.suppressOutput||
this.out(this.padding+a)};a.prototype.indent=function(){this.padding+=this.tab};a.prototype.outdent=function(){0<this.padding.length&&(this.padding=this.padding.substring(0,this.padding.length-this.tab.length))};a.prototype.writeArray=function(a,b,f){b=b||!1;for(var g=0,l=a.length;g<l;g++){var m="";b&&(m=null===a[g]?"null":void 0===a[g]?"undefined":a[g].constructor.name,m+=" ");var p=f?"":(""+g).padRight(" ",4);this.writeLn(p+m+a[g])}};return a}(),Map=function(){function a(){this.elements={}}a.prototype.set=
function(a,e){this.elements[a]=e};a.prototype.get=function(a){if(this.has(a))return this.elements[a]};a.prototype.has=function(a){return Object.prototype.hasOwnProperty.call(this.elements,a)};a.prototype.remove=function(a){this.has(a)&&delete this.elements[a]};return a}(),SortedList=function(){function a(a){!0;this.compare=a;this.head=null;this.length=0}a.RETURN=1;a.DELETE=2;a.prototype.push=function(a){!0;this.length++;if(this.head){var e=this.head,d=null;a={value:a,next:null};for(var f=this.compare;e;){if(0<
f(e.value,a.value)){d?(a.next=e,d.next=a):(a.next=this.head,this.head=a);return}d=e;e=e.next}d.next=a}else this.head={value:a,next:null}};a.prototype.forEach=function(b){for(var e=this.head,d=null;e;){var f=b(e.value);if(f===a.RETURN)break;else f===a.DELETE?e=d?d.next=e.next:this.head=this.head.next:(d=e,e=e.next)}};a.prototype.pop=function(){if(this.head){this.length--;var a=this.head;this.head=this.head.next;return a.value}};a.prototype.peek=function(){return this.head};a.prototype.contains=function(a){for(var e=
this.head;e;){if(e.value===a)return!0;e=e.next}return!1};a.prototype.toString=function(){for(var a="[",e=this.head;e;)a+=e.value.toString(),(e=e.next)&&(a+=",");return a+"]"};return a}();
(function(){function a(){this.id="$weakmap"+b++}if("function"!==typeof this.WeakMap){var b=0;a.prototype={has:function(a){return a.hasOwnProperty(this.id)},get:function(a,b){return a.hasOwnProperty(this.id)?a[this.id]:b},set:function(a,b){Object.defineProperty(a,this.id,{value:b,enumerable:!1,configurable:!0})}};this.WeakMap=a}})();
var Callback=function(){function a(){this.queues={}}a.prototype.register=function(a,e){var d=this.queues[a];if(d){if(-1<d.indexOf(e))return}else d=this.queues[a]=[];d.push(e)};a.prototype.unregister=function(a,e){var d=this.queues[a];if(d){var f=d.indexOf(e);-1!==f&&d.splice(f,1);0===d.length&&(this.queues[a]=null)}};a.prototype.notify=function(a,e){var d=this.queues[a];if(d){d=d.slice();e=sliceArguments(arguments,0);for(var f=0;f<d.length;f++)d[f].apply(null,e)}};a.prototype.notify1=function(a,e){var d=
this.queues[a];if(d)for(var d=d.slice(),f=0;f<d.length;f++)(0,d[f])(a,e)};return a}(),CircularBuffer=function(){function a(a){this.start=this.index=0;this.array=new a(b)}var b=4096;a.prototype.get=function(a){return this.array[a]};a.prototype.forEachInReverse=function(a){if(!this.isEmpty())for(var d=0===this.index?b-1:this.index-1;d!==this.start&&!a(this.array[d],d);)d=0===d?b-1:d-1};a.prototype.write=function(a){this.array[this.index]=a;this.index=this.index+1&4095;this.index===this.start&&(this.start=
this.start+1&4095)};a.prototype.isFull=function(){return this.index+1&4095===this.start};a.prototype.isEmpty=function(){return this.index===this.start};return a}();function lazyClass(a,b,e){Object.defineProperty(a,b,{get:function(){var d=performance.now(),f=e();print("Initialized Class: "+b+" "+(performance.now()-d).toFixed(4));Object.defineProperty(a,b,{value:f,writable:!0});return f},configurable:!0})}function createNewCompartment(){return newGlobal("new-compartment")}
(function(a){var b,e=function(a,b){this.parent=a;this.timers={};this.name=b;this.count=this.total=this.last=this.begin=0},d=new e(null,"Total"),f=d,g=new e(null,"Flat"),l=[];e.flat=g;e.prototype.start=function(){this.begin=performance.now()};e.prototype.stop=function(){this.last=performance.now()-this.begin;this.total+=this.last;this.count+=1};e.time=function(a,b){e.start(a);b();e.stop()};e.start=function(a){f=f.timers[a]||(f.timers[a]=new e(f,a));f.start();a=g.timers[a]||(g.timers[a]=new e(g,a));
a.start();l.push(a)};e.stop=function(){f.stop();f=f.parent;l.pop().stop()};e.stopStart=function(a){b.stop();b.start(a)};e.prototype.toJSON=function(){return{name:this.name,total:this.total,timers:this.timers}};e.prototype.trace=function(a,b){if(b)a.writeLn("SHUMWAY$JSON "+JSON.stringify({timer:this}));else{a.enter(this.name+": "+this.total.toFixed(2)+" ms, count: "+this.count+", average: "+(this.total/this.count).toFixed(2)+" ms");for(var d in this.timers)this.timers[d].trace(a);a.outdent()}};e.trace=
function(a,b){d.trace(a,b);g.trace(a,b)};b=e;var m=function(a){this.enabled=!!a;this.counts=createEmptyObject()};m.prototype.setEnabled=function(a){this.enabled=a};m.prototype.clear=function(){this.counts={}};m.prototype.toJSON=function(){return{counts:this.counts}};m.prototype.count=function(a,b){if(this.enabled)return void 0===this.counts[a]&&(this.counts[a]=0),this.counts[a]+=void 0!==b?b:1,this.counts[a]};m.prototype.trace=function(a,b){if(b)a.writeLn("SHUMWAY$JSON "+JSON.stringify({counter:this}));
else for(var d in this.counts)a.writeLn(d+": "+this.counts[d])};m.prototype.traceSorted=function(a){var b=[],d;for(d in this.counts)b.push([d,this.counts[d]]);b.sort(function(a,b){return b[1]-a[1]});b.forEach(function(b){a.writeLn(b[0]+": "+b[1])})};var p=function(a){this.samples=new Float64Array(a);this.index=this.count=0};p.prototype.push=function(a){this.count<this.samples.length&&this.count++;this.index++;this.samples[this.index%this.samples.length]=a};p.prototype.average=function(){for(var a=
0,b=0;b<this.count;b++)a+=this.samples[b];return a/this.count};a.Timer=b;a.Counter=m;a.Average=p})("undefined"===typeof exports?metrics={}:exports);var Counter=new metrics.Counter(!0),FrameCounter=new metrics.Counter(!0),Timer=metrics.Timer,systemOptions=new OptionSet("System Options"),disassemble=systemOptions.register(new Option("d","disassemble","boolean",!1,"disassemble")),traceLevel=systemOptions.register(new Option("t","traceLevel","number",0,"trace level"));window.print=function(a){console.log(a)};
var CONSTANT_Undefined=0,CONSTANT_Utf8=1,CONSTANT_Float=2,CONSTANT_Int=3,CONSTANT_UInt=4,CONSTANT_PrivateNs=5,CONSTANT_Double=6,CONSTANT_QName=7,CONSTANT_Namespace=8,CONSTANT_Multiname=9,CONSTANT_False=10,CONSTANT_True=11,CONSTANT_Null=12,CONSTANT_QNameA=13,CONSTANT_MultinameA=14,CONSTANT_RTQName=15,CONSTANT_RTQNameA=16,CONSTANT_RTQNameL=17,CONSTANT_RTQNameLA=18,CONSTANT_NameL=19,CONSTANT_NameLA=20,CONSTANT_NamespaceSet=21,CONSTANT_PackageNamespace=22,CONSTANT_PackageInternalNs=23,CONSTANT_ProtectedNamespace=
24,CONSTANT_ExplicitNamespace=25,CONSTANT_StaticProtectedNs=26,CONSTANT_MultinameL=27,CONSTANT_MultinameLA=28,CONSTANT_TypeName=29,CONSTANT_ClassSealed=1,CONSTANT_ClassFinal=2,CONSTANT_ClassInterface=4,CONSTANT_ClassProtectedNs=8,TRAIT_Slot=0,TRAIT_Method=1,TRAIT_Getter=2,TRAIT_Setter=3,TRAIT_Class=4,TRAIT_Function=5,TRAIT_Const=6,ATTR_Final=1,ATTR_Override=2,ATTR_Metadata=4,SLOT_var=0,SLOT_method=1,SLOT_getter=2,SLOT_setter=3,SLOT_class=4,SLOT_function=6,METHOD_Arguments=1,METHOD_Activation=2,METHOD_Needrest=
4,METHOD_HasOptional=8,METHOD_IgnoreRest=16,METHOD_Native=32,METHOD_Setsdxns=64,METHOD_HasParamNames=128,OP_bkpt=1,OP_nop=2,OP_throw=3,OP_getsuper=4,OP_setsuper=5,OP_dxns=6,OP_dxnslate=7,OP_kill=8,OP_label=9,OP_lf32x4=10,OP_sf32x4=11,OP_ifnlt=12,OP_ifnle=13,OP_ifngt=14,OP_ifnge=15,OP_jump=16,OP_iftrue=17,OP_iffalse=18,OP_ifeq=19,OP_ifne=20,OP_iflt=21,OP_ifle=22,OP_ifgt=23,OP_ifge=24,OP_ifstricteq=25,OP_ifstrictne=26,OP_lookupswitch=27,OP_pushwith=28,OP_popscope=29,OP_nextname=30,OP_hasnext=31,OP_pushnull=
32,OP_pushundefined=33,OP_pushfloat=34,OP_nextvalue=35,OP_pushbyte=36,OP_pushshort=37,OP_pushtrue=38,OP_pushfalse=39,OP_pushnan=40,OP_pop=41,OP_dup=42,OP_swap=43,OP_pushstring=44,OP_pushint=45,OP_pushuint=46,OP_pushdouble=47,OP_pushscope=48,OP_pushnamespace=49,OP_hasnext2=50,OP_li8=53,OP_li16=54,OP_li32=55,OP_lf32=56,OP_lf64=57,OP_si8=58,OP_si16=59,OP_si32=60,OP_sf32=61,OP_sf64=62,OP_newfunction=64,OP_call=65,OP_construct=66,OP_callmethod=67,OP_callstatic=68,OP_callsuper=69,OP_callproperty=70,OP_returnvoid=
71,OP_returnvalue=72,OP_constructsuper=73,OP_constructprop=74,OP_callsuperid=75,OP_callproplex=76,OP_callinterface=77,OP_callsupervoid=78,OP_callpropvoid=79,OP_sxi1=80,OP_sxi8=81,OP_sxi16=82,OP_applytype=83,OP_pushfloat4=84,OP_newobject=85,OP_newarray=86,OP_newactivation=87,OP_newclass=88,OP_getdescendants=89,OP_newcatch=90,OP_findpropstrict=93,OP_findproperty=94,OP_finddef=95,OP_getlex=96,OP_setproperty=97,OP_getlocal=98,OP_setlocal=99,OP_getglobalscope=100,OP_getscopeobject=101,OP_getproperty=102,
OP_getouterscope=103,OP_initproperty=104,OP_setpropertylate=105,OP_deleteproperty=106,OP_deletepropertylate=107,OP_getslot=108,OP_setslot=109,OP_getglobalslot=110,OP_setglobalslot=111,OP_convert_s=112,OP_esc_xelem=113,OP_esc_xattr=114,OP_convert_i=115,OP_convert_u=116,OP_convert_d=117,OP_convert_b=118,OP_convert_o=119,OP_checkfilter=120,OP_convert_f=121,OP_unplus=122,OP_convert_f4=123,OP_coerce=128,OP_coerce_b=129,OP_coerce_a=130,OP_coerce_i=131,OP_coerce_d=132,OP_coerce_s=133,OP_astype=134,OP_astypelate=
135,OP_coerce_u=136,OP_coerce_o=137,OP_negate=144,OP_increment=145,OP_inclocal=146,OP_decrement=147,OP_declocal=148,OP_typeof=149,OP_not=150,OP_bitnot=151,OP_add=160,OP_subtract=161,OP_multiply=162,OP_divide=163,OP_modulo=164,OP_lshift=165,OP_rshift=166,OP_urshift=167,OP_bitand=168,OP_bitor=169,OP_bitxor=170,OP_equals=171,OP_strictequals=172,OP_lessthan=173,OP_lessequals=174,OP_greaterthan=175,OP_greaterequals=176,OP_instanceof=177,OP_istype=178,OP_istypelate=179,OP_in=180,OP_increment_i=192,OP_decrement_i=
193,OP_inclocal_i=194,OP_declocal_i=195,OP_negate_i=196,OP_add_i=197,OP_subtract_i=198,OP_multiply_i=199,OP_getlocal0=208,OP_getlocal1=209,OP_getlocal2=210,OP_getlocal3=211,OP_setlocal0=212,OP_setlocal1=213,OP_setlocal2=214,OP_setlocal3=215,OP_invalid=237,OP_debug=239,OP_debugline=240,OP_debugfile=241,OP_bkptline=242,OP_timestamp=243,INT_MIN_VALUE=-2147483648,INT_MAX_VALUE=2147483647,UINT_MIN_VALUE=0,UINT_MAX_VALUE=4294967295,SORT_CASEINSENSITIVE=1,SORT_DESCENDING=2,SORT_UNIQUESORT=4,SORT_RETURNINDEXEDARRAY=
8,SORT_NUMERIC=16,Errors={CallOfNonFunctionError:{code:1006,message:"%1 is not a function."},ConvertNullToObjectError:{code:1009,message:"Cannot access a property or method of a null object reference."},ConvertUndefinedToObjectError:{code:1010,message:"A term is undefined and has no properties."},ClassNotFoundError:{code:1014,message:"Class %1 could not be found."},CheckTypeFailedError:{code:1034,message:"Type Coercion failed: cannot convert %1 to %2."},WrongArgumentCountError:{code:1063,message:"Argument count mismatch on %1. Expected %2, got %3."},
XMLMarkupMustBeWellFormed:{code:1088,message:"The markup in the document following the root element must be well-formed."},OutOfRangeError:{code:1125,message:"The index %1 is out of range %2."},VectorFixedError:{code:1126,message:"Cannot change the length of a fixed Vector."},InvalidParamError:{code:2004,message:"One of the parameters is invalid."},ParamRangeError:{code:2006,message:"The supplied index is out of bounds."},NullPointerError:{code:2007,message:"Parameter %1 must be non-null."},InvalidEnumError:{code:2008,
message:"Parameter %1 must be one of the accepted values."},ArgumentError:{code:2015,message:"Invalid BitmapData."},CantAddSelfError:{code:2024,message:"An object cannot be added as a child of itself."},NotAChildError:{code:2025,message:"The supplied DisplayObject must be a child of the caller."}};function getErrorMessage(a){if(!debuggerMode.value)return"Error #"+a;for(var b in Errors)if(Errors[b].code==a)return"Error #"+a+": "+Errors[b].message}
function formatErrorMessage(a){var b=a.message;Array.prototype.slice.call(arguments,1).forEach(function(a,d){b=b.replace("%"+(d+1),a)});return"Error #"+a.code+": "+b}function translateErrorMessage(a){if(a.type)switch(a.type){case "undefined_method":return formatErrorMessage(Errors.CallOfNonFunctionError,"value");default:throw notImplemented(a.type);}else return 0<=a.message.indexOf("is not a function")?formatErrorMessage(Errors.CallOfNonFunctionError,"value"):a.message}
var opcodeTable=[null,{name:"bkpt",operands:"",canThrow:!1,stackDelta:0},{name:"nop",operands:"",canThrow:!1,stackDelta:0},{name:"throw",operands:"",canThrow:!0,stackDelta:-1},{name:"getsuper",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"setsuper",operands:"index:u30",canThrow:!0,stackDelta:-2},{name:"dxns",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"dxnslate",operands:"",canThrow:!0,stackDelta:-1},{name:"kill",operands:"index:u30",canThrow:!1,stackDelta:0},{name:"label",operands:"",
canThrow:!1,stackDelta:0},{name:"lf32x4",operands:"",canThrow:!0,stackDelta:0},{name:"sf32x4",operands:"",canThrow:!0,stackDelta:-2},{name:"ifnlt",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifnle",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifngt",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifnge",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"jump",operands:"offset:s24",canThrow:!1,stackDelta:0},{name:"iftrue",operands:"offset:s24",canThrow:!1,stackDelta:-1},
{name:"iffalse",operands:"offset:s24",canThrow:!1,stackDelta:-1},{name:"ifeq",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifne",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"iflt",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifle",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifgt",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifge",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifstricteq",operands:"offset:s24",canThrow:!1,stackDelta:-2},
{name:"ifstrictne",operands:"offset:s24",canThrow:!1,stackDelta:-2},{name:"lookupswitch",operands:null,canThrow:!1,stackDelta:-1},{name:"pushwith",operands:"",canThrow:!1,stackDelta:-1},{name:"popscope",operands:"",canThrow:!1,stackDelta:0},{name:"nextname",operands:"",canThrow:!0,stackDelta:-1},{name:"hasnext",operands:"",canThrow:!0,stackDelta:-1},{name:"pushnull",operands:"",canThrow:!1,stackDelta:1},{name:"pushundefined",operands:"",canThrow:!1,stackDelta:1},null,{name:"nextvalue",operands:"",
canThrow:!0,stackDelta:-1},{name:"pushbyte",operands:"value:s08",canThrow:!1,stackDelta:1},{name:"pushshort",operands:"value:s16",canThrow:!1,stackDelta:1},{name:"pushtrue",operands:"",canThrow:!1,stackDelta:1},{name:"pushfalse",operands:"",canThrow:!1,stackDelta:1},{name:"pushnan",operands:"",canThrow:!1,stackDelta:1},{name:"pop",operands:"",canThrow:!1,stackDelta:-1},{name:"dup",operands:"",canThrow:!1,stackDelta:1},{name:"swap",operands:"",canThrow:!1,stackDelta:0},{name:"pushstring",operands:"index:u30S",
canThrow:!1,stackDelta:1},{name:"pushint",operands:"index:u30I",canThrow:!1,stackDelta:1},{name:"pushuint",operands:"index:u30U",canThrow:!1,stackDelta:1},{name:"pushdouble",operands:"index:u30D",canThrow:!1,stackDelta:1},{name:"pushscope",operands:"",canThrow:!1,stackDelta:-1},{name:"pushnamespace",operands:"index:u30N",canThrow:!1,stackDelta:1},{name:"hasnext2",operands:"object:u30,index:u30",canThrow:!0,stackDelta:1},{name:"lix8",operands:null,canThrow:!0,stackDelta:0,internal:!0},{name:"lix16",
operands:null,canThrow:!0,stackDelta:0,internal:!0},{name:"li8",operands:"",canThrow:!0,stackDelta:0},{name:"li16",operands:"",canThrow:!0,stackDelta:0},{name:"li32",operands:"",canThrow:!0,stackDelta:0},{name:"lf32",operands:"",canThrow:!0,stackDelta:0},{name:"lf64",operands:"",canThrow:!0,stackDelta:0},{name:"si8",operands:"",canThrow:!0,stackDelta:-2},{name:"si16",operands:"",canThrow:!0,stackDelta:-2},{name:"si32",operands:"",canThrow:!0,stackDelta:-2},{name:"sf32",operands:"",canThrow:!0,stackDelta:-2},
{name:"sf64",operands:"",canThrow:!0,stackDelta:-2},null,{name:"newfunction",operands:"index:u30MI",canThrow:!0,stackDelta:1},{name:"call",operands:"argCount:u30",canThrow:!0,stackDelta:-1},{name:"construct",operands:"argCount:u30",canThrow:!0,stackDelta:0},{name:"callmethod",operands:"index:u30,argCount:u30",canThrow:!0,stackDelta:0},{name:"callstatic",operands:"index:u30MI,argCount:u30",canThrow:!0,stackDelta:0},{name:"callsuper",operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:0},{name:"callproperty",
operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:0},{name:"returnvoid",operands:"",canThrow:!1,stackDelta:0},{name:"returnvalue",operands:"",canThrow:!0,stackDelta:-1},{name:"constructsuper",operands:"argCount:u30",canThrow:!0,stackDelta:-1},{name:"constructprop",operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:0},{name:"callsuperid",operands:null,canThrow:!0,stackDelta:0,internal:!0},{name:"callproplex",operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:0},{name:"callinterface",
operands:null,canThrow:!0,stackDelta:0,internal:!0},{name:"callsupervoid",operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:-1},{name:"callpropvoid",operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:-1},{name:"sxi1",operands:"",canThrow:!1,stackDelta:0},{name:"sxi8",operands:"",canThrow:!1,stackDelta:0},{name:"sxi16",operands:"",canThrow:!1,stackDelta:0},{name:"applytype",operands:"argCount:u30",canThrow:!0,stackDelta:0},{name:"pushfloat4",operands:null,canThrow:!1,stackDelta:1},{name:"newobject",
operands:"argCount:u30",canThrow:!0,stackDelta:1},{name:"newarray",operands:"argCount:u30",canThrow:!0,stackDelta:1},{name:"newactivation",operands:"",canThrow:!0,stackDelta:1},{name:"newclass",operands:"index:u30CI",canThrow:!0,stackDelta:0},{name:"getdescendants",operands:"index:u30M",canThrow:!0,stackDelta:0},{name:"newcatch",operands:"index:u30EI",canThrow:!0,stackDelta:1},{name:"findpropglobalstrict",operands:null,canThrow:!0,stackDelta:0,internal:!0},{name:"findpropglobal",operands:null,canThrow:!0,
stackDelta:0,internal:!0},{name:"findpropstrict",operands:"index:u30M",canThrow:!0,stackDelta:1},{name:"findproperty",operands:"index:u30M",canThrow:!0,stackDelta:1},{name:"finddef",operands:null,canThrow:!0,stackDelta:1},{name:"getlex",operands:"index:u30M",canThrow:!0,stackDelta:1},{name:"setproperty",operands:"index:u30M",canThrow:!0,stackDelta:-2},{name:"getlocal",operands:"index:u30",canThrow:!1,stackDelta:1},{name:"setlocal",operands:"index:u30",canThrow:!1,stackDelta:-1},{name:"getglobalscope",
operands:"",canThrow:!1,stackDelta:1},{name:"getscopeobject",operands:"index:u30",canThrow:!1,stackDelta:1},{name:"getproperty",operands:"index:u30M",canThrow:!0,stackDelta:0},{name:"getouterscope",operands:null,canThrow:!1,stackDelta:1},{name:"initproperty",operands:"index:u30M",canThrow:!0,stackDelta:-2},null,{name:"deleteproperty",operands:"index:u30M",canThrow:!0,stackDelta:0},null,{name:"getslot",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"setslot",operands:"index:u30",canThrow:!0,
stackDelta:-2},{name:"getglobalslot",operands:"index:u30",canThrow:!1,stackDelta:1},{name:"setglobalslot",operands:"index:u30",canThrow:!1,stackDelta:-1},{name:"convert_s",operands:"",canThrow:!0,stackDelta:0},{name:"esc_xelem",operands:"",canThrow:!0,stackDelta:0},{name:"esc_xattr",operands:"",canThrow:!0,stackDelta:0},{name:"convert_i",operands:"",canThrow:!0,stackDelta:0},{name:"convert_u",operands:"",canThrow:!0,stackDelta:0},{name:"convert_d",operands:"",canThrow:!0,stackDelta:0},{name:"convert_b",
operands:"",canThrow:!0,stackDelta:0},{name:"convert_o",operands:"",canThrow:!0,stackDelta:0},{name:"checkfilter",operands:"",canThrow:!0,stackDelta:0},{name:"convert_f",operands:"",canThrow:!0,stackDelta:0},{name:"unplus",operands:"",canThrow:!0,stackDelta:0},{name:"convert_f4",operands:"",canThrow:!0,stackDelta:0},null,null,null,null,{name:"coerce",operands:"index:u30M",canThrow:!0,stackDelta:0},{name:"coerce_b",operands:"",canThrow:!0,stackDelta:0},{name:"coerce_a",operands:"",canThrow:!0,stackDelta:0},
{name:"coerce_i",operands:"",canThrow:!0,stackDelta:0},{name:"coerce_d",operands:"",canThrow:!0,stackDelta:0},{name:"coerce_s",operands:"",canThrow:!0,stackDelta:0},{name:"astype",operands:"index:u30M",canThrow:!0,stackDelta:0},{name:"astypelate",operands:"",canThrow:!0,stackDelta:-1},{name:"coerce_u",operands:"",canThrow:!0,stackDelta:0},{name:"coerce_o",operands:"",canThrow:!0,stackDelta:0},null,null,null,null,null,null,{name:"negate",operands:"",canThrow:!0,stackDelta:0},{name:"increment",operands:"",
canThrow:!0,stackDelta:0},{name:"inclocal",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"decrement",operands:"",canThrow:!0,stackDelta:0},{name:"declocal",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"typeof",operands:"",canThrow:!1,stackDelta:0},{name:"not",operands:"",canThrow:!1,stackDelta:0},{name:"bitnot",operands:"",canThrow:!0,stackDelta:0},null,null,null,null,null,null,null,null,{name:"add",operands:"",canThrow:!0,stackDelta:-1},{name:"subtract",operands:"",canThrow:!0,stackDelta:-1},
{name:"multiply",operands:"",canThrow:!0,stackDelta:-1},{name:"divide",operands:"",canThrow:!0,stackDelta:-1},{name:"modulo",operands:"",canThrow:!0,stackDelta:-1},{name:"lshift",operands:"",canThrow:!0,stackDelta:-1},{name:"rshift",operands:"",canThrow:!0,stackDelta:-1},{name:"urshift",operands:"",canThrow:!0,stackDelta:-1},{name:"bitand",operands:"",canThrow:!0,stackDelta:-1},{name:"bitor",operands:"",canThrow:!0,stackDelta:-1},{name:"bitxor",operands:"",canThrow:!0,stackDelta:-1},{name:"equals",
operands:"",canThrow:!0,stackDelta:-1},{name:"strictequals",operands:"",canThrow:!0,stackDelta:-1},{name:"lessthan",operands:"",canThrow:!0,stackDelta:-1},{name:"lessequals",operands:"",canThrow:!0,stackDelta:-1},{name:"greaterthan",operands:"",canThrow:!0,stackDelta:-1},{name:"greaterequals",operands:"",canThrow:!0,stackDelta:-1},{name:"instanceof",operands:"",canThrow:!0,stackDelta:-1},{name:"istype",operands:"index:u30M",canThrow:!0,stackDelta:0},{name:"istypelate",operands:"",canThrow:!0,stackDelta:-1},
{name:"in",operands:"",canThrow:!0,stackDelta:-1},null,null,null,null,null,null,null,null,null,null,null,{name:"increment_i",operands:"",canThrow:!0,stackDelta:0},{name:"decrement_i",operands:"",canThrow:!0,stackDelta:0},{name:"inclocal_i",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"declocal_i",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"negate_i",operands:"",canThrow:!0,stackDelta:0},{name:"add_i",operands:"",canThrow:!0,stackDelta:-1},{name:"subtract_i",operands:"",canThrow:!0,
stackDelta:-1},{name:"multiply_i",operands:"",canThrow:!0,stackDelta:-1},null,null,null,null,null,null,null,null,{name:"getlocal0",operands:"",canThrow:!1,stackDelta:1},{name:"getlocal1",operands:"",canThrow:!1,stackDelta:1},{name:"getlocal2",operands:"",canThrow:!1,stackDelta:1},{name:"getlocal3",operands:"",canThrow:!1,stackDelta:1},{name:"setlocal0",operands:"",canThrow:!1,stackDelta:-1},{name:"setlocal1",operands:"",canThrow:!1,stackDelta:-1},{name:"setlocal2",operands:"",canThrow:!1,stackDelta:-1},
{name:"setlocal3",operands:"",canThrow:!1,stackDelta:-1},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,{name:"invalid",operands:"",canThrow:!1,stackDelta:0},null,{name:"debug",operands:"debugType:u08,index:u30S,reg:u08,extra:u30",canThrow:!0,stackDelta:0},{name:"debugline",operands:"lineNumber:u30",canThrow:!0,stackDelta:0},{name:"debugfile",operands:"index:u30S",canThrow:!0,stackDelta:0},null,null,null,null,null,null,null,null,null,null,
null,null,null,null];(function(){for(var a=0;a<opcodeTable.length;a++){var b=opcodeTable[a];if(b&&null!==b.operands){var e=[];if(""!==b.operands)for(var d=b.operands.split(","),f=0;f<d.length;f++){var g=d[f].split(":");e.push({name:g[0],size:g[1].substring(0,3),type:g[1].substring(3)})}b.operands=e}}})();function opcodeName(a){return opcodeTable[a].name}
var AbcStream=function(){function a(a){this.bytes=a;this.view=new DataView(a.buffer,a.byteOffset);this.pos=0}var b=new Int32Array(256);a.prototype={get position(){return this.pos},remaining:function(){return this.bytes.length-this.pos},seek:function(a){this.pos=a},readU8:function(){return this.bytes[this.pos++]},readU8s:function(a){var b=new Uint8Array(a);b.set(this.bytes.subarray(this.pos,this.pos+a),0);this.pos+=a;return b},readS8:function(){return this.bytes[this.pos++]<<24>>24},readU32:function(){return this.readS32()>>>
0},readU30:function(){return this.readU32()},readU30Unsafe:function(){return this.readU32()},readS16:function(){return this.readU30Unsafe()<<16>>16},readS32:function(){var a=this.readU8();a&128&&(a=a&127|this.readU8()<<7,a&16384&&(a=a&16383|this.readU8()<<14,a&2097152&&(a=a&2097151|this.readU8()<<21,a&268435456&&(a=a&268435455|this.readU8()<<28,a&=4294967295))));return a},readWord:function(){var a=this.view.getUint32(this.pos,!0);this.pos+=4;return a},readS24:function(){return(this.readU8()|this.readU8()<<
8|this.readU8()<<16)<<8>>8},readDouble:function(){var a=this.view.getFloat64(this.pos,!0);this.pos+=8;return a},readUTFString:function(a){var e=this.pos,g=e+a,l=this.bytes,m=0;if(!b||b.length<a)b=new Int32Array(2*a);for(a=b;e<g;){var p=l[e++];if(127>=p)a[m++]=p;else if(192<=p){var r=0;224>p?r=(p&31)<<6|l[e++]&63:240>p?r=(p&15)<<12|(l[e++]&63)<<6|l[e++]&63:(r=((p&7)<<18|(l[e++]&63)<<12|(l[e++]&63)<<6|l[e++]&63)-65536,a[m++]=((r&1047552)>>>10)+55296,r=(r&1023)+56320);a[m++]=r}}this.pos=e;return fromCharCodeArray(a.subarray(0,
m))}};if("undefined"!==typeof TextDecoder){var e=new TextDecoder;a.prototype.readUTFString=function(a){var b=this.pos;this.pos+=a;return e.decode(this.bytes.subarray(b,b+a))}}return a}();function parseTraits(a,b,e){for(var d=b.readU30(),f=[],g=0;g<d;g++)f.push(new Trait(a,b,e));return f}
var Trait=function(){function a(a,e,d){var f=a.constantPool,g=a.methods,l=a.classes,m=a.metadata;this.holder=d;this.name=f.multinames[e.readU30()];d=e.readU8();this.kind=d&15;this.attributes=d>>4&15;!0;switch(this.kind){case 0:case 6:this.slotId=e.readU30();this.typeName=f.multinames[e.readU30()];a=e.readU30();this.value=void 0;0!==a&&(this.hasDefaultValue=!0,this.value=f.getValue(e.readU8(),a));break;case 1:case 3:case 2:this.dispId=e.readU30();this.methodInfo=g[e.readU30()];this.methodInfo.name=
this.name;attachHolder(this.methodInfo,this.holder);this.methodInfo.abc=a;break;case 4:this.slotId=e.readU30();!0;this.classInfo=l[e.readU30()];break;case 5:!0}if(this.attributes&4){var p,f=0;for(a=e.readU30();f<a;f++)g=m[e.readU30()],"__go_to_definition_help"===g.name||"__go_to_ctor_definition_help"===g.name||(p||(p={}),p[g.name]=g);p&&(this.isClass()&&(this.classInfo.metadata=p),this.metadata=p)}}a.prototype.isSlot=function(){return 0===this.kind};a.prototype.isConst=function(){return 6===this.kind};
a.prototype.isMethod=function(){return 1===this.kind};a.prototype.isClass=function(){return 4===this.kind};a.prototype.isGetter=function(){return 2===this.kind};a.prototype.isSetter=function(){return 3===this.kind};a.prototype.isProtected=function(){!0;return this.name.namespaces[0].isProtected()};a.prototype.kindName=function(){switch(this.kind){case 0:return"Slot";case 6:return"Const";case 1:return"Method";case 3:return"Setter";case 2:return"Getter";case 4:return"Class";case 5:return"Function"}unexpected()};
a.prototype.isOverride=function(){return this.attributes&2};a.prototype.isFinal=function(){return this.attributes&1};a.prototype.toString=function(){var a=getFlags(this.attributes,["final","override","metadata"]);a&&(a+=" ");a+=Multiname.getQualifiedName(this.name);switch(this.kind){case 0:case 6:return a+", typeName: "+this.typeName+", slotId: "+this.slotId+", value: "+this.value;case 1:case 3:case 2:return a+", "+this.kindName()+": "+this.methodInfo.name;case 4:return a+", slotId: "+this.slotId+
", class: "+this.classInfo}};return a}(),ShumwayNamespace=function(){function a(a,d,e,f){void 0!==a&&(void 0===d&&(d=""),void 0!==e&&(this.prefix=e),this.kind=a,this.originalURI=this.uri=d,b.call(this,f))}function b(a){if(this.isPublic()&&this.uri){var b=this.uri.length-1;58004<this.uri.charCodeAt(b)&&(this.uri=this.uri.substring(0,b-1))}else this.isUnique()&&(this.uri=String(this.uri+g++));a?a=this.uri:(a=this.uri,""===a?a="":(b=l[a],b||(b=String(m.length),m.push(b),l[a]=b),a=b));this.uri=a;!0;this.qualifiedName=
e[this.kind]+"$"+this.uri}var e={};e[CONSTANT_Namespace]="public";e[CONSTANT_PackageNamespace]="public";e[CONSTANT_PackageInternalNs]="packageInternal";e[CONSTANT_PrivateNs]="private";e[CONSTANT_ProtectedNamespace]="protected";e[CONSTANT_ExplicitNamespace]="explicit";e[CONSTANT_StaticProtectedNs]="staticProtected";var d={},f;for(f in e)d[e[f]]=!0;a.PREFIXES=d;var g=0,l=createEmptyObject();createEmptyObject();var m=[];a.fromQualifiedName=function(b){var d=b.indexOf("$"),e=b.indexOf("$",d+1),f=b.substring(0,
d),g=a.kindFromString(f),f=b.substring(d+1,e);b=""===f?f:m[Number(f)];!0;!0;return new a(g,b,void 0,!0)};a.kindFromString=function(a){for(var b in e)if(e[b]===a)return b;return!0};a.createNamespace=function(b,d){return new a(8,b,d)};a.prototype=Object.create({parse:function(a,d){this.kind=d.readU8();this.originalURI=this.uri=a.strings[d.readU30()];b.call(this)},isPublic:function(){return 8===this.kind||22===this.kind},isProtected:function(){return 24===this.kind},isUnique:function(){return 5===this.kind&&
!this.originalURI},isDynamic:function(){return this.isPublic()&&!this.uri},getURI:function(){return this.uri},toString:function(){return e[this.kind]+(this.originalURI?" "+this.originalURI:"")},clone:function(){var b=new a;b.kind=this.kind;b.uri=this.uri;b.originalURI=this.originalURI;b.qualifiedName=this.qualifiedName;return b},isEqualTo:function(a){return this.qualifiedName===a.qualifiedName},inNamespaceSet:function(a){for(var b=0;b<a.length;b++)if(a[b].qualifiedName===this.qualifiedName)return!0;
return!1},getAccessModifier:function(){return e[this.kind]},getQualifiedName:function(){return this.qualifiedName}});a.PUBLIC=new a(8);a.PROTECTED=new a(24);a.PROXY=new a(8,"http://www.adobe.com/2006/actionscript/flash/proxy");var p={};a.fromSimpleName=function(b){if(b in p)return p[b];var d;0===b.indexOf("[")?(!0,d=b.substring(1,b.length-1).split(",")):d=[b];return p[b]=d.map(function(b){b=b.trim();var d;0<b.indexOf(" ")?(d=b.substring(0,b.indexOf(" ")).trim(),b=b.substring(b.indexOf(" ")+1).trim()):
b===e[8]||b===e[23]||b===e[5]||b===e[24]||b===e[25]||b===e[26]?(d=b,b=""):d="public";return new a(a.kindFromString(d),b)})};return a}(),Multiname=function(){function a(a,b,d){void 0!==b&&!0;this.id=e++;this.namespaces=a;this.name=b;this.flags=d||0}function b(a,b){!0;return a?a+"$"+b:b}var e=0;a.TEMPORARY=new a;!0;a.RUNTIME_NAME=4;a.ATTRIBUTE=1;a.parse=function(a,b,d,e){var p=0,r=b.readU8(),s,w=[],v=0;switch(r){case 7:case 13:(p=b.readU30())?w=[a.namespaces[p]]:v&=-5;(p=b.readU30())&&(s=a.strings[p]);
break;case 15:case 16:(p=b.readU30())?s=a.strings[p]:v&=-5;v|=2;break;case 17:case 18:v|=6;break;case 9:case 14:(p=b.readU30())?s=a.strings[p]:v&=-5;p=b.readU30();!0;w=a.namespaceSets[p];break;case 27:case 28:v|=4;p=b.readU30();!0;w=a.namespaceSets[p];break;case 29:return a=b.readU32(),d[a]&&(w=d[a].namespaces,s=d[a].name),b.readU32(),!0,b=b.readU32(),s=new Multiname(w,s,v),s.typeParameter=d[b],d[a]||e.push({multiname:s,index:a}),s;default:unexpected()}switch(r){case 13:case 16:case 18:case 14:case 28:v|=
1}return new Multiname(w,s,v)};a.isMultiname=function(a){return"number"===typeof a||"string"===typeof a||a instanceof Multiname||a instanceof Number};a.needsResolution=function(b){return b instanceof a&&1<b.namespaces.length};a.isQName=function(b){return b instanceof a?b.namespaces&&1===b.namespaces.length:!0};a.isRuntimeName=function(a){return a instanceof Multiname&&a.isRuntimeName()};a.isRuntimeNamespace=function(a){return a instanceof Multiname&&a.isRuntimeNamespace()};a.isRuntime=function(a){return a instanceof
Multiname&&a.isRuntimeName()||a.isRuntimeNamespace()};a.getQualifiedName=function(a){!0;if(a instanceof Multiname){if(void 0!==a.qualifiedName)return a.qualifiedName;var d=String(a.name);if(isNumeric(d))return!0,a.qualifiedName=d;a=a.qualifiedName=b(a.namespaces[0].qualifiedName,d)}return a};a.qualifyName=function(a,d){return b(a.qualifiedName,d)};a.stripPublicQualifier=function(a){return 0!==a.indexOf("public$$")?void 0:a.substring(8)};a.fromQualifiedName=function(a){if(a instanceof Multiname)return a;
!0;var b=a.indexOf("$");if(!(0>b)&&ShumwayNamespace.PREFIXES[a.substring(0,b)]){var d=ShumwayNamespace.fromQualifiedName(a),b=a.indexOf("$",b+1);return new Multiname([d],a.substring(b+1))}};a.getFullQualifiedName=function(b){var d=a.getQualifiedName(b);b instanceof Multiname&&b.typeParameter&&(d+="$"+a.getFullQualifiedName(b.typeParameter));return d};a.PUBLIC_QUALIFIED_NAME_PREFIX="public$$";a.getPublicQualifiedName=function(a){return isNumeric(a)?toNumber(a):null!==a&&isObject(a)?a:"public$$"+a};
a.isPublicQualifiedName=function(a){return"number"===typeof a||isNumeric(a)||0===a.indexOf("public$$")};a.getAccessModifier=function(a){!0;if("number"===typeof a||"string"===typeof a||a instanceof Number)return"public";!0;return a.namespaces[0].getAccessModifier()};a.isNumeric=function(b){if("number"===typeof b)return!0;if("string"===typeof b)return isNumeric(b);!0;return!isNaN(parseInt(a.getName(b),10))};a.getName=function(a){!0;!0;return a.getName()};a.isAnyName=function(a){return"object"===typeof a&&
!a.isRuntimeName()&&!a.name};var d={};a.fromSimpleName=function(a){!0;if(a in d)return d[a];var b,e;b=a.lastIndexOf(".");0>=b&&(b=a.lastIndexOf(" "));0<b&&b<a.length-1?(e=a.substring(b+1).trim(),b=a.substring(0,b).trim()):(e=a,b="");return d[a]=new Multiname(ShumwayNamespace.fromSimpleName(b),e)};a.prototype.getQName=function(a){!0;!0;this.cache||(this.cache=[]);var b=this.cache[a];b||(b=this.cache[a]=new Multiname([this.namespaces[a]],this.name,this.flags));return b};a.prototype.hasQName=function(a){!0;
if(this.name!==a.name)return!1;for(var b=0;b<this.namespaces.length;b++)if(this.namespaces[b].isEqualTo(a.namespaces[0]))return!0;return!1};a.prototype.isAttribute=function(){return this.flags&1};a.prototype.isAnyName=function(){return Multiname.isAnyName(this)};a.prototype.isAnyNamespace=function(){return!this.isRuntimeNamespace()&&(0===this.namespaces.length||this.isAnyName()&&1!==this.namespaces.length)};a.prototype.isRuntimeName=function(){return this.flags&4};a.prototype.isRuntimeNamespace=function(){return this.flags&
2};a.prototype.isRuntime=function(){return this.flags&6};a.prototype.isQName=function(){return 1===this.namespaces.length&&!this.isAnyName()};a.prototype.hasTypeParameter=function(){return!!this.typeParameter};a.prototype.getName=function(){return this.name};a.prototype.getOriginalName=function(){!0;var a=this.namespaces[0].originalURI;a&&(a+=".");return a+this.name};a.prototype.getNamespace=function(){!0;!0;return this.namespaces[0]};a.prototype.nameToString=function(){if(this.isAnyName())return"*";
var a=this.getName();return this.isRuntimeName()?"[]":a};a.prototype.hasObjectName=function(){return"object"===typeof this.name};a.prototype.toString=function(){var a=this.isAttribute()?"@":"";if(this.isAnyNamespace())a+="*::"+this.nameToString();else if(this.isRuntimeNamespace())a+="[]::"+this.nameToString();else if(1===this.namespaces.length&&this.isQName())a+=this.namespaces[0].toString()+"::",a+=this.nameToString();else{for(var a=a+"{",b=0,d=this.namespaces.length;b<d;b++)a+=this.namespaces[b].toString(),
b+1<d&&(a+=",");a+="}::"+this.nameToString()}this.hasTypeParameter()&&(a+="<"+this.typeParameter.toString()+">");return a};a.Int=a.getPublicQualifiedName("int");a.Uint=a.getPublicQualifiedName("uint");a.Class=a.getPublicQualifiedName("Class");a.Array=a.getPublicQualifiedName("Array");a.Object=a.getPublicQualifiedName("Object");a.String=a.getPublicQualifiedName("String");a.Number=a.getPublicQualifiedName("Number");a.Boolean=a.getPublicQualifiedName("Boolean");a.Function=a.getPublicQualifiedName("Function");
a.XML=a.getPublicQualifiedName("XML");a.XMLList=a.getPublicQualifiedName("XMLList");return a}(),ConstantPool=function(){function a(a){var d,f,g=[0];f=a.readU30();for(d=1;d<f;++d)g.push(a.readS32());var l=[0];f=a.readU30();for(d=1;d<f;++d)l.push(a.readU32());var m=[NaN];f=a.readU30();for(d=1;d<f;++d)m.push(a.readDouble());Timer.start("Parse Strings");var p=[""];f=a.readU30();for(d=1;d<f;++d)p.push(a.readUTFString(a.readU30()));this.positionAfterUTFStrings=a.pos;Timer.stop();this.ints=g;this.uints=
l;this.doubles=m;this.strings=p;Timer.start("Parse Namespaces");g=[void 0];f=a.readU30();for(d=1;d<f;++d)l=new ShumwayNamespace,l.parse(this,a),g.push(l);Timer.stop();Timer.start("Parse Namespace Sets");l=[void 0];f=a.readU30();for(d=1;d<f;++d){m=a.readU30();p=[];p.id=b++;for(var r=0;r<m;++r)p.push(g[a.readU30()]);l.push(p)}Timer.stop();this.namespaces=g;this.namespaceSets=l;Timer.start("Parse Multinames");g=[void 0];l=[];f=a.readU30();for(d=1;d<f;++d)g.push(Multiname.parse(this,a,g,l));Timer.stop();
this.multinames=g}var b=1;a.prototype.getValue=function(a,b){switch(a){case 3:return this.ints[b];case 4:return this.uints[b];case 6:return this.doubles[b];case 1:return this.strings[b];case 11:return!0;case 10:return!1;case 12:return null;case 0:break;case 8:case 23:return this.namespaces[b];case 7:case 14:case 15:case 16:case 17:case 18:case 19:case 20:return this.multinames[b];case 2:warning("TODO: CONSTANT_Float may be deprecated?");break;default:!0}};return a}(),MethodInfo=function(){function a(a){!0;
return"p"+String.fromCharCode(65+a)}function b(b,e){for(var g=b.constantPool,l=e.readU30(),m=g.multinames[e.readU30()],p=[],r=0;r<l;r++)p.push({type:g.multinames[e.readU30()]});var s=g.strings[e.readU30()],w=e.readU8(),r=0;if(w&8){r=e.readU30();!0;for(r=l-r;r<l;r++){var v=e.readU30();p[r].value=g.getValue(e.readU8(),v)}}if(w&128)for(r=0;r<l;r++)e.readU30(),p[r].name=a(r);else for(r=0;r<l;r++)p[r].name=a(r);this.abc=b;this.flags=w;this.optionals=null;this.debugName=s;this.parameters=p;this.returnType=
m}function e(a,b){var e=a.constantPool.multinames,e={start:b.readU30(),end:b.readU30(),target:b.readU30(),typeName:e[b.readU30()],varName:e[b.readU30()]};!0;!0;return e}b.prototype={toString:function(){var a=getFlags(this.flags,"NEED_ARGUMENTS NEED_ACTIVATION NEED_REST HAS_OPTIONAL   SET_DXN HAS_PARAM_NAMES".split(" "));return(a?a+" ":"")+this.name},hasOptional:function(){return!!(this.flags&8)},needsActivation:function(){return!!(this.flags&2)},needsRest:function(){return!!(this.flags&4)},needsArguments:function(){return!!(this.flags&
1)},isNative:function(){return!!(this.flags&32)},isClassMember:function(){return this.holder instanceof ClassInfo},isInstanceMember:function(){return this.holder instanceof InstanceInfo},isScriptMember:function(){return this.holder instanceof ScriptInfo}};b.parseBody=function(a,b){var g=a.methods[b.readU30()];g.hasBody=!0;!0;g.maxStack=b.readU30();g.localCount=b.readU30();g.initScopeDepth=b.readU30();g.maxScopeDepth=b.readU30();g.code=b.readU8s(b.readU30());for(var l=[],m=b.readU30(),p=0;p<m;++p)l.push(e(a,
b));g.exceptions=l;g.traits=parseTraits(a,b,g)};b.prototype.hasExceptions=function(){return 0<this.exceptions.length};return b}(),MetaDataInfo=function(){function a(a,e){for(var d=a.constantPool.strings,f=this.name=d[e.readU30()],g=e.readU30(),l=[],m=[],p=0;p<g;p++)l[p]=d[e.readU30()];for(p=0;p<g;p++){var r=l[p];m[p]={key:r,value:d[e.readU30()]};r&&"native"===f&&(!0,this[r]=m[p].value)}this.value=m}a.prototype={toString:function(){return"["+this.name+"]"}};return a}();
function attachHolder(a,b){!0;a.holder=b}
var InstanceInfo=function(){function a(a,d){this.id=b++;this.abc=a;var f=a.constantPool,g=a.methods;this.name=f.multinames[d.readU30()];!0;this.superName=f.multinames[d.readU30()];this.flags=d.readU8();this.protectedNs=void 0;this.flags&8&&(this.protectedNs=f.namespaces[d.readU30()]);var l=d.readU30();this.interfaces=[];for(var m=0;m<l;m++)this.interfaces[m]=f.multinames[d.readU30()];this.init=g[d.readU30()];this.init.isInstanceInitializer=!0;this.init.name=this.name;attachHolder(this.init,this);
this.traits=parseTraits(a,d,this)}var b=1;a.prototype={toString:function(){var a=getFlags(this.flags&8,["sealed","final","interface","protected"]),a=(a?a+" ":"")+this.name;this.superName&&(a+=" extends "+this.superName);return a},isFinal:function(){return this.flags&2},isSealed:function(){return this.flags&1},isInterface:function(){return this.flags&4}};return a}(),ClassInfo=function(){function a(a,d,f){this.id=b++;this.abc=a;this.init=a.methods[f.readU30()];this.init.isClassInitializer=!0;attachHolder(this.init,
this);this.traits=parseTraits(a,f,this);this.instanceInfo=d;this.instanceInfo.classInfo=this;this.defaultValue=Multiname.getQualifiedName(this.instanceInfo.name)===Multiname.Int||Multiname.getQualifiedName(this.instanceInfo.name)===Multiname.Uint?0:Multiname.getQualifiedName(this.instanceInfo.name)===Multiname.Number?NaN:Multiname.getQualifiedName(this.instanceInfo.name)===Multiname.Boolean?!1:null}var b=1;a.prototype.toString=function(){return this.instanceInfo.name.toString()};return a}();
function isClassOrInstanceInfo(a){return a instanceof ClassInfo||a instanceof InstanceInfo}
var ScriptInfo=function(){function a(a,d,f){this.id=b++;this.abc=a;this.name=a.name+"$script"+d;this.init=a.methods[f.readU30()];this.init.isScriptInitializer=!0;this.index=d;attachHolder(this.init,this);this.traits=parseTraits(a,f,this);this.traits.verified=!0}var b=1;a.prototype={get entryPoint(){return this.init},toString:function(){return this.name}};return a}(),AbcFile=function(){function a(a,e){Timer.start("Parse ABC");this.name=e;var d,f,g=new AbcStream(a);d=g.readWord();if(3014671>d)throw Error("Invalid ABC File (magic = "+
Number(d).toString(16)+")");Timer.start("Parse constantPool");this.constantPool=new ConstantPool(g,e);Timer.stop();Timer.start("Parse Method Infos");this.methods=[];d=g.readU30();for(f=0;f<d;++f)this.methods.push(new MethodInfo(this,g));Timer.stop();Timer.start("Parse MetaData Infos");this.metadata=[];d=g.readU30();for(f=0;f<d;++f)this.metadata.push(new MetaDataInfo(this,g));Timer.stop();Timer.start("Parse Instance Infos");this.instances=[];d=g.readU30();for(f=0;f<d;++f)this.instances.push(new InstanceInfo(this,
g));Timer.stop();Timer.start("Parse Class Infos");this.classes=[];for(f=0;f<d;++f)this.classes.push(new ClassInfo(this,this.instances[f],g));Timer.stop();Timer.start("Parse Script Infos");this.scripts=[];d=g.readU30();for(f=0;f<d;++f)this.scripts.push(new ScriptInfo(this,f,g));Timer.stop();Timer.start("Parse Method Body Info");d=g.readU30();for(f=0;f<d;++f)MethodInfo.parseBody(this,g);Timer.stop();Timer.stop()}a.prototype={get lastScript(){!0;return this.scripts[this.scripts.length-1]},toString:function(){return this.name}};
return a}(),Bytecode=function(){function a(a){var e=a.readU8();this.op=e;this.originalPosition=a.position;var d=opcodeTable[e];d||unexpected("Unknown Op "+e);this.canThrow=d.canThrow;var f;switch(e){case 27:d=a.readS24();this.offsets=[];f=a.readU30()+1;for(e=0;e<f;e++)this.offsets.push(a.readS24());this.offsets.push(d);break;default:e=0;for(f=d.operands.length;e<f;e++){var g=d.operands[e];switch(g.size){case "u08":this[g.name]=a.readU8();break;case "s08":this[g.name]=a.readS8();break;case "s16":this[g.name]=
a.readS16();break;case "s24":this[g.name]=a.readS24();break;case "u30":this[g.name]=a.readU30();break;case "u32":this[g.name]=a.readU32();break;default:unexpected()}}}}a.prototype={makeBlockHead:function(a){if(this.succs)return a;this.bid=a;this.succs=[];this.preds=[];this.dominatees=[];return a+1},trace:function(a){this.succs&&a.writeLn("#"+this.bid)},toString:function(a){var e=opcodeTable[this.op],d=e.name.padRight(" ",20),f,g;if(27===this.op){d+="targets:";f=0;for(g=this.targets.length;f<g;f++)d+=
(0<f?",":"")+this.targets[f].position}else{f=0;for(g=e.operands.length;f<g;f++){var l=e.operands[f];if("offset"===l.name)d+="target:"+this.target.position;else{var d=d+(l.name+": "),m=this[l.name];if(a)switch(l.type){case "":d+=m;break;case "I":d+=a.constantPool.ints[m];break;case "U":d+=a.constantPool.uints[m];break;case "D":d+=a.constantPool.doubles[m];break;case "S":d+=a.constantPool.strings[m];break;case "N":d+=a.constantPool.namespaces[m];break;case "CI":d+=a.classes[m];break;case "M":d+=a.constantPool.multinames[m];
break;default:d+="?"}else d+=m}f<g-1&&(d+=", ")}}return d}};return a}(),Analysis=function(){function a(a){Counter.count("Analysis");this.method=a;this.method.code&&(Timer.start("Normalize"),this.normalizeBytecode(),Timer.stop())}a.prototype={normalizeBytecode:function(){function a(b,d){if(b&&b[d])return b[d];var e=Object.create(Bytecode.prototype);e.op=237;e.position=d;b&&(b[d]=e);return e}function e(a){0!==a--&&a<d.parameters.length&&(d.parameters[a].isUsed=!0)}for(var d=this.method,f=[],g=[],l=
new AbcStream(this.method.code),m;0<l.remaining();){var p=l.position;m=new Bytecode(l);switch(m.op){case 2:case 9:f[p]=g.length;continue;case 27:this.method.hasLookupSwitches=!0;m.targets=[];for(var r=m.offsets,s=0,w=r.length;s<w;s++)r[s]+=p;break;case 16:case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:m.offset+=l.position;break;case 208:case 209:case 210:case 211:e(m.op-208);break;case 98:e(m.index)}m.position=g.length;f[p]=g.length;
g.push(m)}for(var l={},v=0,z=g.length;v<z;v++)switch(m=g[v],m.op){case 27:r=m.offsets;s=0;for(w=r.length;s<w;s++)p=f[r[s]],m.targets.push(g[p]||a(l,r[s])),r[s]=p;break;case 16:case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:p=f[m.offset],m.target=g[p]||a(l,m.offset),m.offset=p}this.bytecodes=g;m=this.method.exceptions;s=0;for(w=m.length;s<w;s++)r=m[s],r.start=f[r.start],r.end=f[r.end],r.offset=f[r.target],r.target=g[r.offset],r.target.exception=
r},detectBasicBlocks:function(){var a=this.bytecodes,e=this.method.exceptions,d=0<e.length,f={},g,l,m,p;p=a[0].makeBlockHead(0);l=0;for(m=a.length-1;l<m;l++)switch(g=a[l],g.op){case 71:case 72:case 3:p=a[l+1].makeBlockHead(p);break;case 27:g=g.targets;for(var r=0,s=g.length;r<s;r++)p=g[r].makeBlockHead(p);p=a[l+1].makeBlockHead(p);break;case 16:case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:p=g.target.makeBlockHead(p),p=a[l+1].makeBlockHead(p)}g=
a[m];switch(g.op){case 27:g=g.targets;r=0;for(s=g.length;r<s;r++)p=g[r].makeBlockHead(p);break;case 16:p=g.target.makeBlockHead(p);break;case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:p=g.target.makeBlockHead(p),a[l+1]=getInvalidTarget(null,l+1),p=a[l+1].makeBlockHead(p)}if(d){r=0;for(s=e.length;r<s;r++)l=e[r],m=a[l.end+1],p=a[l.start].makeBlockHead(p),m&&(p=m.makeBlockHead(p)),p=l.target.makeBlockHead(p)}var w=a[0];l=1;for(m=a.length;l<
m;l++)if(a[l].succs){!0;f[w.bid]=w;g=a[l-1];w.end=g;var v=a[l];switch(g.op){case 71:case 72:case 3:break;case 27:r=0;for(s=g.targets.length;r<s;r++)w.succs.push(g.targets[r]);break;case 16:w.succs.push(g.target);break;case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:w.succs.push(g.target);g.target!==v&&w.succs.push(v);break;default:w.succs.push(v)}if(d){r=w;s=[];g=0;for(var z=e.length;g<z;g++){var A=e[g];r.position>=A.start&&r.end.position<=
A.end&&s.push(A.target)}g=s;w.hasCatches=0<g.length;w.succs.push.apply(w.succs,g)}w=v}f[w.bid]=w;g=a[m-1];switch(g.op){case 27:r=0;for(s=g.targets.length;r<s;r++)w.succs.push(g.targets[r]);break;case 16:w.succs.push(g.target)}w.end=g;var u=BitSetFunctor(p),B=u.ADDRESS_BITS_PER_WORD,y=u.BITS_PER_WORD,D=u.BIT_INDEX_MASK;u.singleton=function(a){var b=new u;b.set(a.bid);b.count=1;b.dirty=0;return b};u.fromBlocks=function(a){var b=new u;b.setBlocks(a);return b};a=u.prototype;u.singleword?(a.forEachBlock=
function(a){!0;var b=this.bits;if(b)for(var d=0;d<y;d++)b&1<<d&&a(f[d])},a.choose=function(){var a=this.bits;if(a)for(var b=0;b<y;b++)if(a&1<<b)return f[b]},a.members=function(){var a=[],b=this.bits;if(b)for(var d=0;d<y;d++)b&1<<d&&a.push(f[d]);return a},a.setBlocks=function(a){for(var b=this.bits,d=0,e=a.length;d<e;d++)b|=1<<(a[d].bid&D);this.bits=b}):(a.forEachBlock=function(a){!0;for(var b=this.bits,d=0,e=b.length;d<e;d++){var g=b[d];if(g)for(var l=0;l<y;l++)g&1<<l&&a(f[d*y+l])}},a.choose=function(){for(var a=
this.bits,b=0,d=a.length;b<d;b++){var e=a[b];if(e)for(var g=0;g<y;g++)if(e&1<<g)return f[b*y+g]}},a.members=function(){for(var a=[],b=this.bits,d=0,e=b.length;d<e;d++){var g=b[d];if(g)for(var l=0;l<y;l++)g&1<<l&&a.push(f[d*y+l])}return a},a.setBlocks=function(a){for(var b=this.bits,d=0,e=a.length;d<e;d++){var f=a[d].bid;b[f>>B]|=1<<(f&D)}});this.BlockSet=u},normalizeReachableBlocks:function(){var a=this.bytecodes[0];!0;var e=this.BlockSet,d=[],f={},g={},l=[a];for(g[a.bid]=!0;a=l.top();)if(f[a.bid]){if(1===
f[a.bid]){f[a.bid]=2;d.push(a);for(var m=a.succs,p=0,r=m.length;p<r;p++)m[p].preds.push(a)}g[a.bid]=!1;l.pop()}else{f[a.bid]=1;g[a.bid]=!0;m=a.succs;p=0;for(r=m.length;p<r;p++){var s=m[p];g[s.bid]&&(a.spbacks||(a.spbacks=new e),a.spbacks.set(s.bid));!f[s.bid]&&l.push(s)}}this.blocks=d.reverse()},computeDominance:function(){var a=this.blocks,e=a.length,d=Array(e);d[0]=0;for(var f={},g=0;g<e;g++)f[a[g].bid]=g;for(var l=!0;l;){l=!1;for(g=1;g<e;g++){var m=a[g].preds,p=m.length,r=f[m[0].bid];if(!(r in
d))for(var s=1;s<p&&!(r=f[m[s].bid],r in d);s++);!0;for(s=0;s<p;s++){var w=f[m[s].bid];if(w!==r&&w in d){for(;w!==r;){for(;w>r;)w=d[w];for(;r>w;)r=d[r]}r=w}}d[g]!==r&&(d[g]=r,l=!0)}}a[0].dominator=a[0];for(g=1;g<e;g++)f=a[g],p=a[d[g]],f.dominator=p,p.dominatees.push(f),f.npreds=f.preds.length;e=[a[0]];for(a[0].level||(a[0].level=0);f=e.shift();){a=f.dominatees;s=0;for(p=a.length;s<p;s++)a[s].level=f.level+1;e.push.apply(e,a)}},analyzeControlFlow:function(){!0;this.detectBasicBlocks();this.normalizeReachableBlocks();
this.computeDominance();return this.analyzedControlFlow=!0},markLoops:function(){function a(b,d){var f=new e;f.setBlocks(b);f.recount();this.id=d;this.body=f;this.exit=new e;this.save={};this.head=new e;this.npreds=0}if(!this.analyzedControlFlow&&!this.analyzeControlFlow())return!1;var e=this.BlockSet,d;d=this.blocks;for(var f=new e,g=0,l=d.length;g<l;g++){var m=d[g],p=m.spbacks;if(p)for(var m=m.succs,r=0,s=m.length;r<s;r++){var w=m[r];p.get(w.bid)&&f.set(w.dominator.bid)}}d=f.members();if(0>=d.length)return this.markedLoops=
!0;d=d.sort(function(a,b){return a.level-b.level});f=0;for(g=d.length-1;0<=g;g--){for(var l=d[g],p=1,m={},r={},s=[],w=[],v=[],z=l.level+1,A=[l],u=void 0,B=void 0,u=void 0;u=A.top();)if(m[u.bid]){if(w.peek()===u){w.pop();var y=[];do B=s.pop(),r[B.bid]=!0,y.push(B);while(B!==u);(1<y.length||B.spbacks&&B.spbacks.get(B.bid))&&v.push(y)}A.pop()}else{m[u.bid]=p++;s.push(u);w.push(u);for(var B=u.succs,y=0,D=B.length;y<D;y++)if(u=B[y],!(u.level<z)){var F=u.bid;if(m[F]){if(!r[F])for(;m[w.peek().bid]>m[F];)w.pop()}else A.push(u)}}p=
v;if(0!==p.length){m=0;for(r=p.length;m<r;m++){s=p[m];w=new a(s,f++);v=0;for(z=s.length;v<z;v++)if(A=s[v],A.level===l.level+1&&!A.loop){A.loop=w;w.head.set(A.bid);u=A.preds;B=0;for(y=u.length;B<y;B++)w.body.get(u[B].bid)&&A.npreds--;w.npreds+=A.npreds}v=0;for(z=s.length;v<z;v++)A=s[v],A.level===l.level+1&&(A.npreds=w.npreds);w.head.recount()}}}return this.markedLoops=!0}};return a}();
(function(a){function b(a){for(var b=["leadingComments","loc"];a;)a.fields&&(b=a.fields.concat(b)),a=a.extends?f[a.extends]:null;return b}function e(a){return"_"+a}function d(g,m){if(!a[g]){for(var p=b(m),r=[],s=['this.type = "'+g+'";'],w=0,v=p.length;w<v;w++){var z=p[w];"@"===z.charAt(0)&&(p[w]=z=z.substr(1),r.push(z));s.push("this."+z+" = _"+z+";")}p=new Function(p.map(e),s.join("\n"));m.extends&&(s=d(m.extends,f[m.extends]),p.prototype=Object.create(s.prototype));Object.defineProperty(p.prototype,
"_children",{value:r,writable:!0,configurable:!0,enumerable:!1});a[g]=p}return a[g]}var f=a.lang={Node:{},Program:{"extends":"Node",fields:["@body"]},Statement:{"extends":"Node"},EmptyStatement:{"extends":"Statement"},BlockStatement:{"extends":"Statement",fields:["@body"]},ExpressionStatement:{"extends":"Statement",fields:["@expression"]},IfStatement:{"extends":"Statement",fields:["@test","@consequent","@alternate"]},LabeledStatement:{"extends":"Statement",fields:["@label","@body"]},BreakStatement:{"extends":"Statement",
fields:["@label"]},ContinueStatement:{"extends":"Statement",fields:["@label"]},WithStatement:{"extends":"Statement",fields:["@object","@body"]},SwitchStatement:{"extends":"Statement",fields:["@discriminant","@cases","lexical"]},ReturnStatement:{"extends":"Statement",fields:["@argument"]},ThrowStatement:{"extends":"Statement",fields:["@argument"]},TryStatement:{"extends":"Statement",fields:["@block","@handlers","@finalizer"]},WhileStatement:{"extends":"Statement",fields:["@test","@body"]},DoWhileStatement:{"extends":"Statement",
fields:["@body","@test"]},ForStatement:{"extends":"Statement",fields:["@init","@test","@update","@body"]},ForInStatement:{"extends":"Statement",fields:["@left","@right","@body","each"]},LetStatement:{"extends":"Statement",fields:["@head","@body"]},DebuggerStatement:{"extends":"Statement"},Declaration:{"extends":"Statement"},FunctionDeclaration:{"extends":"Declaration",fields:"@id @params @body @decltype generator expression @modifiers".split(" ")},VariableDeclaration:{"extends":"Declaration",fields:["kind",
"@declarations"]},VariableDeclarator:{"extends":"Node",fields:["@id","@init","@decltype","@arguments"]},Expression:{"extends":"Pattern"},ThisExpression:{"extends":"Expression"},ArrayExpression:{"extends":"Expression",fields:["@elements"]},ObjectExpression:{"extends":"Expression",fields:["@properties"]},Property:{"extends":"Node",fields:["@key","@value","kind"]},FunctionExpression:{"extends":"Expression",fields:"@id @params @body @decltype generator expression".split(" ")},SequenceExpression:{"extends":"Expression",
fields:["@expressions"]},UnaryExpression:{"extends":"Expression",fields:["operator","@argument","prefix"]},BinaryExpression:{"extends":"Expression",fields:["operator","@left","@right"]},AssignmentExpression:{"extends":"Expression",fields:["@left","operator","@right"]},UpdateExpression:{"extends":"Expression",fields:["operator","@argument","prefix"]},LogicalExpression:{"extends":"Expression",fields:["operator","@left","@right"]},ConditionalExpression:{"extends":"Expression",fields:["@test","@consequent",
"@alternate"]},NewExpression:{"extends":"Expression",fields:["@callee","@arguments"]},CallExpression:{"extends":"Expression",fields:["@callee","@arguments"]},MemberExpression:{"extends":"Expression",fields:["@object","@property","computed","kind"]},YieldExpression:{"extends":"Expression",fields:["@argument"]},ComprehensionExpression:{"extends":"Expression",fields:["@blocks","@filter"]},GeneratorExpression:{"extends":"Expression",fields:["@blocks","@filter"]},LetExpression:{"extends":"Expression",
fields:["@head","@body"]},Pattern:{"extends":"Node"},ObjectPattern:{"extends":"Pattern",fields:["@properties"]},ArrayPattern:{"extends":"Pattern",fields:["@elements"]},SwitchCase:{"extends":"Node",fields:["@test","@consequent"]},CatchClause:{"extends":"Node",fields:["@param","@guard","@body"]},Identifier:{"extends":"Expression",fields:["name","kind"]},Literal:{"extends":"Expression",fields:["value"]},Type:{"extends":"Node"},PointerType:{"extends":"Type",fields:["@base"]},ArrayType:{"extends":"PointerType",
fields:["length"]},StructType:{"extends":"Type",fields:["@id","@members","isUnion"]},MemberDeclarator:{"extends":"Node",fields:["modifiers","@declarator"]},ArrowType:{"extends":"Type",fields:["@params","@return"]},TypeIdentifier:{"extends":"Type",fields:["name"]},TypeAliasDirective:{"extends":"Node",fields:["@original","@alias"]},CastExpression:{"extends":"Expression",fields:["@as","@argument"]}};a.allFields=b;for(var g in f)d(g,f[g]);a.makePass=function(a,b){return function(d){for(var e,f,g,v=this._children,
z=0,A=v.length;z<A;z++)if(g=this[v[z]])if(g instanceof Array){f=this[v[z]]=[];for(var u=0,B=g.length;u<B;u++)g[u]?"function"===typeof g[u][a]&&(e=g[u][a](d),null!==e&&f.push(e)):f.push(g[u])}else"function"===typeof g[a]&&(e=g[a](d),this[v[z]]=null===e?void 0:e);return"function"===typeof this[b]?(d.logger&&"undefined"!==typeof this.loc?(d.logger.push(this),e=this[b](d),d.logger.pop()):e=this[b](d),null===e?null:e?e:this):this}};a.makePass=function(a,b,d){return function(e){for(var f,g,v,z=this._children,
A=0,u=z.length;A<u;A++)if(g=d?z.length-1-A:A,v=this[z[g]])if(v instanceof Array){g=this[z[g]]=[];var B;B=0;for(var y=v.length;B<y;B++)f=d?v.length-1-B:B,v[f]?"function"===typeof v[f][a]&&(f=v[f][a](e),null!==f&&(d?g.unshift(f):g.push(f))):d?g.unshift(v[f]):g.push(v[f])}else"function"===typeof v[a]&&(f=v[a](e),this[z[g]]=null===f?void 0:f);return"function"===typeof this[b]?(e.logger&&"undefined"!==typeof this.loc?(e.logger.push(this),f=this[b](e),e.logger.pop()):f=this[b](e),null===f?null:f?f:this):
this}};a.lift=function m(d){if(!d)return d;if(d instanceof Array)return d.map(function(a){return a?m(a):a});var e=d.type,g=a[e];if(!g)throw Error("unknown node type `"+e+"'");g=new g;g.loc=d.loc;for(var e=b(f[e]),w=0,v=e.length;w<v;w++){var z;"@"===e[w].charAt(0)?(z=e[w].substr(1),d[z]&&(g[z]=m(d[z]))):(z=e[w],g[z]=d[z])}return g};a.flatten=function p(a){if(!a)return a;if(a instanceof Array)return a.map(function(a){return p(a)});for(var d=a.type,e={type:d},d=b(f[d]),g=0,z=d.length;g<z;g++){var A;
"@"===d[g].charAt(0)?(A=d[g].substr(1),e[A]=a[A]?p(a[A]):null):(A=d[g],e[A]=a[A])}return e}})("undefined"===typeof exports?estransform={}:exports);
(function(a){function b(a){var b=a.length,d=[],e;for(e=0;e<b;e+=1)d[e]=a.charAt(e);return d}function e(a,b){var d="";for(b|=0;0<b;b>>>=1,a+=a)b&1&&(d+=a);return d}function d(a){a=a.charAt(a.length-1);return"\r"===a||"\n"===a}function f(a){var b={},d,e;for(d in a)a.hasOwnProperty(d)&&(e=a[d],b[d]="object"===typeof e&&null!==e?f(e):e);return b}function g(a,b){function d(a){return"object"===typeof a&&a instanceof Object&&!(a instanceof RegExp)}var e,f;for(e in b)b.hasOwnProperty(e)&&(f=b[e],d(f)?d(a[e])?
g(a[e],f):a[e]=g({},f):a[e]=f);return a}function l(a){return 0<="\t\v\f \u00a0".indexOf(a)||5760<=a.charCodeAt(0)&&0<="\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\ufeff".indexOf(a)}function m(a){return 0<="\n\r\u2028\u2029".indexOf(a)}function p(a){return"$"===a||"_"===a||"\\"===a||"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"0"<=a&&"9">=a||128<=a.charCodeAt(0)&&Q.NonAsciiIdentifierPart.test(a)}function r(a,b){var d=a.charAt(a.length-1),e=b.charAt(0);return("+"===
d||"-"===d)&&d===e||p(d)&&p(e)?a+" "+b:l(d)||m(d)||l(e)||m(e)?a+b:a+O+b}function s(a){return G+a}function w(a,b){if("Line"===a.type)return d(a.value)?"//"+a.value:"//"+a.value+"\n";if(ca.format.indent.adjustMultilineComment&&/[\n\r]/.test(a.value)){var e=b,f,g,m,r,u,p;f=("/*"+a.value+"*/").split(/\r\n|[\r\n]/);p=Number.MAX_VALUE;g=1;for(m=f.length;g<m;g+=1){r=f[g];for(u=0;u<r.length&&l(r[u]);)u+=1;p>u&&(p=u)}"undefined"!==typeof e?(r=G,"*"===f[1][p]&&(e+=" "),G=e):(1===p%2&&(p-=1),r=G);g=1;for(m=
f.length;g<m;g+=1)f[g]=s(f[g].slice(p));G=r;return f.join("\n")}return"/*"+a.value+"*/"}function v(a,b,d){return b<d?"("+a+")":a}function z(a,b){var d,e;d=!ca.comment||!a.leadingComments;if(a.type===E.BlockStatement&&d)return O+y(a);if(a.type===E.EmptyStatement&&d)return";";d=G;G+=H;e=L+s(y(a,{semicolonOptional:b}));G=d;return e}function A(a,b){return a.type===E.BlockStatement&&(!ca.comment||!a.leadingComments)&&!d(b)?O:d(b)?G+"":(""===L?" ":L)+(G+"")}function u(a){var b,d,e;b="(";d=0;for(e=a.params.length;d<
e;d+=1)b+=a.params[d].name,d+1<e&&(b+=","+O);return b+")"+z(a.body)}function B(a,e){var f,g,l,m,p,A;g=e.precedence;p=e.allowIn;A=e.allowCall;switch(a.type){case E.SequenceExpression:f="";p|=C.Sequence<g;m=0;for(l=a.expressions.length;m<l;m+=1)f+=B(a.expressions[m],{precedence:C.Assignment,allowIn:p,allowCall:!0}),m+1<l&&(f+=","+O);f=v(f,C.Sequence,g);break;case E.AssignmentExpression:p|=C.Assignment<g;f=v(B(a.left,{precedence:C.Call,allowIn:p,allowCall:!0})+O+a.operator+O+B(a.right,{precedence:C.Assignment,
allowIn:p,allowCall:!0}),C.Assignment,g);break;case E.ConditionalExpression:p|=C.Conditional<g;f=v(B(a.test,{precedence:C.LogicalOR,allowIn:p,allowCall:!0})+O+"?"+O+B(a.consequent,{precedence:C.Assignment,allowIn:p,allowCall:!0})+O+":"+O+B(a.alternate,{precedence:C.Assignment,allowIn:p,allowCall:!0}),C.Conditional,g);break;case E.LogicalExpression:case E.BinaryExpression:l=M[a.operator];p|=l<g;f=r(B(a.left,{precedence:l,allowIn:p,allowCall:!0}),a.operator);m=B(a.right,{precedence:l+1,allowIn:p,allowCall:!0});
f="/"===a.operator&&"/"===f.charAt(f.length-1)?f+(" "+m):r(f,m);f="in"===a.operator&&!p?"("+f+")":v(f,l,g);break;case E.CallExpression:f=B(a.callee,{precedence:C.Call,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!1});f+="(";m=0;for(l=a.arguments.length;m<l;m+=1)f+=B(a.arguments[m],{precedence:C.Assignment,allowIn:!0,allowCall:!0}),m+1<l&&(f+=","+O);f+=")";f=A?v(f,C.Call,g):"("+f+")";break;case E.NewExpression:l=a.arguments.length;p=void 0===e.allowUnparenthesizedNew||e.allowUnparenthesizedNew;
f=r("new",B(a.callee,{precedence:C.New,allowIn:!0,allowCall:!1,allowUnparenthesizedNew:p&&!W&&0===l}));if(!p||W||0<l){f+="(";for(m=0;m<l;m+=1)f+=B(a.arguments[m],{precedence:C.Assignment,allowIn:!0,allowCall:!0}),m+1<l&&(f+=","+O);f+=")"}f=v(f,C.New,g);break;case E.MemberExpression:f=B(a.object,{precedence:C.Call,allowIn:!0,allowCall:A,allowUnparenthesizedNew:!1});a.computed?f+="["+B(a.property,{precedence:C.Sequence,allowIn:!0,allowCall:A})+"]":(a.object.type===E.Literal&&"number"===typeof a.object.value&&
0>f.indexOf(".")&&!/[eExX]/.test(f)&&!(2<=f.length&&"0"===f[0])&&(f+="."),f+="."+a.property.name);f=v(f,C.Member,g);break;case E.UnaryExpression:m=B(a.argument,{precedence:C.Unary+(a.argument.type===E.UnaryExpression&&3>a.operator.length&&a.argument.operator===a.operator?1:0),allowIn:!0,allowCall:!0});""===O?f=r(a.operator,m):(f=a.operator,2<f.length&&(f+=" "),f+=m);f=v(f,C.Unary,g);break;case E.UpdateExpression:f=a.prefix?v(a.operator+B(a.argument,{precedence:C.Unary,allowIn:!0,allowCall:!0}),C.Unary,
g):v(B(a.argument,{precedence:C.Postfix,allowIn:!0,allowCall:!0})+a.operator,C.Postfix,g);break;case E.FunctionExpression:f="function";f=a.id?f+(" "+a.id.name):f+O;f+=u(a);break;case E.ArrayExpression:if(!a.elements.length){f="[]";break}f="["+L;g=G;G+=H;m=0;for(l=a.elements.length;m<l;m+=1)a.elements[m]?f+=s(B(a.elements[m],{precedence:C.Assignment,allowIn:!0,allowCall:!0})):(f+=G+"",m+1===l&&(f+=",")),m+1<l&&(f+=","+L);G=g;d(f)||(f+=L);f+=G+"]";break;case E.Property:f="get"===a.kind||"set"===a.kind?
a.kind+" "+B(a.key,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+u(a.value):B(a.key,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+":"+O+B(a.value,{precedence:C.Assignment,allowIn:!0,allowCall:!0});break;case E.ObjectExpression:if(!a.properties.length){f="{}";break}f="{"+L;g=G;G+=H;m=0;for(l=a.properties.length;m<l;m+=1)f+=s(B(a.properties[m],{precedence:C.Sequence,allowIn:!0,allowCall:!0})),m+1<l&&(f+=","+L);G=g;d(f)||(f+=L);f+=G+"}";break;case E.ThisExpression:f="this";break;case E.Identifier:f=
a.name;break;case E.Literal:if(a.hasOwnProperty("raw")&&da)try{if(l=da(a.raw).body[0].expression,l.type===E.Literal&&l.value===a.value){f=a.raw;break}}catch(w){}if(null===a.value){f="null";break}if("string"===typeof a.value){f=a.value;A="";var z;m=l=0;"undefined"===typeof f[0]&&(f=b(f));g=0;for(p=f.length;g<p;g+=1){z=f[g];if("'"===z)l+=1;else if('"'===z)m+=1;else if("/"===z&&I)A+="\\";else if(0<="\\\n\r\u2028\u2029".indexOf(z)){var y="\\";switch(z){case "\\":y+="\\";break;case "\n":y+="n";break;case "\r":y+=
"r";break;case "\u2028":y+="u2028";break;case "\u2029":y+="u2029";break;default:throw Error("Incorrectly classified character");}A+=y;continue}else if(I&&" ">z||!I&&!(U||" "<=z&&"~">=z)){var y=f[g+1],D=z.charCodeAt(0),F=D.toString(16),Q="\\";switch(z){case "\b":Q+="b";break;case "\f":Q+="f";break;case "\t":Q+="t";break;default:Q=I||255<D?Q+("u"+"0000".slice(F.length)+F):"\x00"===z&&0>"0123456789".indexOf(y)?Q+"0":"\v"===z?Q+"v":Q+("x"+"00".slice(F.length)+F)}A+=Q;continue}A+=z}l=!("double"===P||"auto"===
P&&m<l);f=A;A=l?"'":'"';"undefined"===typeof f[0]&&(f=b(f));g=0;for(p=f.length;g<p;g+=1){z=f[g];if("'"===z&&l||'"'===z&&!l)A+="\\";A+=z}f=A+(l?"'":'"');break}if("number"===typeof a.value){f=a.value;if(f!==f)throw Error("Numeric literal whose value is NaN");if(0>1/f)throw Error("Numeric literal whose value is negative");if(f===1/0)f=I?"null":J?"1e400":"1e+400";else{g=""+f;if(J&&!(3>g.length)){p=g.indexOf(".");!I&&("0"===g.charAt(0)&&1===p)&&(p=0,g=g.slice(1));l=g;g=g.replace("e+","e");m=0;if(0<(A=
l.indexOf("e")))m=+l.slice(A+1),l=l.slice(0,A);0<=p&&(m-=l.length-p-1,l=+(l.slice(0,p)+l.slice(p+1))+"");for(A=0;"0"===l.charAt(l.length+A-1);)A-=1;0!==A&&(m-=A,l=l.slice(0,A));0!==m&&(l+="e"+m);if((l.length<g.length||N&&1E12<f&&Math.floor(f)===f&&(l="0x"+f.toString(16)).length<g.length)&&+l===f)g=l}f=g}break}f=a.value.toString()}if(void 0===f)throw Error("Unknown expression type: "+a.type);return f}function y(a,b){var f,g,l,p,v,D,F;D=!0;F=";";b&&(D=void 0===b.allowIn||b.allowIn,!fa&&!0===b.semicolonOptional&&
(F=""));switch(a.type){case E.BlockStatement:l="{"+L;p=G;G+=H;f=0;for(g=a.body.length;f<g;f+=1)v=s(y(a.body[f],{semicolonOptional:f===g-1})),l+=v,d(v)||(l+=L);G=p;l+=G+"}";break;case E.BreakStatement:l=a.label?"break "+a.label.name+F:"break"+F;break;case E.ContinueStatement:l=a.label?"continue "+a.label.name+F:"continue"+F;break;case E.DoWhileStatement:l=r("do",z(a.body));l+=A(a.body,l);l+="while"+O+"("+B(a.test,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+")"+F;break;case E.CatchClause:p=G;G+=
H;l="catch"+O+"("+B(a.param,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+")";G=p;l+=z(a.body);break;case E.DebuggerStatement:l="debugger"+F;break;case E.EmptyStatement:l=";";break;case E.ExpressionStatement:l=B(a.expression,{precedence:C.Sequence,allowIn:!0,allowCall:!0});l="{"===l.charAt(0)||"function"===l.slice(0,8)&&0<=" (".indexOf(l.charAt(8))?"("+l+")"+F:l+F;break;case E.VariableDeclarator:l=a.init?a.id.name+O+"="+O+B(a.init,{precedence:C.Assignment,allowIn:D,allowCall:!0}):a.id.name;break;
case E.VariableDeclaration:l=a.kind;if(1===a.declarations.length&&a.declarations[0].init&&a.declarations[0].init.type===E.FunctionExpression)l+=" "+y(a.declarations[0],{allowIn:D});else{p=G;G+=H;v=a.declarations[0];l=ca.comment&&v.leadingComments?l+("\n"+s(y(v,{allowIn:D}))):l+(" "+y(v,{allowIn:D}));f=1;for(g=a.declarations.length;f<g;f+=1)v=a.declarations[f],l=ca.comment&&v.leadingComments?l+(","+L+s(y(v,{allowIn:D}))):l+(","+O+y(v,{allowIn:D}));G=p}l+=F;break;case E.ThrowStatement:l=r("throw",B(a.argument,
{precedence:C.Sequence,allowIn:!0,allowCall:!0}))+F;break;case E.TryStatement:l="try"+z(a.block);l+=A(a.block,l);f=0;for(g=a.handlers.length;f<g;f+=1)if(l+=y(a.handlers[f]),a.finalizer||f+1!==g)l+=A(a.handlers[f].body,l);a.finalizer&&(l+="finally"+z(a.finalizer));break;case E.SwitchStatement:p=G;G+=H;l="switch"+O+"("+B(a.discriminant,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+")"+O+"{"+L;G=p;if(a.cases){f=0;for(g=a.cases.length;f<g;f+=1)v=s(y(a.cases[f],{semicolonOptional:f===g-1})),l+=v,d(v)||
(l+=L)}l+=G+"}";break;case E.SwitchCase:p=G;G+=H;l=a.test?r("case",B(a.test,{precedence:C.Sequence,allowIn:!0,allowCall:!0}))+":":"default:";f=0;if((g=a.consequent.length)&&a.consequent[0].type===E.BlockStatement)v=z(a.consequent[0]),l+=v,f=1;for(f!==g&&!d(l)&&(l+=L);f<g;f+=1)v=s(y(a.consequent[f],{semicolonOptional:f===g-1&&""===F})),l+=v,f+1!==g&&!d(v)&&(l+=L);G=p;break;case E.IfStatement:p=G;G+=H;a.alternate?a.alternate.type===E.IfStatement?(l="if"+O+"("+B(a.test,{precedence:C.Sequence,allowIn:!0,
allowCall:!0})+")",G=p,l+=z(a.consequent),l+=A(a.consequent,l),l+="else "+y(a.alternate)):(l="if"+O+"("+B(a.test,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+")",G=p,l+=z(a.consequent),l+=A(a.consequent,l),l=r(l+"else",z(a.alternate,""===F))):(l="if"+O+"("+B(a.test,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+")",G=p,l+=z(a.consequent,""===F));break;case E.ForStatement:p=G;G+=H;l="for"+O+"(";l=a.init?a.init.type===E.VariableDeclaration?l+y(a.init,{allowIn:!1}):l+(B(a.init,{precedence:C.Sequence,
allowIn:!1,allowCall:!0})+";"):l+";";l=a.test?l+(O+B(a.test,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+";"):l+";";l=a.update?l+(O+B(a.update,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+")"):l+")";G=p;l+=z(a.body,""===F);break;case E.ForInStatement:l="for"+O+"(";a.left.type===E.VariableDeclaration?(p=G,G+=H+H,l+=a.left.kind+" "+y(a.left.declarations[0],{allowIn:!1})):(p=G,G+=H,l+=B(a.left,{precedence:C.Call,allowIn:!0,allowCall:!0}));p=G=p;G+=H;l=r(l,"in");l=r(l,B(a.right,{precedence:C.Sequence,
allowIn:!0,allowCall:!0}))+")";G=p;l+=z(a.body,""===F);break;case E.LabeledStatement:l=a.label.name+":"+z(a.body,""===F);break;case E.Program:l="";f=0;for(g=a.body.length;f<g;f+=1)v=s(y(a.body[f],{semicolonOptional:f===g-1})),l+=v,f+1<g&&!d(v)&&(l+=L);break;case E.FunctionDeclaration:l="function"+O;a.id&&(l+=(""===O?" ":"")+a.id.name);l+=u(a);break;case E.ReturnStatement:l=a.argument?r("return",B(a.argument,{precedence:C.Sequence,allowIn:!0,allowCall:!0}))+F:"return"+F;break;case E.WhileStatement:p=
G;G+=H;l="while"+O+"("+B(a.test,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+")";G=p;l+=z(a.body,""===F);break;case E.WithStatement:p=G,G+=H,l="with"+O+"("+B(a.object,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+")",G=p,l+=z(a.body,""===F)}if(void 0===l)throw Error("Unknown statement type: "+a.type);if(ca.comment){f=l;if(a.leadingComments){p=f;F=a.leadingComments[0];f=w(F);d(f)||(f+="\n");g=1;for(l=a.leadingComments.length;g<l;g+=1)F=a.leadingComments[g],F=w(F),d(F)||(F+="\n"),f+=G+F;f+=G+
p}if(a.trailingComments){p=!d(f);g=G+f+H;for(l=g.length-1;0<=l&&!m(g.charAt(l));l-=1);v=e(" ",g.length-1-l);g=0;for(l=a.trailingComments.length;g<l;g+=1)F=a.trailingComments[g],p?(f=0===g?f+H:f+v,f+=w(F,v)):f+=s(w(F)),g!==l-1&&!d(f)&&(f+="\n")}return f}return l}function D(a,b){var d,e,f,g,l,m,r;d=[a];for(e=[];d.length;)if(f=d.pop()){g=b.enter?b.enter(f):void 0;if(g===S.Break)break;d.push(null);e.push(f);if(g!==S.Skip){m=R[f.type];for(g=m.length;0<=(g-=1);)if(r=f[m[g]])if(K(r))for(l=r.length;0<=(l-=
1);)r[l]&&d.push(r[l]);else d.push(r)}}else if(f=e.pop(),g=b.leave?b.leave(f):void 0,g===S.Break)break}function F(a,b){var d,e,f,g;e=b.length;for(f=0;e;)d=e>>>1,g=f+d,b[g].range[0]>a.range[0]?e=d:(f=g+1,e-=d+1);d=f;a.extendedRange=[a.range[0],a.range[1]];d!==b.length&&(a.extendedRange[1]=b[d].range[0]);d-=1;0<=d&&(d<b.length?a.extendedRange[0]=b[d].range[1]:(void 0).length&&(a.extendedRange[1]=b[b.length-1].range[0]));return a}var E,C,M,Q,R,S,K,G,H,I,J,N,P,U,L,O,W,fa,ca,da;E={AssignmentExpression:"AssignmentExpression",
ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",
TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};C={Sequence:0,Assignment:1,Conditional:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,Member:17,Primary:18};M={"||":C.LogicalOR,"&&":C.LogicalAND,
"|":C.BitwiseOR,"^":C.BitwiseXOR,"&":C.BitwiseAND,"==":C.Equality,"!=":C.Equality,"===":C.Equality,"!==":C.Equality,"<":C.Relational,">":C.Relational,"<=":C.Relational,">=":C.Relational,"in":C.Relational,"instanceof":C.Relational,"<<":C.BitwiseSHIFT,">>":C.BitwiseSHIFT,">>>":C.BitwiseSHIFT,"+":C.Additive,"-":C.Additive,"*":C.Multiplicative,"%":C.Multiplicative,"/":C.Multiplicative};Q={NonAsciiIdentifierPart:RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0\u08a2-\u08ac\u08e4-\u08fe\u0900-\u0963\u0966-\u096f\u0971-\u0977\u0979-\u097f\u0981-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d02\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191c\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1d00-\u1de6\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua697\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a\uaa7b\uaa80-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")};
(K=Array.isArray)||(K=function(a){return"[object Array]"===Object.prototype.toString.call(a)});R={AssignmentExpression:["left","right"],ArrayExpression:["elements"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DoWhileStatement:["body","test"],DebuggerStatement:[],EmptyStatement:[],ExpressionStatement:["expression"],
ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],Identifier:[],IfStatement:["test","consequent","alternate"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],
SwitchStatement:["descriminant","cases"],SwitchCase:["test","consequent"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],PointerType:["base"],StructType:["id","fields"],FieldDeclarator:["id","decltype"],ArrowType:["params","return"],TypeIdentifier:[],TypeAliasDirective:["original",
"alias"],CastExpression:["as","argument"]};S={Break:1,Skip:2};a.version="0.0.6-dev";a.generate=function(a,b){var d={indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0}};"undefined"!==typeof b?("string"===typeof b.indent&&(d.format.indent.style=b.indent),"number"===typeof b.base&&(d.format.indent.base=b.base),b=g(d,b),H=b.format.indent.style,
G="string"===typeof b.base?b.base:e(H,b.format.indent.base)):(b=d,H=b.format.indent.style,G=e(H,b.format.indent.base));I=b.format.json;J=b.format.renumber;N=I?!1:b.format.hexadecimal;P=I?"double":b.format.quotes;U=b.format.escapeless;b.format.compact?L=O=H=G="":(L="\n",O=" ");W=b.format.parentheses;fa=b.format.semicolons;da=I?null:b.parse;ca=b;switch(a.type){case E.BlockStatement:case E.BreakStatement:case E.CatchClause:case E.ContinueStatement:case E.DoWhileStatement:case E.DebuggerStatement:case E.EmptyStatement:case E.ExpressionStatement:case E.ForStatement:case E.ForInStatement:case E.FunctionDeclaration:case E.IfStatement:case E.LabeledStatement:case E.Program:case E.ReturnStatement:case E.SwitchStatement:case E.SwitchCase:case E.ThrowStatement:case E.TryStatement:case E.VariableDeclaration:case E.VariableDeclarator:case E.WhileStatement:case E.WithStatement:return y(a);
case E.AssignmentExpression:case E.ArrayExpression:case E.BinaryExpression:case E.CallExpression:case E.ConditionalExpression:case E.FunctionExpression:case E.Identifier:case E.Literal:case E.LogicalExpression:case E.MemberExpression:case E.NewExpression:case E.ObjectExpression:case E.Property:case E.SequenceExpression:case E.ThisExpression:case E.UnaryExpression:case E.UpdateExpression:return B(a,{precedence:C.Sequence,allowIn:!0,allowCall:!0})}throw Error("Unknown node type: "+a.type);};a.traverse=
D;a.attachComments=function(a,b,d){var e=[],g,l;if(!a.range)throw Error("attachComments needs range information");if(!d.length){if(b.length){l=0;for(g=b.length;l<g;l+=1)d=f(b[l]),d.extendedRange=[0,a.range[0]],e.push(d);a.leadingComments=e}return a}l=0;for(g=b.length;l<g;l+=1)e.push(F(f(b[l]),d));D(a,{cursor:0,enter:function(a){for(var b;this.cursor<e.length;){b=e[this.cursor];if(b.extendedRange[1]>a.range[0])break;b.extendedRange[1]===a.range[0]?(a.leadingComments||(a.leadingComments=[]),a.leadingComments.push(b),
e.splice(this.cursor,1)):this.cursor+=1}if(this.cursor===e.length)return S.Break;if(e[this.cursor].extendedRange[0]>a.range[1])return S.Skip}});D(a,{cursor:0,leave:function(a){for(var b;this.cursor<e.length;){b=e[this.cursor];if(a.range[1]<b.extendedRange[0])break;a.range[1]===b.extendedRange[0]?(a.trailingComments||(a.trailingComments=[]),a.trailingComments.push(b),e.splice(this.cursor,1)):this.cursor+=1}if(this.cursor===e.length)return S.Break;if(e[this.cursor].extendedRange[0]>a.range[1])return S.Skip}});
return a}})("undefined"===typeof exports?escodegen={}:exports);
var verifierOptions=systemOptions.register(new OptionSet("Verifier Options")),verifierTraceLevel=verifierOptions.register(new Option("tv","tv","number",0,"Verifier Trace Level")),Type=function(){function a(){unexpected("Type is Abstract")}a.prototype.equals=function(a){return this===a};a.prototype.merge=function(a){unexpected("Merging "+this+" with "+a)};a.cache={name:{},classInfo:[],instanceInfo:[],scriptInfo:[],methodInfo:[]};a.from=function(b,d){var f=null;b instanceof ClassInfo?f=a.cache.classInfo:
b instanceof InstanceInfo?f=a.cache.instanceInfo:b instanceof ScriptInfo&&(f=a.cache.scriptInfo);return f?f[b.id]||(f[b.id]=new TraitsType(b,d)):b instanceof Activation?new TraitsType(b.methodInfo):b instanceof Global?new TraitsType(b.scriptInfo):b instanceof Interface?new TraitsType(b.classInfo,d):b instanceof MethodInfo?new MethodType(b):d&&b instanceof Class?a.from(b.classInfo,d):Type.Any};a.fromSimpleName=function(a,b){return Type.fromName(Multiname.fromSimpleName(a),b)};a.fromName=function(b,
d){if(void 0===b)return Type.Undefined;var f=Multiname.isQName(b)?Multiname.getFullQualifiedName(b):void 0;if(f){var g=a.cache.name[f];if(g)return g}if(f===Multiname.getPublicQualifiedName("void"))return Type.Void;!0;g=(g=d.findClassInfo(b))?a.from(g,d):Type.Any;b.hasTypeParameter()&&(g=new ParameterizedType(g,a.fromName(b.typeParameter,d)));return a.cache.name[f]=g};a.prototype.applyType=function(a){return new ParameterizedType(this,a)};a.prototype.toString=function(){return"[type]"};a.prototype.isNumeric=
function(){return this===Type.Int||this===Type.Uint||this===Type.Number};a.prototype.isString=function(){return this===Type.String};a.prototype.isDirectlyReadable=function(){return this===Type.Array};a.prototype.isIndexedReadable=function(){return this.isParameterizedType()};a.prototype.isDirectlyWriteable=function(){return this===Type.Array};a.prototype.isIndexedWriteable=function(){return this.isParameterizedType()};a.prototype.isVector=function(){return this.isParameterizedType()};a.prototype.isNotDirectlyIndexable=
function(){return this===Type.Any||this===Type.XML||this===Type.XMLList||this===Type.Dictionary};a.prototype.isParameterizedType=function(){return this instanceof ParameterizedType};a.prototype.instanceType=function(){return this};a.prototype.getTrait=function(){return null};a.prototype.super=function(){unexpected("Can't call super on "+this)};a.prototype.isSubtypeOf=function(a){return this===a||this.equals(a)?!0:this.merge(a)===this};var b=!1;a.initializeTypes=function(e){b||(a.Any=new AtomType("Any"),
a.Null=new AtomType("Null"),a.Undefined=new AtomType("Undefined"),a.Void=new AtomType("Void"),a.Int=Type.fromSimpleName("int",e).instanceType(),a.Uint=Type.fromSimpleName("uint",e).instanceType(),a.Class=Type.fromSimpleName("Class",e).instanceType(),a.Array=Type.fromSimpleName("Array",e).instanceType(),a.Object=Type.fromSimpleName("Object",e).instanceType(),a.String=Type.fromSimpleName("String",e).instanceType(),a.Number=Type.fromSimpleName("Number",e).instanceType(),a.Boolean=Type.fromSimpleName("Boolean",
e).instanceType(),a.Function=Type.fromSimpleName("Function",e).instanceType(),a.XML=Type.fromSimpleName("XML",e).instanceType(),a.XMLList=Type.fromSimpleName("XMLList",e).instanceType(),a.Dictionary=Type.fromSimpleName("flash.utils.Dictionary",e).instanceType(),b=!0)};return a}(),AtomType=function(){function a(a){this.name=a}a.prototype=Object.create(Type.prototype);a.prototype.toString=function(){if(this===Type.Any)return"?";if(this===Type.Undefined)return"_";if(this===Type.Null)return"X";if(this===
Type.Void)return"V";unexpected()};a.prototype.merge=function(a){return a instanceof TraitsType?Type.Any:this===a?this:Type.Any};return a}(),MethodType=function(){function a(a){this.methodInfo=a}a.prototype=Object.create(Type.prototype);a.prototype.toString=function(){return"MT "+this.methodInfo};return a}(),TraitsType=function(){function a(a,b){!0;this.object=a;this.traits=a.traits;this.domain=b;this.object instanceof InstanceInfo&&!0}function b(a){if(a instanceof ScriptInfo)return"SI";if(a instanceof
ClassInfo)return"CI:"+a.instanceInfo.name.name;if(a instanceof InstanceInfo)return"II:"+a.name.name;if(a instanceof MethodInfo)return"MI";if(a instanceof Activation)return"AC";!0}function e(a,b,g){var l=!g,m;if(Multiname.isQName(b)){w=Multiname.getQualifiedName(b);r=0;for(s=a.length;r<s;r++)if(m=a[r],Multiname.getQualifiedName(m.name)===w&&!(g&&m.isGetter()||l&&m.isSetter()))return m}else if(!(b instanceof MultinameType)){!0;for(var p,r=0,s=b.namespaces.length;r<s;r++){var w=b.getQName(r);if(b.namespaces[r].isDynamic())p=
w;else if(m=e(a,w,g))return m}if(p)return e(a,p,g)}}a.prototype=Object.create(Type.prototype);a.prototype.getTrait=function(a,b,g){if(a instanceof MultinameType||a.isAttribute())return null;if(g&&(this.isInstanceInfo()||this.isClassInfo())){g=this;do{var l=g.getTrait(a,b,!1);l||(g=g.super())}while(!l&&g);return l}return e(this.traits,a,b)};a.prototype.getTraitAt=function(a){if(this.object instanceof ScriptInfo||this.object instanceof MethodInfo){a:{for(var b=this.traits,e=b.length-1;0<=e;e--)if(b[e].slotId===
a){a=b[e];break a}unexpected("Cannot find trait with slotId: "+a+" in "+b);a=void 0}return a}};a.prototype.toString=function(){switch(this){case Type.Int:return"I";case Type.Uint:return"U";case Type.Array:return"A";case Type.Object:return"O";case Type.String:return"S";case Type.Number:return"N";case Type.Boolean:return"B";case Type.Function:return"F"}return b(this.object)};a.prototype.instanceType=function(){!0;return this.instanceCache||(this.instanceCache=Type.from(this.object.instanceInfo,this.domain))};
a.prototype.classType=function(){!0;return this.instanceCache||(this.instanceCache=Type.from(this.object.classInfo,this.domain))};a.prototype.super=function(){if(this.object instanceof ClassInfo)return Type.Class;!0;if(this.object.superName){var a=Type.fromName(this.object.superName,this.domain).instanceType();!0;return a}return null};a.prototype.isClassInfo=function(){return this.object instanceof ClassInfo};a.prototype.isInstanceInfo=function(){return this.object instanceof InstanceInfo};a.prototype.isInstanceOrClassInfo=
function(){return this.isInstanceInfo()||this.isClassInfo()};a.prototype.equals=function(a){return this.traits===a.traits};a.prototype.merge=function(a){if(a instanceof TraitsType){if(this.equals(a))return this;if(this.isNumeric()&&a.isNumeric())return Type.Number;if(this.isInstanceInfo()&&a.isInstanceInfo()){for(var b=[],e=this;e;e=e.super())b.push(e);for(e=a;e;e=e.super())for(a=0;a<b.length;a++)if(b[a].equals(e))return e;return Type.Object}}return Type.Any};return a}(),MultinameType=function(){function a(a,
e,d){this.namespaces=a;this.name=e;this.flags=d}a.prototype=Object.create(Type.prototype);a.prototype.toString=function(){return"MN"};return a}(),ParameterizedType=function(){function a(a,e){this.type=a;this.parameter=e}a.prototype=Object.create(Type.prototype);a.prototype.toString=function(){return this.type+"<"+this.parameter+">"};a.prototype.instanceType=function(){!0;return new ParameterizedType(this.type.instanceType(),this.parameter.instanceType())};a.prototype.equals=function(a){return a instanceof
ParameterizedType?this.type.equals(a.type)&&this.parameter.equals(a.parameter):!1};a.prototype.merge=function(a){return a instanceof TraitsType&&this.equals(a)?this:Type.Any};return a}(),TypeInformation=function(){function a(){}a.prototype.toString=function(){return toKeyValueArray(this).map(function(a){return a[0]+": "+a[1]}).join(" | ")};return a}(),Verifier=function(){function a(a){this.name="VerifierError";this.message=a||""}function b(){this.writer=new IndentingWriter}var e,d=function(){this.id=
m+=1;this.stack=[];this.scope=[];this.local=[]},f=function(a,b){if(a.length!=b.length)return!1;for(var d=a.length-1;0<=d;d--)if(!a[d].equals(b[d]))return!1;return!0},g=function(a,b){if(a.length!=b.length)return!1;for(var d=a.length-1;0<=d;d--)if(!(a[d]===b[d]||a[d].equals(b[d]))&&a[d].merge(b[d])!==a[d])return!1;return!0},l=function(a,b){!0;for(var d=a.length-1;0<=d;d--)!0,a[d]!==b[d]&&(a[d]=a[d].merge(b[d]))},m=0;d.prototype.clone=function(){var a=new e;a.originalId=this.id;a.stack=this.stack.slice(0);
a.scope=this.scope.slice(0);a.local=this.local.slice(0);return a};d.prototype.trace=function(a){a.writeLn(this.toString())};d.prototype.toString=function(){return"<"+this.id+(this.originalId?":"+this.originalId:"")+", L["+this.local.join(", ")+"], S["+this.stack.join(", ")+"], $["+this.scope.join(", ")+"]>"};d.prototype.equals=function(a){return f(this.stack,a.stack)&&f(this.scope,a.scope)&&f(this.local,a.local)};d.prototype.isSubset=function(a){return g(this.stack,a.stack)&&g(this.scope,a.scope)&&
g(this.local,a.local)};d.prototype.merge=function(a){l(this.local,a.local);l(this.stack,a.stack);l(this.scope,a.scope)};e=d;var p=function(a,b){this.scope=b;this.methodInfo=a;this.domain=a.abc.applicationDomain;this.writer=new IndentingWriter;this.returnType=Type.Undefined};p.prototype.verify=function(){var a=this.methodInfo,b=verifierTraceLevel.value?this.writer:null,d=a.analysis.blocks;d.forEach(function(a){a.entryState=a.exitState=null});b&&this.methodInfo.trace(b);var f=new e;!0;this.thisType=
a.holder?Type.from(a.holder,this.domain):Type.Any;f.local.push(this.thisType);for(var g=0;g<a.parameters.length;g++)f.local.push(Type.fromName(a.parameters[g].type,this.domain).instanceType());var l=a.localCount-a.parameters.length-1;if(a.needsRest()||a.needsArguments())f.local.push(Type.Array),l-=1;for(g=0;g<l;g++)f.local.push(Type.Undefined);!0;b&&f.trace(b);a=0;for(g=d.length;a<g;a++)d[a].bdo=a;var m=new SortedList(function(a,b){return a.bdo-b.bdo});d[0].entryState=f;for(m.push(d[0]);m.peek();){var p=
m.pop(),y=p.exitState=p.entryState.clone();this.verifyBlock(p,y);p.succs.forEach(function(a){m.contains(a)?(b&&b.writeLn("Forward Merged Block: "+a.bid+" "+y.toString()+" with "+a.entryState.toString()),a.entryState.merge(y),b&&b.writeLn("Merged State: "+a.entryState)):a.entryState?a.entryState.isSubset(y)||(b&&b.writeLn("Backward Merged Block: "+p.bid+" with "+a.bid+" "+y.toString()+" with "+a.entryState.toString()),a.entryState.merge(y),m.push(a),b&&b.writeLn("Merged State: "+a.entryState)):(a.entryState=
y.clone(),m.push(a),b&&b.writeLn("Added Block: "+a.bid+" to worklist: "+a.entryState.toString()))})}b&&b.writeLn("Inferred return type: "+this.returnType);this.methodInfo.inferredReturnType=this.returnType};p.prototype.verifyBlock=function(b,d){function e(a){return a instanceof TraitsType||a instanceof ParameterizedType?a===Type.Function||a===Type.Class||a===Type.Object?Type.Object:a.instanceType():Type.Any}function f(){return J.ti||(J.ti=new TypeInformation)}function g(a){!0;f().type=a;Q.push(a)}
function l(){return Q.pop()}function m(a,b){if(a instanceof MultinameType)return Type.Any;for(var d=R.length-1;0<=d;d--)if(R[d]instanceof TraitsType){var e=R[d].getTrait(a,!1,!0);if(e)return f().scopeDepth=R.length-d-1,R[d]}else return Type.Any;if(isClassOrInstanceInfo(I.holder)){var g;I.holder instanceof ClassInfo?g=Type.from(I.holder,G):I.holder instanceof InstanceInfo&&(g=Type.from(I.holder,G).classType());if(e=g.getTrait(a,!1,!0))return I.isInstanceInitializer||(f().object=LazyInitializer.create(g.object)),
g}return C&&(C.object&&a instanceof Multiname)&&(d=C.findScopeProperty(a.namespaces,a.name,a.flags,G,b,!0))?(e=C.findDepth(d),!0,f().scopeDepth=e+R.length,Type.from(d,G)):(d=G.findDefiningScript(a,!1))?(f().object=LazyInitializer.create(d.script),Type.from(d.script,G)):Type.Any}function p(){var a=H[J.index];if(a.isRuntime()){var b=a.namespaces,d=a.name;a.isRuntimeName()&&(d=l());a.isRuntimeNamespace()&&(b=[l()]);return new MultinameType(b,d,a.flags)}return a}function y(a){if(a instanceof TraitsType&&
(a=a.getTraitAt(J.index),S&&S.debugLn("accessSlot() -> "+a),a)){f().trait=a;if(a.isSlot())return Type.fromName(a.typeName,G).instanceType();if(a.isClass())return Type.from(a.classInfo,G)}return Type.Any}function D(a){return a instanceof Multiname&&isNumeric(a.name)||a instanceof MultinameType&&(a.name instanceof TraitsType&&a.name.isNumeric()||isNumeric(a.name))}function F(a,b){if(a instanceof TraitsType||a instanceof ParameterizedType){var d=a.getTrait(b,!1,!0);S&&S.debugLn("getProperty("+b+") -> "+
d);if(d){f().trait=d;if(d.isSlot()||d.isConst())return Type.fromName(d.typeName,G).instanceType();if(d.isGetter())return Type.fromName(d.methodInfo.returnType,G).instanceType();if(d.isClass())return Type.from(d.classInfo,G);if(d.isMethod())return Type.from(d.methodInfo,G)}else a.isDirectlyReadable()&&b instanceof Multiname?f().propertyQName=Multiname.getPublicQualifiedName(b.name):a===Type.Object&&b instanceof Multiname&&(f().propertyQName=Multiname.getPublicQualifiedName(b.name));if(D(b))if(a.isIndexedReadable()){if(f().isIndexedReadable=
!0,a.isVector())return a.parameter}else a.isDirectlyReadable()&&(f().isDirectlyReadable=!0)}return Type.Any}function E(a,b){if(a instanceof TraitsType||a instanceof ParameterizedType){var d=a.getTrait(b,!0,!0);S&&S.debugLn("setProperty("+b+") -> "+d);d?f().trait=d:a.isDirectlyWriteable()&&b instanceof Multiname&&(f().propertyQName=Multiname.getPublicQualifiedName(b.name));D(b)&&(a.isDirectlyWriteable()?f().isDirectlyWriteable=!0:a.isVector()&&(f().isIndexedWriteable=!0))}}var C=this.scope,M=d.local,
Q=d.stack,R=d.scope,S=verifierTraceLevel.value?this.writer:null,K=this.methodInfo.analysis.bytecodes,G=this.methodInfo.abc.applicationDomain,H=this.methodInfo.abc.constantPool.multinames,I=this.methodInfo,J,N,P,U;S&&S.enter("verifyBlock: "+b.bid+", range: ["+b.position+", "+b.end.position+"], entryState: "+d.toString()+" {");for(var L=b.position,O=b.end.position;L<=O;L++){J=K[L];U=J.op;S&&1<verifierTraceLevel.value&&S.writeLn(("stateBefore: "+d.toString()).padRight(" ",100)+" : "+L+", "+J.toString(I.abc));
switch(U){case 1:break;case 3:l();break;case 4:P=p();N=l();!0;f().baseClass=LazyInitializer.create(this.thisType.super().classType().object);g(F(N.super(),P));break;case 5:U=l();P=p();N=l();!0;f().baseClass=LazyInitializer.create(this.thisType.super().classType().object);E(N.super(),P,U);break;case 6:notImplemented(J);break;case 7:notImplemented(J);break;case 8:d.local[J.index]=Type.Undefined;break;case 10:notImplemented(J);break;case 11:notImplemented(J);break;case 12:case 24:case 13:case 23:case 14:case 22:case 15:case 21:case 19:case 20:case 25:case 26:l();
l();break;case 16:break;case 17:case 18:l();break;case 27:l(Type.Int);break;case 29:R.pop();break;case 30:case 35:l(Type.Int);l();g(Type.Any);break;case 31:g(Type.Boolean);break;case 50:g(Type.Boolean);break;case 32:g(Type.Null);break;case 33:g(Type.Undefined);break;case 34:notImplemented(J);break;case 36:g(Type.Int);break;case 37:g(Type.Int);break;case 44:g(Type.String);break;case 45:g(Type.Int);break;case 46:g(Type.Uint);break;case 47:g(Type.Number);break;case 38:g(Type.Boolean);break;case 39:g(Type.Boolean);
break;case 40:g(Type.Number);break;case 41:l();break;case 42:U=l();g(U);g(U);break;case 43:N=l();P=l();g(N);g(P);break;case 28:l();R.push(Type.Any);break;case 48:R.push(l());break;case 49:notImplemented(J);break;case 53:case 54:case 55:g(Type.Int);break;case 56:case 57:g(Type.Number);break;case 58:case 59:case 60:l(Type.Int);break;case 61:case 62:l(Type.Number);break;case 64:g(Type.Function);break;case 65:Q.popMany(J.argCount);N=l();l();g(Type.Any);break;case 67:throw new a("callmethod");case 68:notImplemented(J);
break;case 69:case 78:case 79:case 70:case 76:Q.popMany(J.argCount);P=p();N=l();if(69===U||78===U)N=this.thisType.super(),f().baseClass=LazyInitializer.create(this.thisType.super().classType().object);N=F(N,P);if(79===U||78===U)break;N=N instanceof MethodType?Type.fromName(N.methodInfo.returnType,G).instanceType():N instanceof TraitsType&&N.isClassInfo()?N.instanceType():Type.Any;g(N);break;case 71:this.returnType.merge(Type.Undefined);break;case 72:N=l();I.returnType&&(P=Type.fromName(I.returnType,
this.domain).instanceType(),P.isSubtypeOf(N)&&(f().noCoercionNeeded=!0));break;case 73:Q.popMany(J.argCount);Q.pop();this.thisType.isInstanceInfo()&&this.thisType.super()===Type.Object&&(f().noCallSuperNeeded=!0);break;case 66:Q.popMany(J.argCount);g(e(l()));break;case 74:Q.popMany(J.argCount);P=p();g(e(F(Q.pop(),P)));break;case 75:notImplemented(J);break;case 77:notImplemented(J);break;case 80:case 81:case 82:break;case 83:!0;U=l();N=l();g(N.applyType(U));break;case 84:notImplemented(J);break;case 85:Q.popMany(2*
J.argCount);g(Type.Object);break;case 86:Q.popMany(J.argCount);g(Type.Array);break;case 87:g(Type.from(new Activation(this.methodInfo)));break;case 88:g(Type.Any);break;case 89:g(Type.XMLList);break;case 90:g(Type.Any);break;case 93:g(m(p(),!0));break;case 94:g(m(p(),!1));break;case 95:notImplemented(J);break;case 96:P=p();g(F(m(P,!0),P));break;case 104:case 97:U=l();P=p();N=l();E(N,P,U,J);break;case 98:g(M[J.index]);break;case 99:M[J.index]=l();break;case 100:g(Type.from(C.global.object));break;
case 101:g(R[J.index]);break;case 102:P=p();N=l();g(F(N,P));break;case 103:notImplemented(J);break;case 105:notImplemented(J);break;case 106:p();l();g(Type.Boolean);break;case 107:notImplemented(J);break;case 108:g(y(l()));break;case 109:U=l();N=l();y(N);break;case 110:notImplemented(J);break;case 111:notImplemented(J);break;case 112:l();g(Type.String);break;case 113:l();g(Type.String);break;case 114:l();g(Type.String);break;case 131:case 115:l();g(Type.Int);break;case 136:case 116:l();g(Type.Uint);
break;case 132:case 117:l();g(Type.Number);break;case 129:case 118:l();g(Type.Boolean);break;case 119:notImplemented(J);break;case 120:break;case 121:l();g(Type.Number);break;case 122:notImplemented(J);break;case 123:notImplemented(J);break;case 128:N=l();P=Type.fromName(H[J.index],this.domain).instanceType();P.isSubtypeOf(N)&&(f().noCoercionNeeded=!0);g(P);break;case 130:break;case 133:l();g(Type.String);break;case 134:notImplemented(J);break;case 135:N=l();l();N instanceof TraitsType?g(N.instanceType()):
g(Type.Any);break;case 137:notImplemented(J);break;case 144:case 145:case 147:l();g(Type.Number);break;case 146:case 148:M[J.index]=Type.Number;break;case 149:l();g(Type.String);break;case 150:l();g(Type.Boolean);break;case 160:P=l();N=l();N.isNumeric()&&P.isNumeric()?g(Type.Number):N===Type.String||P===Type.String?g(Type.String):g(Type.Any);break;case 161:case 162:case 163:case 164:l();l();g(Type.Number);break;case 168:case 169:case 170:case 165:case 166:case 167:l();l();g(Type.Int);break;case 151:l();
g(Type.Int);break;case 171:case 172:case 173:case 174:case 175:case 176:case 177:case 180:l();l();g(Type.Boolean);break;case 178:l();g(Type.Boolean);break;case 179:l();l();g(Type.Boolean);break;case 194:case 195:M[J.index]=Type.Int;break;case 193:case 192:case 196:l();g(Type.Int);break;case 197:case 198:case 199:l();l();g(Type.Int);break;case 208:case 209:case 210:case 211:g(M[U-208]);break;case 212:case 213:case 214:case 215:M[U-OP_setlocal0]=l();break;case 239:break;case 240:break;case 241:break;
case 242:break;case 243:break;default:console.info("Not Implemented: "+J)}S&&J.ti&&S.debugLn("> TI: "+J.ti)}S&&(S.leave("}"),S.writeLn("verifiedBlock: "+b.bid+", range: ["+b.position+", "+b.end.position+"], exitState: "+d.toString()))};b.prototype.verifyMethod=function(b,d){try{(new p(b,d)).verify(),b.verified=!0,Counter.count("Verifier: Methods")}catch(e){if(!(e instanceof a))throw e;}};return b}();
(function(a){function b(a,b){!0;return Object.create(a.prototype,{nodeName:{value:b}})}function e(a){var b;if(a instanceof Z)return a.value instanceof Multiname?a.value.name:a.value;if(a instanceof fa)return a.name;if(a instanceof W)return b="|"+a.id+"|",b;if(a instanceof s)return b="{"+a.id+"}",b;if(a instanceof da)return a.type===da.Type.STORE?(b="["+a.id+"->"+a.argument.id+"]",b):(b="("+a.id+")",b);if(a instanceof D)return b="("+a.id+")",b;if(a instanceof p)return a.id;unexpected(a+" "+typeof a)}
function d(a){return a.id}function f(a,b){for(var d=0;d<a.length;d++)b(a[d])}function g(a){return a instanceof Z}var l=!1,m=[],p,r=function(){!0;this.id=m[m.length-1]+=1};r.prototype.nodeName="Node";r.prototype.visitInputs=function(){};p=r;var s,r=function(){!0;this.id=m[m.length-1]+=1};r.prototype=b(p,"Control");r.prototype.nodeName="Control";r.prototype.visitInputs=function(){};s=r;var w,r=function(a){!0;this.predecessors=a?[a]:[];this.id=m[m.length-1]+=1};r.prototype=b(s,"Region");r.prototype.nodeName=
"Region";r.prototype.visitInputs=function(a){f(this.predecessors,a)};w=r;var v,r=function(a){!0;this.control=this;this.predecessors=a?[a]:[];this.domain=this.scope=void 0;this.id=m[m.length-1]+=1};r.prototype=b(w,"Start");r.prototype.nodeName="Start";r.prototype.visitInputs=function(a){f(this.predecessors,a);a(this.scope);a(this.domain)};v=r;var z,r=function(a){!0;!0;this.control=a;this.id=m[m.length-1]+=1};r.prototype=b(s,"End");r.prototype.nodeName="End";r.prototype.visitInputs=function(a){a(this.control)};
z=r;r=function(a,b,d){!0;!0;!0;!0;this.control=a;this.store=b;this.argument=d;this.id=m[m.length-1]+=1};r.prototype=b(z,"Stop");r.prototype.nodeName="Stop";r.prototype.visitInputs=function(a){a(this.control);a(this.store);a(this.argument)};var A=function(a,b){!0;!0;!0;this.control=a;this.predicate=b;this.id=m[m.length-1]+=1};A.prototype=b(z,"If");A.prototype.nodeName="If";A.prototype.visitInputs=function(a){a(this.control);a(this.predicate)};var u,B=function(a,b){!0;!0;!0;this.control=a;this.determinant=
b;this.id=m[m.length-1]+=1};B.prototype=b(z,"Switch");B.prototype.nodeName="Switch";B.prototype.visitInputs=function(a){a(this.control);a(this.determinant)};u=B;var y,B=function(a){!0;!0;this.control=a;this.id=m[m.length-1]+=1};B.prototype=b(z,"Jump");B.prototype.nodeName="Jump";B.prototype.visitInputs=function(a){a(this.control)};y=B;var D,B=function(){!0;this.id=m[m.length-1]+=1};B.prototype=b(p,"Value");B.prototype.nodeName="Value";B.prototype.visitInputs=function(){};D=B;var F=function(a,b){!0;
!0;!0;this.control=a;this.store=b;this.loads=void 0;this.id=m[m.length-1]+=1};F.prototype=b(D,"StoreDependent");F.prototype.nodeName="StoreDependent";F.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a)};B=function(a,b,d,e,f,g){!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.callee=d;this.object=e;this.args=f;this.flags=g;this.id=m[m.length-1]+=1};B.prototype=b(F,"Call");B.prototype.nodeName="Call";B.prototype.visitInputs=
function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.callee);this.object&&a(this.object);f(this.args,a)};var E=function(a,b,d,e,f,g){!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.args=f;this.flags=g;this.id=m[m.length-1]+=1};E.prototype=b(F,"CallProperty");E.prototype.nodeName="CallProperty";E.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,
a);a(this.object);a(this.name);f(this.args,a)};var C=function(a,b,d,e,f,g,l){!0;!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.args=f;this.flags=g;this.isLex=l;this.id=m[m.length-1]+=1};C.prototype=b(E,"ASCallProperty");C.prototype.nodeName="ASCallProperty";C.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);f(this.args,a)};var M=function(a,b,d,e,f,g,l){!0;
!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.args=f;this.flags=g;this.scope=l;this.id=m[m.length-1]+=1};M.prototype=b(E,"ASCallSuper");M.prototype.nodeName="ASCallSuper";M.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);f(this.args,a);a(this.scope)};var Q=function(a,b,d,e){!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.callee=d;this.args=
e;this.id=m[m.length-1]+=1};Q.prototype=b(F,"New");Q.prototype.nodeName="New";Q.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.callee);f(this.args,a)};var R=function(a,b,d,e){!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.callee=d;this.args=e;this.id=m[m.length-1]+=1};R.prototype=b(Q,"ASNew");R.prototype.nodeName="ASNew";R.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);
this.loads&&f(this.loads,a);a(this.callee);f(this.args,a)};Q=function(a,b,d,e){!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.id=m[m.length-1]+=1};Q.prototype=b(F,"GetProperty");Q.prototype.nodeName="GetProperty";Q.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var S=function(a,b,d,e,f){!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=
d;this.name=e;this.flags=f;this.id=m[m.length-1]+=1};S.prototype=b(Q,"ASGetProperty");S.prototype.nodeName="ASGetProperty";S.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var K=function(a,b,d,e){!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.id=m[m.length-1]+=1};K.prototype=b(Q,"ASGetDescendants");K.prototype.nodeName="ASGetDescendants";K.prototype.visitInputs=
function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var G=function(a,b,d,e){!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.id=m[m.length-1]+=1};G.prototype=b(Q,"ASHasProperty");G.prototype.nodeName="ASHasProperty";G.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var H=function(a,b,d,
e){!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.id=m[m.length-1]+=1};H.prototype=b(Q,"ASGetSlot");H.prototype.nodeName="ASGetSlot";H.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var I=function(a,b,d,e,f){!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.scope=f;this.id=m[m.length-1]+=1};I.prototype=b(Q,"ASGetSuper");
I.prototype.nodeName="ASGetSuper";I.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);a(this.scope)};var J,N=function(a,b,d,e,f){!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.value=f;this.id=m[m.length-1]+=1};N.prototype=b(F,"SetProperty");N.prototype.nodeName="SetProperty";N.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);
this.loads&&f(this.loads,a);a(this.object);a(this.name);a(this.value)};J=N;N=function(a,b,d,e,f,g){!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.value=f;this.flags=g;this.id=m[m.length-1]+=1};N.prototype=b(J,"ASSetProperty");N.prototype.nodeName="ASSetProperty";N.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);a(this.value)};var P=function(a,b,d,e,f){!0;
!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.value=f;this.id=m[m.length-1]+=1};P.prototype=b(J,"ASSetSlot");P.prototype.nodeName="ASSetSlot";P.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);a(this.value)};var U=function(a,b,d,e,f,g){!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.value=f;this.scope=g;this.id=
m[m.length-1]+=1};U.prototype=b(J,"ASSetSuper");U.prototype.nodeName="ASSetSuper";U.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);a(this.value);a(this.scope)};var L=function(a,b,d,e){!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.id=m[m.length-1]+=1};L.prototype=b(F,"DeleteProperty");L.prototype.nodeName="DeleteProperty";L.prototype.visitInputs=function(a){this.control&&
a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var O=function(a,b,d,e){!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.id=m[m.length-1]+=1};O.prototype=b(L,"ASDeleteProperty");O.prototype.nodeName="ASDeleteProperty";O.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};L=function(a,b,d,e,f,g){!0;!0;!0;!0;!0;!0;
this.control=a;this.store=b;this.loads=void 0;this.scope=d;this.name=e;this.domain=f;this.strict=g;this.id=m[m.length-1]+=1};L.prototype=b(F,"ASFindProperty");L.prototype.nodeName="ASFindProperty";L.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.scope);a(this.name);a(this.domain)};b(D,"Store");var W,F=function(a,b){!0;!0;this.control=a;this.args=b?[b]:[];this.id=m[m.length-1]+=1};F.prototype=b(D,"Phi");F.prototype.nodeName=
"Phi";F.prototype.visitInputs=function(a){this.control&&a(this.control);f(this.args,a)};W=F;var fa,F=function(a){!0;this.name=a;this.id=m[m.length-1]+=1};F.prototype=b(D,"Variable");F.prototype.nodeName="Variable";F.prototype.visitInputs=function(){};fa=F;F=function(a){!0;this.argument=a;this.id=m[m.length-1]+=1};F.prototype=b(D,"Copy");F.prototype.nodeName="Copy";F.prototype.visitInputs=function(a){a(this.argument)};var ca=function(a,b){!0;this.to=a;this.from=b;this.id=m[m.length-1]+=1};ca.prototype=
b(D,"Move");ca.prototype.nodeName="Move";ca.prototype.visitInputs=function(a){a(this.to);a(this.from)};var da,ia=function(a,b,d){!0;this.argument=a;this.type=b;this.selector=d;this.id=m[m.length-1]+=1};ia.prototype=b(D,"Projection");ia.prototype.nodeName="Projection";ia.prototype.visitInputs=function(a){a(this.argument)};da=ia;ia=function(a,b,d,e){!0;!0;this.control=a;this.condition=b;this.left=d;this.right=e;this.id=m[m.length-1]+=1};ia.prototype=b(D,"Latch");ia.prototype.nodeName="Latch";ia.prototype.visitInputs=
function(a){this.control&&a(this.control);a(this.condition);a(this.left);a(this.right)};var ja,la=function(a,b,d){!0;this.operator=a;this.left=b;this.right=d;this.id=m[m.length-1]+=1};la.prototype=b(D,"Binary");la.prototype.nodeName="Binary";la.prototype.visitInputs=function(a){a(this.left);a(this.right)};ja=la;var ga,la=function(a,b){!0;this.operator=a;this.argument=b;this.id=m[m.length-1]+=1};la.prototype=b(D,"Unary");la.prototype.nodeName="Unary";la.prototype.visitInputs=function(a){a(this.argument)};
ga=la;var Z,la=function(a){!0;this.value=a;this.id=m[m.length-1]+=1};la.prototype=b(D,"Constant");la.prototype.nodeName="Constant";la.prototype.visitInputs=function(){};Z=la;la=function(a){!0;this.name=a;this.id=m[m.length-1]+=1};la.prototype=b(D,"GlobalProperty");la.prototype.nodeName="GlobalProperty";la.prototype.visitInputs=function(){};var ea,na=function(a){!0;!0;this.control=a;this.id=m[m.length-1]+=1};na.prototype=b(D,"This");na.prototype.nodeName="This";na.prototype.visitInputs=function(a){a(this.control)};
ea=na;na=function(a,b){!0;!0;this.control=a;this.argument=b;this.id=m[m.length-1]+=1};na.prototype=b(D,"Throw");na.prototype.nodeName="Throw";na.prototype.visitInputs=function(a){a(this.control);a(this.argument)};var ha,oa=function(a){!0;!0;this.control=a;this.id=m[m.length-1]+=1};oa.prototype=b(D,"Arguments");oa.prototype.nodeName="Arguments";oa.prototype.visitInputs=function(a){a(this.control)};ha=oa;var Aa,oa=function(a,b,d){!0;!0;this.control=a;this.index=b;this.name=d;this.id=m[m.length-1]+=
1};oa.prototype=b(D,"Parameter");oa.prototype.nodeName="Parameter";oa.prototype.visitInputs=function(a){a(this.control)};Aa=oa;oa=function(a,b){!0;!0;this.control=a;this.elements=b;this.id=m[m.length-1]+=1};oa.prototype=b(D,"NewArray");oa.prototype.nodeName="NewArray";oa.prototype.visitInputs=function(a){a(this.control);f(this.elements,a)};var $=function(a,b){!0;!0;this.control=a;this.properties=b;this.id=m[m.length-1]+=1};$.prototype=b(D,"NewObject");$.prototype.nodeName="NewObject";$.prototype.visitInputs=
function(a){a(this.control);f(this.properties,a)};var ra=function(a,b){!0;this.key=a;this.value=b;this.id=m[m.length-1]+=1};ra.prototype=b(D,"KeyValuePair");ra.prototype.nodeName="KeyValuePair";ra.prototype.visitInputs=function(a){a(this.key);a(this.value)};var Ea=function(a,b,d){!0;this.parent=a;this.object=b;this.isWith=d;this.id=m[m.length-1]+=1};Ea.prototype=b(D,"ASScope");Ea.prototype.nodeName="ASScope";Ea.prototype.visitInputs=function(a){a(this.parent);a(this.object)};var pa=function(a,b){!0;
!0;!0;this.control=a;this.scope=b;this.id=m[m.length-1]+=1};pa.prototype=b(D,"ASGlobal");pa.prototype.nodeName="ASGlobal";pa.prototype.visitInputs=function(a){this.control&&a(this.control);a(this.scope)};var sa=function(a){!0;this.methodInfo=a;this.id=m[m.length-1]+=1};sa.prototype=b(D,"ASNewActivation");sa.prototype.nodeName="ASNewActivation";sa.prototype.visitInputs=function(){};var ta=function(a,b,d){!0;this.namespaces=a;this.name=b;this.flags=d;this.id=m[m.length-1]+=1};ta.prototype=b(D,"ASMultiname");
ta.prototype.nodeName="ASMultiname";ta.prototype.visitInputs=function(a){a(this.namespaces);a(this.name)};p.startNumbering=function(){m.push(0)};p.stopNumbering=function(){m.pop()};p.prototype.toString=function(a){if(a)return e(this);var b=[];this.visitInputs(function(a){b.push(e(a))},!0);a=e(this)+" = "+this.nodeName.toUpperCase();this.toStringDetails&&(a+=" "+this.toStringDetails());b.length&&(a+=" "+b.join(", "));return a};p.prototype.visitInputsNoConstants=function(a){this.visitInputs(function(b){g(b)||
a(b)})};p.prototype.replaceInput=function(a,b){var d=0,e;for(e in this){var f=this[e];f instanceof p&&f===a&&(this[e]=b,d++);f instanceof Array&&(d+=f.replace(a,b))}return d};da.Type={CASE:"case",TRUE:"true",FALSE:"false",STORE:"store",SCOPE:"scope"};da.prototype.project=function(){return this.argument};W.prototype.seal=function(){this.sealed=!0};W.prototype.pushValue=function(a){!0;!0;this.args.push(a)};ra.prototype.mustFloat=!0;ta.prototype.mustFloat=!0;ta.prototype.isAttribute=function(){return this.flags&
1};var aa=function(a,b,d){this.name=a;this.binary=d;this.evaluate=b;Oa[a]=this},Oa={};aa.ADD=new aa("+",function(a,b){return a+b},!0);aa.SUB=new aa("-",function(a,b){return a-b},!0);aa.MUL=new aa("*",function(a,b){return a*b},!0);aa.DIV=new aa("/",function(a,b){return a/b},!0);aa.MOD=new aa("%",function(a,b){return a%b},!0);aa.AND=new aa("&",function(a,b){return a&b},!0);aa.OR=new aa("|",function(a,b){return a|b},!0);aa.XOR=new aa("^",function(a,b){return a^b},!0);aa.LSH=new aa("<<",function(a,b){return a<<
b},!0);aa.RSH=new aa(">>",function(a,b){return a>>b},!0);aa.URSH=new aa(">>>",function(a,b){return a>>>b},!0);aa.SEQ=new aa("===",function(a,b){return a===b},!0);aa.SNE=new aa("!==",function(a,b){return a!==b},!0);aa.EQ=new aa("==",function(a,b){return a==b},!0);aa.NE=new aa("!=",function(a,b){return a!=b},!0);aa.LE=new aa("<=",function(a,b){return a<=b},!0);aa.GT=new aa(">",function(a,b){return a>b},!0);aa.LT=new aa("<",function(a,b){return a<b},!0);aa.GE=new aa(">=",function(a,b){return a>=b},!0);
aa.BITWISE_NOT=new aa("~",function(a){return~a},!1);aa.PLUS=new aa("+",function(a){return+a},!1);aa.NEG=new aa("-",function(a){return-a},!1);aa.TRUE=new aa("!!",function(a){return!!a},!1);aa.FALSE=new aa("!",function(a){return!a},!1);aa.AS_ADD=new aa("+",function(a,b){return"string"===typeof a||"string"===typeof b?String(a)+String(b):a+b},!0);var Ia=aa.SEQ,Fa=aa.SNE;Ia.not=Fa;Fa.not=Ia;Ia=aa.EQ;Fa=aa.NE;Ia.not=Fa;Fa.not=Ia;Ia=aa.TRUE;Fa=aa.FALSE;Ia.not=Fa;Fa.not=Ia;aa.fromName=function(a){return Oa[a]};
aa.prototype.isBinary=function(){return this.binary};aa.prototype.toString=function(){return this.name};Ia=new Z(null);Fa=new Z(void 0);Fa.toString=function(){return"_"};var Pa,ua=function(a,b,d){b&&!0;this.region=b;this.id=a;this.successors=[];this.predecessors=[];this.nodes=[b,d]};ua.prototype.pushSuccessorAt=function(a,b,d){!0;!0;this.successors[b]=a;d&&a.pushPredecessor(this)};ua.prototype.pushSuccessor=function(a,b){!0;this.successors.push(a);b&&a.pushPredecessor(this)};ua.prototype.pushPredecessor=
function(a){!0;this.predecessors.push(a)};ua.prototype.visitNodes=function(a){for(var b=this.nodes,d=0,e=b.length;d<e;d++)a(b[d])};ua.prototype.visitSuccessors=function(a){for(var b=this.successors,d=0,e=b.length;d<e;d++)a(b[d])};ua.prototype.visitPredecessors=function(a){for(var b=this.predecessors,d=0,e=b.length;d<e;d++)a(b[d])};ua.prototype.append=function(a){!0;!0;!0;!0;a.mustFloat||this.nodes.splice(this.nodes.length-1,0,a)};ua.prototype.toString=function(){return"B"+this.id+(this.name?" ("+
this.name+")":"")};ua.prototype.trace=function(a){a.writeLn(this)};Pa=ua;var ua=function(a){this.exit=a},xa=function(a,b,d){var e=[];a=[a];for(var f=a.push.bind(a),g;g=a.pop();)1!==e[g.id]&&(e[g.id]=1,d(g),a.push(g),b(g,f))},Ma=function(a,b,d){function e(a){f[a.id]||g.push(a)}for(var f=[],g=[a];a=g.top();)f[a.id]?(1===f[a.id]&&(f[a.id]=2,d(a)),g.pop()):(f[a.id]=1,b(a,e))};ua.prototype.buildCFG=function(){return ya.fromDFG(this)};ua.prototype.forEachInPreOrderDepthFirstSearch=function(a){function b(a){g(a)||
(!0,e.push(a))}for(var d=Array(1024),e=[this.exit],f;f=e.pop();)d[f.id]||(d[f.id]=1,a&&a(f),e.push(f),f.visitInputs(b))};ua.prototype.forEach=function(a,b){(b?Ma:xa)(this.exit,function(a,b){a.visitInputsNoConstants(b)},a)};ua.prototype.traceMetrics=function(a){var b=new metrics.Counter(!0);xa(this.exit,function(a,b){a.visitInputsNoConstants(b)},function(a){b.count(a.nodeName)});b.trace(a)};ua.prototype.trace=function(a){function b(a){return a instanceof s?"yellow":a instanceof W?"purple":a instanceof
D?"green":"white"}function d(a){return a instanceof da?a.project():a}function e(a){a=d(a);g[a.id]||(g[a.id]=!0,a.block&&l.push(a.block),f.push(a),a.visitInputsNoConstants(e))}var f=[],g={},l=[];e(this.exit);a.writeLn("");a.enter("digraph DFG {");a.writeLn("graph [bgcolor = gray10];");a.writeLn("edge [color = white];");a.writeLn("node [shape = box, fontname = Consolas, fontsize = 11, color = white, fontcolor = white];");a.writeLn("rankdir = BT;");l.forEach(function(b){a.enter("subgraph cluster"+b.nodes[0].id+
" { bgcolor = gray20;");b.visitNodes(function(b){b=d(b);a.writeLn("N"+b.id+";")});a.leave("}")});f.forEach(function(d){a.writeLn("N"+d.id+' [label = "'+d.toString()+'", color = "'+b(d)+'"];')});f.forEach(function(e){e.visitInputsNoConstants(function(f){f=d(f);a.writeLn("N"+e.id+" -> N"+f.id+" [color="+b(f)+"];")})});a.leave("}");a.writeLn("")};var ya,ka=function(){this.nextBlockID=0;this.blocks=[];this.exit;this.root};ka.fromDFG=function(a){function b(a){a instanceof da&&(a=a.project());!0;if(!e[a.id]){e[a.id]=
!0;var f=a.control;f instanceof w||(f=a.control=new w(f));a=f.block=d.buildBlock(f,a);f instanceof v&&(d.root=a);for(var g=0;g<f.predecessors.length;g++){var l=f.predecessors[g],m,r=!1;l instanceof da?(m=l.project(),r=l.type===da.Type.TRUE):m=l;m instanceof w&&(m=new y(l),m=new da(m,da.Type.TRUE),f.predecessors[g]=m,m=m.project(),r=!0);b(m);var p=m.control.block;m instanceof u?(!0,p.pushSuccessorAt(a,l.selector.value,!0)):r&&0<p.successors.length?(p.pushSuccessor(a,!0),p.hasFlippedSuccessors=!0):
p.pushSuccessor(a,!0)}}}var d=new ya;!0;d.dfg=a;var e=[];b(a.exit);d.splitCriticalEdges();d.exit=a.exit.control.block;d.computeDominators(!0);return d};ka.prototype.buildRootAndExit=function(){!0;0<this.blocks[0].predecessors.length?(this.root=new Pa(this.nextBlockID++),this.blocks.push(this.root),this.root.pushSuccessor(this.blocks[0],!0)):this.root=this.blocks[0];for(var a=[],b=0;b<this.blocks.length;b++){var d=this.blocks[b];0===d.successors.length&&a.push(d)}if(0===a.length)unexpected("Must have an exit block.");
else if(1===a.length&&a[0]!==this.root)this.exit=a[0];else{this.exit=new Pa(this.nextBlockID++);this.blocks.push(this.exit);for(b=0;b<a.length;b++)a[b].pushSuccessor(this.exit,!0)}!0;!0};ka.prototype.fromString=function(a,b){function d(a){var b=f[a];if(b)return b;f[a]=b=new Pa(e.nextBlockID++);b.name=a;g.push(b);return b}var e=this,f=e.blockNames||(e.blockNames={}),g=e.blocks;a.replace(/\ /g,"").split(",").forEach(function(a){a=a.split("->");for(var b=null,e=0;e<a.length;e++){var f=a[e];if(b){var g=
f;d(b).pushSuccessor(d(g),!0)}else d(f);b=f}});!0;this.root=f[b]};ka.prototype.buildBlock=function(a,b){var d=new Pa(this.nextBlockID++,a,b);this.blocks.push(d);return d};ka.prototype.createBlockSet=function(){this.setConstructor||(this.setConstructor=BitSetFunctor(this.blocks.length));return new this.setConstructor};ka.prototype.computeReversePostOrder=function(){if(this.order)return this.order;var a=this.order=[];this.depthFirstSearch(null,a.push.bind(a));a.reverse();for(var b=0;b<a.length;b++)a[b].rpo=
b;return a};ka.prototype.depthFirstSearch=function(a,b){function d(f){e.set(f.id);a&&a(f);for(var g=f.successors,l=0,m=g.length;l<m;l++){var r=g[l];e.get(r.id)||d(r)}b&&b(f)}var e=this.createBlockSet();d(this.root)};ka.prototype.computeDominators=function(a){!0;for(var b=new Int32Array(this.blocks.length),d=0;d<b.length;d++)b[d]=-1;var e=this.createBlockSet();this.depthFirstSearch(function(a){for(var d=a.successors,f=0,g=d.length;f<g;f++){var l=d[f].id,m=a.id,r=b,p=l;if(!(0>b[l])){l=b[l];for(e.clearAll();0<=
l;)e.set(l),l=b[l];for(;0<=m&&!e.get(m);)m=b[m]}r[p]=m}});if(a){d=0;for(a=this.blocks.length;d<a;d++)this.blocks[d].dominator=this.blocks[b[d]];var f=function(a){var b;if(void 0!==a.dominatorDepth)return a.dominatorDepth;b=a.dominator?f(a.dominator)+1:0;return a.dominatorDepth=b},d=0;for(a=this.blocks.length;d<a;d++)f(this.blocks[d])}return b};ka.prototype.computeLoops=function(){function a(f){if(d.get(f.id))return b.get(f.id)&&!f.isLoopHeader&&(f.isLoopHeader=!0,f.loops=1<<e,e+=1),f.loops;d.set(f.id);
b.set(f.id);for(var g=0,l=0,m=f.successors.length;l<m;l++)g|=a(f.successors[l]);f.isLoopHeader&&(g&=~f.loops);f.loops=g;b.clear(f.id);return g}var b=this.createBlockSet(),d=this.createBlockSet(),e=0;a(this.root)};var za=function(){this.entries=[]};za.prototype.addUse=function(a,b){var d=this.entries[a.id];d||(d=this.entries[a.id]={def:a,uses:[]});d.uses.pushUnique(b)};za.prototype.trace=function(a){a.enter("> Uses");this.entries.forEach(function(b){a.writeLn(b.def.id+" -> ["+b.uses.map(d).join(", ")+
"] "+b.def)});a.leave("<")};za.prototype.replace=function(a,b){var d=this.entries[a.id];if(0===d.uses.length)return!1;var e=0;d.uses.forEach(function(d){e+=d.replaceInput(a,b)});!0;d.uses=[];return!0};ka.prototype.computeUses=function(){Timer.start("computeUses");var a=l&&new IndentingWriter;l&&a.enter("> Compute Uses");var b=this.dfg,e=new za;b.forEachInPreOrderDepthFirstSearch(function(a){a.visitInputs(function(b){e.addUse(b,a)})});l&&(a.enter("> Uses"),e.entries.forEach(function(b){a.writeLn(b.def.id+
" -> ["+b.uses.map(d).join(", ")+"] "+b.def)}),a.leave("<"),a.leave("<"));Timer.stop();return e};ka.prototype.verify=function(){var a=l&&new IndentingWriter;l&&a.enter("> Verify");this.computeReversePostOrder().forEach(function(a){a.phis&&a.phis.forEach(function(){!0;!0})});l&&a.leave("<")};ka.prototype.optimizePhis=function(){function a(b,d){d=d.unique();if(1===d.length)return d[0];if(2===d.length){if(d[0]===b)return d[1];if(d[1]===b)return d[0]}return b}var b=l&&new IndentingWriter;l&&b.enter("> Optimize Phis");
var e=[],f=this.computeUses().entries;f.forEach(function(a){a.def instanceof W&&e.push(a.def)});l&&b.writeLn("Trying to optimize "+e.length+" phis.");for(var g=0,m=0,r=!0;r;)m++,r=!1,e.forEach(function(e){var m=a(e,e.args),p;if(p=m!==e)if(l&&b.writeLn("Update "+e+" with "+m),p=f[e.id],0===p.uses.length)p=!1;else{l&&b.writeLn("Replacing: "+e.id+" in ["+p.uses.map(d).join(", ")+"] with "+m.id);for(var u=0,s=p.uses,v=0,A=s.length;v<A;v++)u+=s[v].replaceInput(e,m);!0;p.uses=[];p=!0}p&&(r=!0,g++)});l&&
(b.writeLn("Simplified "+g+" phis, in "+m+" iterations."),b.leave("<"))};ka.prototype.splitCriticalEdges=function(){var a=l&&new IndentingWriter,b=this.blocks,d=[];l&&a.enter("> Splitting Critical Edges");for(var e=0;e<b.length;e++){var f=b[e].successors;if(1<f.length)for(var g=0;g<f.length;g++)1<f[g].predecessors.length&&d.push({from:b[e],to:f[g]})}if((b=d.length)&&l)a.writeLn("Splitting: "+b),this.trace(a);for(var m;m=d.pop();){e=m.from.successors.indexOf(m.to);f=m.to.predecessors.indexOf(m.from);
!0;l&&a.writeLn("Splitting critical edge: "+m.from+" -> "+m.to);var g=m.to,r=g.region,p=new w(r.predecessors[f]),u=new y(p),p=this.buildBlock(p,u);r.predecessors[f]=new da(u,da.Type.TRUE);m=m.from;m.successors[e]=p;p.pushPredecessor(m);p.pushSuccessor(g);g.predecessors[f]=p}b&&l&&this.trace(a);l&&a.leave("<");return b};ka.prototype.allocateVariables=function(){function a(d){if(!(d instanceof da&&(!da.Type.STORE||d.type===da.Type.STORE))&&!(d instanceof J)&&d instanceof D)d.variable=new fa("l"+d.id),
l&&b.writeLn("Allocated: "+d.variable+" to "+d)}var b=l&&new IndentingWriter;l&&b.enter("> Allocating Virtual Registers");var d=this.computeReversePostOrder();d.forEach(function(b){b.nodes.forEach(a);b.phis&&b.phis.forEach(a)});for(var e=[],f=0;f<d.length;f++){var g=d[f],m=g.phis,g=g.predecessors;if(m)for(var r=0;r<m.length;r++){var p=m[r];l&&b.writeLn("Emitting moves for: "+p);arguments=p.args;!0;for(var u=0;u<g.length;u++){var s=g[u],v=arguments[u];if(!v.abstract&&!(v instanceof da&&(!da.Type.STORE||
v.type===da.Type.STORE)))s=e[s.id]||(e[s.id]=[]),v=v.variable||v,p.variable!==v&&s.push(new ca(p.variable,v))}}}var A=this.blocks;e.forEach(function(a,d){var e=A[d],f=0;for(l&&b.writeLn(e+" Moves: "+a);a.length;){for(var g=0;g<a.length;g++){for(var m=a[g],r=0;r<a.length;r++)if(g!==r&&a[r].from===m.to){m=null;break}m&&(a.splice(g--,1),e.append(m))}if(a.length){l&&b.writeLn("Breaking Cycle");m=a[0];r=new fa("t"+f++);A[d].append(new ca(r,m.to));for(g=1;g<a.length;g++)a[g].from===m.to&&(a[g].from=r)}}});
l&&b.leave("<")};ka.prototype.scheduleEarly=function(){function a(b){return b.mustNotFloat||b.shouldNotFloat?!1:b.mustFloat||b.shouldFloat||b instanceof Aa||b instanceof ea||b instanceof ha?!0:b instanceof ja||b instanceof ga||b instanceof Aa}function b(d){!0;u[d.id]=!0;!0;a(d)||d.control.block.append(d)}function e(a,d){!0;!0;!0;l&&m.writeLn("Scheduled: "+a+" in "+d);a.control=d;b(a)}function f(a){l&&m.enter("> Schedule: "+a);var p=[];a.visitInputs(function(a){g(a)||a instanceof D&&p.push(a instanceof
da?a.project():a)});l&&m.writeLn("Inputs: ["+p.map(d)+"], length: "+p.length);for(var s=0;s<p.length;s++){var A=p[s];!(A instanceof W)&&!u[A.id]&&f(A)}if(a.control)a instanceof z||(a instanceof W||a instanceof v||u[a.id])||b(a);else if(p.length){A=p[0].control;for(s=1;s<p.length;s++){var E=p[s].control;A.block.dominatorDepth<E.block.dominatorDepth&&(A=E)}e(a,A)}else e(a,r.root.region);l&&m.leave("<")}var l=!1,m=l&&new IndentingWriter;l&&m.enter("> Schedule Early");var r=this,p=this.dfg,u=[],s=[];
p.forEachInPreOrderDepthFirstSearch(function(b){b instanceof w||b instanceof y||(b.control&&s.push(b),b instanceof W&&b.args.forEach(function(b){a(b)&&(b.mustNotFloat=!0)}))},!0);l&&s.forEach(function(a){print("Root: "+a)});for(var A=0;A<s.length;A++){var E=s[A];if(E instanceof W){var F=E.control.block;(F.phis||(F.phis=[])).push(E)}E.control&&f(E)}l&&m.leave("<");s.forEach(function(a){a=a instanceof da?a.project():a;a===p.start||a instanceof w||!0})};ka.prototype.trace=function(a){function b(a){e[a.id]||
(e[a.id]=!0,f.push(a),a.visitSuccessors(b))}function d(a){!0;return a===g?"house":a===l?"invhouse":"box"}var e=[],f=[],g=this.root,l=this.exit;b(g);a.writeLn("");a.enter("digraph CFG {");a.writeLn("graph [bgcolor = gray10];");a.writeLn("edge [fontname = Consolas, fontsize = 11, color = white, fontcolor = white];");a.writeLn("node [shape = box, fontname = Consolas, fontsize = 11, color = white, fontcolor = white, style = filled];");a.writeLn("rankdir = TB;");f.forEach(function(b){var e="";void 0!==
b.name&&(e+=" "+b.name);void 0!==b.rpo&&(e+=" O: "+b.rpo);a.writeLn("B"+b.id+' [label = "B'+b.id+e+'", fillcolor = "black", shape='+d(b)+", style=filled];")});f.forEach(function(b){b.visitSuccessors(function(d){a.writeLn("B"+b.id+" -> B"+d.id)});b.dominator&&a.writeLn("B"+b.id+" -> B"+b.dominator.id+" [color = orange];");b.follow&&a.writeLn("B"+b.id+" -> B"+b.follow.id+" [color = purple];")});a.leave("}");a.writeLn("")};ya=ka;var ka=function(){},Qa=function(a,b){!0;if(g(a.argument))return new Z(a.operator.evaluate(a.argument.value));
if(b){var d=Sa(a.argument,!0);if(a.operator===aa.TRUE)return d;if(d instanceof ga){if(a.operator===aa.FALSE&&d.operator===aa.FALSE)return d.argument}else return new ga(a.operator,d)}return a},Sa=function(a,b){var d;a instanceof ga?d=Qa(a,b):a instanceof ja?(!0,d=g(a.left)&&g(a.right)?new Z(a.operator.evaluate(a.left.value,a.right.value)):a):d=a;return d};ka.prototype.tryFold=Sa;a.isConstant=g;a.Block=Pa;a.Node=p;a.Start=v;a.Null=Ia;a.Undefined=Fa;a.This=ea;a.Throw=na;a.Arguments=ha;a.ASGlobal=pa;
a.Projection=da;a.Region=w;a.Latch=ia;a.Binary=ja;a.Unary=ga;a.Constant=Z;a.ASFindProperty=L;a.GlobalProperty=la;a.GetProperty=Q;a.SetProperty=J;a.CallProperty=E;a.ASCallProperty=C;a.ASCallSuper=M;a.ASGetProperty=S;a.ASGetSuper=I;a.ASHasProperty=G;a.ASDeleteProperty=O;a.ASGetDescendants=K;a.ASSetProperty=N;a.ASSetSuper=U;a.ASGetSlot=H;a.ASSetSlot=P;a.Call=B;a.ASNew=R;a.Phi=W;a.Stop=r;a.If=A;a.Switch=u;a.End=z;a.Jump=y;a.ASScope=Ea;a.Operator=aa;a.Variable=fa;a.Move=ca;a.Copy=F;a.Parameter=Aa;a.NewArray=
oa;a.NewObject=$;a.ASNewActivation=sa;a.KeyValuePair=ra;a.ASMultiname=ta;a.DFG=ua;a.CFG=ya;a.Flags={INDEXED:1,RESOLVED:2,PRISTINE:4,IS_METHOD:8};a.PeepholeOptimizer=ka})("undefined"===typeof exports?IR={}:exports);
var c4Options=systemOptions.register(new OptionSet("C4 Options")),enableC4=c4Options.register(new Option("c4","c4","boolean",!1,"Enable the C4 compiler.")),c4TraceLevel=c4Options.register(new Option("tc4","tc4","number",0,"Compiler Trace Level")),enableRegisterAllocator=c4Options.register(new Option("ra","ra","boolean",!1,"Enable register allocator.")),getPublicQualifiedName=Multiname.getPublicQualifiedName,createName=function(a,b){return isNumeric(b)||isObject(b)?b:new Multiname(a,b)};
(function(a){function b(a){return a instanceof R&&isString(a.value)}function e(a){return a instanceof R&&isNumeric(a.value)?!0:a.ty&&a.ty.isNumeric()}function d(a){return new R(a)}function f(a,b,e){!0;e=e.split(".");for(var f=0;f<e.length;f++)b=new IR.GetProperty(null,a.store,b,d(e[f])),b.shouldFloat=!0,a.loads.push(b);return b}function g(a){a=new IR.GlobalProperty(a);a.mustFloat=!0;return a}function l(a,b){var d=new Q(a,b);W&&(d=W.tryFold(d));return d}function m(a,b,d){var e=new M(a,b,d);b.ty&&(b.ty!==
Type.Any&&b.ty===d.ty)&&(a===H.EQ?e.operator=H.SEQ:a===H.NE&&(e.operator=H.SNE));W&&(e=W.tryFold(e));return e}function p(a){return m(H.OR,a,d(0))}function r(a){return m(H.URSH,a,d(0))}function s(a){return e(a)?a:l(H.PLUS,a)}function w(a){return l(H.FALSE,l(H.FALSE,a))}function v(a,b,d){return new S(null,null,a,b,d,IR.Flags.PRISTINE)}function z(a,b){return v(g(a),null,[b])}function A(a){!0;return Z[Multiname.getQualifiedName(a)]}var u=IR.Node,B=IR.Start,y=IR.Null,D=IR.Undefined,F=IR.This,E=IR.Projection,
C=IR.Region,M=IR.Binary,Q=IR.Unary,R=IR.Constant,S=IR.Call,K=IR.Phi,G=IR.Stop,H=IR.Operator,I=IR.Parameter,J=IR.NewArray,N=IR.NewObject,P=IR.KeyValuePair,U=IR.isConstant,L=IR.DFG,O=new IndentingWriter,W=new IR.PeepholeOptimizer,fa,ca=function(a){this.id=la+=1;this.index=a;this.local=[];this.stack=[];this.scope=[];this.store=D;this.loads=[];this.saved=D},da=function(a,b,d){a=b instanceof K&&b.control===a?b:new K(a,b);a.pushValue(d);return a},ia=function(a,b,d){for(var e=0;e<b.length;e++)b[e]=da(a,
b[e],d[e])},ja=function(a){return a instanceof u?a.toString(!0):a},la=0;ca.prototype.clone=function(a){var b=new fa;b.index=void 0!==a?a:this.index;b.local=this.local.slice(0);b.stack=this.stack.slice(0);b.scope=this.scope.slice(0);b.loads=this.loads.slice(0);b.saved=this.saved;b.store=this.store;return b};ca.prototype.matches=function(a){return this.stack.length===a.stack.length&&this.scope.length===a.scope.length&&this.local.length===a.local.length};ca.prototype.makeLoopPhis=function(a){function b(d){d=
new K(a,d);d.isLoop=!0;return d}var d=new fa;!0;d.index=this.index;d.local=this.local.map(b);d.stack=this.stack.map(b);d.scope=this.scope.map(b);d.loads=this.loads.slice(0);d.saved=this.saved;d.store=b(this.store);return d};ca.prototype.optimize=function(){function a(b){if(b instanceof K&&!b.isLoop){var d=b.args.unique();if(1===d.length)return b.seal(),Counter.count("Builder: OptimizedPhi"),d[0]}return b}this.local=this.local.map(a);this.stack=this.stack.map(a);this.scope=this.scope.map(a);this.saved=
a(this.saved);this.store=a(this.store)};ca.prototype.merge=function(a,b){!0;!0;ia(a,this.local,b.local);ia(a,this.stack,b.stack);ia(a,this.scope,b.scope);this.store=da(a,this.store,b.store);this.store.abstract=!0};ca.prototype.trace=function(a){a.writeLn(this.toString())};ca.prototype.toString=function(){return"<"+String(this.id+" @ "+this.index).padRight(" ",10)+(" M: "+ja(this.store)).padRight(" ",14)+(" X: "+ja(this.saved)).padRight(" ",14)+(" $: "+this.scope.map(ja).join(", ")).padRight(" ",20)+
(" L: "+this.local.map(ja).join(", ")).padRight(" ",40)+(" S: "+this.stack.map(ja).join(", ")).padRight(" ",60)};fa=ca;var ga=z.bind(null,"asCoerceString"),ca=z.bind(null,"asCoerceObject"),Z=createEmptyObject();Z[Multiname.Int]=p;Z[Multiname.Uint]=r;Z[Multiname.Number]=s;Z[Multiname.String]=ga;Z[Multiname.Object]=ca;Z[Multiname.Boolean]=w;var ea=createEmptyObject();ea[Multiname.Int]=p;ea[Multiname.Uint]=r;ea[Multiname.Number]=z.bind(null,"Number");ea[Multiname.String]=z.bind(null,"String");ea[Multiname.Object]=
z.bind(null,"Object");ea[Multiname.Boolean]=z.bind(null,"Boolean");var na=function(a,b,d){!0;this.abc=a.abc;this.scope=b;this.methodInfo=a;this.hasDynamicScope=d};na.prototype.buildStart=function(a){var b=this.methodInfo,e=a.entryState=new fa(0);e.local.push(new F(a));for(var l=this.hasDynamicScope?1:0,m=b.parameters.length,r=0;r<m;r++)e.local.push(new I(a,l+r,PARAMETER_PREFIX+b.parameters[r].name));for(r=m;r<b.localCount;r++)e.local.push(D);e.store=new E(a,E.Type.STORE);a.scope=this.hasDynamicScope?
new I(a,0,SAVED_SCOPE_NAME):new R(this.scope);e.saved=new E(a,E.Type.SCOPE);a.domain=new R(this.domain);r=new IR.Arguments(a);if(b.needsRest()||b.needsArguments()){var p=d(l+(b.needsRest()?m:0));e.local[m+1]=new S(a,e.store,g("sliceArguments"),null,[r,p],IR.Flags.PRISTINE)}p=f(e,r,"length");for(r=0;r<m;r++){var u=b.parameters[r],s=r+1,v=e.local[s];if(void 0!==u.value)var w=new IR.Binary(H.LT,p,d(l+r+1)),v=new IR.Latch(null,w,d(u.value),v);u.type&&!u.type.isAnyName()&&((w=A(u.type))?v=w(v):c4CoerceNonPrimitiveParameters&&
(v=new S(a,e.store,g("asCoerceByMultiname"),null,[d(this.abc.applicationDomain),d(u.type),v],!0)));e.local[s]=v}return a};na.prototype.buildGraph=function(){function a(u,F,C){function B(a){if(void 0!==a){if(a<Ka.length)return Ka[Ka.length-1-a];if(a===Ka.length)return C.saved;var b=C.saved;a-=Ka.length;for(var d=0;d<a;d++)b=ka(b,"parent");return b}return 0<Ka.length?Ka.top():C.saved}function K(a){!0;V.ti&&!a.ty&&(a.ty=V.ti.type);Ga.push(a)}function G(){return Ga.pop()}function L(a){var b=Da,d=G();
d.shouldNotFloat=!0;b[a]=d}function ha(a){var b=ca[a],e=b.flags;a=b.isRuntimeName()?Ga.pop():d(b.name);b.isRuntimeNamespace()?(b=new J(u,[G()]),!0,b.shouldFloat=!0):b=d(b.namespaces);return new IR.ASMultiname(b,a,e)}function oa(a,b,e){b=new IR.ASFindProperty(u,C.store,B(),a,fa,b);if(e){if(e.object)return e.object instanceof Global&&!e.object.isExecuting()?(console.info("Can't optimize findProperty "+a+", global object is not yet executed or executing."),b):d(e.object);if(void 0!==e.scopeDepth)return xa(B(e.scopeDepth))}console.info("Can't optimize findProperty "+
a);return b}function ka(a,b){return f(C,a,b)}function Aa(a,b){var e=A(a);return e?e(b):c4CoerceNonPrimitive?va(g("asCoerceByMultiname"),null,[fa,d(a),b]):b}function xa(a){return a instanceof IR.ASScope?a.object:ka(a,"object")}function ma(a){C.store=new E(a,E.Type.STORE);a.loads=C.loads.slice(0);C.loads.length=0;return a}function ya(a){var b=a.namespaces,d=a.name;if(globalMultinameAnalysis.value)if(!U(b)||!U(d)||a.isAttribute())Counter.count("GlobalMultinameResolver: Cannot resolve runtime multiname or attribute.");
else return isNumeric(d.value)||!isString(d.value)||!d.value?(Counter.count("GlobalMultinameResolver: Cannot resolve numeric or any names."),!1):GlobalMultinameResolver.resolveMultiname(new Multiname(b.value,d.value,a.flags))}function za(a,b,e,f){!0;f=!!f;if(e){if(e.trait){if(e.trait.isConst()&&e.trait.hasDefaultValue)return d(e.trait.value);a=new IR.GetProperty(u,C.store,a,d(Multiname.getQualifiedName(e.trait.name)));e.trait.isGetter()?a=ma(a):C.loads.push(a);return a}if(e.propertyQName)return ma(new IR.GetProperty(u,
C.store,a,d(e.propertyQName)));if(e.isDirectlyReadable)return ma(new IR.GetProperty(u,C.store,a,b.name));if(e.isIndexedReadable)return ma(new IR.ASGetProperty(u,C.store,a,b,IR.Flags.INDEXED|(f?IR.Flagas.IS_METHOD:0)))}console.info("Can't optimize getProperty "+b);if(e=ya(b))return ma(new IR.ASGetProperty(u,C.store,a,d(Multiname.getQualifiedName(e)),IR.Flags.RESOLVED|(f?IR.Flagas.IS_METHOD:0)));Counter.count("Compiler: Slow ASGetProperty");return ma(new IR.ASGetProperty(u,C.store,a,b,f?IR.Flagas.IS_METHOD:
0))}function La(a,b,e,f){!0;if(f){if(f.trait){(b=f.trait.typeName?A(f.trait.typeName):null)&&(e=b(e));ma(new IR.SetProperty(u,C.store,a,d(Multiname.getQualifiedName(f.trait.name)),e));return}if(f.propertyQName)return ma(new IR.SetProperty(u,C.store,a,d(f.propertyQName),e));if(f.isDirectlyWriteable)return ma(new IR.SetProperty(u,C.store,a,b.name,e));if(f.isIndexedWriteable)return ma(new IR.ASSetProperty(u,C.store,a,b,e,IR.Flags.INDEXED))}console.info("Can't optimize setProperty "+b);ya(b);return ma(new IR.ASSetProperty(u,
C.store,a,b,e,0))}function va(a,b,d){return ma(new S(u,C.store,a,b,d,IR.Flags.PRISTINE))}function Ca(a){var b;a.isBinary()&&(b=G());var d=G();a=b?m(a,d,b):l(a,d);W&&(a=W.tryFold(a,!0));return a}function Ra(a){a=l(H.FALSE,Ca(a));W&&(a=W.tryFold(a,!0));return a}function qa(a,b){var d,e;a.isBinary()?(e=G(),d=G(),b&&(e=p(e),d=p(d)),K(m(a,d,e))):(d=G(),b&&(d=p(d)),K(l(a,d)))}function Ba(a){!0;a=new IR.If(u,a);Ha=[{control:new E(a,E.Type.FALSE),target:z[V.position+1],state:C},{control:new E(a,E.Type.TRUE),
target:V.target,state:C}]}!0;C.optimize();var Ja=F.entryState;if(Ja){da&&O.writeLn("Type State: "+Ja);for(var X=0;X<Ja.local.length;X++){var Y=Ja.local[X],Da=C.local[X];Da.ty||(Da.ty=Y)}}var Da=C.local,Ga=C.stack,Ka=C.scope,T,ba,Ha=null;da&&(O.writeLn("Processing Region: "+u+", Block: "+F.bid),O.enter(("> state: "+u.entryState.toString()).padRight(" ",100)));u.processed=!0;var V,Ja=F.position;for(F=F.end.position;Ja<=F;Ja++){V=z[Ja];var wa=V.op;C.index=Ja;switch(wa){case 3:ma(new IR.Throw(u,G()));
na.push({region:u,store:C.store,value:D});!0;Ha=[];break;case 98:K(Da[V.index]);break;case 208:case 209:case 210:case 211:K(Da[wa-208]);break;case 99:L(V.index);break;case 212:case 213:case 214:case 215:L(wa-212);break;case 28:Ka.push(new IR.ASScope(B(),G(),!0));break;case 48:Ka.push(new IR.ASScope(B(),G(),!1));break;case 29:Ka.pop();break;case 100:K(new IR.ASGlobal(null,C.saved));break;case 101:K(xa(C.scope[V.index]));break;case 93:K(oa(ha(V.index),!0,V.ti));break;case 94:K(oa(ha(V.index),!1,V.ti));
break;case 102:X=ha(V.index);Y=G();K(za(Y,X,V.ti,!1,ic(V)));break;case 89:X=ha(V.index);T=Y=G();X=X instanceof R&&X.value instanceof Multiname&&Multiname.isQName(X.value)?d(Multiname.getQualifiedName(X.value)):X;T=new IR.ASGetDescendants(u,C.store,T,X);K(T);break;case 96:X=ha(V.index);K(za(oa(X,!0,V.ti),X,V.ti,!1,ic(V)));break;case 104:case 97:T=G();X=ha(V.index);Y=G();La(Y,X,T,V.ti,ic(V));break;case 106:X=ha(V.index);Y=G();K(ma(new IR.ASDeleteProperty(u,C.store,Y,X)));break;case 108:Y=G();a:{T=Y;
X=d(V.index);if(ba=V.ti)if(Y=ba.trait){if(Y.isConst()&&ba.trait.hasDefaultValue){T=d(Y.value);break a}X=Multiname.getQualifiedName(Y.name);T=ma(new IR.GetProperty(u,C.store,T,d(X)));break a}console.info("Can't optimize getSlot "+X);T=ma(new IR.ASGetSlot(null,C.store,T,X))}K(T);break;case 109:T=G();Y=G();a:{X=Y;ba=d(V.index);if(Y=V.ti)if(Y=Y.trait){ba=Multiname.getQualifiedName(Y.name);ma(new IR.SetProperty(u,C.store,X,d(ba),T));break a}console.info("Can't optimize setSlot "+ba);ma(new IR.ASSetSlot(u,
C.store,X,ba,T))}break;case 4:X=ha(V.index);Y=G();ba=C.saved;T=Y;Y=X;(X=V.ti)&&X.trait&&X.trait.isGetter()&&X.baseClass?(ba=VM_OPEN_GET_METHOD_PREFIX+Multiname.getQualifiedName(X.trait.name),X=ka(d(X.baseClass),"traitsPrototype."+ba),T=va(X,T,[])):T=ma(new IR.ASGetSuper(u,C.store,T,Y,ba));K(T);break;case 5:T=G();X=ha(V.index);Y=G();var Na=C.saved;ba=Y;(Y=V.ti)&&Y.trait&&Y.trait.isSetter()&&Y.baseClass?(X=VM_OPEN_SET_METHOD_PREFIX+Multiname.getQualifiedName(Y.trait.name),X=ka(d(Y.baseClass),"traitsPrototype."+
X),va(X,ba,[T])):ma(new IR.ASSetSuper(u,C.store,ba,X,T,Na));break;case 241:case 240:break;case 64:K(v(Ma,null,[d(Z[V.index]),B(),d(!0)]));break;case 65:ba=Ga.popMany(V.argCount);Y=G();T=G();K(ma(new S(u,C.store,T,Y,ba,0)));break;case 70:case 79:case 76:ba=Ga.popMany(V.argCount);X=ha(V.index);Y=G();a:{T=Y;Y=X;X=ba;Na=76===wa;if((ba=V.ti)&&ba.trait){if(ba.trait.isMethod()){Y=void 0;Y=ba.trait.holder instanceof InstanceInfo&&ba.trait.holder.isInterface()?Multiname.getPublicQualifiedName(Multiname.getName(ba.trait.name)):
Multiname.getQualifiedName(ba.trait.name);Y=VM_OPEN_METHOD_PREFIX+Y;T=ma(new IR.CallProperty(u,C.store,T,d(Y),X,IR.Flags.PRISTINE));break a}if(ba.trait.isClass()){Y=ba.trait.name;!0;if(Y=ea[Multiname.getQualifiedName(Y)]){T=Y(X[0]);break a}ba=Multiname.getQualifiedName(ba.trait.name);T=ma(new IR.CallProperty(u,C.store,T,d(ba),X,0));break a}}else if(ba&&ba.propertyQName){T=ma(new IR.CallProperty(u,C.store,T,d(ba.propertyQName),X,IR.Flags.PRISTINE));break a}T=(ba=ya(Y))?ma(new IR.ASCallProperty(u,C.store,
T,d(Multiname.getQualifiedName(ba)),X,IR.Flags.PRISTINE|IR.Flags.RESOLVED,Na)):ma(new IR.ASCallProperty(u,C.store,T,Y,X,IR.Flags.PRISTINE,Na))}79!==wa&&K(T);break;case 69:case 78:X=ha(V.index);ba=Ga.popMany(V.argCount);Y=G();Na=C.saved;T=Y;Y=X;X=ba;(ba=V.ti)&&ba.trait&&ba.trait.isMethod()&&ba.baseClass?(Y=VM_OPEN_METHOD_PREFIX+Multiname.getQualifiedName(ba.trait.name),ba=ka(d(ba.baseClass),"traitsPrototype."+Y),T=va(ba,T,X)):T=ma(new IR.ASCallSuper(u,C.store,T,Y,X,IR.Flags.PRISTINE,Na));78!==wa&&
K(T);break;case 66:ba=Ga.popMany(V.argCount);Y=G();K(ma(new IR.ASNew(u,C.store,Y,ba)));break;case 73:ba=Ga.popMany(V.argCount);Y=G();if(!V.ti||!V.ti.noCallSuperNeeded)T=ka(C.saved,"object.baseClass.instanceConstructorNoInitialize"),va(T,Y,ba);break;case 74:ba=Ga.popMany(V.argCount);X=ha(V.index);Y=G();T=za(Y,X,V.ti,!1,ic(V));K(ma(new IR.ASNew(u,C.store,T,ba)));break;case 128:if(V.ti&&V.ti.noCoercionNeeded){Counter.count("Compiler: NoCoercionNeeded");break}else Counter.count("Compiler: CoercionNeeded");
T=G();K(Aa(ca[V.index],T));break;case 131:case 115:K(p(G()));break;case 136:case 116:K(r(G()));break;case 132:case 117:K(s(G()));break;case 129:case 118:K(w(G()));break;case 120:K(va(g("checkFilter"),null,[G()]));break;case 130:break;case 133:K(ga(G()));break;case 112:T=G();T=b(T)?T:v(g("String"),null,[T]);K(T);break;case 135:Y=G();c4AsTypeLate&&(T=G(),K(va(g("asAsType"),null,[Y,T])));break;case 72:case 71:T=D;if(72===wa&&(T=G(),Q.returnType&&(!V.ti||!V.ti.noCoercionNeeded)))T=Aa(Q.returnType,T);
na.push({region:u,store:C.store,value:T});!0;Ha=[];break;case 30:case 35:T=G();Y=G();K(new IR.CallProperty(u,C.store,Y,d(30===wa?"asNextName":"asNextValue"),[T],IR.Flags.PRISTINE));break;case 50:T=va(g("asHasNext2"),null,[Da[V.object],Da[V.index]]);Da[V.object]=ka(T,"object");K(Da[V.index]=ka(T,"index"));break;case 32:K(y);break;case 33:K(D);break;case 34:notImplemented();break;case 36:K(d(V.value));break;case 37:K(d(V.value));break;case 44:K(d(ja[V.index]));break;case 45:K(d(M[V.index]));break;case 46:K(d(ia[V.index]));
break;case 47:K(d(I[V.index]));break;case 38:K(d(!0));break;case 39:K(d(!1));break;case 40:K(d(NaN));break;case 41:G();break;case 42:T=G();T.shouldNotFloat=!0;K(T);K(T);break;case 43:C.stack.push(G(),G());break;case 239:case 240:case 241:break;case 12:Ba(Ra(H.LT));break;case 24:Ba(Ca(H.GE));break;case 13:Ba(Ra(H.LE));break;case 23:Ba(Ca(H.GT));break;case 14:Ba(Ra(H.GT));break;case 22:Ba(Ca(H.LE));break;case 15:Ba(Ra(H.GE));break;case 21:Ba(Ca(H.LT));break;case 16:!0;Ha=[{control:u,target:V.target,
state:C}];break;case 17:Ba(Ca(H.TRUE));break;case 18:Ba(Ca(H.FALSE));break;case 19:Ba(Ca(H.EQ));break;case 20:Ba(Ca(H.NE));break;case 25:Ba(Ca(H.SEQ));break;case 26:Ba(Ca(H.SNE));break;case 27:T=G();!0;if(2<V.targets.length){Ha=[];T=new IR.Switch(u,T);for(X=0;X<V.targets.length;X++)Ha.push({control:new E(T,E.Type.CASE,d(X)),target:V.targets[X],state:C})}else!0,T=m(H.SEQ,T,d(0)),T=new IR.If(u,T),Ha=[{control:new E(T,E.Type.FALSE),target:V.targets[1],state:C},{control:new E(T,E.Type.TRUE),target:V.targets[0],
state:C}];break;case 150:qa(H.FALSE);break;case 151:qa(H.BITWISE_NOT);break;case 160:X=G();T=G();ba=e(T)&&e(X)||(b(T)||T.ty&&T.ty.isString())&&(b(X)||X.ty&&X.ty.isString())?H.ADD:useAsAdd?H.AS_ADD:H.ADD;K(m(ba,T,X));break;case 197:qa(H.ADD,!0);break;case 161:qa(H.SUB);break;case 198:qa(H.SUB,!0);break;case 162:qa(H.MUL);break;case 199:qa(H.MUL,!0);break;case 163:qa(H.DIV);break;case 164:qa(H.MOD);break;case 165:qa(H.LSH);break;case 166:qa(H.RSH);break;case 167:qa(H.URSH);break;case 168:qa(H.AND);
break;case 169:qa(H.OR);break;case 170:qa(H.XOR);break;case 171:qa(H.EQ);break;case 172:qa(H.SEQ);break;case 173:qa(H.LT);break;case 174:qa(H.LE);break;case 175:qa(H.GT);break;case 176:qa(H.GE);break;case 144:qa(H.NEG);break;case 196:qa(H.NEG,!0);break;case 145:case 192:case 147:case 193:K(d(1));145===wa||147===wa?K(s(G())):K(p(G()));145===wa||192===wa?qa(H.ADD):qa(H.SUB);break;case 146:case 194:case 148:case 195:K(d(1));146===wa||148===wa?K(s(Da[V.index])):K(p(Da[V.index]));146===wa||194===wa?qa(H.ADD):
qa(H.SUB);L(V.index);break;case 177:Y=G();T=G();K(va(ka(Y,"isInstanceOf"),null,[T]));break;case 178:T=G();X=ha(V.index);Y=za(oa(X,!1),X);K(va(g("asIsType"),null,[Y,T]));break;case 179:Y=G();T=G();K(va(g("asIsType"),null,[Y,T]));break;case 180:Y=G();T=G();X=new IR.ASMultiname(D,T,0);K(ma(new IR.ASHasProperty(u,C.store,Y,X)));break;case 149:K(va(g("asTypeOf"),null,[G()]));break;case 8:K(D);L(V.index);break;case 83:ba=Ga.popMany(V.argCount);Y=G();T=g("applyType");K(va(T,null,[fa,Y,new J(u,ba)]));break;
case 86:ba=Ga.popMany(V.argCount);K(new J(u,ba));break;case 85:ba=[];for(X=0;X<V.argCount;X++)T=G(),Y=G(),!0,Y=d(Multiname.getPublicQualifiedName(Y.value)),ba.push(new P(Y,T));K(new N(u,ba));break;case 87:K(new IR.ASNewActivation(d(Q)));break;case 88:T=g("createClass");K(va(T,null,[d(la[V.index]),G(),B()]));break;default:unexpected("Not Implemented: "+V)}239===wa||(241===wa||240===wa)||da&&O.writeLn(("state: "+C.toString()).padRight(" ",100)+" : "+Ja+", "+V.toString(this.abc))}da&&O.leave(("< state: "+
C.toString()).padRight(" ",100));Ha||(Ha=[],V.position+1<=z.length&&Ha.push({control:u,target:z[V.position+1],state:C}));return Ha}for(var u=this.methodInfo.analysis,F=u.blocks,z=u.bytecodes,Q=this.methodInfo,M=this.abc.constantPool.ints,ia=this.abc.constantPool.uints,I=this.abc.constantPool.doubles,ja=this.abc.constantPool.strings,Z=this.abc.methods,la=this.abc.classes,ca=this.abc.constantPool.multinames,fa=new R(this.abc.applicationDomain),da=2<c4TraceLevel.value,na=[],u=0;u<F.length;u++)F[u].blockDominatorOrder=
u;var xa=new SortedList(function(a,b){return a.block.blockDominatorOrder-b.block.blockDominatorOrder}),u=new B(null);this.buildStart(u);var Ma=g("createFunction");for(xa.push({region:u,block:F[0]});F=xa.pop();)a(F.region,F.block,F.region.entryState.clone()).forEach(function(a){var b=a.target,d=b.region;d?(da&&O.enter("Merging into region: "+d+" @ "+b.position+", block "+b.bid+" {"),da&&O.writeLn("  R "+d.entryState),da&&O.writeLn("+ I "+a.state),d.entryState.merge(d,a.state),d.predecessors.push(a.control),
da&&O.writeLn("  = "+d.entryState),da&&O.leave("}")):(d=b.region=new C(a.control),b.loop&&da&&O.writeLn("Adding PHIs to loop region."),d.entryState=b.loop?a.state.makeLoopPhis(d):a.state.clone(b.position),da&&O.writeLn("Adding new region: "+d+" @ "+b.position+" to worklist."),xa.push({region:d,block:b}))}),da&&O.enter("Worklist: {"),xa.forEach(function(a){da&&O.writeLn(a.region+" "+a.block.bdo+" "+a.region.entryState)}),da&&O.leave("}");da&&O.writeLn("Done");if(1<na.length){var ya=new C(null),ka=
new K(ya,null),za=new K(ya,null);na.forEach(function(a){ya.predecessors.push(a.region);ka.pushValue(a.value);za.pushValue(a.store)});F=new G(ya,za,ka)}else F=new G(na[0].region,na[0].store,na[0].value);return new L(F)};a.buildMethod=function(a,b,d,e){!0;!0;!0;Counter.count("Compiler: Compiled Methods");Timer.start("Compiler");Timer.start("Mark Loops");b.analysis.markLoops();Timer.stop();enableVerifier.value&&(Timer.start("Verify"),a.verifyMethod(b,d),Timer.stop());a=0<c4TraceLevel.value;var f=1<c4TraceLevel.value;
Timer.start("Build IR");u.startNumbering();b=(new na(b,d,e)).buildGraph();Timer.stop();f&&b.trace(O);Timer.start("Build CFG");b=b.buildCFG();Timer.stop();Timer.start("Optimize Phis");b.optimizePhis();Timer.stop();Timer.start("Schedule Nodes");b.scheduleEarly();Timer.stop();f&&b.trace(O);Timer.start("Verify IR");b.verify();Timer.stop();Timer.start("Allocate Variables");b.allocateVariables();Timer.stop();Timer.start("Generate Source");f=Backend.generate(b,enableRegisterAllocator.value);Timer.stop();
a&&O.writeLn(f.body);u.stopNumbering();Timer.stop();return f}})("undefined"===typeof exports?Builder={}:exports);var Compiler=new (function(){function a(){this.verifier=new Verifier}a.prototype.compileMethod=function(a,e,d){return Builder.buildMethod(this.verifier,a,e,d)};return a}());
(function(a){var b,e=function(a){this.kind=1;this.body=a},d=function(a){this.kind=2;this.body=a},f=function(a,b,d,e){this.kind=3;this.cond=a;this.then=b;this.else=d;this.negated=!1;this.nothingThrownLabel=e},g=function(a,b){this.kind=4;this.index=a;this.body=b},l=function(a,b,d){this.kind=5;this.determinant=a;this.cases=b;this.nothingThrownLabel=d},m=function(a,b){this.kind=6;this.labels=a;this.body=b},p=function(a){for(var b={},d=0,e=a.length;d<e;d++){var f=a[d];f.labels||print(f.toSource());for(var g=
0,l=f.labels.length;g<l;g++)b[f.labels[g]]=f}this.kind=7;this.cases=a;this.labelMap=b},r=function(a){this.kind=8;this.label=a},s=function(a,b){this.kind=9;this.label=a;this.head=b},w=function(a,b){this.kind=10;this.label=a;this.head=b;this.necessary=!0},v=function(a,b){this.kind=11;this.body=a;this.catches=b},z=function(a,b,d){this.kind=12;this.varName=a;this.typeName=b;this.body=d};e.prototype={trace:function(a){for(var b=this.body,d=0,e=b.length;d<e;d++)b[d].trace(a)},first:function(){return this.body[0]},
slice:function(a,b){return new e(this.body.slice(a,b))}};d.prototype={trace:function(a){a.enter("loop {");this.body.trace(a);a.leave("}")}};f.prototype={trace:function(a){this.cond.trace(a);this.nothingThrownLabel&&a.enter("if (label is "+this.nothingThrownLabel+") {");a.enter("if"+(this.negated?" not":"")+" {");this.then&&this.then.trace(a);this.else&&(a.outdent(),a.enter("} else {"),this.else.trace(a));a.leave("}");this.nothingThrownLabel&&a.leave("}")}};g.prototype={trace:function(a){0<=this.index?
a.writeLn("case "+this.index+":"):a.writeLn("default:");a.indent();this.body&&this.body.trace(a);a.outdent()}};l.prototype={trace:function(a){this.nothingThrownLabel&&a.enter("if (label is "+this.nothingThrownLabel+") {");this.determinant.trace(a);a.writeLn("switch {");for(var b=0,d=this.cases.length;b<d;b++)this.cases[b].trace(a);a.writeLn("}");this.nothingThrownLabel&&a.leave("}")}};m.prototype={trace:function(a){a.enter("if (label is "+this.labels.join(" or ")+") {");this.body&&this.body.trace(a);
a.leave("}")}};p.prototype={trace:function(a){for(var b=0,d=this.cases.length;b<d;b++)this.cases[b].trace(a)}};r.prototype={trace:function(a){a.writeLn("label = "+this.label)}};s.prototype={trace:function(a){this.label&&a.writeLn("label = "+this.label);a.writeLn("break")}};w.prototype={trace:function(a){this.label&&a.writeLn("label = "+this.label);this.necessary&&a.writeLn("continue")}};v.prototype={trace:function(a){a.enter("try {");this.body.trace(a);a.writeLn("label = "+this.nothingThrownLabel);
for(var b=0,d=this.catches.length;b<d;b++)this.catches[b].trace(a);a.leave("}")}};z.prototype={trace:function(a){a.outdent();a.enter("} catch ("+(this.varName||"e")+(this.typeName?" : "+this.typeName:"")+") {");this.body.trace(a)}};b={SEQ:1,LOOP:2,IF:3,CASE:4,SWITCH:5,LABEL_CASE:6,LABEL_SWITCH:7,EXIT:8,BREAK:9,CONTINUE:10,TRY:11,CATCH:12,Seq:e,Loop:d,If:f,Case:g,Switch:l,LabelCase:m,LabelSwitch:p,Exit:r,Break:s,Continue:w,Try:v,Catch:z};var A=function(a,b){this.options=b||{};var d=a.blocks,e=BitSetFunctor(a.blocks.length),
f=e.ADDRESS_BITS_PER_WORD,g=e.BITS_PER_WORD,l=e.BIT_INDEX_MASK;e.singleton=function(a){var b=new e;b.set(a.id);b.count=1;b.dirty=0;return b};e.fromBlocks=function(a){var b=new e;b.setBlocks(a);return b};var m=e.prototype;e.singleword?(m.forEachBlock=function(a){!0;var b=this.bits;if(b)for(var e=0;e<g;e++)b&1<<e&&a(d[e])},m.choose=function(){var a=this.bits;if(a)for(var b=0;b<g;b++)if(a&1<<b)return d[b]},m.members=function(){var a=[],b=this.bits;if(b)for(var e=0;e<g;e++)b&1<<e&&a.push(d[e]);return a},
m.setBlocks=function(a){for(var b=this.bits,d=0,e=a.length;d<e;d++)b|=1<<(a[d].id&l);this.bits=b}):(m.forEachBlock=function(a){!0;for(var b=this.bits,e=0,f=b.length;e<f;e++){var l=b[e];if(l)for(var m=0;m<g;m++)l&1<<m&&a(d[e*g+m])}},m.choose=function(){for(var a=this.bits,b=0,e=a.length;b<e;b++){var f=a[b];if(f)for(var l=0;l<g;l++)if(f&1<<l)return d[b*g+l]}},m.members=function(){for(var a=[],b=this.bits,e=0,f=b.length;e<f;e++){var l=b[e];if(l)for(var m=0;m<g;m++)l&1<<m&&a.push(d[e*g+m])}return a},
m.setBlocks=function(a){for(var b=this.bits,d=0,e=a.length;d<e;d++){var g=a[d].id;b[g>>f]|=1<<(g&l)}});this.BlockSet=e;this.hasExceptions=!1;this.normalizeReachableBlocks(a.root)},d=function(a,b,d){return function(e,f,g){function l(a){return g+a.id}function m(a){a.fn=a.fn.bind(r)}var r=this;g=g||"";var p=this.bytecodes;p&&(a.forEach(m),b.forEach(m),writeGraphViz(e,f.toString(),p[0],l,function(a){return a.successors||[]},a,b,function(a){return"Block: "+a.id+"\\l"},d&&d.bind(this,l)))}};A.prototype=
{normalizeReachableBlocks:function(a){!0;var b=this.BlockSet,d=[],e={},f={},g=[a];for(f[a.id]=!0;a=g.top();)if(e[a.id])1===e[a.id]&&(e[a.id]=2,d.push(a)),f[a.id]=!1,g.pop();else{e[a.id]=1;f[a.id]=!0;for(var l=a.successors,m=0,r=l.length;m<r;m++){var p=l[m];f[p.id]&&(a.spbacks||(a.spbacks=new b),a.spbacks.set(p.id));!e[p.id]&&g.push(p)}}this.blocks=d.reverse()},computeDominance:function(){var a=this.blocks,b=a.length,d=Array(b);d[0]=0;for(var e=[],f=0;f<b;f++)e[a[f].id]=f,a[f].dominatees=[];for(var g=
!0;g;){g=!1;for(f=1;f<b;f++){var l=a[f].predecessors,m=l.length,r=e[l[0].id];if(!(r in d))for(var p=1;p<m&&!(r=e[l[p].id],r in d);p++);!0;for(p=0;p<m;p++){var s=e[l[p].id];if(s!==r&&s in d){for(;s!==r;){for(;s>r;)s=d[s];for(;r>s;)r=d[r]}r=s}}d[f]!==r&&(d[f]=r,g=!0)}}a[0].dominator=a[0];for(f=1;f<b;f++)e=a[f],m=a[d[f]],e.dominator=m,m.dominatees.push(e),e.npredecessors=e.predecessors.length;b=[a[0]];for(a[0].level||(a[0].level=0);e=b.shift();){a=e.dominatees;p=0;for(m=a.length;p<m;p++)a[p].level=e.level+
1;b.push.apply(b,a)}},computeFrontiers:function(){for(var a=this.BlockSet,b=this.blocks,d=0,e=b.length;d<e;d++)b[d].frontier=new a;d=1;for(e=b.length;d<e;d++){var a=b[d],f=a.predecessors;if(2<=f.length)for(var g=a.dominator,l=0,m=f.length;l<m;l++)for(var r=f[l];r!==g;)r.frontier.set(a.id),r=r.dominator}},analyzeControlFlow:function(){this.computeDominance();return this.analyzedControlFlow=!0},markLoops:function(){function a(d,e){var f=new b;f.setBlocks(d);f.recount();this.id=e;this.body=f;this.exit=
new b;this.save={};this.head=new b;this.npredecessors=0}if(!this.analyzedControlFlow&&!this.analyzeControlFlow())return!1;var b=this.BlockSet,d;d=this.blocks;for(var e=new b,f=0,g=d.length;f<g;f++){var l=d[f],m=l.spbacks;if(m)for(var l=l.successors,r=0,p=l.length;r<p;r++){var s=l[r];m.get(s.id)&&e.set(s.dominator.id)}}d=e.members();if(0>=d.length)return this.markedLoops=!0;d=d.sort(function(a,b){return a.level-b.level});e=0;for(f=d.length-1;0<=f;f--){for(var g=d[f],m=1,l={},r={},p=[],s=[],v=[],A=
g.level+1,w=[g],z=void 0,J=void 0,z=void 0;z=w.top();)if(l[z.id]){if(s.peek()===z){s.pop();var N=[];do J=p.pop(),r[J.id]=!0,N.push(J);while(J!==z);(1<N.length||J.spbacks&&J.spbacks.get(J.id))&&v.push(N)}w.pop()}else{l[z.id]=m++;p.push(z);s.push(z);for(var J=z.successors,N=0,P=J.length;N<P;N++)if(z=J[N],!(z.level<A)){var U=z.id;if(l[U]){if(!r[U])for(;l[s.peek().id]>l[U];)s.pop()}else w.push(z)}}m=v;if(0!==m.length){l=0;for(r=m.length;l<r;l++){p=m[l];s=new a(p,e++);v=0;for(A=p.length;v<A;v++)if(w=p[v],
w.level===g.level+1&&!w.loop){w.loop=s;s.head.set(w.id);z=w.predecessors;J=0;for(N=z.length;J<N;J++)s.body.get(z[J].id)&&w.npredecessors--;s.npredecessors+=w.npredecessors}v=0;for(A=p.length;v<A;v++)w=p[v],w.level===g.level+1&&(w.npredecessors=s.npredecessors);s.head.recount()}}}return this.markedLoops=!0},induceControlTree:function(){function a(b,d){b.recount();if(0===b.count)return null;b.save=d;return b}function d(l,m,r,p,s,v,A){for(var w=[];l;)if(1<l.count){for(var z=new f,I={},J=[],N=l.members(),
P=0,U=N.length;P<U;P++){var L=N[P],O=L.id,W;if(L.loop&&l.contains(L.loop.head)){var fa=L.loop;if(!fa.induced){for(var ca=fa.head.members(),da=0,ia=0,ja=ca.length;ia<ja;ia++)da+=l.save[ca[ia].id];if(0<L.npredecessors-da)L.npredecessors-=l.save[O],L.save=l.save[O],W=d(L,z,I,p),J.push(new b.LabelCase([O],W));else{ia=0;for(ja=ca.length;ia<ja;ia++)W=ca[ia],W.npredecessors-=da,W.save=da;W=d(L,z,I,p);J.push(new b.LabelCase(fa.head.toArray(),W));fa.induced=!0}}}else L.npredecessors-=l.save[O],L.save=l.save[O],
W=d(L,z,I,p),J.push(new b.LabelCase([O],W))}for(var L=[],ia=0,P=0,U=J.length;P<U;P++){W=J[P];ja=W.labels;fa=ca=0;for(da=ja.length;fa<da;fa++)O=ja[fa],z.get(O)&&0<N[P].npredecessors-l.save[O]?L.push(O):ja[ca++]=O;ja.length=ca;0<ja.length&&(J[ia++]=W)}J.length=ia;if(0===J.length){P=0;for(U=L.length;P<U;P++)O=L[P],r[O]=(r[O]||0)+l.save[O],m.set(O);break}w.push(new b.LabelSwitch(J));l=a(z,I)}else{1===l.count?(L=l.choose(),O=L.id,L.npredecessors-=l.save[O],L.save=l.save[O]):(L=l,O=L.id);if(s)s=!1;else{if(p&&
!p.body.get(O)){L.npredecessors+=L.save;p.exit.set(O);p.save[O]=(p.save[O]||0)+L.save;w.push(new b.Break(O,p));break}if(p&&L.loop===p){L.npredecessors+=L.save;w.push(new b.Continue(O,p));break}if(L===A)break;if(0<L.npredecessors){L.npredecessors+=L.save;r[O]=(r[O]||0)+L.save;m.set(O);w.push(v?new b.Break(O,v):new b.Exit(O));break}if(L.loop){var ja=L.loop;if(1===ja.head.count)z=d(ja.head.choose(),null,null,ja,!0);else{z=[];ca=ja.head.members();P=0;for(U=ca.length;P<U;P++)W=ca[P],I=W.id,W=d(W,null,
null,ja,!0),z.push(new b.LabelCase([I],W));z=new b.LabelSwitch(z)}w.push(new b.Loop(z));l=a(ja.exit,ja.save);continue}}z=new f;I={};if(e&&L.hasCatches){W=L.successors;J=[];l=[];P=0;for(U=W.length;P<U;P++)N=W[P],(N.exception?J:l).push(N);ia=[];P=0;for(U=J.length;P<U;P++)N=J[P],N.npredecessors-=1,N.save=1,W=d(N,z,I,p),N=N.exception,ia.push(new b.Catch(N.varName,N.typeName,W));U=new b.Try(L,ia)}else l=L.successors,U=L;if(2<l.length){J=[];for(P=l.length-1;0<=P;P--)N=l[P],N.npredecessors-=1,N.save=1,W=
d(N,z,I,p,null,L,l[P+1]),J.unshift(new b.Case(P,W));J.top().index=void 0;e&&L.hasCatches?(U.nothingThrownLabel=g,U=new b.Switch(U,J,g++)):U=new b.Switch(U,J);l=a(z,I)}else 2===l.length?(P=L.hasFlippedSuccessors?l[1]:l[0],W=L.hasFlippedSuccessors?l[0]:l[1],P.npredecessors-=1,P.save=1,P=d(P,z,I,p),W.npredecessors-=1,W.save=1,W=d(W,z,I,p),e&&L.hasCatches?(U.nothingThrownLabel=g,U=new b.If(U,P,W,g++)):U=new b.If(U,P,W),l=a(z,I)):(W=l[0])?e&&L.hasCatches?(U.nothingThrownLabel=W.id,I[W.id]=(I[W.id]||0)+
1,z.set(W.id),l=a(z,I)):(W.npredecessors-=1,W.save=1,l=W):e&&L.hasCatches?(U.nothingThrownLabel=-1,l=a(z,I)):l=W;w.push(U)}return 1<w.length?new b.Seq(w):w[0]}var e=this.hasExceptions,f=this.BlockSet,g=this.blocks.length;this.controlTree=d(this.blocks[0],new f,{})},restructureControlFlow:function(){Timer.start("Restructure Control Flow");if(!this.markedLoops&&!this.markLoops())return Timer.stop(),!1;this.induceControlTree();this.restructuredControlFlow=!0;Timer.stop();return!0},trace:function(a){function b(a){return a.id}
var d=this.bytecodes;a.enter("analysis {");a.enter("cfg {");this.blocks.forEach(function(e){e.dominator?(a.enter("block "+e.id+(0<e.successors.length?" -> "+e.successors.map(b).join(","):"")+" {"),a.writeLn("npredecessors".padRight(" ",10)+e.npredecessors),a.writeLn("idom".padRight(" ",10)+e.dominator.id),a.writeLn("domcs".padRight(" ",10)+e.dominatees.map(b).join(",")),e.frontier&&a.writeLn("frontier".padRight(" ",10)+"{"+e.frontier.toArray().join(",")+"}"),a.writeLn("level".padRight(" ",10)+e.level)):
a.enter("block unreachable {");e.loop&&(a.writeLn("loop".padRight(" ",10)+"{"+e.loop.body.toArray().join(",")+"}"),a.writeLn("  id".padRight(" ",10)+e.loop.id),a.writeLn("  head".padRight(" ",10)+"{"+e.loop.head.toArray().join(",")+"}"),a.writeLn("  exit".padRight(" ",10)+"{"+e.loop.exit.toArray().join(",")+"}"),a.writeLn("  npredecessors".padRight(" ",10)+e.loop.npredecessors));a.writeLn("");if(0<=e.position)for(var f=e.position;f<=e.end.position;f++)a.writeLn((""+f).padRight(" ",5)+d[f]);else a.writeLn("abstract");
a.leave("}")});a.leave("}");this.controlTree&&(a.enter("control-tree {"),this.controlTree.trace(a),a.leave("}"));a.leave("}")},traceCFG:d([{fn:function(a){return a.successors||[]},style:""}],[{fn:function(a){return a.predecessors||[]},style:""}]),traceDJ:d([{fn:function(a){return a.dominatees||[]},style:"style=dashed"},{fn:function(a){var b=new this.BlockSet;b.setBlocks(a.successors);b.subtract(this.BlockSet.fromBlocks(a.dominatees));a.spbacks&&b.subtract(a.spbacks);return b.members()},style:""},
{fn:function(a){return a.spbacks?a.spbacks.members():[]},style:"style=bold"}],[{fn:function(a){return a.predecessors||[]},style:""}],function(a,b){for(var d=this.bytecodes[0],e=[d],f=d.level,g=[];d=e.shift();)f!=d.level&&(b.writeLn("{rank=same; "+g.map(function(b){return"block_"+a(b)}).join(" ")+"}"),g.length=0,f=d.level),g.push(d),e.push.apply(e,d.dominatees)})};a.Control=b;a.analyze=function(a){a=new A(a);a.restructureControlFlow();return a.controlTree}})("undefined"===typeof exports?Looper={}:
exports);
(function(){var a=estransform,b=a.Node,e=a.Identifier,d=a.VariableDeclarator,f=a.AssignmentExpression,g=a.MemberExpression,l=a.IfStatement,m=a.WhileStatement,p=a.FunctionDeclaration;new IndentingWriter;var r=function(a,b,d){this.id=a;this.start=b;this.end=d},s=function(a,b){this.intervals=a.slice(0);this.maxRegisters=b};r.prototype.toString=function(){return"["+this.start+","+this.end+"]"};s.prototype.allocate=function(){var a=this.intervals;this.intervals.sort(function(a,b){return a.start-b.start});
for(var b=new SortedList(function(a,b){return a.end-b.end}),d=this.maxRegisters,e=[],f=d-1;0<=f;f--)e.push("R"+f);a.forEach(function(a){b.forEach(function(b){if(b.end>=a.start)return SortedList.RETURN;e.push(b.register);return SortedList.DELETE});b.length===d?notImplemented("Cannot Spill"):(a.register=e.pop(),b.push(a))})};s.Interval=r;Transform.transform=function(r){var v=a.makePass("scan","scanNode"),z=0;b.prototype.scan=function(a){this.position=z++;return v.apply(this,a)};var A=[],u={},B=[];p.prototype.scan=
function(){this.params.forEach(function(a){a.name in u||(u[a.name]=A.length,A.push(a.name))});this.body.scan();return this};d.prototype.scan=function(){this.position=z++;this.id.name in u||(u[this.id.name]=A.length,A.push(this.id.name));return this};f.prototype.scan=function(a){this.left.scan(a);this.right.scan(a);this.position=z++;return this};m.prototype.scan=function(a){this.position=z++;this.test.scan(a);this.body.scan(a);this.afterPosition=z++;return this};r.scan();for(var y=BitSetFunctor(A.length),
D=BitSetFunctor(z),F=[],E=0;E<A.length;E++)F.push(new D);b.prototype.markLiveness=a.makePass("markLiveness","markLivenessNode",!0);e.prototype.markLiveness=function(a){var b=this.name;if("undefined"===b||a&&a.isProperty||!(b in u))return this;B.push(this);a=a.live;b=u[b];F[b].set(this.position);a.set(b);return this};d.prototype.markLiveness=function(){B.push(this.id);return this};l.prototype.markLiveness=function(a){var b=a.live.clone(),d=a.live.clone();this.alternate&&this.alternate.markLiveness({live:b});
this.consequent&&this.consequent.markLiveness({live:d});a.live.assign(b);a.live._union(d);this.test.markLiveness(a);return this};m.prototype.markLiveness=function(a){var b=a.live.clone(),d=this.afterPosition;do{var e=b.clone();this.body.markLiveness({live:b});this.test.markLiveness({live:b});(e=!e.equals(b))&&b.forEach(function(a){F[a].set(d)})}while(e);a.live.assign(b);return this};f.prototype.markLiveness=function(a){this.right.markLiveness(a);if(this.left instanceof e){a=a.live;var b=u[this.left.name];
F[b].set(this.position);a.clear(b);B.push(this.left)}else this.left.markLiveness(a);return this};g.prototype.markLiveness=function(a){(this.computed||!(this.property instanceof e))&&this.property.markLiveness(a);this.object.markLiveness(a);return this};r.markLiveness({live:new y});r=[];for(E=0;E<F.length;E++){for(var y=F[E],C=D=-1,M=0;M<y.length;M++)if(y.get(M)){D=M;break}for(M=y.length-1;0<=M;M--)if(y.get(M)){C=M;break}y=[D,C];r.push(new s.Interval(E,y[0],y[1]))}(new s(r,1024)).allocate();y=createEmptyObject();
for(E=0;E<A.length;E++)y[A[E]]=r[E].register;for(E=0;E<B.length;E++)B[E].patched||(B[E].name=y[B[E].name],B[E].patched=!0)}})("undefined"===typeof exports?Transform={}:exports);
(function(){function a(a){if("string"===typeof a||null===a||!0===a||!1===a)return new w(a);if(void 0===a)return new v("undefined");if("object"===typeof a||"function"===typeof a)return new v(objectConstantName(a));if("number"===typeof a&&isNaN(a))return new v("NaN");if(Infinity===a)return new v("Infinity");if(-Infinity===a)return new S("-",new v("Infinity"));if("number"===typeof a&&0>1/a)return new S("-",new w(Math.abs(a)));if("number"===typeof a)return new w(a);unexpected("Cannot emit constant for value: ",
a)}function b(a){!0;return new v(a)}function e(a){if(!("$"===a[0]||"_"===a[0]||"\\"===a[0]||"a"<=a[0]&&"z">=a[0]||"A"<=a[0]&&"Z">=a[0]))return!1;for(var b=1;b<a.length;b++)if(!("$"===a[b]||"_"===a[b]||"\\"===a[b]||"a"<=a[b]&&"z">=a[b]||"A"<=a[b]&&"Z">=a[b]||"0"<=a[b]&&"9">=a[b]))return!1;return!0}function d(a){for(var b=1;b<arguments.length;b++){var d=arguments[b];a="string"===typeof d?e(d)?new u(a,new v(d),!1):new u(a,new w(d),!0):d instanceof w&&e(d.value)?new u(a,new v(d.value),!1):new u(a,d,!0)}return a}
function f(a,b){!0;!0;return new y(a,b)}function g(a,b){!0;return new D(a,"=",b)}function l(){this.label=new da("$L");this.variables=[];this.parameters=[]}function m(a,d,e){!0;!0;!0;!0;if(e||!a.variable)return a.compile(d);!0;return b(a.variable.name)}function p(b,d){return[m(b.namespaces,d),m(b.name,d),a(b.flags)]}function r(a){return escodegen.generate(a,{base:"",indent:"  ",comment:!0,format:{compact:!1}})}var s=estransform,w=s.Literal,v=s.Identifier,z=s.VariableDeclaration,A=s.VariableDeclarator,
u=s.MemberExpression,B=s.BinaryExpression,y=s.CallExpression,D=s.AssignmentExpression,F=s.ExpressionStatement,E=s.ReturnStatement,C=s.FunctionDeclaration,M=s.ConditionalExpression,Q=s.ObjectExpression,R=s.ArrayExpression,S=s.UnaryExpression,K=s.NewExpression,G=s.Property,H=s.BlockStatement,I=s.ThisExpression,J=s.ThrowStatement,N=s.IfStatement,P=s.WhileStatement,U=s.BreakStatement,L=s.ContinueStatement,O=s.SwitchStatement,W=s.SwitchCase,s=IR.Block,fa=IR.Operator,ca=Looper.Control,da=IR.Variable;ca.Break.prototype.compile=
function(a,b){return a.compileBreak(this,b)};ca.Continue.prototype.compile=function(a,b){return a.compileContinue(this,b)};ca.Exit.prototype.compile=function(a,b){return a.compileExit(this,b)};ca.LabelSwitch.prototype.compile=function(a,b){return a.compileLabelSwitch(this,b)};ca.Seq.prototype.compile=function(a,b){return a.compileSequence(this,b)};s.prototype.compile=function(a,b){return a.compileBlock(this,b)};ca.Loop.prototype.compile=function(a,b){return a.compileLoop(this,b)};ca.Switch.prototype.compile=
function(a,b){return a.compileSwitch(this,b)};ca.If.prototype.compile=function(a,b){return a.compileIf(this,b)};ca.Try.prototype.compile=function(a,b){return a.compileTry(this,b)};l.prototype.useVariable=function(a){!0;return this.variables.pushUnique(a)};l.prototype.useParameter=function(a){return this.parameters[a.index]=a};l.prototype.compileLabelBody=function(a){var d=[];void 0!==a.label&&(this.useVariable(this.label),d.push(new F(g(b(this.label.name),new w(a.label)))));return d};l.prototype.compileBreak=
function(a){a=this.compileLabelBody(a);a.push(new U(null));return new H(a)};l.prototype.compileContinue=function(a){a=this.compileLabelBody(a);a.push(new L(null));return new H(a)};l.prototype.compileExit=function(a){return new H(this.compileLabelBody(a))};l.prototype.compileIf=function(b){var d=b.cond.compile(this),e=null,f=null;b.then&&(e=b.then.compile(this));b.else&&(f=b.else.compile(this));var g=m(d.end.predicate,this);if(b.negated)a:{b=g;if(b instanceof Constant){if(!0===b.value||!1===b.value){b=
a(!b.value);break a}}else if(b instanceof v){b=new S(fa.FALSE.name,b);break a}!0;var g=b instanceof B?b.left:b.argument,l=b.right,r=fa.fromName(b.operator);b=r===fa.EQ&&l instanceof w&&!1===l.value||r===fa.FALSE?g:r.not?b instanceof B?new B(r.not.name,g,l):new S(r.not.name,g):new S(fa.FALSE.name,b)}else b=g;d.body.push(new N(b,e||new H([]),f||null));return d};l.prototype.compileSwitch=function(a){var b=a.determinant.compile(this),d=[];a.cases.forEach(function(a){var b;a.body&&(b=a.body.compile(this));
a="number"===typeof a.index?new w(a.index):void 0;d.push(new W(a,b?[b]:[]))},this);a=m(b.end.determinant,this);b.body.push(new O(a,d,!1));return b};l.prototype.compileLabelSwitch=function(a){function d(a){!0;return new B("===",f,new w(a))}for(var e=null,f=b(this.label.name),g=a.cases.length-1;0<=g;g--){for(var l=a.cases[g],m=l.labels,r=d(m[0]),p=1;p<m.length;p++)r=new B("||",r,d(m[p]));e=new N(r,l.body?l.body.compile(this):new H,e)}return e};l.prototype.compileLoop=function(b){b=b.body.compile(this);
return new P(a(!0),b)};l.prototype.compileSequence=function(a){var b=this,d=[];a.body.forEach(function(a){a=a.compile(b);a instanceof H?d=d.concat(a.body):d.push(a)});return new H(d)};l.prototype.compileBlock=function(a){for(var d=[],e=1;e<a.nodes.length-1;e++){var f=a.nodes[e],l;f instanceof IR.Throw?l=m(f,this,!0):(f instanceof IR.Move?(l=b(f.to.name),this.useVariable(f.to),f=m(f.from,this)):(f.variable?(l=b(f.variable.name),this.useVariable(f.variable)):l=null,f=m(f,this,!0)),l=l?new F(g(l,f)):
new F(f));d.push(l)}e=a.nodes.last();e instanceof IR.Stop&&d.push(new E(m(e.argument,this)));d=new H(d);d.end=a.nodes.last();!0;return d};IR.Parameter.prototype.compile=function(a){a.useParameter(this);return b(this.name)};IR.Constant.prototype.compile=function(){return a(this.value)};IR.Variable.prototype.compile=function(){return b(this.name)};IR.Phi.prototype.compile=function(a){!0;return m(this.variable,a)};IR.ASScope.prototype.compile=function(a){var d=m(this.parent,a);a=m(this.object,a);var e=
new w(this.isWith);return new K(b("Scope"),[d,a,e])};IR.ASFindProperty.prototype.compile=function(a){var b=m(this.scope,a),e=p(this.name,a);a=m(this.domain,a);var g=new w(this.strict);return f(d(b,"findScopeProperty"),e.concat([a,g]))};IR.ASGetProperty.prototype.compile=function(a){var b=m(this.object,a);if(this.flags&IR.Flags.INDEXED)return!0,f(d(b,"asGetNumericProperty"),[m(this.name.name,a)]);if(this.flags&IR.Flags.RESOLVED)return f(d(b,"asGetResolvedStringProperty"),[m(this.name,a)]);a=p(this.name,
a);var e=new w(this.flags&IR.Flags.IS_METHOD);return f(d(b,"asGetProperty"),a.concat(e))};IR.ASGetSuper.prototype.compile=function(a){var b=m(this.scope,a),e=m(this.object,a);a=p(this.name,a);return f(d(e,"asGetSuper"),[b].concat(a))};IR.Latch.prototype.compile=function(a){return new M(m(this.condition,a),m(this.left,a),m(this.right,a))};IR.Unary.prototype.compile=function(a){return new S(this.operator.name,m(this.argument,a))};IR.Copy.prototype.compile=function(a){return m(this.argument,a)};IR.Binary.prototype.compile=
function(a){var d=m(this.left,a);a=m(this.right,a);return this.operator===fa.AS_ADD?f(b("asAdd"),[d,a]):new B(this.operator.name,d,a)};IR.CallProperty.prototype.compile=function(a){var b=m(this.object,a),e=m(this.name,a),e=d(b,e),g=this.args.map(function(b){return m(b,a)});return this.flags&IR.Flags.PRISTINE?f(e,g):f(d(e,"call"),[b].concat(g))};IR.ASCallProperty.prototype.compile=function(a){var b=m(this.object,a),e=this.args.map(function(b){return m(b,a)});if(this.flags&IR.Flags.RESOLVED)return f(d(b,
"asCallResolvedStringProperty"),[m(this.name,a),new w(this.isLex),new R(e)]);var g=p(this.name,a);return f(d(b,"asCallProperty"),g.concat([new w(this.isLex),new R(e)]))};IR.ASCallSuper.prototype.compile=function(a){var b=m(this.scope,a),e=m(this.object,a),g=this.args.map(function(b){return m(b,a)}),l=p(this.name,a);return f(d(e,"asCallSuper"),[b].concat(l).concat(new R(g)))};IR.Call.prototype.compile=function(a){var b=this.args.map(function(b){return m(b,a)}),e=m(this.callee,a),g;g=this.object?m(this.object,
a):new w(null);return null===this.object?f(e,b):f(d(e,"call"),[g].concat(b))};IR.ASNew.prototype.compile=function(a){var b=this.args.map(function(b){return m(b,a)}),e=m(this.callee,a),e=d(e,"instanceConstructor");return new K(e,b)};IR.This.prototype.compile=function(){return new I};IR.Throw.prototype.compile=function(a){a=m(this.argument,a);return new J(a)};IR.Arguments.prototype.compile=function(){return b("arguments")};IR.ASGlobal.prototype.compile=function(a){a=m(this.scope,a);return d(a,"global",
"object")};IR.ASSetProperty.prototype.compile=function(a){var b=m(this.object,a),e=m(this.value,a);if(this.flags&IR.Flags.INDEXED)return f(d(b,"asSetNumericProperty"),[m(this.name.name,a),e]);a=p(this.name,a);return f(d(b,"asSetProperty"),a.concat(e))};IR.ASSetSuper.prototype.compile=function(a){var b=m(this.scope,a),e=m(this.object,a),g=p(this.name,a);a=m(this.value,a);return f(d(e,"asSetSuper"),[b].concat(g).concat([a]))};IR.ASDeleteProperty.prototype.compile=function(a){var b=m(this.object,a);
a=p(this.name,a);return f(d(b,"asDeleteProperty"),a)};IR.ASHasProperty.prototype.compile=function(a){var b=m(this.object,a);a=p(this.name,a);return f(d(b,"asHasProperty"),a)};IR.GlobalProperty.prototype.compile=function(){return b(this.name)};IR.GetProperty.prototype.compile=function(a){var b=m(this.object,a);a=m(this.name,a);return d(b,a)};IR.SetProperty.prototype.compile=function(a){var b=m(this.object,a),e=m(this.name,a);a=m(this.value,a);return g(d(b,e),a)};IR.ASGetDescendants.prototype.compile=
function(a){var d=m(this.object,a);a=m(this.name,a);return f(b("getDescendants"),[d,a])};IR.ASSetSlot.prototype.compile=function(a){var d=m(this.object,a),e=m(this.name,a);a=m(this.value,a);return f(b("asSetSlot"),[d,e,a])};IR.ASGetSlot.prototype.compile=function(a){var d=m(this.object,a);a=m(this.name,a);return f(b("asGetSlot"),[d,a])};IR.Projection.prototype.compile=function(a){!0;!0;return m(this.argument.scope,a)};IR.NewArray.prototype.compile=function(a){var b;b=this.elements;!0;b=b.map(function(b){return m(b,
a)});return new R(b)};IR.NewObject.prototype.compile=function(a){var b=this.properties.map(function(b){var d=m(b.key,a);b=m(b.value,a);return new G(d,b,"init")});return new Q(b)};IR.ASNewActivation.prototype.compile=function(a){a=m(this.methodInfo,a);return f(b("createActivation"),[a])};IR.ASMultiname.prototype.compile=function(a){var d=m(this.namespaces,a);a=m(this.name,a);return f(b("createName"),[d,a])};Backend.generate=function(a,d){Timer.start("Looper");var e=Looper.analyze(a);Timer.stop();var f=
new IndentingWriter,g=new l;Timer.start("Construct AST");var m=e.compile(g);Timer.stop();for(var e=[],p=0;p<g.parameters.length;p++)e.push(b(g.parameters[p]?g.parameters[p].name:"_"));g.variables.length&&(Counter.count("Backend: Locals",g.variables.length),g=g.variables.map(function(a){return new A(b(a.name))}),g=new z("var",g),m.body.unshift(g));g=new C(b("fn"),e,m);if(d)return 0<c4TraceLevel.value&&(f.writeLn("=== BEFORE ==============================="),f.writeLn(r(g)),f.writeLn("=== TRANSFORMING =========================")),
Transform.transform(g),0<c4TraceLevel.value&&(f.writeLn("=== AFTER ================================"),f.writeLn(r(g)),f.writeLn("==========================================")),f=r(m),{parameters:e.map(function(a){return a.name}),body:f};Timer.start("Serialize AST");f=r(m);Timer.stop();return{parameters:e.map(function(a){return a.name}),body:f}}})("undefined"===typeof exports?Backend={}:exports);
var domainOptions=systemOptions.register(new OptionSet("ApplicationDomain Options")),traceClasses=domainOptions.register(new Option("tc","traceClasses","boolean",!1,"trace class creation")),traceDomain=domainOptions.register(new Option("td","traceDomain","boolean",!1,"trace domain property access")),EXECUTION_MODE={INTERPRET:1,COMPILE:2};
function executeScript(a){var b=a.abc;!0;var e=new Global(a);b.applicationDomain.allowNatives&&(e[Multiname.getPublicQualifiedName("unsafeJSNative")]=getNative);a.executing=!0;b=new Scope(null,a.global);createFunction(a.init,b).call(a.global);a.executed=!0}function ensureScriptIsExecuted(a,b){!a.executed&&!a.executing&&(2<=traceExecution.value&&print("Executing Script For: "+b),executeScript(a))}var Glue=createEmptyObject();Glue.PUBLIC_PROPERTIES=1;Glue.PUBLIC_METHODS=2;
Glue.ALL=Glue.PUBLIC_PROPERTIES|Glue.PUBLIC_METHODS;
var ApplicationDomain=function(){function a(a,e,d,f){!0;!0;this.vm=a;this.abcs=[];this.loadedAbcs={};this.loadedClasses=[];this.classCache=createEmptyObject();this.scriptCache=createEmptyObject();this.classInfoCache=createEmptyObject();this.base=e;this.allowNatives=f;this.mode=d;this.onMessage=new Callback;this.system=e?e.system:this}a.passthroughCallable=function(a){return{call:function(e){Array.prototype.shift.call(arguments);return a.apply(e,arguments)},apply:function(e,d){return a.apply(e,d)}}};
a.coerceCallable=function(a){return{call:function(e,d){return asCoerce(a,d)},apply:function(e,d){return asCoerce(a,d[0])}}};a.constructingCallable=function(a){return{call:function(e){return new Function.bind.apply(a,arguments)},apply:function(e,d){return new Function.bind.apply(a,[e].concat(d))}}};a.prototype={getType:function(a){return this.getProperty(a,!0,!0)},getProperty:function(a,e,d){if(d=this.findDefiningScript(a,d))return!d.script.executing?void 0:d.script.global[Multiname.getQualifiedName(d.trait.name)];
if(e)return unexpected("Cannot find property "+a)},getClass:function(a){var e=this.classCache,d=e[a];d||(d=e[a]=this.getProperty(Multiname.fromSimpleName(a),!0,!0));!0;return d},findClass:function(a){return a in this.classCache?!0:this.findDomainProperty(Multiname.fromSimpleName(a),!1,!0)},findDomainProperty:function(a,e,d){traceDomain.value&&print("ApplicationDomain.findDomainProperty: "+a);if(d=this.findDefiningScript(a,d))return d.script.global;if(e)return unexpected("Cannot find property "+a)},
findClassInfo:function(a){var e;if(Multiname.isQName(a)){e=Multiname.getQualifiedName(a);var d=this.classInfoCache[e]}else d=this.classInfoCache[a.id];if(d||this.base&&(d=this.base.findClassInfo(a)))return d;for(var d=this.abcs,f=0;f<d.length;f++)for(var g=d[f],g=g.scripts,l=0;l<g.length;l++)for(var m=g[l].traits,p=0;p<m.length;p++){var r=m[p];if(r.isClass()){var s=Multiname.getQualifiedName(r.name);if(e){if(s===e)return this.classInfoCache[e]=r.classInfo}else for(var w=0,v=a.namespaces.length;w<
v;w++){var z=a.getQName(w);if(s===Multiname.getQualifiedName(z))return this.classInfoCache[z]=r.classInfo}}}if(!this.base&&this.vm.findDefiningAbc&&(g=this.vm.findDefiningAbc(a),null!==g&&!this.loadedAbcs[g.name]))return this.loadedAbcs[g.name]=!0,this.loadAbc(g),this.findClassInfo(a)},installNative:function(a,e){natives[a]=function(){return e}},findDefiningScript:function(a,e){var d=this.scriptCache[a.id];if(d&&(d.script.executed||!e)||this.base&&(d=this.base.findDefiningScript(a,e)))return d;Counter.count("ApplicationDomain: findDefiningScript");
for(var d=this.abcs,f=0;f<d.length;f++)for(var g=d[f],g=g.scripts,l=0;l<g.length;l++){var m=g[l],p=m.traits;if(a instanceof Multiname)for(var r=0;r<p.length;r++){var s=p[r];if(a.hasQName(s.name))return e&&ensureScriptIsExecuted(m,s.name),this.scriptCache[a.id]={script:m,trait:s}}else unexpected()}if(!this.base&&this.vm.findDefiningAbc&&(g=this.vm.findDefiningAbc(a),null!==g&&!this.loadedAbcs[g.name]))return this.loadedAbcs[g.name]=!0,this.loadAbc(g),this.findDefiningScript(a,e)},compileAbc:function(a){this.loadAbc(a);
var e=new IndentingWriter;e.enter("var classes = {");for(var d=0;d<a.scripts.length;d++)compileScript(a.scripts[d],e);e.leave("}")},executeAbc:function(a){this.loadAbc(a);executeScript(a.lastScript)},loadAbc:function(a){traceExecution.value&&print("Loading: "+a.name);a.applicationDomain=this;GlobalMultinameResolver.loadAbc(a);this.abcs.push(a);this.base||Type.initializeTypes(this)},broadcastMessage:function(a,e,d){this.onMessage.notify1(a,{data:e,origin:d,source:this})},traceLoadedClasses:function(a){var e=
new IndentingWriter;a||e.enter("Loaded Classes And Interfaces");(a?[this.loadedClasses.last()]:this.loadedClasses).forEach(function(a){a!==Class&&a.trace(e)});a||e.leave("")}};return a}(),SecurityDomain=function(){function a(){this.compartment=createNewCompartment();this.compartment.environment=environment;this.compartment.homePath=homePath;this.compartment.eval(snarf("compartment.js"));this.compartment.release=!0}a.prototype.initializeShell=function(a,e){var d=this.compartment;d.avm2=new d.AVM2(a,
e);d.avm2.systemDomain.executeAbc(d.grabAbc(homePath+"src/avm2/generated/builtin/builtin.abc"));d.avm2.systemDomain.executeAbc(d.grabAbc(homePath+"src/avm2/generated/shell/shell.abc"));this.systemDomain=d.avm2.systemDomain;this.applicationDomain=d.avm2.applicationDomain};return a}(),traitsWriter=null,Binding=function(){function a(a){!0;this.trait=a}a.KEY_PREFIX_LENGTH=4;a.getKey=function(a,e){var d=a;e.isGetter()?d="get "+a:e.isSetter()&&(d="set "+a);return d};a.prototype.toString=function(){return String(this.trait)};
return a}(),Bindings=function(){function a(){this.map=createEmptyObject();this.slots=[];this.nextSlotId=1}function b(a,b,d,e){this.name=a;this.isConst=b;this.type=d;this.trait=e}function e(){this.byID=[];this.byQN=createEmptyObject()}function d(a,b){!0;for(var d=0;d<a.length;d++){var e=a[d];if(3<=traceExecution.value){var f="Patching: ";e.name?f+=e.name:e.get?f+="get "+e.get:e.set&&(f+="set "+e.set);traitsWriter&&traitsWriter.redLn(f)}e.get?defineNonEnumerableGetterOrSetter(e.object,e.get,b,!0):e.set?
defineNonEnumerableGetterOrSetter(e.object,e.set,b,!1):defineNonEnumerableProperty(e.object,e.name,b)}}function f(a,b,e,f,g){!0;if(b.isMethod()){var w=makeTrampoline(function(a){var e=getTraitFunction(b,f,g);d(a.patchTargets,e);return e},b.methodInfo.parameters.length);w.patchTargets=[{object:e,name:a},{object:e,name:VM_OPEN_METHOD_PREFIX+a}];var v=bindSafely(w,e);defineReadOnlyProperty(v,VM_LENGTH,w[VM_LENGTH]);defineReadOnlyProperty(v,Multiname.getPublicQualifiedName("prototype"),null);defineNonEnumerableProperty(e,
a,v);defineNonEnumerableProperty(e,VM_OPEN_METHOD_PREFIX+a,v)}else b.isGetter()||b.isSetter()?(w=makeTrampoline(function(a){var e=getTraitFunction(b,f,g);d(a.patchTargets,e);return e}),w.patchTargets=b.isGetter()?[{object:e,get:a}]:[{object:e,set:a}],defineNonEnumerableGetterOrSetter(e,a,w,b.isGetter())):unexpected(b)}function g(a,b,e,f,g){!0;if(b.isMethod()){var w={value:null},v=makeTrampoline(function(a){var e=getTraitFunction(b,f,g);d(a.patchTargets,e);return e},b.methodInfo.parameters.length,
String(b.name));w.value=v;var z=e[VM_OPEN_METHODS];z[a]=v;defineNonEnumerableProperty(e,VM_OPEN_METHOD_PREFIX+a,v);defineNonEnumerableGetter(e,a,makeMemoizer(a,w));v.patchTargets=[{object:w,name:"value"},{object:z,name:a},{object:e,name:VM_OPEN_METHOD_PREFIX+a}]}else if(b.isGetter()||b.isSetter())v=makeTrampoline(function(a){var e=getTraitFunction(b,f,g);d(a.patchTargets,e);return e},0,String(b.name)),b.isGetter()?(defineNonEnumerableProperty(e,VM_OPEN_GET_METHOD_PREFIX+a,v),v.patchTargets=[{object:e,
get:a},{object:e,name:VM_OPEN_GET_METHOD_PREFIX+a}]):(defineNonEnumerableProperty(e,VM_OPEN_SET_METHOD_PREFIX+a,v),v.patchTargets=[{object:e,set:a},{object:e,name:VM_OPEN_SET_METHOD_PREFIX+a}]),defineNonEnumerableGetterOrSetter(e,a,v,b.isGetter())}a.prototype.assignNextSlot=function(a){!0;!0;a.slotId?this.nextSlotId=a.slotId+1:a.slotId=this.nextSlotId++;!0;this.slots[a.slotId]=a};a.prototype.trace=function(a){a.enter("Bindings");for(var b in this.map){var d=this.map[b];a.writeLn(d.trait.kindName()+
": "+b+" -> "+d)}a.leaveAndEnter("Slots");a.writeArray(this.slots);a.outdent()};a.prototype.applyTo=function(a,d){!0;!0;!0;defineNonEnumerableProperty(d,VM_SLOTS,new e);defineNonEnumerableProperty(d,VM_BINDINGS,[]);defineNonEnumerableProperty(d,VM_OPEN_METHODS,createEmptyObject());defineNonEnumerableProperty(d,"bindings",this);defineNonEnumerableProperty(d,"resolutionMap",[]);traitsWriter&&traitsWriter.greenLn("Applying Traits");for(var p in this.map){var r=this.map[p],s=r.trait,w=Multiname.getQualifiedName(s.name);
if(s.isSlot()||s.isConst()||s.isClass()){r=void 0;if(s.isSlot()||s.isConst())s.hasDefaultValue?r=s.value:s.typeName&&(r=a.findClassInfo(s.typeName).defaultValue);p!==w?(traitsWriter&&traitsWriter.yellowLn("Binding Trait: "+p+" -> "+w),defineNonEnumerableGetter(d,p,makeForwardingGetter(w)),d[VM_BINDINGS].pushUnique(p)):(traitsWriter&&traitsWriter.greenLn("Applying Trait "+s.kindName()+": "+s),defineNonEnumerableProperty(d,w,r),d[VM_BINDINGS].pushUnique(w),r=new b(w,s.isConst(),s.typeName?a.getProperty(s.typeName,
!1,!1):null,s),d[VM_SLOTS].byID[s.slotId]=r,d[VM_SLOTS].byQN[w]=r)}else if(s.isMethod()||s.isGetter()||s.isSetter()){if(s.isGetter()||s.isSetter())p=p.substring(Binding.KEY_PREFIX_LENGTH);p!==w?traitsWriter&&traitsWriter.yellowLn("Binding Trait: "+p+" -> "+w):traitsWriter&&traitsWriter.greenLn("Applying Trait "+s.kindName()+": "+s);d[VM_BINDINGS].pushUnique(p);this instanceof ScriptBindings?f(p,s,d,r.scope,r.natives):g(p,s,d,r.scope,r.natives)}}};return a}(),ActivationBindings=function(){function a(a){Bindings.call(this);
!0;this.methodInfo=a;a=a.traits;for(var e=0;e<a.length;e++){var d=a[e];!0;var f=Multiname.getQualifiedName(d.name);this.map[f]=new Binding(d);this.assignNextSlot(d)}}a.prototype=Object.create(Bindings.prototype);return a}(),CatchBindings=function(){function a(a,e){Bindings.call(this);var d=Multiname.getQualifiedName(e.name);this.map[d]=new Binding(e);!0;this.assignNextSlot(e)}a.prototype=Object.create(Bindings.prototype);return a}(),ScriptBindings=function(){function a(a,e){Bindings.call(this);this.scope=
e;this.scriptInfo=a;for(var d=a.traits,f=0;f<d.length;f++){var g=d[f],l=Multiname.getQualifiedName(g.name),l=Binding.getKey(l,g),l=this.map[l]=new Binding(g);(g.isSlot()||g.isConst()||g.isClass())&&this.assignNextSlot(g);g.isClass()&&(g.metadata&&g.metadata.native)&&(g.classInfo.native=g.metadata.native);if(g.isMethod()||g.isGetter()||g.isSetter())l.scope=this.scope}}a.prototype=Object.create(Bindings.prototype);return a}(),ClassBindings=function(){function a(a,e,d){Bindings.call(this);this.scope=
e;this.natives=d;this.classInfo=a;a=a.traits;for(e=0;e<a.length;e++){d=a[e];var f=Multiname.getQualifiedName(d.name),f=Binding.getKey(f,d),f=this.map[f]=new Binding(d);(d.isSlot()||d.isConst())&&this.assignNextSlot(d);if(d.isMethod()||d.isGetter()||d.isSetter())f.scope=this.scope,f.natives=this.natives}}a.prototype=Object.create(Bindings.prototype);return a}(),InstanceBindings=function(){function a(a,e,d,f){Bindings.call(this);this.scope=d;this.natives=f;this.parent=a;this.instanceInfo=e;this.implementedInterfaces=
a?cloneObject(a.implementedInterfaces):createEmptyObject();a&&(this.slots=a.slots.slice(),this.nextSlotId=a.nextSlotId);e=this.instanceInfo;var g;d=this.map;var l,m,p;if(a)for(l in a.map)m=a.map[l],f=m.trait,d[l]=m,f.isProtected()&&(p=Multiname.getQualifiedName(new Multiname([e.protectedNs],f.name.getName())),p=Binding.getKey(p,f),d[p]=m);var r=e.traits;for(a=0;a<r.length;a++){f=r[a];l=Multiname.getQualifiedName(f.name);l=Binding.getKey(l,f);m=new Binding(f);g=d;p=m;g[l]&&!0;!0;g[l]=p;if(f.isProtected())for(g=
this.parent;g;)p=Multiname.getQualifiedName(new Multiname([g.instanceInfo.protectedNs],f.name.getName())),p=Binding.getKey(p,f),p in d&&(d[p]=m),g=g.parent;(f.isSlot()||f.isConst())&&this.assignNextSlot(f);if(f.isMethod()||f.isGetter()||f.isSetter())m.scope=this.scope,m.natives=this.natives}l=e.abc.applicationDomain;f=e.interfaces;for(a=0;a<f.length;a++)m=l.getProperty(f[a],!0,!0),!0,copyProperties(this.implementedInterfaces,m.interfaceBindings.implementedInterfaces),this.implementedInterfaces[Multiname.getQualifiedName(m.name)]=
m;for(var s in this.implementedInterfaces){m=this.implementedInterfaces[s];g=m.interfaceBindings;for(var w in g.map)a=g.map[w],e.isInterface()?d[w]=a:(l=Multiname.getPublicQualifiedName(a.trait.name.getName()),l=Binding.getKey(l,a.trait),d[w]=d[l])}}a.prototype=Object.create(Bindings.prototype);a.prototype.toString=function(){return this.instanceInfo.toString()};return a}(),Interface=function(){function a(a){var e=a.instanceInfo;!0;this.name=e.name;this.classInfo=a}a.createInterface=function(b){var e=
b.instanceInfo;!0;if(traceExecution.value){var d="Creating Interface "+e.name;e.interfaces.length&&(d+=" implements "+e.interfaces.map(function(a){return a.getName()}).join(", "));print(d)}b=new a(b);b.interfaceBindings=new InstanceBindings(null,e);return b};a.prototype={toString:function(){return"[interface "+this.name+"]"},isInstance:function(a){if(null===a||"object"!==typeof a)return!1;!0;var e=Multiname.getQualifiedName(this.name);return void 0!==a.class.implementedInterfaces[e]},trace:function(a){a.enter("interface "+
this.name.getName());a.enter("interfaceBindings: ");this.interfaceBindings.trace(a);a.outdent();a.outdent();a.leave("}")},call:function(a,e){return e},apply:function(a,e){return e[0]}};return a}(),Class=function(){function a(a,b,e){this.debugName=a;b&&(!0,this.instanceConstructorNoInitialize=this.instanceConstructor=b,this.hasInitialize=0,this.instanceConstructor.class=this);e?e===ApplicationDomain.coerceCallable&&(e=ApplicationDomain.coerceCallable(this)):e=ApplicationDomain.coerceCallable(this);
defineNonEnumerableProperty(this,"call",e.call);defineNonEnumerableProperty(this,"apply",e.apply)}function b(a){defineNonEnumerableProperty(a.dynamicPrototype,Multiname.getPublicQualifiedName("constructor"),a);defineReadOnlyProperty(a.traitsPrototype,"class",a);defineReadOnlyProperty(a.instanceConstructor,"class",a)}a.createClass=function(b,e,g){var l=b.instanceInfo,m=b.abc.applicationDomain,p=Multiname.getName(l.name),r=b.native;if(r){var s=getNative(b.native.cls);s||unexpected("No native for "+
b.native.cls);e||(g=new Scope(g,a))}g=new Scope(g,null);var w=createFunction(l.init,g),s=r?s(m,g,w,e):new a(p,w);s.className=p;s.classInfo=b;s.scope=g;g.object=s;var v,z;r?s.native&&(v=s.native.static,z=s.native.instance):s.extend(e);s.classBindings=new ClassBindings(b,g,v);s.classBindings.applyTo(m,s);defineReadOnlyProperty(s,VM_IS_CLASS,!0);s.instanceBindings=new InstanceBindings(e?e.instanceBindings:null,l,g,z);s.instanceConstructor&&s.instanceBindings.applyTo(m,s.traitsPrototype);s.implementedInterfaces=
s.instanceBindings.implementedInterfaces;return s};a.prototype={setSymbol:function(a){this.instanceConstructor.prototype.symbol=a},getSymbol:function(){return this.instanceConstructor.prototype.symbol},initializeInstance:function(a){for(var b=this,e=[];b;)b.hasInitialize&1&&e.push(b.instanceConstructor.prototype.initialize),b=b.baseClass;for(;b=e.pop();)b.call(a);Counter.count("Initialize Instance "+a.class)},createInstance:function(a){var b=Object.create(this.instanceConstructor.prototype);this.instanceConstructor.apply(b,
a);return b},createAsSymbol:function(a){var b=Object.create(this.instanceConstructor.prototype);if(b.symbol){var e=Object.create(b.symbol),l;for(l in a)e[l]=a[l];b.symbol=e}else b.symbol=a;return b},extendNative:function(a,e){this.baseClass=a;this.dynamicPrototype=Object.getPrototypeOf(e.prototype);this.instanceConstructor.prototype=this.traitsPrototype=e.prototype;b(this)},extendWrapper:function(a,e){!0;this.baseClass=a;this.dynamicPrototype=Object.create(a.dynamicPrototype);var g=Object.create(this.dynamicPrototype,
getOwnPropertyDescriptors(e.prototype));this.instanceConstructor.prototype=this.traitsPrototype=g;b(this)},extendBuiltin:function(a){!0;this.baseClass=a;this.dynamicPrototype=this.traitsPrototype=this.instanceConstructor.prototype;b(this)},extend:function(a){!0;this.baseClass=a;this.dynamicPrototype=Object.create(a.dynamicPrototype);if(a.hasInitialize){var e=this.instanceConstructor,g=this;this.instanceConstructor=function(){g.initializeInstance(this);e.apply(this,arguments)};defineReadOnlyProperty(this.instanceConstructor,
"class",e.class);this.hasInitialize|=2}this.instanceConstructor.prototype=this.traitsPrototype=Object.create(this.dynamicPrototype);b(this)},setDefaultProperties:function(){b(this)},link:function(a){function b(a,d){for(var e=Object.keys(d),f=0;f<e.length;f++){var g=e[f],l=d[g],m=!1;0<=l.indexOf("open ")&&(l=l.substring(5),m=!0);!0;l=Multiname.getQualifiedName(Multiname.fromSimpleName(l));m&&(l=VM_OPEN_METHOD_PREFIX+l);!0;(m=Object.getOwnPropertyDescriptor(a,l))&&m.get?Object.defineProperty(a,g,m):
Object.defineProperty(a,g,{get:new Function("","return this."+l),set:new Function("v","this."+l+" = v")})}}function e(a){var b=createEmptyObject();a.forEach(function(a){a.name.getNamespace().isPublic()&&(b[a.name.getName()]=(a.isMethod()?"open ":"")+"public "+a.name.getName())});return b}!0;!0;if(a.initialize){if(!this.hasInitialize){var l=this.instanceConstructor,m=this;this.instanceConstructor=function(){m.initializeInstance(this);l.apply(this,arguments)};defineReadOnlyProperty(this.instanceConstructor,
"class",l.class);this.instanceConstructor.prototype=l.prototype}this.hasInitialize|=1}for(var p=this.dynamicPrototype,r=Object.keys(a),s=0;s<r.length;s++){var w=r[s];Object.defineProperty(p,w,Object.getOwnPropertyDescriptor(a,w))}if((a=a.__glue__)&&a.script)a.script.instance&&(isNumber(a.script.instance)?(!0,b(p,e(this.classInfo.instanceInfo.traits))):b(p,a.script.instance)),a.script.static&&(isNumber(a.script.static)?(!0,b(this,e(this.classInfo.traits))):b(this,a.script.static))},linkNatives:function(a){this.native=
a.__glue__.native},verify:function(){!0;!0;!0;!0;!0},coerce:function(a){return a},isInstanceOf:function(a){return this.isInstance(a)},isInstance:function(a){return null===a||"object"!==typeof a?!1:this.dynamicPrototype.isPrototypeOf(a)},trace:function(a){a.enter("class "+(this.debugName+(this.baseClass?" extends "+this.baseClass.debugName:""))+" {");a.writeLn("scope: "+this.scope);a.writeLn("baseClass: "+this.baseClass);a.writeLn("classInfo: "+this.classInfo);a.writeLn("dynamicPrototype: "+this.dynamicPrototype);
a.writeLn("traitsPrototype: "+this.traitsPrototype);a.writeLn("dynamicPrototype === traitsPrototype: "+(this.dynamicPrototype===this.traitsPrototype));a.writeLn("instanceConstructor: "+this.instanceConstructor);a.writeLn("instanceConstructorNoInitialize: "+this.instanceConstructorNoInitialize);a.writeLn("instanceConstructor === instanceConstructorNoInitialize: "+(this.instanceConstructor===this.instanceConstructorNoInitialize));var b=this.traitsPrototype;a.enter("traitsPrototype: ");b&&(a.enter("VM_SLOTS: "),
a.writeArray(b[VM_SLOTS].byID.map(function(a){return a.trait})),a.outdent(),a.enter("VM_BINDINGS: "),a.writeArray(b[VM_BINDINGS].map(function(a){var d=Object.getOwnPropertyDescriptor(b,a);d.get||d.set?(d.get&&(a+=" getter: "+debugName(d.get)),d.set&&(a+=" setter: "+debugName(d.set))):a+=" value: "+debugName(d.value);return a})),a.outdent(),a.enter("VM_OPEN_METHODS: "),a.writeArray(toKeyValueArray(b[VM_OPEN_METHODS]).map(function(a){return a[0]+": "+debugName(a[1])})),a.outdent());a.enter("classBindings: ");
this.classBindings.trace(a);a.outdent();a.enter("instanceBindings: ");this.instanceBindings.trace(a);a.outdent();a.outdent();a.writeLn("call: "+this.call);a.writeLn("apply: "+this.apply);a.leave("}")},toString:function(){return"[class "+this.classInfo.instanceInfo.name.name+"]"}};var e=ApplicationDomain.coerceCallable(a);defineNonEnumerableProperty(a,"call",e.call);defineNonEnumerableProperty(a,"apply",e.apply);a.instanceConstructor=a;a.toString=a.prototype.toString;a.native={instance:{prototype:{get:function(){return this.dynamicPrototype}}}};
return a}();function MethodClosure(a,b){var e=bindSafely(b,a);defineNonEnumerableProperty(this,"call",e.call.bind(e));defineNonEnumerableProperty(this,"apply",e.apply.bind(e))}MethodClosure.prototype={toString:function(){return"function Function() {}"}};
var XRegExp=function(a){function b(a,b,d){var e;if(d)if(a.__proto__)a.__proto__=v.prototype;else for(e in v.prototype)a[e]=v.prototype[e];a[w]={captureNames:b};return a}function e(a){return A.replace.call(a,/([\s\S])(?=[\s\S]*\1)/g,"")}function d(a,d){if(!v.isRegExp(a))throw new TypeError("Type RegExp expected");var f=A.exec.call(/\/([a-z]*)$/i,String(a))[1];d=d||{};d.add&&(f=e(f+d.add));d.remove&&(f=A.replace.call(f,RegExp("["+d.remove+"]+","g"),""));return a=b(RegExp(a.source,f),a.xregexp&&a.xregexp.captureNames?
a.xregexp.captureNames.slice(0):null,d.addProto)}function f(a,b){if(Array.prototype.indexOf)return a.indexOf(b);var d=a.length,e;for(e=0;e<d;++e)if(a[e]===b)return e;return-1}function g(a,b){return R.call(a)==="[object "+b+"]"}function l(a,b,d){return A.test.call(-1<d.indexOf("x")?/^(?:\s+|#.*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,a.slice(b))}function m(a){a=a||{};g(a,"String")&&(a=v.forEach(a,/[^\s,]+/,function(a){this[a]=!0},{}));return a}function p(a){if(!/^[\w$]$/.test(a))throw Error("Flag must be a single character A-Za-z0-9_$");
Q[a]=!0}function r(a){RegExp.prototype.exec=(a?u:A).exec;RegExp.prototype.test=(a?u:A).test;String.prototype.match=(a?u:A).match;String.prototype.replace=(a?u:A).replace;String.prototype.split=(a?u:A).split;z.natives=a}function s(a){if(null==a)throw new TypeError("Cannot convert null or undefined to object");return a}var w="xregexp",v,z={astral:!1,natives:!1},A={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},
u={},B={},y={},D=[],F={"default":/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,"class":/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|[\s\S]/},E=/\$(?:{([\w$]+)}|([\d$&`']))/g,C=A.exec.call(/()??/,"")[1]===a,M=RegExp.prototype.sticky!==a,Q={g:!0,i:!0,m:!0,y:M},R={}.toString,S;v=function(f,g){var l={hasNamedCapture:!1,captureNames:[]},m="default",r="",p=0,s,u;if(v.isRegExp(f)){if(g!==
a)throw new TypeError("Cannot supply flags when copying a RegExp");return d(f,{addProto:!0})}f=f===a?"":String(f);g=g===a?"":String(g);u=f+"***"+g;if(!y[u]){s=f;var w=g,E;if(e(w)!==w)throw new SyntaxError("Invalid duplicate regex flag "+w);s=A.replace.call(s,/^\(\?([\w$]+)\)/,function(a,b){if(A.test.call(/[gy]/,b))throw new SyntaxError("Cannot use flag g or y in mode modifier "+a);w=e(w+b);return""});for(E=0;E<w.length;++E)if(!Q[w.charAt(E)])throw new SyntaxError("Unknown regex flag "+w.charAt(E));
s={pattern:s,flags:w};f=s.pattern;for(g=s.flags;p<f.length;){do{s=f;E=g;for(var z=p,C=m,B=l,M=D.length,R=null,S=void 0,la=void 0;M--;)if(la=D[M],(la.scope===C||"all"===la.scope)&&(!la.flag||-1<E.indexOf(la.flag)))if(S=v.exec(s,la.regex,z,"sticky")){R={matchLength:S[0].length,output:la.handler.call(B,S,C,E),reparse:la.reparse};break}(s=R)&&s.reparse&&(f=f.slice(0,p)+s.output+f.slice(p+s.matchLength))}while(s&&s.reparse);s?(r+=s.output,p+=s.matchLength||1):(s=v.exec(f,F[m],p,"sticky")[0],r+=s,p+=s.length,
"["===s&&"default"===m?m="class":"]"===s&&"class"===m&&(m="default"))}y[u]={pattern:A.replace.call(r,/\(\?:\)(?=\(\?:\))|^\(\?:\)|\(\?:\)$/g,""),flags:A.replace.call(g,/[^gimy]+/g,""),captures:l.hasNamedCapture?l.captureNames:null}}u=y[u];return b(RegExp(u.pattern,u.flags),u.captures,!0)};v.prototype=RegExp();v.version="3.0.0-pre";v.addToken=function(a,b,e){e=e||{};var f=e.optionalFlags,g;e.flag&&p(e.flag);if(f){f=A.split.call(f,"");for(g=0;g<f.length;++g)p(f[g])}D.push({regex:d(a,{add:"g"+(M?"y":
"")}),handler:b,scope:e.scope||"default",flag:e.flag,reparse:e.reparse});v.cache.flush("patterns")};v.cache=function(a,b){var d=a+"***"+(b||"");return B[d]||(B[d]=v(a,b))};v.cache.flush=function(a){"patterns"===a?y={}:B={}};v.escape=function(a){return A.replace.call(s(a),/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};v.exec=function(a,b,e,f){var g="g";if(M&&(f||b.sticky&&!1!==f))g+="y";b[w]=b.xregexp||{captureNames:null};g=b.xregexp[g]||(b[w][g]=d(b,{add:g,remove:!1===f?"y":""}));g.lastIndex=e=e||0;a=u.exec.call(g,
a);f&&(a&&a.index!==e)&&(a=null);b.global&&(b.lastIndex=a?g.lastIndex:0);return a};v.forEach=function(a,b,d,e){for(var f=0,g=-1;f=v.exec(a,b,f);)d.call(e,f,++g,a,b),f=f.index+(f[0].length||1);return e};v.globalize=function(a){return d(a,{add:"g",addProto:!0})};v.install=function(a){a=m(a);!z.astral&&a.astral&&(v.cache.flush("patterns"),z.astral=!0);!z.natives&&a.natives&&r(!0)};v.isInstalled=function(a){return!!z[a]};v.isRegExp=function(a){return"[object RegExp]"===R.call(a)};v.match=function(a,b,
e){var f=b.global&&"one"!==e||"all"===e,g=(f?"g":"")+(b.sticky?"y":"");b[w]=b.xregexp||{captureNames:null};g=b.xregexp[g||"noGY"]||(b[w][g||"noGY"]=d(b,{add:g,remove:"one"===e?"g":""}));a=A.match.call(s(a),g);b.global&&(b.lastIndex="one"===e&&a?a.index+a[0].length:0);return f?a||[]:a&&a[0]};v.matchChain=function(a,b){return function I(a,d){var e=b[d].regex?b[d]:{regex:b[d]},f=[],g=function(a){if(e.backref){if(!(a.hasOwnProperty(e.backref)||+e.backref<a.length))throw new ReferenceError("Backreference to undefined group: "+
e.backref);f.push(a[e.backref]||"")}else f.push(a[0])},l;for(l=0;l<a.length;++l)v.forEach(a[l],e.regex,g);return d===b.length-1||!f.length?f:I(f,d+1)}([a],0)};v.replace=function(a,b,e,f){var g=v.isRegExp(b),l=b.global&&"one"!==f||"all"===f,m=(l?"g":"")+(b.sticky?"y":""),r=b;g?(b[w]=b.xregexp||{captureNames:null},r=b.xregexp[m||"noGY"]||(b[w][m||"noGY"]=d(b,{add:m,remove:"one"===f?"g":""}))):l&&(r=RegExp(v.escape(String(b)),"g"));a=u.replace.call(s(a),r,e);g&&b.global&&(b.lastIndex=0);return a};v.replaceEach=
function(a,b){var d,e;for(d=0;d<b.length;++d)e=b[d],a=v.replace(a,e[0],e[1],e[2]);return a};v.split=function(a,b,d){return u.split.call(s(a),b,d)};v.test=function(a,b,d,e){return!!v.exec(a,b,d,e)};v.uninstall=function(a){a=m(a);z.astral&&a.astral&&(v.cache.flush("patterns"),z.astral=!1);z.natives&&a.natives&&r(!1)};v.union=function(a,b){var d=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,e=[],f=0,l,m,r,p=function(a,b,d){var e=m[f-l];if(b){if(++f,e)return"(?<"+e+">"}else if(d)return"\\"+
(+d+l);return a},s;if(!g(a,"Array")||!a.length)throw new TypeError("Must provide a nonempty array of patterns to merge");for(s=0;s<a.length;++s)r=a[s],v.isRegExp(r)?(l=f,m=r.xregexp&&r.xregexp.captureNames||[],e.push(A.replace.call(v(r.source).source,d,p))):e.push(v.escape(r));return v(e.join("|"),b)};u.exec=function(b){var e=this.lastIndex,g=A.exec.apply(this,arguments),l,m;if(g){!C&&(1<g.length&&-1<f(g,""))&&(l=d(this,{remove:"g"}),A.replace.call(String(b).slice(g.index),l,function(){var b=arguments.length,
d;for(d=1;d<b-2;++d)arguments[d]===a&&(g[d]=a)}));if(this.xregexp&&this.xregexp.captureNames)for(m=1;m<g.length;++m)(l=this.xregexp.captureNames[m-1])&&(g[l]=g[m]);this.global&&(!g[0].length&&this.lastIndex>g.index)&&(this.lastIndex=g.index)}this.global||(this.lastIndex=e);return g};u.test=function(a){return!!u.exec.call(this,a)};u.match=function(a){var b;if(v.isRegExp(a)){if(a.global)return b=A.match.apply(this,arguments),a.lastIndex=0,b}else a=RegExp(a);return u.exec.call(a,s(this))};u.replace=
function(b,d){var e=v.isRegExp(b),l,m,r;e?(b.xregexp&&(m=b.xregexp.captureNames),l=b.lastIndex):b+="";r=g(d,"Function")?A.replace.call(String(this),b,function(){var f=arguments,g;if(m){f[0]=new String(f[0]);for(g=0;g<m.length;++g)m[g]&&(f[0][m[g]]=f[g+1])}e&&b.global&&(b.lastIndex=f[f.length-2]+f[0].length);return d.apply(a,f)}):A.replace.call(null==this?this:String(this),b,function(){var a=arguments;return A.replace.call(String(d),E,function(b,d,e){if(d){e=+d;if(e<=a.length-3)return a[e]||"";e=m?
f(m,d):-1;if(0>e)throw new SyntaxError("Backreference to undefined group "+b);return a[e+1]||""}if("$"===e)return"$";if("&"===e||0===+e)return a[0];if("`"===e)return a[a.length-1].slice(0,a[a.length-2]);if("'"===e)return a[a.length-1].slice(a[a.length-2]+a[0].length);e=+e;if(!isNaN(e)){if(e>a.length-3)throw new SyntaxError("Backreference to undefined group "+b);return a[e]||""}throw new SyntaxError("Invalid token "+b);})});e&&(b.lastIndex=b.global?0:l);return r};u.split=function(b,d){if(!v.isRegExp(b))return A.split.apply(this,
arguments);var e=String(this),f=[],g=b.lastIndex,l=0,m;d=(d===a?-1:d)>>>0;v.forEach(e,b,function(a){a.index+a[0].length>l&&(f.push(e.slice(l,a.index)),1<a.length&&a.index<e.length&&Array.prototype.push.apply(f,a.slice(1)),m=a[0].length,l=a.index+m)});l===e.length?(!A.test.call(b,"")||m)&&f.push(""):f.push(e.slice(l));b.lastIndex=g;return f.length>d?f.slice(0,d):f};S=v.addToken;S(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,function(a,b){if("B"===a[1]&&"default"===
b)return a[0];throw new SyntaxError("Invalid escape "+a[0]);},{scope:"all"});S(/\[(\^?)]/,function(a){return a[1]?"[\\s\\S]":"\\b\\B"});S(/\(\?#[^)]*\)/,function(a,b,d){return l(a.input,a.index+a[0].length,d)?"":"(?:)"});S(/\s+|#.*/,function(a,b,d){return l(a.input,a.index+a[0].length,d)?"":"(?:)"},{flag:"x"});S(/\./,function(){return"[\\s\\S]"},{flag:"s"});S(/\\k<([\w$]+)>/,function(a){var b=isNaN(a[1])?f(this.captureNames,a[1])+1:+a[1],d=a.index+a[0].length;if(!b||b>this.captureNames.length)throw new SyntaxError("Backreference to undefined group "+
a[0]);return"\\"+b+(d===a.input.length||isNaN(a.input.charAt(d))?"":"(?:)")});S(/\\(\d+)/,function(a,b){if(!("default"===b&&/^[1-9]/.test(a[1])&&+a[1]<=this.captureNames.length)&&"0"!==a[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group "+a[0]);return a[0]},{scope:"all"});S(/\(\?P?<([\w$]+)>/,function(a){if(!isNaN(a[1]))throw new SyntaxError("Cannot use integer as capture name "+a[0]);if("length"===a[1]||"__proto__"===a[1])throw new SyntaxError("Cannot use reserved word as capture name "+
a[0]);if(-1<f(this.captureNames,a[1]))throw new SyntaxError("Cannot use same name for multiple groups "+a[0]);this.captureNames.push(a[1]);this.hasNamedCapture=!0;return"("});S(/\((?!\?)/,function(a,b,d){if(-1<d.indexOf("n"))return"(?:";this.captureNames.push(null);return"("},{optionalFlags:"n"});return v}(),runtimeOptions=systemOptions.register(new OptionSet("Runtime Options")),traceScope=runtimeOptions.register(new Option("ts","traceScope","boolean",!1,"trace scope execution")),traceExecution=runtimeOptions.register(new Option("tx",
"traceExecution","number",0,"trace script execution")),traceCallExecution=runtimeOptions.register(new Option("txc","traceCallExecution","number",0,"trace call execution")),functionBreak=runtimeOptions.register(new Option("fb","functionBreak","number",-1,"Inserts a debugBreak at function index #.")),compileOnly=runtimeOptions.register(new Option("co","compileOnly","number",-1,"Compiles only function number.")),compileUntil=runtimeOptions.register(new Option("cu","compileUntil","number",-1,"Compiles only until a function number.")),
debuggerMode=runtimeOptions.register(new Option("dm","debuggerMode","boolean",!1,"matches avm2 debugger build semantics")),enableVerifier=runtimeOptions.register(new Option("verify","verify","boolean",!1,"Enable verifier.")),globalMultinameAnalysis=runtimeOptions.register(new Option("ga","globalMultinameAnalysis","boolean",!1,"Global multiname analysis.")),traceInlineCaching=runtimeOptions.register(new Option("tic","traceInlineCaching","boolean",!1,"Trace inline caching execution.")),compilerEnableExceptions=
runtimeOptions.register(new Option("cex","exceptions","boolean",!1,"Compile functions with catch blocks.")),compilerMaximumMethodSize=runtimeOptions.register(new Option("cmms","maximumMethodSize","number",4096,"Compiler maximum method size.")),jsGlobal=function(){return this||(0,eval)("this")}(),VM_SLOTS="vm slots",VM_LENGTH="vm length",VM_BINDINGS="vm bindings",VM_NATIVE_PROTOTYPE_FLAG="vm native prototype",VM_OPEN_METHODS="vm open methods",VM_IS_CLASS="vm is class",VM_OPEN_METHOD_PREFIX="method_",
VM_OPEN_SET_METHOD_PREFIX="set_",VM_OPEN_GET_METHOD_PREFIX="get_",VM_NATIVE_BUILTIN_SURROGATES=[{object:Object,methods:["toString","valueOf"]},{object:Function,methods:["toString","valueOf"]}],VM_NATIVE_BUILTIN_ORIGINALS="vm originals",SAVED_SCOPE_NAME="$SS",PARAMETER_PREFIX="p",$M=[];XRegExp.install({natives:!0});var VM_METHOD_OVERRIDES=createEmptyObject(),vmNextShapeId=1;function defineObjectShape(a){defineReadOnlyProperty(a,"shape",vmNextShapeId++)}
var vmNextInterpreterFunctionId=1,vmNextCompiledFunctionId=1,vmNextTrampolineId=1,vmNextMemoizerId=1,InlineCache=function(){function a(){this.value=this.key=void 0}a.prototype.update=function(a,e){this.key=a;return this.value=e};return a}();function ic(a){return a.ic||(a.ic=new InlineCache)}var AS=1,JS=2,RUNTIME_ENTER_LEAVE_STACK=[1];function enter(a){RUNTIME_ENTER_LEAVE_STACK.push(a)}function leave(){RUNTIME_ENTER_LEAVE_STACK.pop();!0}function inJS(){return 2===RUNTIME_ENTER_LEAVE_STACK.top()}
function inAS(){return 1===RUNTIME_ENTER_LEAVE_STACK.top()}var callWriter=new IndentingWriter(!1,function(a){print(a)}),objectIDs=0,OBJECT_NAME="Object Name";
function objectConstantName(a){!0;if(a.hasOwnProperty("Object Name"))return a["Object Name"];if(a instanceof LazyInitializer)return a.getName();var b;b=objectIDs++;b=a instanceof Global?"$G"+b:a instanceof Multiname?"$M"+b:isClass(a)?"$C"+b:"$O"+b;Object.defineProperty(a,"Object Name",{value:b,writable:!1,enumerable:!1});jsGlobal[b]=a;return b}
var LazyInitializer=function(){function a(a){this.target=a}var b=jsGlobal;a.create=function(a){return a.lazyInitializer?a.lazyInitializer:a.lazyInitializer=new LazyInitializer(a)};a.prototype.getName=function(){if(this.name)return this.name;var a=this.target,d;this.target instanceof ScriptInfo?(this.name="$S"+objectIDs++,d=function(){ensureScriptIsExecuted(a,"Lazy Initializer");return a.global}):this.target instanceof ClassInfo?(this.name=Multiname.getQualifiedName(a.instanceInfo.name),d=function(){return a.abc.applicationDomain.getProperty(a.instanceInfo.name)}):
notImplemented(a);var f=this.name;Object.defineProperty(b,f,{get:function(){var a=d();Object.defineProperty(b,f,{value:a,writable:!0});return a},configurable:!0});return f};return a}();
function getNamespaceResolutionMap(a){var b=this.resolutionMap[a.id];if(b)return b;var b=this.resolutionMap[a.id]=createEmptyObject(),e=this.bindings,d;for(d in e.map){var f=d,g=e.map[d].trait;if(g.isGetter()||g.isSetter())f=f.substring(Binding.KEY_PREFIX_LENGTH);f=Multiname.fromQualifiedName(f);f.getNamespace().inNamespaceSet(a)&&(b[f.getName()]=Multiname.getQualifiedName(g.name))}return b}
function resolveMultinameProperty(a,b){"object"===typeof b&&(b=String(b));if(isNumeric(b))return toNumber(b);if(!a)return Multiname.getPublicQualifiedName(b);if(1<a.length){var e=this.getNamespaceResolutionMap(a)[b];return e?e:Multiname.getPublicQualifiedName(b)}return a[0].qualifiedName+"$"+b}function asGetPublicProperty(a){return this.asGetProperty(void 0,a,0)}
function asGetProperty(a,b,e){a=this.resolveMultinameProperty(a,b,e);return this.asGetNumericProperty&&Multiname.isNumeric(a)?this.asGetNumericProperty(a):this[a]}function asGetPropertyLikelyNumeric(a,b,e){return"number"===typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,e)}function asGetResolvedStringProperty(a){!0;return this[a]}function asCallResolvedStringProperty(a,b,e){b=b?null:this;var d=this["vm open methods"];return(b&&d&&d[a]?d[a]:this[a]).apply(b,e)}
function fromResolvedName(a){!0;return a.substring(Multiname.PUBLIC_QUALIFIED_NAME_PREFIX.length)}function asGetResolvedStringPropertyFallback(a){a=fromResolvedName(a);return this.asGetProperty([ShumwayNamespace.PUBLIC],a,0)}function asSetPublicProperty(a,b){return this.asSetProperty(void 0,a,0,b)}
function asSetProperty(a,b,e,d){"object"===typeof b&&(b=String(b));a=this.resolveMultinameProperty(a,b,e);if(this.asSetNumericProperty&&Multiname.isNumeric(a))return this.asSetNumericProperty(a,d);if(b=this["vm slots"].byQN[a]){if(b.const)return;(b=b.type)&&b.coerce&&(d=b.coerce(d))}this[a]=d}function asSetPropertyLikelyNumeric(a,b,e,d){if("number"===typeof b)this.asSetNumericProperty(b,d);else return asSetProperty.call(this,a,b,e,d)}
function asDefinePublicProperty(a,b){return this.asDefineProperty(void 0,a,0,b)}function asDefineProperty(a,b,e,d){"object"===typeof b&&(b=String(b));a=this.resolveMultinameProperty(a,b,e);Object.defineProperty(this,a,d)}function asCallPublicProperty(a,b){return this.asCallProperty(void 0,a,0,!1,b)}var callCounter=new metrics.Counter(!0);
function asCallProperty(a,b,e,d,f){if(traceCallExecution.value){var g=this.class?this.class.className+" ":"";callWriter.enter("call "+g+b+"("+toSafeArrayString(f)+") #"+callCounter.count(b))}g=d?null:this;isProxyObject(this)?f=this[VM_CALL_PROXY](new Multiname(a,b,e),g,f):(a=this.resolveMultinameProperty(a,b,e),this.asGetNumericProperty&&Multiname.isNumeric(a)?a=this.asGetNumericProperty(a):(b=this["vm open methods"],a=g&&b&&b[a]?b[a]:this[a]),f=a.apply(g,f));0<traceCallExecution.value&&callWriter.leave("return "+
toSafeString(f));return f}function asCallSuper(a,b,e,d,f){traceCallExecution.value&&callWriter.enter("call super "+(this.class?this.class.className+" ":"")+e+"("+toSafeArrayString(f)+") #"+callCounter.count(e));a=a.object.baseClass;b=a.traitsPrototype.resolveMultinameProperty(b,e,d);f=a.traitsPrototype["vm open methods"][b].apply(this,f);0<traceCallExecution.value&&callWriter.leave("return "+toSafeString(f));return f}
function asSetSuper(a,b,e,d,f){traceCallExecution.value&&callWriter.enter("set super "+(this.class?this.class.className+" ":"")+e+"("+toSafeArrayString(args)+") #"+callCounter.count(e));a=a.object.baseClass;b=a.traitsPrototype.resolveMultinameProperty(b,e,d);a.traitsPrototype["set_"+b].call(this,f);0<traceCallExecution.value&&callWriter.leave("")}
function asGetSuper(a,b,e,d){traceCallExecution.value&&callWriter.enter("get super "+(this.class?this.class.className+" ":"")+e+" #"+callCounter.count(e));a=a.object.baseClass;b=a.traitsPrototype.resolveMultinameProperty(b,e,d);b=a.traitsPrototype["get_"+b].call(this);0<traceCallExecution.value&&callWriter.leave("return "+toSafeString(b));return b}
function construct(a,b){if(a.classInfo){var e=a.classInfo.instanceInfo.name.qualifiedName;if(e===Multiname.String)return String.apply(null,b);if(e===Multiname.Boolean)return Boolean.apply(null,b);if(e===Multiname.Number)return Number.apply(null,b)}return new (Function.bind.apply(a.instanceConstructor,[,].concat(b)))}
function asConstructProperty(a,b,e,d){a=this.asGetProperty(a,b,e);traceCallExecution.value&&callWriter.enter("construct "+b+"("+toSafeArrayString(d)+") #"+callCounter.count(b));b=construct(a,d);0<traceCallExecution.value&&callWriter.leave("return "+toSafeString(b));return b}function asHasProperty(a,b,e,d){return this.hasProperty?this.hasProperty(a,b,e):d?nonProxyingHasProperty(this,this.resolveMultinameProperty(a,b,e)):this.resolveMultinameProperty(a,b,e)in this}
function asDeleteProperty(a,b,e){return delete this[this.resolveMultinameProperty(a,b,e)]}function asGetNumericProperty(a){return this[a]}function asSetNumericProperty(a,b){this[a]=b}function asGetDescendants(){notImplemented("asGetDescendants")}function asNextNameIndex(a){0===a&&defineNonEnumerableProperty(this,"enumerableKeys",this.asGetEnumerableKeys());for(var b=this.enumerableKeys;a<b.length;){if(this.asHasProperty(void 0,b[a],0))return a+1;a++}return 0}
function asNextName(a){var b=this.enumerableKeys;!0;return b[a-1]}function asNextValue(a){return this.asGetPublicProperty(this.asNextName(a))}function asGetEnumerableKeys(){var a=this.valueOf();if("string"===typeof a||"number"===typeof a)return[];for(var a=Object.keys(this),b=[],e=0;e<a.length;e++){var d=a[e];isNumeric(d)?b.push(d):(d=Multiname.stripPublicQualifier(d),void 0!==d&&b.push(d))}return b}
function initializeGlobalObject(a){var b=a[VM_NATIVE_BUILTIN_ORIGINALS]=createEmptyObject();VM_NATIVE_BUILTIN_SURROGATES.forEach(function(e){var d=e.object;b[d.name]=createEmptyObject();e.methods.forEach(function(e){var g=d.prototype[e];b[d.name][e]=g;var l=Multiname.getPublicQualifiedName(e);useSurrogates&&(a[d.name].prototype[e]=function(){return this[l]?this[l]():g.call(this)})})});"Object Number Boolean String Array Date RegExp".split(" ").forEach(function(b){defineReadOnlyProperty(a[b].prototype,
"vm native prototype",!0)});defineNonEnumerableProperty(a.Object.prototype,"getNamespaceResolutionMap",getNamespaceResolutionMap);defineNonEnumerableProperty(a.Object.prototype,"resolveMultinameProperty",resolveMultinameProperty);defineNonEnumerableProperty(a.Object.prototype,"asGetProperty",asGetProperty);defineNonEnumerableProperty(a.Object.prototype,"asGetPublicProperty",asGetPublicProperty);defineNonEnumerableProperty(a.Object.prototype,"asGetResolvedStringProperty",asGetResolvedStringProperty);
defineNonEnumerableProperty(a.Object.prototype,"asSetProperty",asSetProperty);defineNonEnumerableProperty(a.Object.prototype,"asSetPublicProperty",asSetPublicProperty);defineNonEnumerableProperty(a.Object.prototype,"asDefineProperty",asDefineProperty);defineNonEnumerableProperty(a.Object.prototype,"asDefinePublicProperty",asDefinePublicProperty);defineNonEnumerableProperty(a.Object.prototype,"asCallProperty",asCallProperty);defineNonEnumerableProperty(a.Object.prototype,"asCallSuper",asCallSuper);
defineNonEnumerableProperty(a.Object.prototype,"asGetSuper",asGetSuper);defineNonEnumerableProperty(a.Object.prototype,"asSetSuper",asSetSuper);defineNonEnumerableProperty(a.Object.prototype,"asCallPublicProperty",asCallPublicProperty);defineNonEnumerableProperty(a.Object.prototype,"asCallResolvedStringProperty",asCallResolvedStringProperty);defineNonEnumerableProperty(a.Object.prototype,"asConstructProperty",asConstructProperty);defineNonEnumerableProperty(a.Object.prototype,"asHasProperty",asHasProperty);
defineNonEnumerableProperty(a.Object.prototype,"asDeleteProperty",asDeleteProperty);defineNonEnumerableProperty(a.Object.prototype,"asNextName",asNextName);defineNonEnumerableProperty(a.Object.prototype,"asNextValue",asNextValue);defineNonEnumerableProperty(a.Object.prototype,"asNextNameIndex",asNextNameIndex);defineNonEnumerableProperty(a.Object.prototype,"asGetEnumerableKeys",asGetEnumerableKeys);"Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" ").forEach(function(b){b in
a?(defineNonEnumerableProperty(a[b].prototype,"asGetNumericProperty",asGetNumericProperty),defineNonEnumerableProperty(a[b].prototype,"asSetNumericProperty",asSetNumericProperty),defineNonEnumerableProperty(a[b].prototype,"asGetProperty",asGetPropertyLikelyNumeric),defineNonEnumerableProperty(a[b].prototype,"asSetProperty",asSetPropertyLikelyNumeric)):print(b+" was not found in globals")});a.Array.prototype.asGetProperty=function(a,b,f){return"number"===typeof b?this[b]:asGetProperty.call(this,a,
b,f)};a.Array.prototype.asSetProperty=function(a,b,f,g){if("number"===typeof b)this[b]=g;else return asSetProperty.call(this,a,b,f,g)}}initializeGlobalObject(jsGlobal);function isNativePrototype(a){return Object.prototype.hasOwnProperty.call(a,"vm native prototype")}function asTypeOf(a){if(a){if(a.constructor===String)return"string";if(a.constructor===Number)return"number";if(a.constructor===Boolean)return"boolean";if(a instanceof XML||a instanceof XMLList)return"xml"}return typeof a}
function publicizeProperties(a){for(var b=Object.keys(a),e=0;e<b.length;e++){var d=b[e];if(!Multiname.isPublicQualifiedName(d)){var f=a[d];a[Multiname.getPublicQualifiedName(d)]=f;delete a[d]}}}function asGetSlot(a,b){return a[a["vm slots"].byID[b].name]}function asSetSlot(a,b,e){b=a["vm slots"].byID[b];if(!b.const){var d=b.type;a[b.name]=d&&d.coerce?d.coerce(e):e}}
function asHasNext2(a,b){if(isNullOrUndefined(a))return{index:0,object:null};a=boxValue(a);var e=a.asNextNameIndex(b);if(0<e)return{index:e,object:a};for(;;){a=Object.getPrototypeOf(a);if(!a)break;e=a.asNextNameIndex(0);if(0<e)return{index:e,object:a}}return{index:0,object:null}}function getDescendants(a,b){if(!isXMLType(a))throw"Not XML object in getDescendants";return a.descendants(b)}
function checkFilter(a){if(!a.class||!isXMLType(a))throw"TypeError operand of childFilter not of XML type";return a}function Activation(a){this.methodInfo=a}
var ScopeStack=function(){function a(a){this.parent=a;this.stack=[];this.isWith=[]}a.prototype.push=function(a,e){this.stack.push(a);this.isWith.push(!!e)};a.prototype.get=function(a){return this.stack[a]};a.prototype.clear=function(){this.stack.length=0;this.isWith.length=0};a.prototype.pop=function(){this.isWith.pop();this.stack.pop()};a.prototype.topScope=function(){this.scopes||(this.scopes=[]);for(var a=this.parent,e=0;e<this.stack.length;e++){var d=this.stack[e],f=this.isWith[e],g=this.scopes[e];
if(!g||g.parent!==a||g.object!==d||g.isWith!==f)g=this.scopes[e]=new Scope(a,d,f);a=g}return a};return a}(),Scope=function(){function a(a,e,d){this.parent=a;this.object=boxValue(e);!0;this.global=a?a.global:this;this.isWith=d;this.cache=createEmptyObject()}a.prototype.findDepth=function(a){for(var e=this,d=0;e;){if(e.object===a)return d;d++;e=e.parent}return-1};a.prototype.findScopeProperty=function(a,e,d,f,g,l){var m,p;p=a?1<a.length?a.id+"$"+e:a[0].qualifiedName+"$"+e:e;if(!l&&(m=this.cache[p]))return m;
if(this.object.asHasProperty(a,e,d,!0))return this.isWith?this.object:this.cache[p]=this.object;if(this.parent)return this.cache[p]=this.parent.findScopeProperty(a,e,d,f,g,l);if(l)return null;if(m=f.findDomainProperty(new Multiname(a,e,d),g,!0))return m;g&&unexpected("Cannot find property "+e);return this.global.object};a.prototype.trace=function(){for(var a=this;a;)print(a.object+(a.object?" - "+a.object.debugName:"")),a=a.parent};return a}();
function bindFreeMethodScope(a,b){var e=a.freeMethod;if(a.lastBoundMethod&&a.lastBoundMethod.scope===b)return a.lastBoundMethod.boundMethod;!0;var d,f=b.global.object;if(!a.hasOptional()&&!a.needsArguments()&&!a.needsRest())switch(a.parameters.length){case 0:d=function(){return e.call(this===jsGlobal?f:this,b)};break;case 1:d=function(a){return e.call(this===jsGlobal?f:this,b,a)};break;case 2:d=function(a,d){return e.call(this===jsGlobal?f:this,b,a,d)};break;case 3:d=function(a,d,m){return e.call(this===
jsGlobal?f:this,b,a,d,m)}}d||(Counter.count("Bind Scope - Slow Path"),d=function(){Array.prototype.unshift.call(arguments,b);return e.apply(this===jsGlobal?b.global.object:this,arguments)});d.methodInfo=a;d.instanceConstructor=d;a.lastBoundMethod={scope:b,boundMethod:d};return d}function nameInTraits(a,b){if(a.hasOwnProperty("vm bindings")&&a.hasOwnProperty(b))return!0;var e=Object.getPrototypeOf(a);return e.hasOwnProperty("vm bindings")&&e.hasOwnProperty(b)}
function resolveMultinameUnguarded(a,b,e){!0;!0;a=boxValue(a);for(var d,f=isNativePrototype(a),g=0,l=b.namespaces.length;g<l;g++){var m=b.getQName(g);if(e){if(nameInTraits(a,Multiname.getQualifiedName(m)))return m}else if(b.namespaces[g].isDynamic()){if(d=m,f)break}else if(!f&&Multiname.getQualifiedName(m)in a)return m}if(d&&!e&&Multiname.getQualifiedName(d)in a)return d}function resolveMultiname(a,b,e){enter(2);a=resolveMultinameUnguarded(a,b,e);leave(2);return a}
function sliceArguments(a,b){return Array.prototype.slice.call(a,b)}function nonProxyingHasProperty(a,b){return b in a}function forEachPublicProperty(a,b,e){if(a["vm bindings"])for(f in a)if(isNumeric(f))b.call(e,f,a[f]);else{if(Multiname.isPublicQualifiedName(f)&&0>a["vm bindings"].indexOf(f)){var d=f.substr(Multiname.PUBLIC_QUALIFIED_NAME_PREFIX.length);b.call(e,d,a[f])}}else for(var f in a)b.call(e,f,a[f])}
function wrapJSObject(a){var b=Object.create(a),e;for(e in a)Object.defineProperty(b,Multiname.getPublicQualifiedName(e),function(a,b){return{get:function(){return a[b]},set:function(e){a[b]=e},enumerable:!0}}(a,e));return b}function createActivation(a){return Object.create(a.activationPrototype)}function isClass(a){!0;return Object.hasOwnProperty.call(a,"vm is class")}function isTrampoline(a){!0;return a.isTrampoline}function isMemoizer(a){!0;return a.isMemoizer}
function CatchScopeObject(a,b){b&&(new CatchBindings(new Scope(null,this),b)).applyTo(a,this)}
var Global=function(){function a(a){this.scriptInfo=a;a.global=this;a.scriptBindings=new ScriptBindings(a,new Scope(null,this));a.scriptBindings.applyTo(a.abc.applicationDomain,this);a.loaded=!0}a.prototype.toString=function(){return"[object global]"};a.prototype.isExecuted=function(){return this.scriptInfo.executed};a.prototype.isExecuting=function(){return this.scriptInfo.executing};a.prototype.ensureExecuted=function(){ensureScriptIsExecuted(this.scriptInfo)};defineNonEnumerableProperty(a.prototype,
Multiname.getPublicQualifiedName("toString"),function(){return this.toString()});return a}();function canCompile(a){return!a.hasBody||a.hasExceptions()&&!compilerEnableExceptions.value||a.code.length>compilerMaximumMethodSize.value?!1:!0}function shouldCompile(a){return!canCompile(a)||a.isClassInitializer||a.isScriptInitializer?!1:!0}
function forceCompile(a){if(a.hasExceptions())return!1;a=a.holder;a instanceof ClassInfo&&(a=a.instanceInfo);if(a instanceof InstanceInfo){switch(a.name.namespaces[0].originalURI){case "flash.geom":case "flash.events":return!0}switch(a.name.getOriginalName()){case "com.google.youtube.model.VideoData":return!0}}return!1}
function createInterpretedFunction(a,b,e){var d=!1,f=a.parameters.map(function(a){void 0!==a.value&&(d=!0);return a.value});e=e?function(b){var e=this===jsGlobal?b.global.object:this,m=sliceArguments(arguments,1);d&&m.length<f.length&&(m=m.concat(f.slice(m.length-f.length)));return Interpreter.interpretMethod(e,a,b,m)}:function(){var e=this===jsGlobal?b.global.object:this,l=sliceArguments(arguments);d&&l.length<f.length&&(l=l.concat(f.slice(arguments.length-f.length)));return Interpreter.interpretMethod(e,
a,b,l)};e.instanceConstructor=e;e.debugName="Interpreter Function #"+vmNextInterpreterFunctionId++;return e}var totalFunctionCount=0,compiledFunctionCount=0;function debugName(a){return isFunction(a)?a.debugName:a}
function createCompiledFunction(a,b,e,d){$M.push(a);e=Compiler.compileMethod(a,b,e);b=e.parameters;e=e.body;var f=a.name?Multiname.getQualifiedName(a.name):"fn"+compiledFunctionCount;if(a.holder){var g="";a.holder instanceof ClassInfo?g="static$"+a.holder.instanceInfo.name.getName():a.holder instanceof InstanceInfo?g=a.holder.name.getName():a.holder instanceof ScriptInfo&&(g="script");f=g+"$"+f}f=escapeString(f);a.verified&&(f+="$V");if(compiledFunctionCount==functionBreak.value||d)e="{ debugger; \n"+
e+"}";d="function "+f+" ("+b.join(", ")+") "+e;1<traceLevel.value&&a.trace(new IndentingWriter,a.abc);a.debugTrace=function(){a.trace(new IndentingWriter,a.abc)};0<traceLevel.value&&print(d);d=(new Function("return "+d))();d.debugName="Compiled Function #"+vmNextCompiledFunctionId++;return d}
function getMethodOverrideKey(a){return a.holder instanceof ClassInfo?"static "+a.holder.instanceInfo.name.getOriginalName()+"::"+a.name.getOriginalName():a.holder instanceof InstanceInfo?a.holder.name.getOriginalName()+"::"+a.name.getOriginalName():a.name.getOriginalName()}function checkMethodOverrides(a){if(a.name&&(a=getMethodOverrideKey(a),a in VM_METHOD_OVERRIDES))return warning("Overriding Method: "+a),VM_METHOD_OVERRIDES[a]}
function makeTrampoline(a,b,e){!0;var d=null,f=function(){3<=traceExecution.value&&print("Trampolining");Counter.count("Executing Trampoline");1<traceCallExecution.value&&callWriter.writeLn("Trampoline: "+e);d||(d=a(f),!0);return d.apply(this,arguments)};f.trigger=function(){Counter.count("Triggering Trampoline");d||(d=a(f),!0)};f.isTrampoline=!0;f.debugName="Trampoline #"+vmNextTrampolineId++;defineReadOnlyProperty(f,"vm length",b);return f}
function makeMemoizer(a,b){function e(){Counter.count("Runtime: Memoizing");3<=traceExecution.value&&print("Memoizing: "+a);1<traceCallExecution.value&&callWriter.writeLn("Memoizing: "+a);if(isNativePrototype(this))return Counter.count("Runtime: Method Closures"),bindSafely(b.value,this);isTrampoline(b.value)&&b.value.trigger();!0;var d=null;if(isClass(this))return Counter.count("Runtime: Static Method Closures"),d=bindSafely(b.value,this),defineReadOnlyProperty(this,a,d),d;if(Object.prototype.hasOwnProperty.call(this,
a)){if(Object.getOwnPropertyDescriptor(this,a).get)return Counter.count("Runtime: Method Closures"),bindSafely(b.value,this);Counter.count("Runtime: Unpatched Memoizer");return this[a]}d=bindSafely(b.value,this);d.methodInfo=b.value.methodInfo;defineReadOnlyProperty(d,Multiname.getPublicQualifiedName("prototype"),null);defineReadOnlyProperty(this,a,d);return d}Counter.count("Runtime: Memoizers");e.isMemoizer=!0;e.debugName="Memoizer #"+vmNextMemoizerId++;return e}
function createFunction(a,b,e,d){!0;if(a.freeMethod)return e?bindFreeMethodScope(a,b):a.freeMethod;var f;if(f=checkMethodOverrides(a))return!0,f;ensureFunctionIsInitialized(a);totalFunctionCount++;f=!1;if((a.abc.applicationDomain.mode===EXECUTION_MODE.INTERPRET||!shouldCompile(a))&&!forceCompile(a))f=!0;0<=compileOnly.value&&Number(compileOnly.value)!==totalFunctionCount&&(print("Compile Only Skipping "+totalFunctionCount),f=!0);0<=compileUntil.value&&(1E3<totalFunctionCount&&(print(backtrace()),
print(AVM2.getStackTrace())),totalFunctionCount>compileUntil.value&&(print("Compile Until Skipping "+totalFunctionCount),f=!0));f?a.freeMethod=createInterpretedFunction(a,b,e):(compiledFunctionCount++,console.info("Compiling: "+a+" count: "+compiledFunctionCount),(0<=compileOnly.value||0<=compileUntil.value)&&print("Compiling "+totalFunctionCount),a.freeMethod=createCompiledFunction(a,b,e,d,a.isInstanceInitializer));a.freeMethod.methodInfo=a;return e?bindFreeMethodScope(a,b):a.freeMethod}
function ensureFunctionIsInitialized(a){if(!a.analysis){a.analysis=new Analysis(a);a.needsActivation()&&(a.activationPrototype=new Activation(a),(new ActivationBindings(a)).applyTo(a.abc.applicationDomain,a.activationPrototype));for(var b=a.exceptions,e=0,d=b.length;e<d;e++){var f=b[e];if(f.varName){var g=Object.create(Trait.prototype);g.kind=0;g.name=f.varName;g.typeName=f.typeName;g.holder=a;f.scopeObject=new CatchScopeObject(a.abc.applicationDomain,g)}else f.scopeObject=new CatchScopeObject}}}
function getTraitFunction(a,b,e){!0;!0;var d=a.methodInfo,f;if(d.isNative()){var g=a.metadata;g&&g.native?f=(e=getNative(g.native.value[0].value))&&e(null,b):g&&g.unsafeJSNative?f=getNative(g.unsafeJSNative.value[0].value):e&&(b=Multiname.getName(d.name),f=a.isGetter()?e[b]?e[b].get:void 0:a.isSetter()?e[b]?e[b].set:void 0:e[b]);if(!f)return warning("No native method for: "+a.kindName()+" "+d.holder.name+"::"+Multiname.getQualifiedName(d.name)),function(){warning("Calling undefined native method: "+
a.kindName()+" "+d.holder.name+"::"+Multiname.getQualifiedName(d.name))}}else 2<=traceExecution.value&&print("Creating Function For Trait: "+a.holder+" "+a),f=createFunction(d,b),!0;3<=traceExecution.value&&print("Made Function: "+Multiname.getQualifiedName(d.name));return f}function makeQualifiedNameTraitMap(a){for(var b=createEmptyObject(),e=0;e<a.length;e++)b[Multiname.getQualifiedName(a[e].name)]=a[e];return b}
function createClass(a,b,e){!0;var d=a.instanceInfo,f=a.abc.applicationDomain,g=Multiname.getName(d.name);traceExecution.value&&print("Creating "+(d.isInterface()?"Interface":"Class")+": "+g+(a.native?" replaced with native "+a.native.cls:""));g=d.isInterface()?Interface.createInterface(a):Class.createClass(a,b,e);traceClasses.value&&(f.loadedClasses.push(g),f.traceLoadedClasses(!0));if(d.isInterface())return g;f.onMessage.notify1("classCreated",g);g.instanceConstructor&&g!==Class&&g.verify();if(b&&
("Proxy"===Multiname.getQualifiedName(b.classInfo.instanceInfo.name.name)||b.isProxy))installProxyClassWrapper(g),g.isProxy=!0;createFunction(a.init,e).call(g);sealConstTraits&&this.sealConstantTraits(g,a.traits);return g}
function sealConstantTraits(a,b){for(var e=0,d=b.length;e<d;e++){var f=b[e];f.isConst()&&(f=Multiname.getQualifiedName(f.name),function(b,d){Object.defineProperty(a,b,{configurable:!1,enumerable:!1,get:function(){return d},set:function(){throwErrorFromVM(AVM2.currentDomain(),"ReferenceError","Illegal write to read-only property "+b+".")}})}(f,a[f]))}}
function applyType(a,b,e){b=b.classInfo.instanceInfo.name.name;if("Vector"===b){!0;e=e[0];if(!isNullOrUndefined(e))switch(b=e.classInfo.instanceInfo.name.name.toLowerCase(),b){case "int":case "uint":case "double":case "object":return a.getClass("packageInternal __AS3__.vec.Vector$"+b)}return a.getClass("packageInternal __AS3__.vec.Vector$object").applyType(e)}return notImplemented(b)}function checkArgumentCount(a,b,e){e!==b&&throwError("ArgumentError",Errors.WrongArgumentCountError,a,b,e)}
function throwError(a,b){var e=formatErrorMessage.apply(null,Array.prototype.slice.call(arguments,1));throwErrorFromVM(AVM2.currentDomain(),a,e,b.code)}function throwErrorFromVM(a,b,e,d){throw new (a.getClass(b).instanceConstructor)(e,d);}function translateError(a,b){if(b instanceof Error){var e=a.getClass(b.name);if(e)return new e.instanceConstructor(translateErrorMessage(b));unexpected("Can't translate error: "+b)}return b}function asIsInstanceOf(a,b){return a.isInstanceOf(b)}
function asIsType(a,b){return a.isInstance(b)}function asAsType(a,b){return asIsType(a,b)?b:null}function asCoerceByMultiname(a,b,e){!0;switch(Multiname.getQualifiedName(b)){case Multiname.Int:return asCoerceInt(e);case Multiname.Uint:return asCoerceUint(e);case Multiname.String:return asCoerceString(e);case Multiname.Number:return asCoerceNumber(e);case Multiname.Boolean:return asCoerceBoolean(e);case Multiname.Object:return asCoerceObject(e)}return asCoerce(a.getType(b),e)}
function asCoerce(a,b){if(a.coerce)return a.coerce(b);if(isNullOrUndefined(b))return null;if(a.isInstance(b))return b;!0}function asCoerceString(a){return"string"===typeof a?a:void 0==a?null:a+""}function asCoerceInt(a){return a|0}function asCoerceUint(a){return a>>>0}function asCoerceNumber(a){return+a}function asCoerceBoolean(a){return!!a}function asCoerceObject(a){return void 0==a?null:"string"===typeof a||"number"===typeof a?a:Object(a)}
function asDefaultCompareFunction(a,b){return String(a).localeCompare(String(b))}function asCompare(a,b,e,d){!0;!0;var f=0;d||(d=asDefaultCompareFunction);e&1&&(a=String(a).toLowerCase(),b=String(b).toLowerCase());e&16?(a=toNumber(a),b=toNumber(b),f=a<b?-1:a>b?1:0):f=d(a,b);e&2&&(f*=-1);return f}function asAdd(a,b){return"string"===typeof a||"string"===typeof b?String(a)+String(b):a+b}
var GlobalMultinameResolver=function(){function a(a){for(var f=0;f<a.length;f++){var g=a[f],l=g.name.name,g=g.name.getNamespace();g.isDynamic()||(b[l]=!0,e[l]&&notImplemented("We have to the undo the optimization, "+l+" can now bind to "+g))}}var b=createEmptyObject(),e=createEmptyObject();return{loadAbc:function(b){if(globalMultinameAnalysis.value){var e=b.scripts,g=b.classes;b=b.methods;for(var l=0;l<e.length;l++)a(e[l].traits);for(l=0;l<g.length;l++)a(g[l].traits),a(g[l].instanceInfo.traits);for(l=
0;l<b.length;l++)b[l].traits&&a(b[l].traits)}},resolveMultiname:function(a){var f=a.name;if(!b[f])return e[f]=!0,new Multiname([ShumwayNamespace.PUBLIC],a.name)}}}();VM_METHOD_OVERRIDES["static mochi.as3.MochiServices::connect"]=function(){};VM_METHOD_OVERRIDES["static MochiBot::track"]=function(){};VM_METHOD_OVERRIDES["com.midasplayer.debug.DebugLog::trace"]=function(a){console.log(a)};VM_METHOD_OVERRIDES["com.midasplayer.engine.comm.DebugGameComm::getGameData"]=function(){return'<gamedata randomseed="554884453" version="1">\n<musicOn>true</musicOn>\n<soundOn>true</soundOn>\n<isShortGame>false</isShortGame>\n<booster_1>0</booster_1>\n<booster_2>0</booster_2>\n<booster_3>0</booster_3>\n<booster_4>0</booster_4>\n<booster_5>0</booster_5>\n<bestScore>0</bestScore>\n<bestChain>0</bestChain>\n<bestLevel>0</bestLevel>\n<bestCrushed>0</bestCrushed>\n<bestMixed>0</bestMixed>\n<text id="outro.crushed">Candy crushed</text>\n<text id="outro.bestever">best ever</text>\n<text id="outro.trophy.two">scored {0} in one game</text>\n<text id="outro.combo_color_color">All Clear Created</text>\n<text id="outro.trophy.one">crushed {0} candy in one game</text>\n<text id="outro.score">Score</text>\n<text id="outro.opengame">Please register to play the full game</text>\n<text id="outro.chain">Longest chain</text>\n<text id="outro.time">Game ends in {0} seconds</text>\n<text id="outro.combo_color_line">Super Stripes Created</text>\n<text id="game.nomoves">No more moves!</text>\n<text id="outro.combo_wrapper_line">Mega-Candy Created</text>\n<text id="intro.time">Game starts in {0} seconds</text>\n<text id="outro.now">now</text>\n<text id="outro.level">Level reached</text>\n<text id="outro.title">Game Over</text>\n<text id="intro.info1">Match 3 Candy of the same colour to crush them. Matching 4 or 5 in different formations generates special sweets that are extra tasty.</text>\n<text id="intro.info2">You can also combine the special sweets for additional effects by switching them with each other. Try these combinations for a taste you will not forget: </text>\n<text id="outro.combo_color_wrapper">Double Colour Bombs Created</text>\n<text id="outro.trophy.three">made {0} combined candy in one game</text>\n<text id="intro.title">Play like this:</text>\n</gamedata>'};
VM_METHOD_OVERRIDES["com.antkarlov.Preloader::com.antkarlov:Preloader.isUrl"]=function(){return!0};function asCheckVectorSetNumericProperty(a,b,e){(0>a||a>b||a===b&&e||!isNumeric(a))&&throwError("RangeError",Errors.OutOfRangeError,a,b)}function asCheckVectorGetNumericProperty(a,b){(0>a||a>=b||!isNumeric(a))&&throwError("RangeError",Errors.OutOfRangeError,a,b)}
var TypedArrayVector=function(){function a(a,b){a|=0;this._fixed=!!b;this._buffer=new Int32Array(Math.max(10,a+4));this._offset=0;this._length=a}function b(a,b){return String(a).localeCompare(String(b))}a.callable=function(b){if(b instanceof a)return b;var d=b.asGetProperty(void 0,"length");if(void 0!==d){for(var f=new a(d,!1),g=0;g<d;g++)f.asSetNumericProperty(g,b.asGetPublicProperty(g));return f}unexpected()};a.prototype.internalToString=function(){for(var a="",b=this._offset,f=b+this._length,g=
0;g<this._buffer.length;g++)g===b&&(a+="["),g===f&&(a+="]"),a+=this._buffer[g],g<this._buffer.length-1&&(a+=",");this._offset+this._length===this._buffer.length&&(a+="]");return a+": offset: "+this._offset+", length: "+this._length+", capacity: "+this._buffer.length};a.prototype.toString=function(){for(var a="",b=0;b<this._length;b++)a+=this._buffer[this._offset+b],b<this._length-1&&(a+=",");return a};a.prototype._view=function(){return this._buffer.subarray(this._offset,this._offset+this._length)};
a.prototype._ensureCapacity=function(a){var b=this._offset+a;b<this._buffer.length||(a<=this._buffer.length?(b=this._buffer.length-a>>2,this._buffer.set(this._view(),b),this._offset=b):(a=3*this._buffer.length>>2,a<b&&(a=b),b=new Int32Array(a),b.set(this._buffer,0),this._buffer=b))};a.prototype.concat=function(){notImplemented("TypedArrayVector.concat")};a.prototype.every=function(a,b){for(var f=0;f<this._length;f++)if(!a.call(b,this.asGetNumericProperty(f),f,this))return!1;return!0};a.prototype.filter=
function(b,d){for(var f=new a,g=0;g<this._length;g++)b.call(d,this.asGetNumericProperty(g),g,this)&&f.push(this.asGetNumericProperty(g));return f};a.prototype.some=function(a,b){2!==arguments.length?throwError("ArgumentError",Errors.WrongArgumentCountError):isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var f=0;f<this._length;f++)if(a.call(b,this.asGetNumericProperty(f),f,this))return!0;return!1};a.prototype.forEach=function(a,b){for(var f=0;f<this._length;f++)a.call(b,
this.asGetNumericProperty(f),f,this)};a.prototype.join=function(){notImplemented("TypedArrayVector.join")};a.prototype.indexOf=function(){notImplemented("TypedArrayVector.indexOf")};a.prototype.lastIndexOf=function(){notImplemented("TypedArrayVector.lastIndexOf")};a.prototype.map=function(b,d){isFunction(b)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var f=new a,g=0;g<this._length;g++)f.push(b.call(d,this.asGetNumericProperty(g),g,this));return f};a.prototype.push=function(){this._checkFixed();
this._ensureCapacity(this._length+arguments.length);for(var a=0;a<arguments.length;a++)this._buffer[this._offset+this._length++]=arguments[a]};a.prototype.pop=function(){this._checkFixed();if(0===this._length)return 0;this._length--;return this._buffer[this._offset+this._length]};a.prototype.reverse=function(){for(var a=this._offset,b=this._offset+this._length-1,f=this._buffer;a<b;){var g=f[a];f[a]=f[b];f[b]=g;a++;b--}};a.CASEINSENSITIVE=1;a.DESCENDING=2;a.UNIQUESORT=4;a.RETURNINDEXEDARRAY=8;a.NUMERIC=
16;a.prototype._sortNumeric=function(a){for(var b=this._view(),f=[],g=-1,l=0,m=b.length-1,p,r,s,w;;)if(100>=m-l){for(r=l+1;r<=m;r++){s=b[r];for(p=r-1;p>=l&&b[p]>s;)b[p+1]=b[p--];b[p+1]=s}if(-1==g)break;m=f[g--];l=f[g--]}else{w=l+m>>1;p=l+1;r=m;s=b[w];b[w]=b[p];b[p]=s;b[l]>b[m]&&(s=b[l],b[l]=b[m],b[m]=s);b[p]>b[m]&&(s=b[p],b[p]=b[m],b[m]=s);b[l]>b[p]&&(s=b[l],b[l]=b[p],b[p]=s);for(w=b[p];;){do p++;while(b[p]<w);do r--;while(b[r]>w);if(r<p)break;s=b[p];b[p]=b[r];b[r]=s}b[l+1]=b[r];b[r]=w;m-p+1>=r-l?
(f[++g]=p,f[++g]=m,m=r-1):(f[++g]=l,f[++g]=r-1,l=p)}a&&this.reverse()};a.prototype.sort=function(){if(0===arguments.length)return Array.prototype.sort.call(this._view());var e,d=0;arguments[0]instanceof Function?e=arguments[0]:isNumber(arguments[0])&&(d=arguments[0]);isNumber(arguments[1])&&(d=arguments[1]);if(d&TypedArrayVector.NUMERIC)return this._sortNumeric(d&a.DESCENDING);Array.prototype.sort.call(this._view(),function(f,g){var l=f,m=g,p=d,r=e;assertNotImplemented(!(p&a.CASEINSENSITIVE),"CASEINSENSITIVE");
assertNotImplemented(!(p&a.UNIQUESORT),"UNIQUESORT");assertNotImplemented(!(p&a.RETURNINDEXEDARRAY),"RETURNINDEXEDARRAY");var s=0;r||(r=b);p&a.NUMERIC?(l=toNumber(l),m=toNumber(m),s=l<m?-1:l>m?1:0):s=r(l,m);p&a.DESCENDING&&(s*=-1);return s})};a.prototype.asGetNumericProperty=function(a){checkArguments&&asCheckVectorGetNumericProperty(a,this._length);return this._buffer[this._offset+a]};a.prototype.asSetNumericProperty=function(a,b){checkArguments&&asCheckVectorSetNumericProperty(a,this._length,this._fixed);
a===this._length&&(this._ensureCapacity(this._length+1),this._length++);this._buffer[this._offset+a]=b};a.prototype.shift=function(){this._checkFixed();if(0===this._length)return 0;this._length--;return this._buffer[this._offset++]};a.prototype._checkFixed=function(){this._fixed&&throwError("RangeError",Errors.VectorFixedError)};a.prototype._slide=function(a){this._buffer.set(this._view(),this._offset+a);this._offset+=a};a.prototype.unshift=function(){this._checkFixed();if(arguments.length){this._ensureCapacity(this._length+
arguments.length);this._slide(arguments.length);this._offset-=arguments.length;this._length+=arguments.length;for(var a=0;a<arguments.length;a++)this._buffer[this._offset+a]=arguments[a]}};a.prototype.asGetEnumerableKeys=function(){if(a.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var b=[],d=0;d<this._length;d++)b.push(d);return b};a.prototype.asHasProperty=function(b,d,f){if(a.prototype===this||!isNumeric(d))return Object.prototype.asHasProperty.call(this,b,d,f);b=
toNumber(d);return 0<=b&&b<this._length};Object.defineProperty(a.prototype,"length",{get:function(){return this._length},set:function(a){a>>>=0;if(a>this._length){this._ensureCapacity(a);for(var b=this._offset+this._length,f=this._offset+a;b<f;b++)this._buffer[b]=0}this._length=a}});a.prototype._spliceHelper=function(a,b,f,g,l){b=clamp(b,0,g.length-l);f=clamp(f,0,this._length-a);this._ensureCapacity(this._length-f+b);var m=this._offset+a+f,m=this._buffer.subarray(m,m+this._length-a-f);this._buffer.set(m,
this._offset+a+b);this._length+=b-f;for(f=0;f<b;f++)this._buffer[this._offset+a+f]=g.asGetNumericProperty(l+f)};a.prototype.asGetEnumerableKeys=function(){if(a.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var b=[],d=0;d<this._length;d++)b.push(d);return b};return a}(),typedArrayVectorTemplate='var EXTRA_CAPACITY=4,INITIAL_CAPACITY=10,DEFAULT_VALUE=0;function vector(a,b){a|=0;this._fixed=!!b;this._buffer=new Int32Array(Math.max(INITIAL_CAPACITY,a+EXTRA_CAPACITY));this._offset=0;this._length=a}vector.callable=function(a){if(a instanceof vector)return a;var b=a.asGetProperty(void 0,"length");if(void 0!==b){for(var c=new vector(b,!1),d=0;d<b;d++)c.asSetNumericProperty(d,a.asGetPublicProperty(d));return c}unexpected()}; vector.prototype.internalToString=function(){for(var a="",b=this._offset,c=b+this._length,d=0;d<this._buffer.length;d++)d===b&&(a+="["),d===c&&(a+="]"),a+=this._buffer[d],d<this._buffer.length-1&&(a+=",");this._offset+this._length===this._buffer.length&&(a+="]");return a+": offset: "+this._offset+", length: "+this._length+", capacity: "+this._buffer.length};vector.prototype.toString=function(){for(var a="",b=0;b<this._length;b++)a+=this._buffer[this._offset+b],b<this._length-1&&(a+=",");return a}; vector.prototype._view=function(){return this._buffer.subarray(this._offset,this._offset+this._length)};vector.prototype._ensureCapacity=function(a){var b=this._offset+a;b<this._buffer.length||(a<=this._buffer.length?(b=this._buffer.length-a>>2,this._buffer.set(this._view(),b),this._offset=b):(a=3*this._buffer.length>>2,a<b&&(a=b),b=new Int32Array(a),b.set(this._buffer,0),this._buffer=b))}; vector.prototype.every=function(a,b){for(var c=0;c<this._length;c++)if(!a.call(b,this.asGetNumericProperty(c),c,this))return!1;return!0};vector.prototype.filter=function(a,b){for(var c=new vector,d=0;d<this._length;d++)a.call(b,this.asGetNumericProperty(d),d,this)&&c.push(this.asGetNumericProperty(d));return c}; vector.prototype.some=function(a,b){2!==arguments.length?throwError("ArgumentError",Errors.WrongArgumentCountError):isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var c=0;c<this._length;c++)if(a.call(b,this.asGetNumericProperty(c),c,this))return!0;return!1};vector.prototype.forEach=function(a,b){for(var c=0;c<this._length;c++)a.call(b,this.asGetNumericProperty(c),c,this)};vector.prototype.join=function(a){notImplemented("TypedArrayVector.join")}; vector.prototype.indexOf=function(a,b){notImplemented("TypedArrayVector.indexOf")};vector.prototype.lastIndexOf=function(a,b){notImplemented("TypedArrayVector.lastIndexOf")};vector.prototype.map=function(a,b){isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var c=new vector,d=0;d<this._length;d++)c.push(a.call(b,this.asGetNumericProperty(d),d,this));return c}; vector.prototype.push=function(){this._checkFixed();this._ensureCapacity(this._length+arguments.length);for(var a=0;a<arguments.length;a++)this._buffer[this._offset+this._length++]=arguments[a]};vector.prototype.pop=function(){this._checkFixed();if(0===this._length)return DEFAULT_VALUE;this._length--;return this._buffer[this._offset+this._length]};vector.prototype.reverse=function(){for(var a=this._offset,b=this._offset+this._length-1,c=this._buffer;a<b;){var d=c[a];c[a]=c[b];c[b]=d;a++;b--}}; vector.CASEINSENSITIVE=1;vector.DESCENDING=2;vector.UNIQUESORT=4;vector.RETURNINDEXEDARRAY=8;vector.NUMERIC=16;function defaultCompareFunction(a,b){return String(a).localeCompare(String(b))} function compare(a,b,c,d){assertNotImplemented(!(c&vector.CASEINSENSITIVE),"CASEINSENSITIVE");assertNotImplemented(!(c&vector.UNIQUESORT),"UNIQUESORT");assertNotImplemented(!(c&vector.RETURNINDEXEDARRAY),"RETURNINDEXEDARRAY");var f=0;d||(d=defaultCompareFunction);c&vector.NUMERIC?(a=toNumber(a),b=toNumber(b),f=a<b?-1:a>b?1:0):f=d(a,b);c&vector.DESCENDING&&(f*=-1);return f} function _sort(a){for(var b=[],c=-1,d=0,f=a.length-1,e,g,h,k;;)if(100>=f-d){for(g=d+1;g<=f;g++){h=a[g];for(e=g-1;e>=d&&a[e]>h;)a[e+1]=a[e--];a[e+1]=h}if(-1==c)break;f=b[c--];d=b[c--]}else{k=d+f>>1;e=d+1;g=f;h=a[k];a[k]=a[e];a[e]=h;a[d]>a[f]&&(h=a[d],a[d]=a[f],a[f]=h);a[e]>a[f]&&(h=a[e],a[e]=a[f],a[f]=h);a[d]>a[e]&&(h=a[d],a[d]=a[e],a[e]=h);for(k=a[e];;){do e++;while(a[e]<k);do g--;while(a[g]>k);if(g<e)break;h=a[e];a[e]=a[g];a[g]=h}a[d+1]=a[g];a[g]=k;f-e+1>=g-d?(b[++c]=e,b[++c]=f,f=g-1):(b[++c]=d, b[++c]=g-1,d=e)}return a}vector.prototype._sortNumeric=function(a){_sort(this._view());a&&this.reverse()};vector.prototype.sort=function(){if(0===arguments.length)return Array.prototype.sort.call(this._view());var a,b=0;arguments[0]instanceof Function?a=arguments[0]:isNumber(arguments[0])&&(b=arguments[0]);isNumber(arguments[1])&&(b=arguments[1]);if(b&TypedArrayVector.NUMERIC)return this._sortNumeric(b&vector.DESCENDING);Array.prototype.sort.call(this._view(),function(c,d){return compare(c,d,b,a)})}; vector.prototype.asGetNumericProperty=function(a){checkArguments&&asCheckVectorGetNumericProperty(a,this._length);return this._buffer[this._offset+a]};vector.prototype.asSetNumericProperty=function(a,b){checkArguments&&asCheckVectorSetNumericProperty(a,this._length,this._fixed);a===this._length&&(this._ensureCapacity(this._length+1),this._length++);this._buffer[this._offset+a]=b};vector.prototype.shift=function(){this._checkFixed();if(0===this._length)return 0;this._length--;return this._buffer[this._offset++]}; vector.prototype._checkFixed=function(){this._fixed&&throwError("RangeError",Errors.VectorFixedError)};vector.prototype._slide=function(a){this._buffer.set(this._view(),this._offset+a);this._offset+=a};vector.prototype.unshift=function(){this._checkFixed();if(arguments.length){this._ensureCapacity(this._length+arguments.length);this._slide(arguments.length);this._offset-=arguments.length;this._length+=arguments.length;for(var a=0;a<arguments.length;a++)this._buffer[this._offset+a]=arguments[a]}}; vector.prototype.asGetEnumerableKeys=function(){if(vector.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var a=[],b=0;b<this._length;b++)a.push(b);return a};vector.prototype.asHasProperty=function(a,b,c){if(vector.prototype===this||!isNumeric(b))return Object.prototype.asHasProperty.call(this,a,b,c);a=toNumber(b);return 0<=a&&a<this._length}; Object.defineProperty(vector.prototype,"length",{get:function(){return this._length},set:function(a){a>>>=0;if(a>this._length){this._ensureCapacity(a);for(var b=this._offset+this._length,c=this._offset+a;b<c;b++)this._buffer[b]=DEFAULT_VALUE}this._length=a}}); vector.prototype._spliceHelper=function(a,b,c,d,f){debugger;b=clamp(b,0,d.length-f);c=clamp(c,0,this._length-a);this._ensureCapacity(this._length-c+b);var e=this._offset+a+c,e=this._buffer.subarray(e,e+this._length-a-c);this._buffer.set(e,this._offset+a+b);this._length+=b-c;for(c=0;c<b;c++)this._buffer[this._offset+a+c]=d.asGetNumericProperty(f+c)}; vector.prototype.asGetEnumerableKeys=function(){if(vector.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var a=[],b=0;b<this._length;b++)a.push(b);return a};',
Int32Vector=(new Function(typedArrayVectorTemplate.replace(/Int32Array/g,"Int32Array")+" return vector;"))(),Uint32Vector=(new Function(typedArrayVectorTemplate.replace(/Int32Array/g,"Uint32Array")+" return vector;"))(),Float64Vector=(new Function(typedArrayVectorTemplate.replace(/Int32Array/g,"Float64Array")+" return vector;"))(),Int32Vector=TypedArrayVector;Int32Vector.prototype.asGetProperty=function(a,b,e){return"number"===typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,e)};
Int32Vector.prototype.asSetProperty=function(a,b,e,d){if("number"===typeof b)this.asSetNumericProperty(b,d);else return asSetProperty.call(this,a,b,e,d)};Uint32Vector.prototype.asGetProperty=function(a,b,e){return"number"===typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,e)};Uint32Vector.prototype.asSetProperty=function(a,b,e,d){if("number"===typeof b)this.asSetNumericProperty(b,d);else return asSetProperty.call(this,a,b,e,d)};
Float64Vector.prototype.asGetProperty=function(a,b,e){return"number"===typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,e)};Float64Vector.prototype.asSetProperty=function(a,b,e,d){if("number"===typeof b)this.asSetNumericProperty(b,d);else return asSetProperty.call(this,a,b,e,d)};
var GenericVector=function(){function a(a,e,d){a|=0;this._fixed=!!e;this._buffer=Array(a);this._defaultValue=(this._type=d)?d.defaultValue:null;this._fill(0,a,this._defaultValue)}a.applyType=function(b){function e(d,e){a.call(this,d,e,b)}e.prototype=Object.create(a.prototype);e.callable=a.callable;return e};a.callable=function(b){if(b instanceof a)return b;var e=b.asGetProperty(void 0,"length");if(void 0!==e){for(var d=new a(e,!1),f=0;f<e;f++)d.asSetNumericProperty(f,b.asGetPublicProperty(f));return d}unexpected()};
a.prototype._fill=function(a,e,d){for(var f=0;f<e;f++)this._buffer[a+f]=d};a.prototype.toString=function(){for(var a="",e=0;e<this._buffer.length;e++)a+=this._buffer[e],e<this._buffer.length-1&&(a+=",");return a};a.prototype.every=function(a,e){for(var d=0;d<this._buffer.length;d++)if(!a.call(e,this.asGetNumericProperty(d),d,this))return!1;return!0};a.prototype.filter=function(b,e){for(var d=new a,f=0;f<this._buffer.length;f++)b.call(e,this.asGetNumericProperty(f),f,this)&&d.push(this.asGetNumericProperty(f));
return d};a.prototype.some=function(a,e){2!==arguments.length?throwError("ArgumentError",Errors.WrongArgumentCountError):isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var d=0;d<this._buffer.length;d++)if(a.call(e,this.asGetNumericProperty(d),d,this))return!0;return!1};a.prototype.forEach=function(a,e){isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var d=0;d<this._buffer.length;d++)a.call(e,this.asGetNumericProperty(d),d,this)};a.prototype.map=
function(b,e){isFunction(b)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var d=new a,f=0;f<this._buffer.length;f++)d.push(b.call(e,this.asGetNumericProperty(f),f,this));return d};a.prototype.push=function(){this._checkFixed();for(var a=0;a<arguments.length;a++)this._buffer.push(this._coerce(arguments[a]))};a.prototype.pop=function(){this._checkFixed();return 0===this._buffer.length?void 0:this._buffer.pop()};a.prototype.reverse=function(){this._buffer.reverse()};a.CASEINSENSITIVE=
1;a.DESCENDING=2;a.UNIQUESORT=4;a.RETURNINDEXEDARRAY=8;a.NUMERIC=16;a.prototype.sort=function(a){return this._buffer.sort(a)};a.prototype.asGetNumericProperty=function(a){checkArguments&&asCheckVectorGetNumericProperty(a,this._buffer.length);return this._buffer[a]};a.prototype._coerce=function(a){return this._type?this._type.coerce(a):void 0===a?null:a};a.prototype.asSetNumericProperty=function(a,e){checkArguments&&asCheckVectorSetNumericProperty(a,this._buffer.length,this._fixed);this._buffer[a]=
this._coerce(e)};a.prototype.shift=function(){this._checkFixed();return 0===this._buffer.length?void 0:this._buffer.shift()};a.prototype._checkFixed=function(){this._fixed&&throwError("RangeError",Errors.VectorFixedError)};a.prototype.unshift=function(){if(arguments.length){this._checkFixed();for(var a=[],e=0;e<arguments.length;e++)a.push(this._coerce(arguments[e]));this._buffer.unshift.apply(this._buffer,a)}};Object.defineProperty(a.prototype,"length",{get:function(){return this._buffer.length},
set:function(a){a>>>=0;if(a>this._buffer.length)for(var e=this._buffer.length;e<a;e++)this._buffer[e]=this._defaultValue;else this._buffer.length=a;!0}});a.prototype._spliceHelper=function(a,e,d,f,g){e=clamp(e,0,f.length-g);d=clamp(d,0,this._buffer.length-a);for(var l=[],m=0;m<e;m++)l.push(this._coerce(f.asGetNumericProperty(g+m)));this._buffer.splice.apply(this._buffer,[a,d].concat(l))};a.prototype.asGetEnumerableKeys=function(){if(a.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);
for(var b=[],e=0;e<this._buffer.length;e++)b.push(e);return b};a.prototype.asHasProperty=function(b,e,d){if(a.prototype===this||!isNumeric(e))return Object.prototype.asHasProperty.call(this,b,e,d);b=toNumber(e);return 0<=b&&b<this._buffer.length};return a}();GenericVector.prototype.asGetProperty=function(a,b,e){return"number"===typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,e)};
GenericVector.prototype.asSetProperty=function(a,b,e,d){if("number"===typeof b)this.asSetNumericProperty(b,d);else return asSetProperty.call(this,a,b,e,d)};function arraySort(a,b){if(0===b.length)return a.sort();var e,d=0;b[0]instanceof Function?e=b[0]:isNumber(b[0])&&(d=b[0]);isNumber(b[1])&&(d=b[1]);a.sort(function(a,b){return asCompare(a,b,d,e)});return a}
function ArrayClass(a,b,e,d){a=new Class("Array",Array,ApplicationDomain.passthroughCallable(Array));a.extendBuiltin(d);var f=createEmptyObject();a.native={"static":{_pop:function(a){return a.pop()},_reverse:function(a){return a.reverse()},_concat:function(a,b){return a.concat.apply(a,b)},_shift:function(a){return a.shift()},_slice:function(a,b,d){return a.slice(b,d)},_unshift:function(a,b){return a.unshift.apply(a,b)},_splice:function(a,b){return a.splice.apply(a,b)},_sort:function(a,b){if(0===b.length)return a.sort();
var d,e=0;b[0]instanceof Function?d=b[0]:isNumber(b[0])&&(e=b[0]);isNumber(b[1])&&(e=b[1]);a.sort(function(a,b){return asCompare(a,b,e,d)});return a},_sortOn:function(a,b,d){isString(b)&&(b=[b]);isNumber(d)&&(d=[d]);for(var e=b.length-1;0<=e;e--){var r=Multiname.getPublicQualifiedName(b[e]);if(d[e]&16){var s="var x = toNumber(a."+r+"), y = toNumber(b."+r+");",s=d[e]&2?s+"return x < y ? 1 : (x > y ? -1 : 0);":s+"return x < y ? -1 : (x > y ? 1 : 0);",w=f[s];w||(w=f[s]=new Function("a","b",s));a.sort(w)}else a.sort(function(a,
b){return asCompare(a[r],b[r],d[e]|0)})}return a},_indexOf:function(a,b,d){return a.indexOf(b,d)},_lastIndexOf:function(a,b,d){return a.lastIndexOf(b,d)},_every:function(a,b,d){for(var e=0;e<a.length&&!0===b.call(d,a[e],e,a);e++);return!1},_filter:function(a,b,d){for(var e=[],f=0;f<a.length;f++)!0===b.call(d,a[f],f,a)&&e.push(a[f]);return e},_forEach:function(a,b,d){return a.forEach(b,d)},_map:function(a,b,d){return a.map(b,d)},_some:function(a,b,d){return a.some(b,d)}},instance:{pop:Array.prototype.pop,
push:Array.prototype.push,unshift:Array.prototype.unshift,length:{get:function(){return this.length},set:function(a){this.length=a}}}};a.coerce=function(a){return a};a.isInstanceOf=function(){return!0};return a}var XMLClass,XMLListClass,QNameClass,ASXML,XML,ASXMLList,XMLList,isXMLType,isXMLName,XMLParser;
(function(){function a(){function a(b,d){if(b.isXML)switch(b.kind){case "element":return d.element(b);case "attribute":return d.attribute(b);case "text":return d.text(b);case "cdata":return d.cdata(b);case "comment":return d.comment(b);case "processing-instruction":return d.pi(b)}else{if(b.isXMLList)return d.list(b);throw"Not implemented";}}this.encode=function(b){return a(b,{element:function(b){var d,e,f=b.name.mn.namespaces[0],g=f.prefix?f.prefix+":":"";d="<"+g+b.name.localName;var l=[];(f.prefix||
f.originalURI)&&l.push(f);g&&(l[f.prefix]=!0);for(e=b;e;){for(var m=0;m<e.inScopeNamespaces.length;m++)f=e.inScopeNamespaces[m],l[f.prefix]||(l.push(f),l[f.prefix]=!0);e=e.parent}for(m=0;m<l.length;m++)e=l[m],d=e.prefix?d+(" xmlns:"+e.prefix+'="'+e.originalURI+'"'):d+(' xmlns="'+e.originalURI+'"');for(m=0;m<b.attributes.length;m++)e=b.attributes[m],f=b.name.uri,g=b.prefix?f.prefix+":":"",d+=" "+(g+e.name.localName)+'="'+e.value+'"';if(b.children.length){d+=">";for(m=0;m<b.children.length;m++)d+=a(b.children[m],
this);d+="</"+g+b.name.mn.name+">"}else d+="/>";return d},text:function(a){return a.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},attribute:function(a){return a.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},cdata:function(){},comment:function(){},pi:function(){},doctype:function(){},list:function(a){for(var b="",d=0;d<a.children.length;d++)0<d&&(b+="\n"),b+=e(a.children[d],[]);return b}})}}function b(a){if("object"===typeof a&&null!==a)switch(a.kind){case "text":case "attribute":return a.value;
default:if(a.hasSimpleContent()){var d="";a.children.forEach(function(a){d+=b(a)});return d}return e(a)}else return String(a)}function e(b,d,e){return(new a(d,e,!0)).encode(b)}function d(a){if(null===a)throw new TypeError(formatErrorMessage(Errors.ConvertNullToObjectError));if(void 0===a)throw new TypeError(formatErrorMessage(Errors.ConvertUndefinedToObjectError));if(a.isXML)return a;if(a.isXMLList){if(1===a.length())return a.children[0];throw new TypeError(formatErrorMessage(Errors.XMLMarkupMustBeWellFormed));
}a=v.parseFromString(String(a));if(0===a.length())return a=new XML("text");if(1===a.length())return a.children[0].parent=null,a.children[0];throw"SyntaxError in ToXML";}function f(a){if(null===a)throw new TypeError(formatErrorMessage(Errors.ConvertNullToObjectError));if(void 0===a)throw new TypeError(formatErrorMessage(Errors.ConvertUndefinedToObjectError));if(a instanceof XML){var b=new XMLList(a.parent,a.name);b.append(a);return b}if(a instanceof XMLList)return a;a=new ASXML("<parent xmlns='"+z+
"'>"+String(a)+"</parent>");for(var b=new XMLList,d=0;d<a.length();d++){var e=a.children[d];e.parent=null;b.append(e)}return b}function g(a){if(void 0===a||null===a||"boolean"===typeof a||"number"===typeof a)throw"TypeError: invalid operand to ToAttributeName()";if(isXMLType(a))a=b(a);else if(a instanceof Object&&null!==a){if(a instanceof QName)return new QName(a.uri,a.localName,!0);a=b(a)}if("string"===typeof a)var d=new ASNamespace,d=new QName(d,a,!0);return d}function l(a){for(;a;){var b=a.object;
if(void 0!==b.defaultNamepsace)return b.defaultNamespace;a=a.parent}return ShumwayNamespace.createNamespace("","")}function m(a,b,d,e){a=isNumeric(b)?toNumber(b):b instanceof QName?b.mn:new Multiname(a?a:[ShumwayNamespace.PUBLIC],b,d);return this.getProperty(a,e)}function p(a,b,d,e){a=isNumeric(b)?toNumber(b):b instanceof QName?b.mn:new Multiname(a?a:[ShumwayNamespace.PUBLIC],b,d);this.setProperty(a,e)}function r(a,b,d){a=isNumeric(b)?toNumber(b):b instanceof QName?b.mn:new Multiname(a?a:[ShumwayNamespace.PUBLIC],
b,d);return this.hasProperty(a)}function s(a,b,d,e,f){var g=e?null:this,l=this.asGetProperty(a,b,d,!0);return!l?this.toString().asCallProperty(a?a:[ShumwayNamespace.PUBLIC],b,d,e,f):l.apply(g,f)}function w(a){var b=0,b=a.isAttribute()?b|1:b|2;a.isAnyName()&&(b|=4);a.isAnyNamespace()&&(b|=8);return b}XMLParser=function(){this.parseFromString=function(a){for(var b=new XML("element"),d=[],e={beginElement:function(a,e,f,g){var l=b;d.push(l);b=new XML("element",a.namespace,a.localName,a.prefix);for(a=
0;a<e.length;++a){var m=new XML("attribute",e[a].name.namespace,e[a].name.localName,e[a].name.prefix);m.value=e[a].value;b.attributes.push(m)}e=f.namespaces;for(a=0;a<e.length;++a)f=ShumwayNamespace.createNamespace(e[a].uri,e[a].prefix),b.inScopeNamespaces.push(f);l.insert(l.length(),b);g&&(b=d.pop())},endElement:function(){b=d.pop()},text:function(a){var d=new XML("text","","",void 0);d.value=a;b.insert(b.length(),d)},cdata:function(a){var d=new XML("text","","",void 0);d.value=a;b.insert(b.length(),
d)},comment:function(){},pi:function(){},doctype:function(){}},f=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},g=function(a){return a.replace(/&([^;]+);/g,function(a,b){if("#x"===b.substring(0,2))return String.fromCharCode(parseInt(b.substring(2),16));if("#"===b.substring(0,1))return String.fromCharCode(parseInt(b.substring(1),10));switch(b){case "lt":return"<";case "gt":return">";case "amp":return"&"}throw"Unknown entity: "+b;})},l=function(a,b){var d=a.indexOf(":");if(0<=d){var e;
a:{e=a.substring(0,d);for(var f=s.length-1;0<=f;--f)if(s[f].namespaces.hasOwnProperty(e)){e=s[f].namespaces[e];break a}throw"Unknown namespace: "+e;}f=a.substring(0,d);d=a.substring(d+1);return{name:e+"::"+d,localName:d,prefix:f,namespace:e}}if(b){a:{for(d=s.length-1;0<=d;--d)if(s[d].hasOwnProperty("xmlns")){d=s[d].xmlns;break a}d=void 0}d={name:a,localName:a,prefix:"",namespace:d}}else d={name:a,localName:a,prefix:"",namespace:""};return d},m=function(a,b){var d=a.charCodeAt(b);return 10==d||13==
d||9==d||32==d},r=function(a,b){function d(){for(;e<a.length&&m(a,e);)++e}for(var e=b,f,l=[];e<a.length&&!m(a,e)&&">"!==a.charAt(e)&&"/"!==a.charAt(e);)++e;f=a.substring(b,e);for(d();e<a.length&&">"!==a.charAt(e)&&"/"!==a.charAt(e)&&"?"!==a.charAt(e);){d();for(var r="",p="";e<a.length&&!m(a,e)&&"="!==a.charAt(e);)r+=a.charAt(e),++e;d();if("="!==a.charAt(e))throw"'=' expected";++e;d();p=a.charAt(e);if('"'!==p&&"'"!==p)throw"Quote expected";var s=a.indexOf(p,++e);if(0>s)throw new "Unexpected EOF[6]";
p=a.substring(e,s);l.push({name:r,value:g(p)});e=s+1;d()}return{name:f,attributes:l,parsed:e-b}},p=0,s=[{space:"default",xmlns:"",namespaces:{xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace"}}];p<a.length;){var v=a.charAt(p),w=p;if("<"===v)switch(++w,a.charAt(w)){case "/":++w;p=a.indexOf(">",w);if(0>p)throw"Unexpected EOF[1]";w=l(a.substring(w,p),!0);e.endElement(w);s.pop();w=p+1;break;case "?":++w;v=r(a,w);if("?>"!=a.substring(w+v.parsed,w+v.parsed+2))throw"Unexpected EOF[2]";
e.pi(v.name,v.attributes);w+=v.parsed+2;break;case "!":if("--"===a.substring(w+1,w+3)){p=a.indexOf("--\x3e",w+3);if(0>p)throw"Unexpected EOF[3]";e.comment(a.substring(w+3,p));w=p+3}else if("[CDATA["===a.substring(w+1,w+8)){p=a.indexOf("]]\x3e",w+8);if(0>p)throw"Unexpected EOF[4]";e.cdata(a.substring(w+8,p));w=p+3}else if("DOCTYPE"===a.substring(w+1,w+8)){var z=a.indexOf("[",w+8),v=!1,p=a.indexOf(">",w+8);if(0>p)throw"Unexpected EOF[5]";if(0<z&&p>z){p=a.indexOf("]>",w+8);if(0>p)throw"Unexpected EOF[7]";
v=!0}w=a.substring(w+8,p+(v?1:0));e.doctype(w);w=p+(v?2:1)}else throw"Unknown !tag";break;default:v=r(a,w);z=!1;if("/>"===a.substring(w+v.parsed,w+v.parsed+2))z=!0;else if(">"!==a.substring(w+v.parsed,w+v.parsed+1))throw"Unexpected EOF[2]";for(var H={namespaces:[]},p=0;p<v.attributes.length;++p)if("xmlns:"===v.attributes[p].name.substring(0,6)){var I=v.attributes[p].name.substring(6),J=v.attributes[p].value;H.namespaces[I]=f(J);H.namespaces.push({uri:J,prefix:I});delete v.attributes[p]}else if("xmlns"===
v.attributes[p].name)I="",J=v.attributes[p].value,H.namespaces.xmlns=f(J),H.namespaces.push({uri:J,prefix:I}),delete v.attributes[p];else if("xml:"===v.attributes[p].name.substring(0,4))H[v.attributes[p].name.substring(4)]=f(v.attributes[p].value);else if("xml"===v.attributes[p].name.substring(0,3))throw"Invalid xml attribute";s.push(H);I=[];for(p=0;p<v.attributes.length;++p)v.attributes[p]&&I.push({name:l(v.attributes[p].name,!1),value:v.attributes[p].value});e.beginElement(l(v.name,!0),I,H,z);w+=
v.parsed+(z?2:1);z&&s.pop()}else{do if(++w>=a.length)break;while("<"!==a.charAt(w));p=a.substring(p,w);v=0===p.replace(/^\s+/,"").length;if(!(z=!v))a:{for(z=s.length-1;0<=z;--z)if("preserve"===s[z].space){z=!0;break a}z=!1}z&&e.text(g(p),v)}p=w}return b}};var v=new XMLParser;isXMLType=function(a){return a.isXML||a.isXMLList};var z="";isXMLName=function(a){try{new QName(a)}catch(b){return!1}return!0};XMLClass=function(a,f,v,z){ASXML=function(a){if(!(this instanceof ASXML))return a instanceof ASXML?
a:new ASXML(a);if(null===a||void 0===a)a="";var b=d(a);isXMLType(a)&&(b=b.deepCopy());return b};XML=function(a,b,d,e){void 0===a&&(a="text");void 0===b&&(b="");void 0===d&&(d="");this.init(a,b,d,e)};var D=new Class("XML",ASXML,ApplicationDomain.passthroughCallable(ASXML));D.flags=15;D.prettyIndent=2;D.extend(z);var F=XML.prototype=ASXML.prototype;F.init=function(a,b,d,e){this.name=new QName(new Multiname([new ASNamespace(e,b)],d));this.kind=a;this.parent=null;this.inScopeNamespaces=[];switch(a){case "element":this.attributes=
[];this.children=[];break;case "attribute":case "text":this.value=""}return this};F.length=function(){return!this.children?0:this.children.length};F.canHandleProperties=!0;F.deepCopy=function(){return new ASXML(e(this))};F.resolveValue=function(){return this};F.hasSimpleContent=function(){if("comment"===this.kind||"processing-instruction"===this.kind)return!1;var a=!0;this.children&&this.children.forEach(function(b){"element"===b.kind&&(a=!1)});return a};F.asGetEnumerableKeys=function(){if(F===this)return Object.prototype.asGetEnumerableKeys.call(this);
var a=[];this.children.forEach(function(b){a.push(b.name)});return a};F.setProperty=function(a,d){var e,g,m;if(a===a>>>0)throw"TypeError in XML.prototype.setProperty(): invalid property name "+a;if(!("text"===this.kind||"comment"===this.kind||"processing-instruction"===this.kind||"attribute"===this.kind))if(g=!d||!d.isXML&&!d.isXMLList||"text"===d.kind||"attribute"===d.kind?b(d):d.deepCopy(),m=new QName(a),m.isAttr)this.attributes&&(this.attributes.forEach(function(a,b,d){a.name===m.localName&&delete d[b]}),
e=new XML("attribute",m.uri,m.localName),e.value=d,e.parent=this,this.attributes.push(e));else if(isXMLName(m)||"*"===m.localName){e=void 0;for(var r=!isXMLType(g)&&"*"!==m.localName,p=this.length()-1;0<=p;p--)if((m.isAny||"element"===this.children[p].kind&&this.children[p].name.localName===m.localName)&&(null===m.uri||"element"===this.children[p].kind&&this.children[p].name.uri===m.uri))void 0!==e&&this.deleteByIndex(String(e)),e=p;if(void 0===e&&(e=this.length(),r)){var s=null===m.uri?new QName(l(f),
m):new QName(m),p=new XML("element",s.uri,s.localName,s.prefix);p.parent=this;s=s.getNamespace();this.replace(String(e),p);p.addInScopeNamespace(s)}r?(this.children[e].children=[],g=b(g),""!==g&&this.children[e].replace("0",g)):this.replace(String(e),g)}};F.asGetProperty=m;F.asGetResolvedStringProperty=asGetResolvedStringPropertyFallback;F.asSetProperty=p;F.asHasProperty=r;F.asCallProperty=s;F.getProperty=function(a,b){if(b){var d=Multiname.isQName(a)?a:resolveMultiname(this,a);return this[Multiname.getQualifiedName(d)]}if(isNumeric(a))return 0===
Number(0)?this:null;var e=new QName(a),f=new XMLList(this,e),d=w(e.mn),g=d&4,l=d&8;d&1?this.attributes&&this.attributes.forEach(function(a){(g||a.name.localName===e.localName)&&(l||a.name.uri===e.uri)&&f.append(a)}):this.children.forEach(function(a){(g||"element"===a.kind&&a.name.localName===e.localName)&&(l||"element"===a.kind&&a.name.uri===e.uri)&&f.append(a)});return f};F.hasProperty=function(a,b){if(b){var d=Multiname.isQName(a)?a:resolveMultiname(this,a);return!!this[Multiname.getQualifiedName(d)]}if(isNumeric(a))return 0===
Number(0)?!0:!1;var e=new QName(a),d=w(e.mn),f=d&4,g=d&8;if(d&1)return this.attributes.some(function(a){if((f||a.name.localName===e.localName)&&(g||a.name.uri===e.uri))return!0});if(this.children.some(function(a){if((f||"element"===a.kind&&a.name.localName===e.localName)&&(g||"element"===a.kind&&a.name.uri===e.uri))return!0}))return!0;d=Multiname.isQName(a)?a:resolveMultiname(this,a);return!!this[Multiname.getQualifiedName(d)]};F.delete=function(){notImplemented("XML.[[Delete]]")};F.deleteByIndex=
function(a){var b=a>>>0;if(String(b)!==String(a))throw"TypeError in XML.prototype.deleteByIndex(): invalid index "+a;if(a<this.length()&&this.children[a]){this.children[a].parent=null;delete this.children[a];for(q=b+1;q<this.length();q++)this.children[q-1]=this.children[q];this.children.length-=1}};F.isXML=!0;F.insert=function(a,b){var d,e;if(!("text"===this.kind||"comment"===this.kind||"processing-instruction"===this.kind||"attribute"===this.kind)){d=a>>>0;if(String(a)!==String(d))throw"TypeError in XML.prototype.insert(): invalid property name "+
a;if("element"===this.kind)for(e=this;e;){if(e===b)throw"Error in XML.prototype.insert()";e=e.parent}if(this.isXMLList){if(e=this.length(),0===e)return}else e=1;for(var f=this.length()-1;f>=d;f--)this[f+e]=this[f];if(this.isXMLList){e=b.length();for(f=0;f<e;f++)b.children[f].parent=this,this[d+f]=b[f]}else b.parent=this,this.children[d]=b}};F.replace=function(a,d){var e;if(!("text"===this.kind||"comment"===this.kind||"processing-instruction"===this.kind||"attribute"===this.kind)){e=a>>>0;if(String(a)!==
String(e))throw"TypeError in XML.prototype.replace(): invalid name "+a;e>=this.length()&&(a=String(this.length()));if("element"===d.kind)for(e=this;e;){if(e===d)throw"Error in XML.prototype.replace()";e=e.parent}"element"===d.kind||"text"===d.kind||"comment"===d.kind||"processing-instruction"===d.kind?(d.parent=this,this[a]&&(this.children[a].parent=null),this.children[a]=d):this.isXMLList?(this.deleteByIndex(a),this.insert(a,d)):(e=b(d),t=new XML,t.parent=this,t.value=e,this[a]&&(this.children[a].parent=
null),this.children[a]=t)}};F.addInScopeNamespace=function(a){var b;b=this;if(!("text"===b.kind||"comment"===b.kind||"processing-instruction"===b.kind||"attribute"===b.kind)&&void 0!==a.prefix&&!(""===a.prefix&&""===b.name.uri)){var d=null;b.inScopeNamespaces.forEach(function(b){b.prefix===a.prefix&&(d=b)});null!==d&&d.uri!==a.uri&&b.inScopeNamespaces.forEach(function(e,f){e.prefix===d.prefix&&(b.inScopeNamespaces[f]=a)});b.name.prefix===a.prefix&&(b.name.prefix=void 0);b.attributes.forEach(function(b){b.name.prefix===
a.name.prefix&&(b.name.prefix=void 0)})}};F.descendants=function(a){a=new QName(a);var b=new XMLList;if("element"!==this.kind)return b;a.isAttr?this.attributes.forEach(function(d){(a.isAny||a.localName===d.name.localName)&&b.append(d)}):this.children.forEach(function(d){(a.isAny||a.localName===d.name.localName)&&b.append(d)});this.children.forEach(function(d){b.append(d.descendants(a))});return b};F.comments=function(){var a=new XMLList(this,null);this.children.forEach(function(b){"comment"===b.kind&&
a.append(b)});return a};F.text=function(){var a=new XMLList(this,null);this.children.forEach(function(b){"text"===b.kind&&a.append(b)});return a};D.native={"static":{ignoreComments:{get:function(){return getBitFlags(D.flags,1)},set:function(a){D.flags=setBitFlags(D.flags,1,a)}},ignoreProcessingInstructions:{get:function(){return getBitFlags(D.flags,2)},set:function(a){D.flags=setBitFlags(D.flags,2,a)}},ignoreWhitespace:{get:function(){return getBitFlags(D.flags,4)},set:function(a){D.flags=setBitFlags(D.flags,
4,a)}},prettyPrinting:{get:function(){return getBitFlags(D.flags,8)},set:function(a){D.flags=setBitFlags(D.flags,8,a)}},prettyIndent:{get:function(){return D.prettyIndent},set:function(a){D.prettyIndent=a}}},instance:{toString:function(){return b(this)},hasOwnProperty:function(a){somewhatImplemented("XML.hasOwnProperty");return this.hasProperty(a)},propertyIsEnumerable:function(){notImplemented("XML.propertyIsEnumerable")},addNamespace:function(){notImplemented("XML.addNamespace")},appendChild:function(a){var b=
this.getProperty("*");b.setProperty(b.length(),a);return this},attribute:function(a){return this.getProperty(g(a))},attributes:function(){return this.getProperty(g("*"))},child:function(a){return this.getProperty(a)},childIndex:function(){notImplemented("XML.childIndex")},children:function(){var a=new XMLList;Array.prototype.push.apply(a.children,this.children);return a},comments:function(){return this.comments()},contains:function(){notImplemented("XML.contains")},copy:function(){return this.deepCopy()},
descendants:function(a){void 0===a&&(a="*");return this.descendants(a)},elements:function(a){var b=!1;void 0===a&&(a="*",b=!0);a=new QName(a);var d=new XMLList(this.parent,a);this.children.forEach(function(e){"element"===e.kind&&((b||e.name.localName===a.localName)&&(null===a.uri||"element"===e.kind&&e.name.uri===a.uri))&&d.append(e)});return d},hasComplexContent:function(){notImplemented("XML.hasComplexContent")},hasSimpleContent:function(){return this.hasSimpleContent()},inScopeNamespaces:function(){notImplemented("XML.inScopeNamespaces")},
insertChildAfter:function(){notImplemented("XML.insertChildAfter")},insertChildBefore:function(){notImplemented("XML.insertChildBefore")},localName:function(){notImplemented("XML.localName")},name:function(){return this.name},_namespace:function(){somewhatImplemented("XML._namespace()");return this.name.uri},namespaceDeclarations:function(){return new XMLList},nodeKind:function(){return this.kind},normalize:function(){notImplemented("XML.normalize")},parent:function(){notImplemented("XML.parent")},
processingInstructions:function(){notImplemented("XML.processingInstructions")},prependChild:function(){notImplemented("XML.prependChild")},removeNamespace:function(){notImplemented("XML.removeNamespace")},replace:function(a,b){var d,e;if("text"===this.kind||"comment"===this.kind||"processing-instruction"===this.kind||"attribute"===this.kind)return this;d=isXMLType(b)?b.deepCopy():b.toString();if(String(a)===String(a>>>0))return this.replace(a,d),this;n=new QName(a);e=void 0;for(k=this.length()-1;0<=
k;k--){var f=this.children[k];if(n.isAny||"element"===f.kind&&f.name.localName===n.localName&&(null===n.uri||"element"===f.kind&&f.name.uri===n.uri))void 0!==e&&this.deleteByIndex(String(e)),e=k}void 0!==e&&this.replace(e.toString(),d);return this},setChildren:function(){notImplemented("XML.setChildren")},setLocalName:function(){notImplemented("XML.setLocalName")},setName:function(){notImplemented("XML.setName")},setNamespace:function(){notImplemented("XML.setNamespace")},text:function(){return this.text()},
toXMLString:function(){return e(this)},notification:function(){notImplemented("XML.notification")},setNotification:function(){notImplemented("XML.setNotification")}}};return D};XMLListClass=function(a,l,v,w){ASXMLList=function(a){if(!(this instanceof ASXMLList)){if(null===a||void 0===a)a="";return f(a)}if(null===a||void 0===a)a="";if(a.isXMLList){var b=new XMLList;b.append(a);a=b}else a=f(a);return a};XMLList=function(a,b){this.targetObject=a?a:null;this.targetProperty=b?b:null;this.children=[]};
a=new Class("XMLList",ASXMLList,ApplicationDomain.passthroughCallable(ASXMLList));a.extend(w);var z=XMLList.prototype=ASXMLList.prototype;z.canHandleProperties=!0;z.hasSimpleContent=function(){if(0===this.length())return!0;if(1===this.length())return d(this).hasSimpleContent();var a=!0;this.children.forEach(function(b){"element"===b.kind&&(a=!1)});return a};z.asGetProperty=m;z.asGetResolvedStringProperty=asGetResolvedStringPropertyFallback;z.asSetProperty=p;z.asHasProperty=r;z.asCallProperty=s;z.setProperty=
function(a,d){var e,f,l;e=this;f=a>>>0;if(String(a)===String(f)){l=this.targetObject;var m=this.targetProperty;if(null!==l){if(l=l.resolveValue(),null===l)return}else l=null;if(f>=e.length()){if(l&&l.isXMLList){if(1!==l.length)return;l=l.children[0]}if(l&&"element"!==l.kind)return;var r=new XML;r.parent=l;r.name=e.targetProperty;if(null===m||"*"===m.localName)r.name=null,r.kind="text";else if(m.isAttr){if(0<l.getProperty(r.name).length())return;l.kind="attribute"}else r.kind="element";f=e.length();
if("attribute"!==r.kind){if(null!==l){if(0<f)for(m=0;m<l.length()-1&&l.children[m]!==e.children[f-1];)m++;else m=l.length()-1;l.insert(String(m+1),r)}d.isXML?r.name=d.name:d.isXMLList&&(r.name=d.targetProperty)}e.append(r)}if(!d.isXML&&!d.isXMLList||"text"===d.kind||"attribute"===d.kind)d=b(d);if("attribute"===e.children[f].kind)l=g(e.children[f].name),e.children[f].parent.setProperty(l,d),l=e.children[f].parent.getProperty(l),e.children[f]=l.children[0];else if(d.isXMLList){var p=d.deepCopy(),s=
e.children[f].parent;if(null!==s){var v;s.children.some(function(a,b){if(a==e.children[f])return v=b,!0});s.replace(v,p);p.children.forEach(function(a,b){p.children[b]=s.children[v>>>0+b]})}if(0===p.length())for(m=e+1;m<e.length()-1;m++)e.children[String(m-1)]=e.children[m];else for(m=e.length()-1;m>=f+1;m--)e.children[String(m+p.length()-1)]=e.children[m];for(m=0;m<p.length();m++)e.children[f+m]=p.children[m]}else d.isXML||"text"===(k=e.children[f].kind)||"comment"===k||"processing-instruction"===
k?(s=e.children[f].parent,null!==s&&(s.children.some(function(a,b){if(a==e.children[f])return v=b,!0}),s.replace(v,d),d=s.children[v]),"string"===typeof d?(l=new XML("text"),l.parent=e,l.value=d,e.children[f]=l):e.children[f]=d):e.children[f].setProperty("*",d)}else if(1>=e.length()){if(0===e.length()){l=e.resolveValue();if(null===l||1!==l.length())return;e.append(l)}e.children[0].setProperty(a,d)}};z.getProperty=function(a,b){if(b){var d=Multiname.isQName(a)?a:resolveMultiname(this,a);return this[Multiname.getQualifiedName(d)]}if(String(a)===
String(a>>>0))return this.children[a];var d=new QName(a),e=new XMLList(this,d);this.children.forEach(function(b){"element"===b.kind&&(b=b.getProperty(a),0<b.length()&&e.append(b))});return e};z.hasProperty=function(a,b){if(b){var d=Multiname.isQName(a)?a:resolveMultiname(this,a);return!!this[Multiname.getQualifiedName(d)]}if(String(a)===String(a>>>0))return!!this.children[a];new QName(a);return this.children.some(function(b){if(0<b.getProperty(a).length())return!0})};z.delete=function(){};z.append=
function(a){if(a.isXMLList){if(this.targetObject=a.targetObject,this.targetProperty=a.targetProperty,0!==a.length())for(var b=0;b<a.length();b++)this.children.push(a.children[b])}else a.isXML&&this.children.push(a)};z.length=function(){return this.children.length};z.resolve=function(){var a=this.targetObject.resolveValue();if(null===a)return null;var b=this.targetObject.getProperty(this.targetProperty);if(0===a.length)return notImplemented("XMLList.resolve"),a.setProperty(this.targetProperty,""),
b=a.getProperty(this.targetProperty)};z.deepCopy=function(){var a=new XMLList;this.children.forEach(function(b,d){a.children[d]=b.deepCopy()});return a};z.descendants=function(a){var b=new XMLList(null);this.children.forEach(function(d){"element"===d.kind&&b.append(d.descendants(a))});return b};z.resolveValue=function(){if(0<this.length())return this;var a=this.name,b=this.targetObject,d=this.targetProperty;if(null===b||null===d||a.isAttr||a.isAny)return null;a=b.resolveValue();if(null===a)return null;
b=a.getProperty(d);if(0===b.length()){if(a.isXMLList&&1<a.length())return null;a.setProperty(d,"");b=a.getProperty(d)}return b};z.asGetEnumerableKeys=function(){if(z===this)return Object.prototype.asGetEnumerableKeys.call(this);var a=[];this.children.forEach(function(b,d){a.push(d)});return a};a.native={instance:{init:function(){}}};z.isXMLList=!0;a.native={"static":{},instance:{toString:function(){return b(this)},hasOwnProperty:function(a){somewhatImplemented("XMLList.hasOwnProperty");return this.hasProperty(a)},
propertyIsEnumerable:function(){notImplemented("XMLList.propertyIsEnumerable")},attribute:function(a){return this.getProperty(g(a))},attributes:function(){return this.getProperty(g("*"))},child:function(){notImplemented("XMLList.child")},children:function(){for(var a=new XMLList,b=0;b<this.children.length;b++)Array.prototype.push.apply(a.children,this.children[b].children);return a},comments:function(){var a=new XMLList(this,null);this.children.forEach(function(b){"element"===b.kind&&a.append(b.comments())});
return a},contains:function(a){for(var b=0;b<this.children.length;b++)if(this.children[b]===a)return!0;return!1},copy:function(){return this.deepCopy()},descendants:function(a){return this.descendants(void 0===a?"*":a)},elements:function(a){void 0===a&&(a="*");a=new QName(a);var b=new XMLList(this,a);this.children.forEach(function(a){"element"===a.kind&&b.append(a.comments())});return b},hasComplexContent:function(){notImplemented("XMLList.hasComplexContent")},hasSimpleContent:function(){return this.hasSimpleContent()},
length:function(){return this.children.length},name:function(){return d(this).name},normalize:function(){notImplemented("XMLList.normalize")},parent:function(){notImplemented("XMLList.parent")},processingInstructions:function(){notImplemented("XMLList.processingInstructions")},text:function(){var a=new XMLList(this,null);this.children.forEach(function(b){("text"===b.kind||"element"===b.kind)&&a.append(b.text())});return a},toXMLString:function(){return e(this)},addNamespace:function(){notImplemented("XMLList.addNamespace")},
appendChild:function(a){d(this).appendChild(a);return this},childIndex:function(){notImplemented("XMLList.childIndex")},inScopeNamespaces:function(){notImplemented("XMLList.inScopeNamespaces")},insertChildAfter:function(){notImplemented("XMLList.insertChildAfter")},insertChildBefore:function(){notImplemented("XMLList.insertChildBefore")},nodeKind:function(){return d(this).kind},_namespace:function(){notImplemented("XMLList._namespace")},localName:function(){notImplemented("XMLList.localName")},namespaceDeclarations:function(){somewhatImplemented("XMLList.prototype.namespaceDeclarations()");
return new XMLList},prependChild:function(){notImplemented("XMLList.prependChild")},removeNamespace:function(){notImplemented("XMLList.removeNamespace")},replace:function(a,b){d(this).replace(a,b);return this},setChildren:function(){notImplemented("XMLList.setChildren")},setLocalName:function(){notImplemented("XMLList.setLocalName")},setName:function(){notImplemented("XMLList.setName")},setNamespace:function(){notImplemented("XMLList.setNamespace")}}};return a};QNameClass=function(a,d,e,f){QName=
function F(a,e,f){if(!(this instanceof F))return void 0===e&&a instanceof F?a:new F(a,e);void 0===e&&(e=a,a=void 0);if("string"===typeof a||a instanceof F)a=new ASNamespace(a);e instanceof F?a=void 0===a?e.mn:new Multiname([a],e.mn.getName()):e instanceof Multiname?a=void 0===a?e.isQName()||e.isAnyName()||e.isAnyNamespace()?e:new Multiname([l(d)],e.getName(),e.flags):new Multiname([a],e.getName(),e.flags):"*"===e?a=new Multiname([],null,f?Multiname.ATTRIBUTE:0):"@*"===e?a=new Multiname([],null,Multiname.ATTRIBUTE):
(a=void 0===a?l(d):a,a=void 0===e?new Multiname([a],""):new Multiname([a],b(e),f?Multiname.ATTRIBUTE:0));this.mn=a;this.isAny=a.isAnyName();this.isAnyNamespace=a.isAnyNamespace();this.isAttr=a.isAttribute()};a=new Class("QName",QName,ApplicationDomain.passthroughCallable(QName));a.extend(f);QNp=QName.prototype;defineNonEnumerableGetter(QNp,"localName",function(){this._localName||(this._localName=this.isAny?"*":this.mn.getName());return this._localName});defineNonEnumerableGetter(QNp,"uri",function(){if(!this._uri){var a=
this.mn.namespaces[0];this._uri=a&&a.originalURI?a.originalURI:this.isAny||this.isAnyNamespace?null:""}return this._uri});defineNonEnumerableGetter(QNp,"prefix",function(){return this.mn.namespaces[0].prefix});defineNonEnumerableSetter(QNp,"prefix",function(a){this.mn.namespaces[0].prefix=a});QNp.getNamespace=function(a){if(null===this.uri)throw"TypeError in QName.prototype.getNamespace()";a||(a=[]);for(var b,d=0;d<a.length;d++)this.uri===a[d].uri&&(b=a[d]);b||(b=ShumwayNamespace.createNamespace(this.uri));
return b};a.native={"static":{},instance:{localName:{get:function(){return this.localName}},uri:{get:function(){return this.uri}}}};return a}})();var JSON;JSON||(JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function b(a){f.lastIndex=0;return f.test(a)?'"'+a.replace(f,function(a){var b=m[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function e(a,d){var f,m,z,A,u=g,B,y=d[a];y&&"object"===typeof y&&"function"===typeof y.toJSON&&(y=y.toJSON(a));"function"===typeof p&&(y=p.call(d,a,y));switch(typeof y){case "string":return b(y);case "number":return isFinite(y)?String(y):"null";case "boolean":case "null":return String(y);
case "object":if(!y)return"null";g+=l;B=[];if("[object Array]"===Object.prototype.toString.apply(y)){A=y.length;for(f=0;f<A;f+=1)B[f]=e(f,y)||"null";z=0===B.length?"[]":g?"[\n"+g+B.join(",\n"+g)+"\n"+u+"]":"["+B.join(",")+"]";g=u;return z}if(p&&"object"===typeof p){A=p.length;for(f=0;f<A;f+=1)"string"===typeof p[f]&&(m=p[f],(z=e(m,y))&&B.push(b(m)+(g?": ":":")+z))}else for(m in y)Object.prototype.hasOwnProperty.call(y,m)&&(z=e(m,y))&&B.push(b(m)+(g?": ":":")+z);z=0===B.length?"{}":g?"{\n"+g+B.join(",\n"+
g)+"\n"+u+"}":"{"+B.join(",")+"}";g=u;return z}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,l,m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},p;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,d){var f;l=g="";if("number"===typeof d)for(f=0;f<d;f+=1)l+=" ";else"string"===typeof d&&(l=d);if((p=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return e("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function e(a,d){var f,g,l=a[d];if(l&&"object"===typeof l)for(f in l)Object.prototype.hasOwnProperty.call(l,f)&&(g=e(l,f),void 0!==g?l[f]=g:delete l[f]);return b.call(a,d,l)}var f;a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+a+")"),"function"===typeof b?e({"":f},""):f;throw new SyntaxError("JSON.parse");})})();
var AMFUtils=function(){function a(a,b){if(65535<b.length)throw"AMF short string exceeded";if(b.length){var d=utf8decode(b);a.writeByte(d.length>>8&255);a.writeByte(d.length&255);for(var e=0;e<d.length;e++)a.writeByte(d[e])}else a.writeByte(0),a.writeByte(0)}function b(a){var b=a.readByte()<<8|a.readByte();if(!b)return"";for(var d=new Uint8Array(b),e=0;e<b;e++)d[e]=a.readByte();return utf8encode(d)}function e(a,b){var d=new ArrayBuffer(8),e=new DataView(d);e.setFloat64(0,b,!1);for(var f=0;f<d.byteLength;f++)a.writeByte(e.getUint8(f))}
function d(a){for(var b=new ArrayBuffer(8),d=new DataView(b),e=0;e<b.byteLength;e++)d.setUint8(e,a.readByte());return d.getFloat64(0,!1)}function f(a){var b=a.readByte();if(0===(b&128))return b;var d=a.readByte();if(0===(d&128))return(b&127)<<7|d;var e=a.readByte();if(0===(e&128))return(b&127)<<14|(d&127)<<7|e;a=a.readByte();return(b&127)<<22|(d&127)<<15|(e&127)<<8|a}function g(a,b){if(0===(b&4294967168))a.writeByte(b&127);else if(0===(b&4294950912))a.writeByte(128|b>>7&127),a.writeByte(b&127);else if(0===
(b&4292870144))a.writeByte(128|b>>14&127),a.writeByte(128|b>>7&127),a.writeByte(b&127);else if(0===(b&3221225472))a.writeByte(128|b>>22&127),a.writeByte(128|b>>15&127),a.writeByte(128|b>>8&127),a.writeByte(b&255);else throw"AMF3 U29 range";}function l(a,b){var d=f(a);if(1===d)return"";var e=b.stringsCache||(b.stringsCache=[]);if(0===(d&1))return e[d>>1];for(var d=d>>1,g=new Uint8Array(d),l=0;l<d;l++)g[l]=a.readByte();d=utf8encode(g);e.push(d);return d}function m(a,b,d){if(""===b)a.writeByte(1);else{d=
d.stringsCache||(d.stringsCache=[]);var e=d.indexOf(b);if(0<=e)g(a,e<<1);else{d.push(b);b=utf8decode(b);g(a,1|b.length<<1);for(d=0;d<b.length;d++)a.writeByte(b[d])}}}function p(a,b){var e=a.readByte();switch(e){case 1:return null;case 0:break;case 2:return!1;case 3:return!0;case 4:return f(a);case 5:return d(a);case 6:return l(a,b);case 8:return new Date(d(a));case 10:var g=f(a);if(0===(g&1))return b.objectsCache[g>>1];if(0!==(g&4))throw"AMF3 Traits-Ext is not supported";var m;if(0===(g&2))e=b.traitsCache[g>>
2],m=e.class;else{var e={},r=l(a,b);m=(e.className=r)&&w.names[r];e.class=m;e.isDynamic=0!==(g&8);e.members=[];for(var s=m&&m.instanceBindings.slots,r=0,g=g>>4;r<g;r++){for(var F=l(a,b),E=null,g=1;s&&g<s.length;g++)if(s[g].name.name===F){E=s[g];break}e.members.push(E?Multiname.getQualifiedName(E.name):Multiname.getPublicQualifiedName(F))}(b.traitsCache||(b.traitsCache=[])).push(e)}m=m?m.createInstance():{};(b.objectsCache||(b.objectsCache=[])).push(m);for(r=0;r<e.members.length;r++)s=p(a,b),m[e.members[r]]=
s;if(e.isDynamic)for(;;){r=l(a,b);if(!r.length)break;s=p(a,b);m.asSetPublicProperty(r,s)}return m;case 9:g=f(a);if(0===(g&1))return b.objectsCache[g>>1];m=[];(b.objectsCache||(b.objectsCache=[])).push(m);for(e=g>>1;;){r=l(a,b);if(!r.length)break;s=p(a,b);m.asSetPublicProperty(r,s)}for(r=0;r<e;r++)s=p(a,b),m.asSetPublicProperty(r,s);return m;default:throw"AMF3 Unknown marker "+e;}}function r(a,b,d){d=d.objectsCache||(d.objectsCache=[]);var e=d.indexOf(b);if(0>e)return d.push(b),!1;g(a,e<<1);return!0}
function s(a,b,d){switch(typeof b){case "boolean":a.writeByte(b?3:2);break;case "number":b===(b|0)?(a.writeByte(4),g(a,b)):(a.writeByte(5),e(a,b));break;case "undefined":a.writeByte(0);break;case "string":a.writeByte(6);m(a,b,d);break;case "object":if(null===b)a.writeByte(1);else if(Array.isArray(b)){a.writeByte(9);if(r(a,b,d))break;for(var f=0;f in b;)++f;g(a,f<<1|1);forEachPublicProperty(b,function(b,e){if(!isNumeric(b)||!(0<=b&&b<f))m(a,b,d),s(a,e,d)});m(a,"",d);for(var l=0;l<f;l++)s(a,b[l],d)}else if(b instanceof
Date){a.writeByte(8);if(r(a,b,d))break;g(a,1);e(a,b.valueOf())}else{a.writeByte(10);if(r(a,b,d))break;var l=!0,p=b.class;if(p){var l=!p.classInfo.instanceInfo.isSealed(),D=w.classes.get(p)||"",F,E=d.traitsCache||(d.traitsCache=[]),C=d.traitsInfos||(d.traitsInfos=[]),M=E.indexOf(p);if(0>M){var Q=p.instanceBindings.slots;F=[];for(var M=[],R=1;R<Q.length;R++){var S=Q[R];S.name.getNamespace().isPublic()&&(F.push(Multiname.getQualifiedName(S.name)),M.push(S.name.name))}E.push(p);C.push(F);p=M.length;g(a,
(l?11:3)+(p<<4));m(a,D,d);for(R=0;R<p;R++)m(a,M[R],d)}else F=C[M],p=F.length,g(a,1+(M<<2));for(R=0;R<p;R++)s(a,b[F[R]],d)}else g(a,11),m(a,"",d);l&&(forEachPublicProperty(b,function(b,e){m(a,b,d);s(a,e,d)}),m(a,"",d))}}}var w={classes:new WeakMap,names:Object.create(null)};return{encodings:[{write:function(b,d){switch(typeof d){case "boolean":b.writeByte(1);b.writeByte(d?1:0);break;case "number":b.writeByte(0);e(b,d);break;case "undefined":b.writeByte(6);break;case "string":b.writeByte(2);a(b,d);
break;case "object":null===d?b.writeByte(5):(Array.isArray(d)?(b.writeByte(8),b.writeByte(d.length>>>24&255),b.writeByte(d.length>>16&255),b.writeByte(d.length>>8&255),b.writeByte(d.length&255),forEachPublicProperty(d,function(d,e){a(b,d);this.write(b,e)},this)):(b.writeByte(3),forEachPublicProperty(d,function(d,e){a(b,d);this.write(b,e)},this)),b.writeByte(0),b.writeByte(0),b.writeByte(9))}},read:function(a){var e=a.readByte();switch(e){case 0:return d(a);case 1:return!!a.readByte();case 2:return b(a);
case 3:for(e={};;){var f=b(a);if(!f.length)break;var g=this.read(a);e.asSetPublicProperty(f,g)}if(9!==a.readByte())throw"AMF0 End marker is not found";return e;case 5:return null;case 6:break;case 8:e=[];for(e.length=a.readByte()<<24|a.readByte()<<16|a.readByte()<<8|a.readByte();;){f=b(a);if(!f.length)break;g=this.read(a);e.asSetPublicProperty(f,g)}if(9!==a.readByte())throw"AMF0 End marker is not found";return e;case 10:e=[];e.length=a.readByte()<<24|a.readByte()<<16|a.readByte()<<8|a.readByte();
for(f=0;f<e.length;f++)e[f]=this.read(a);return e;case 17:return p(a,{});default:throw"AMF0 Unknown marker "+e;}}},null,null,{write:function(a,b){s(a,b,{})},read:function(a){return p(a,{})}}],aliasesCache:w}}();function ProxyClass(a,b,e,d){function f(){somewhatImplemented("Proxy")}a=new Class("Proxy",f,ApplicationDomain.coerceCallable(f));a.extendBuiltin(d);return a}var proxyTrapQns={getProperty:null,setProperty:null,hasProperty:null,callProperty:null},name;
for(name in proxyTrapQns)proxyTrapQns[name]="method_"+Multiname.getQualifiedName(new Multiname([ShumwayNamespace.PROXY],name));var VM_IS_PROXY="vm is proxy",VM_CALL_PROXY="vm call proxy";function isProxyObject(a){return a["vm is proxy"]}function nameFromQualifiedName(a){if(isNumeric(a))return a;a=Multiname.fromQualifiedName(a);return void 0===a?void 0:a.name}function hasNonProxyingCaller(){for(var a=arguments.callee,b=0;5>b&&a;b++){if(a===nonProxyingHasProperty)return!0;a=a.caller}return!1}
function installProxyClassWrapper(a){var b=a.instanceConstructor;a.instanceConstructor=function(){var a=Object.create(b.prototype),d=Proxy.create({get:function(b,d){if("vm is proxy"===d)return!0;if("vm call proxy"===d)return function(d,g,l){g=(g=Multiname.isQName(d)?d:resolveMultiname(a,d))?Multiname.getQualifiedName(g):Multiname.getPublicQualifiedName(d.name);if(!nameInTraits(a,g))return a[proxyTrapQns.callProperty](d.name,l);if(a["vm open methods"]&&a["vm open methods"][g])return a["vm open methods"][g].apply(b,
l)};if(!hasNonProxyingCaller()){var l=nameFromQualifiedName(d);if(void 0!==l&&!nameInTraits(a,d))return a[proxyTrapQns.getProperty](l)}return a["vm open methods"]&&a["vm open methods"][d]?bindSafely(a["vm open methods"][d],b):a[d]},set:function(b,d,l){if(!hasNonProxyingCaller()&&(b=nameFromQualifiedName(d),void 0!==b&&!nameInTraits(a,d))){a[proxyTrapQns.setProperty](b,l);return}a[d]=l},has:function(b){if(!hasNonProxyingCaller()){var d=nameFromQualifiedName(b);if(void 0!==d&&!nameInTraits(a,b))return a[proxyTrapQns.hasProperty](d)}return b in
a},hasOwn:function(b){if(!hasNonProxyingCaller()){var d=nameFromQualifiedName(b);if(void 0!==d&&!nameInTraits(a,b))return a[proxyTrapQns.hasProperty](d)}return!!Object.getOwnPropertyDescriptor(a,b)},enumerate:function(){notImplemented("enumerate")},keys:function(){notImplemented("keys")}},b.prototype);b.apply(d,sliceArguments(arguments,0));return d}}
function DictionaryClass(a,b,e,d){function f(a){this.weakKeys=a;this.map=new WeakMap;a||(this.keys=[]);this.primitiveMap=createEmptyObject()}function g(a){if("string"===typeof a||"number"===typeof a)return a}a=new Class("Dictionary",f,ApplicationDomain.passthroughCallable(f));a.extendNative(d,f);var l=f.prototype;defineNonEnumerableProperty(l,"asGetProperty",function(a,b){var d=g(b);return void 0!==d?this.primitiveMap[d]:this.map.get(Object(b))});defineNonEnumerableProperty(l,"asGetResolvedStringProperty",
asGetResolvedStringPropertyFallback);defineNonEnumerableProperty(l,"asSetProperty",function(a,b,d,e){a=g(b);void 0!==a?this.primitiveMap[a]=e:(this.map.set(Object(b),e),!this.weakKeys&&0>this.keys.indexOf(b)&&this.keys.push(b))});defineNonEnumerableProperty(l,"asCallProperty",function(){notImplemented("asCallProperty")});defineNonEnumerableProperty(l,"asHasProperty",function(a,b){var d=g(b);return void 0!==d?d in this.primitiveMap:this.map.has(Object(b))});defineNonEnumerableProperty(l,"asDeleteProperty",
function(a,b){var d=g(b);void 0!==d&&delete this.primitiveMap[d];this.map.delete(Object(b));var e;!this.weakKeys&&0<=(e=this.keys.indexOf(b))&&this.keys.splice(e,1);return!0});defineNonEnumerableProperty(l,"asGetEnumerableKeys",function(){if(l===this)return Object.prototype.asGetEnumerableKeys.call(this);var a=[],b;for(b in this.primitiveMap)a.push(b);return this.weakKeys?a:a.concat(this.keys)});a.native={instance:{init:function(){}}};return a}
function debugBreak(a){debugger;print("\u001b[91mdebugBreak: "+a+"\u001b[0m")}
var ASNamespace,natives=function(){function a(a,b){var d;if(a){var e="Vector$"+a.classInfo.instanceInfo.name.name;switch(e){case "Vector$int":d=Int32Vector;break;case "Vector$uint":d=Uint32Vector;break;case "Vector$Number":d=Float64Vector;break;case "Vector$Object":d=GenericVector;break;default:unexpected()}}else d=GenericVector.applyType(null);var f=d.prototype,g=new Class(e,d,p(d.callable));d===GenericVector&&(g.applyType=function(){return g});g.extendWrapper(b,d);g.native={instance:{fixed:{get:function(){return this._fixed},
set:function(a){this._fixed=a}},length:{get:function(){return this.length},set:function(a){this.length=a}},push:f.push,pop:f.pop,shift:f.shift,unshift:f.unshift,_reverse:f.reverse,_filter:f.filter,_map:f.map,newThisType:function(){return new g.instanceConstructor},_spliceHelper:function(a,b,d,e,f){return this._spliceHelper(a,b,d,e,f)}},"static":{_some:function(a,b,d){return a.some(b,d)},_every:function(a,b,d){return a.every(b,d)},_forEach:function(a,b,d){return a.forEach(b,d)},_sort:arraySort}};g.vectorType=
a;g.coerce=function(a){return a};g.isInstanceOf=function(){return!0};g.isInstance=function(a){return null===a||"object"!==typeof a?!1:!this.instanceConstructor.vectorType&&a.class.vectorType?!0:this.instanceConstructor.prototype.isPrototypeOf(a)};return g}function b(a){return a|0}function e(a){return Object(a|0)}function d(a){return a>>>0}function f(a){return Object(a>>>0)}function g(a){var b={__glue__:{script:{instance:{message:"public message",name:"public name"}},"native":{instance:{getStackTrace:function(){somewhatImplemented("Error.getStackTrace()");
return AVM2.getStackTrace()}},"static":{getErrorMessage:getErrorMessage}}}};return function(d,e,f,g){d=new Class(a,f);d.extend(g);"Error"===a&&(d.link(b),d.linkNatives(b));return d}}function l(a,b,d,e){a=new Class("RegExp",XRegExp,p(XRegExp));a.extendBuiltin(e);l.exec=function(){var a=this.exec.apply(this,arguments);if(!a)return a;for(var b=Object.keys(a),d=0;d<b.length;d++){var e=b[d];isNumeric(e)||void 0===a[e]&&(a[e]="")}publicizeProperties(a);return a};l.test=function(){return null!==this.exec.apply(this,
arguments)};a.native={instance:{global:{get:function(){return this.global}},source:{get:function(){return this.source}},ignoreCase:{get:function(){return this.ignoreCase}},multiline:{get:function(){return this.multiline}},lastIndex:{get:function(){return this.lastIndex},set:function(a){this.lastIndex=a}},dotall:{get:function(){return this.dotall}},extended:{get:function(){return this.extended}},exec:l.exec,test:l.test}};return a}function m(a){return function(){return a}}var p=ApplicationDomain.passthroughCallable;
return{print:m(print),notImplemented:m(notImplemented),debugBreak:m(debugBreak),bugzilla:m(function(a){switch(a){case 574600:return!0}return!1}),decodeURI:m(decodeURI),decodeURIComponent:m(decodeURIComponent),encodeURI:m(encodeURI),encodeURIComponent:m(encodeURIComponent),isNaN:m(isNaN),isFinite:m(isFinite),parseInt:m(parseInt),parseFloat:m(parseFloat),escape:m(escape),unescape:m(unescape),isXMLName:m("undefined"!==typeof isXMLName?isXMLName:function(){notImplemented("Chrome doesn't support isXMLName.")}),
Function:Function,String:String,Array:Array,Number:Number,Boolean:Boolean,Math:Math,Date:Date,RegExp:RegExp,Object:Object,ObjectClass:function(){var a=new Class("Object",Object,p(Object));a.native={instance:{length:{get:function(){return this.length},set:function(a){this.length=a}},isPrototypeOf:Object.prototype.isPrototypeOf,hasOwnProperty:function(a){if(void 0===a)return!1;a=Multiname.getPublicQualifiedName(a);return Object.prototype.hasOwnProperty.call(this,a)?!0:Object.getPrototypeOf(this).hasOwnProperty(a)},
propertyIsEnumerable:function(a){if(void 0===a)return!1;a=Multiname.getPublicQualifiedName(a);return Object.prototype.propertyIsEnumerable.call(this,a)}},"static":{_setPropertyIsEnumerable:function(a,b){b=Multiname.getPublicQualifiedName(b);var d=Object.getOwnPropertyDescriptor(a,b);d.enumerable=!1;Object.defineProperty(a,b,d)}}};a.dynamicPrototype=a.traitsPrototype=Object.prototype;a.setDefaultProperties();a.defaultValue=null;a.coerce=function(a){return asCoerceObject(a)};a.isInstanceOf=function(a){return null===
a?!1:!0};a.isInstance=function(a){return null===a||void 0===a?!1:!0};return a},Class:function(a,b,d,e){var f=Class;f.debugName="Class";f.prototype.extendBuiltin.call(f,e);f.coerce=function(a){return a};f.isInstanceOf=function(){return!0};f.isInstance=function(a){return a instanceof f.instanceConstructor};return f},NamespaceClass:function(a,b,d,e){ASNamespace=function(a,b){void 0===b&&(b=a,a=void 0);var d,e;if(void 0===a)void 0===b?e=d="":"object"===typeof b?(d=b.prefix,b instanceof ShumwayNamespace?
e=b.originalURI:b instanceof QName&&(e=b.uri)):(e=b+"",d=""===e?"":void 0);else if(e="object"===typeof b&&b instanceof QName&&null!==b.uri?b.uri:b+"",""===e)if(void 0===a||""===a+"")d="";else throw"type error";else d=void 0===a||""===a?void 0:a+"";return ShumwayNamespace.createNamespace(e,d)};a=new Class("Namespace",ASNamespace,p(ASNamespace));a.extendNative(e,ShumwayNamespace);e=ShumwayNamespace.prototype;a.native={instance:{prefix:{get:e.getPrefix},uri:{get:e.getURI}}};return a},FunctionClass:function(a,
b,d,e){a=new Class("Function",Function,p(Function));a.extendBuiltin(e);a.native={instance:{prototype:{get:function(){return this.prototype},set:function(a){this.prototype=a}},length:{get:function(){return this.hasOwnProperty("vm length")?this["vm length"]:this.length}},call:Function.prototype.call,apply:Function.prototype.apply}};a.coerce=function(a){return a};a.isInstanceOf=function(a){return"function"===typeof a};a.isInstance=function(a){return"function"===typeof a};return a},MethodClosureClass:function(a,
b,d,e){a=new Class("MethodClosure",MethodClosure);a.extendBuiltin(e);return a},BooleanClass:function(a,b,d,e){a=new Class("Boolean",Boolean,p(Boolean));a.extendBuiltin(e);a.native={instance:{toString:Boolean.prototype.toString,valueOf:Boolean.prototype.valueOf}};a.coerce=Boolean;a.isInstanceOf=function(a){return"boolean"===typeof a||a instanceof Boolean};a.isInstance=function(a){return"boolean"===typeof a||a instanceof Boolean?!0:!1};return a},StringClass:function(a,b,d,e){a=new Class("String",String,
p(String));a.extendBuiltin(e);var f=String.prototype;a.native={instance:{length:{get:function(){return this.length}},indexOf:f.indexOf,lastIndexOf:f.lastIndexOf,charAt:f.charAt,charCodeAt:f.charCodeAt,concat:f.concat,localeCompare:f.localeCompare,match:function(a){if(void 0===a||null===a)return null;if(a instanceof RegExp&&a.global){for(var b=[],d;d=a.exec(this);)b.push(d[0]);return b}!(a instanceof RegExp)&&"string"!==typeof a&&(a=String(a));return this.match(a)},replace:f.replace,search:function(a){return void 0===
a?-1:this.search(a)},slice:f.slice,split:f.split,substr:f.substr,substring:f.substring,toLowerCase:f.toLowerCase,toLocaleLowerCase:f.toLocaleLowerCase,toUpperCase:function(){var a=f.toUpperCase.apply(this);return a=a.replace(/\u039C/g,String.fromCharCode(181))},toLocaleUpperCase:function(){var a=f.toLocaleUpperCase.apply(this);return a=a.replace(/\u039C/g,String.fromCharCode(181))},toString:f.toString,valueOf:f.valueOf},"static":String};a.isInstance=function(a){return null!==a&&void 0!==a&&"string"===
typeof a.valueOf()};a.coerce=function(a){return null===a||void 0===a?null:String(a)};a.isInstanceOf=function(a){return Object(a)instanceof String};a.isInstance=function(a){return Object(a)instanceof String};return a},NumberClass:function(a,b,d,e){a=new Class("Number",Number,p(Number));a.extendBuiltin(e);a.native={instance:Number.prototype};a.defaultValue=Number(0);a.isInstance=function(a){return null!==a&&void 0!==a&&"number"===typeof a.valueOf()};a.coerce=Number;a.isInstanceOf=function(a){return Object(a)instanceof
Number};a.isInstance=function(a){return Object(a)instanceof Number};return a},intClass:function(a,d,f,g){a=new Class("int",e,p(b));a.extendBuiltin(g);a.defaultValue=0;a.coerce=b;a.isInstanceOf=function(){return!1};a.isInstance=function(a){a instanceof Number&&(a=a.valueOf());return(a|0)===a};return a},uintClass:function(a,b,e,g){a=new Class("uint",f,p(d));a.extend(g);a.defaultValue=0;a.isInstanceOf=function(){return!1};a.isInstance=function(a){a instanceof Number&&(a=a.valueOf());return a>>>0===a};
a.coerce=d;return a},ArrayClass:ArrayClass,VectorClass:function(b,d,e,f){return a(void 0,f)},ObjectVectorClass:function(b,d,e,f){return a(b.getClass("Object"),f)},IntVectorClass:function(b,d,e,f){return a(b.getClass("int"),f)},UIntVectorClass:function(b,d,e,f){return a(b.getClass("uint"),f)},DoubleVectorClass:function(b,d,e,f){return a(b.getClass("Number"),f)},ByteArrayClass:function(a,b,d,e){function f(a){if(a instanceof f)return a;(a=a||this.symbol&&this.symbol.data)?(this.a=new ArrayBuffer(a.length),
this.length=a.length,(new Uint8Array(this.a)).set(a)):(this.a=new ArrayBuffer(128),this.length=0);this.position=0;this.cacheViews();this.le=this.nativele=1===(new Int8Array((new Int32Array([])).buffer))[0];this.objectEncoding=D}function g(){a.throwErrorFromVM("flash.errors.EOFError","End of file was encountered.")}function l(){var b=Errors.ParamRangeError;a.throwErrorFromVM("RangeError",getErrorMessage(b.code),b.code)}function m(a,b,d){a.position+d>a.length&&g();b=a.view[b](a.position,a.le);a.position+=
d;return b}function y(a,b,d,e){d=a.position+d;a.ensureCapacity(d);a.view[b](a.position,e,a.le);a.position=d;d>a.length&&(a.length=d)}var D=3;b=new Class("ByteArray",f,p(f));b.extendBuiltin(e);e=f.prototype;e.asGetNumericProperty=function(a){return a>=this.length?void 0:this.uint8v[a]};e.asSetNumericProperty=function(a,b){var d=a+1;this.ensureCapacity(d);this.uint8v[a]=b;d>this.length&&(this.length=d)};e.cacheViews=function(){var a=this.a;this.int8v=new Int8Array(a);this.uint8v=new Uint8Array(a);this.view=
new DataView(a)};e.getBytes=function(){return new Uint8Array(this.a,0,this.length)};e.ensureCapacity=function(a){var b=this.a;if(b.byteLength<a){for(b=b.byteLength;b<a;)b*=2;a=new ArrayBuffer(b);b=this.int8v;this.a=a;this.cacheViews();this.int8v.set(b)}};e.clear=function(){this.position=this.length=0};e.readBoolean=function(){this.position+1>this.length&&g();return 0!==this.int8v[this.position++]};e.readByte=function(){this.position+1>this.length&&g();return this.int8v[this.position++]};e.readUnsignedByte=
function(){this.position+1>this.length&&g();return this.uint8v[this.position++]};e.readBytes=function(a,b,d){var e=this.position;e+d>this.length&&g();a.length<b+d&&(a.ensureCapacity(b+d),a.length=b+d);a.int8v.set(new Int8Array(this.a,e,d),b);this.position+=d};e.writeBoolean=function(a){var b=this.position+1;this.ensureCapacity(b);this.int8v[this.position++]=a?1:0;b>this.length&&(this.length=b)};e.writeByte=function(a){var b=this.position+1;this.ensureCapacity(b);this.int8v[this.position++]=a;b>this.length&&
(this.length=b)};e.writeUnsignedByte=function(a){var b=this.position+1;this.ensureCapacity(b);this.uint8v[this.position++]=a;b>this.length&&(this.length=b)};e.writeRawBytes=function(a){var b=this.position+a.length;this.ensureCapacity(b);this.int8v.set(a,this.position);this.position=b;b>this.length&&(this.length=b)};e.readRawBytes=function(){return new Int8Array(this.a,0,this.length)};e.writeBytes=function(a,b,d){2>arguments.length&&(b=0);3>arguments.length&&(d=0);b!==clamp(b,0,a.length)&&l();var e=
b+d;e!==clamp(e,0,a.length)&&l();0===d&&(d=a.length-b);this.writeRawBytes(new Int8Array(a.a,b,d))};e.readDouble=function(){return m(this,"getFloat64",8)};e.readFloat=function(){return m(this,"getFloat32",4)};e.readInt=function(){return m(this,"getInt32",4)};e.readShort=function(){return m(this,"getInt16",2)};e.readUnsignedInt=function(){return m(this,"getUint32",4)};e.readUnsignedShort=function(){return m(this,"getUint16",2)};e.readObject=function(){return AMFUtils.encodings[this.objectEncoding].read(this)};
e.writeDouble=function(a){y(this,"setFloat64",8,a)};e.writeFloat=function(a){y(this,"setFloat32",4,a)};e.writeInt=function(a){y(this,"setInt32",4,a)};e.writeShort=function(a){y(this,"setInt16",2,a)};e.writeUnsignedInt=function(a){y(this,"setUint32",4,a)};e.writeUnsignedShort=function(a){y(this,"setUint16",2,a)};e.writeObject=function(a){return AMFUtils.encodings[this.objectEncoding].write(this,a)};e.readUTF=function(){return this.readUTFBytes(this.readShort())};e.readUTFBytes=function(a){var b=this.position;
b+a>this.length&&g();this.position+=a;return utf8encode(new Int8Array(this.a,b,a))};e.writeUTF=function(a){a=utf8decode(a);this.writeShort(a.length);this.writeRawBytes(a)};e.writeUTFBytes=function(a){a=utf8decode(a);this.writeRawBytes(a)};e.toString=function(){return utf8encode(new Int8Array(this.a,0,this.length))};b.native={instance:{length:{get:function(){return this.length},set:function(a){a>this.a.byteLength&&this.ensureCapacity(a);this.length=a;this.position=clamp(this.position,0,this.length)}},
bytesAvailable:{get:function(){return this.length-this.position}},position:{get:function(){return this.position},set:function(a){this.position=a}},endian:{get:function(){return this.le?"littleEndian":"bigEndian"},set:function(a){this.le="littleEndian"===a}},objectEncoding:{get:function(){return this.objectEncoding},set:function(a){this.objectEncoding=a}},readBytes:e.readBytes,writeBytes:e.writeBytes,writeBoolean:e.writeBoolean,writeByte:e.writeByte,writeShort:e.writeShort,writeInt:e.writeInt,writeUnsignedInt:e.writeUnsignedInt,
writeFloat:e.writeFloat,writeDouble:e.writeDouble,writeMultiByte:e.writeMultiByte,writeUTF:e.writeUTF,writeUTFBytes:e.writeUTFBytes,writeObject:e.writeObject,readBoolean:e.readBoolean,readByte:e.readByte,readUnsignedByte:e.readUnsignedByte,readShort:e.readShort,readUnsignedShort:e.readUnsignedShort,readInt:e.readInt,readUnsignedInt:e.readUnsignedInt,readFloat:e.readFloat,readDouble:e.readDouble,readMultiByte:e.readMultiByte,readUTF:e.readUTF,readUTFBytes:e.readUTFBytes,readObject:e.readObject,toString:e.toString,
clear:e.clear},"static":{defaultObjectEncoding:{get:function(){return D},set:function(a){D=a}}}};return b},ProxyClass:ProxyClass,ErrorClass:g("Error"),DefinitionErrorClass:g("DefinitionError"),EvalErrorClass:g("EvalError"),RangeErrorClass:g("RangeError"),ReferenceErrorClass:g("ReferenceError"),SecurityErrorClass:g("SecurityError"),SyntaxErrorClass:g("SyntaxError"),TypeErrorClass:g("TypeError"),URIErrorClass:g("URIError"),VerifyErrorClass:g("VerifyError"),UninitializedErrorClass:g("UninitializedError"),
ArgumentErrorClass:g("ArgumentError"),DateClass:function(a,b,d,e){a=new Class("Date",Date,p(Date));a.extendBuiltin(e);a.native={instance:Date.prototype,"static":Date};return a},MathClass:function(){var a=new Class("Math");a.native={"static":Math};return a},RegExpClass:l,DictionaryClass:DictionaryClass,XMLClass:XMLClass,XMLListClass:XMLListClass,QNameClass:QNameClass,JSONClass:function(a,b,d,e){function f(a){if("object"!==typeof a)return a;for(var b=Object.keys(a),d=a instanceof Array?[]:{},e=0;e<
b.length;e++)d.asSetPublicProperty(b[e],f(a[b[e]]));return d}function g(a){if("object"!==typeof a)return a;for(var b=Object.keys(a),d=a instanceof Array?[]:{},e=0;e<b.length;e++){var f=b[e],l=f;isNumeric(f)||(l=fromResolvedName(f));d[l]=g(a[f])}return d}function l(){}a=new Class("JSON",l,p(l));a.extend(e);a.native={"static":{parseCore:function(a){return f(JSON.parse(a))},stringifySpecializedToString:function(a,b,d,e){return JSON.stringify(g(a),d,e)}}};return a},ShumwayClass:function(a,b,d,e){function f(){}
a=new Class("Shumway",f,p(f));a.extend(e);a.native={"static":{info:function(a){console.info(a)},json:function(a){return JSON.stringify(a)},eval:function(a){return eval(a)},"debugger":function(){debugger}}};return a},CapabilitiesClass:function(a,b,d,e){function f(){}a=new Class("Capabilities",f,p(f));a.extend(e);a.native={"static":{playerType:{get:function(){return"AVMPlus"}}}};return a},FileClass:function(a,b,d,e){function f(){}a=new Class("File",f,p(f));a.extend(e);a.native={"static":{exists:function(){notImplemented("File.exists");
return!1},read:function(a){return snarf(a)},write:function(){notImplemented("File.write");return!0},readByteArray:function(a){var b=AVM2.currentDomain().getClass("flash.utils.ByteArray").createInstance();b.writeRawBytes(snarf(a,"binary"));return b},writeByteArray:function(a,b){write("bin/"+a,b.getBytes());return!0}}};return a},DomainClass:function(a,b,d,e){a=new Class("File",d,p(d));a.extend(e);a.native={instance:{init:function(a){this.base=a;this.nativeObject=new ApplicationDomain(avm2,a?a.nativeObject:
null)},loadBytes:function(a){this.nativeObject.executeAbc(new AbcFile(a.readRawBytes()))},getClass:function(a){return this.nativeObject.getClass(a)}},"static":{currentDomain:{get:function(){var a=Object.create(d.prototype);a.nativeObject=AVM2.currentDomain();return a}}}};return a},SystemClass:function(a,b,d,e){a=new Class("System",d,p(d));a.extend(e);a.native={"static":{swfVersion:{get:function(){return 19}},apiVersion:{get:function(){return 26}},getArgv:function(){return[]},getRunmode:function(){return"mixed"}}};
return a},getQualifiedClassName:m(function(a){if(null===a)return"null";if(void 0===a)return"void";switch(typeof a){case "number":return(a|0)===a?"int":"Number";case "string":return"String";case "boolean":return"Boolean";case "object":if(a instanceof Date)return"Date";var b;a instanceof Class?b=a:a.class?b=a.class:a.classInfo&&(b=a);if(b)return a=b.classInfo.instanceInfo.name,(b=a.namespaces[0].originalURI)?b+"::"+a.name:a.name}return notImplemented(a+" ("+typeof a+")")}),getQualifiedSuperclassName:m(function(a){switch(typeof a){case "number":case "string":case "boolean":return"Object";
case "function":return"Function";case "object":if(a instanceof Date)return"Object";var b;a.class?b=a.class:a.classInfo&&(b=a);return b&&b.baseClass?(a=b.baseClass.classInfo.instanceInfo.name,(b=a.namespaces[0].originalURI)?b+"::"+a.name:a.name):"Object"}return notImplemented(a+" (superOf "+typeof a+")")}),getDefinitionByName:m(function(a){a=String(a).replace("::",".");return AVM2.currentDomain().getClass(a)}),describeTypeJSON:m(function(a,b){function d(a){return Multiname.getPublicQualifiedName(a)}
function e(a){var b=a.name;return(a=a.namespaces[0])&&a.originalURI?a.originalURI+"::"+b:b}function f(a){var b={};b[D]=a.name;b[C]=a.value.map(function(a){return a});return b}var g=d("declaredBy"),l=d("metadata"),m=d("access"),p=d("uri"),D=d("name"),F=d("type"),E=d("returnType"),C=d("value");d("key");var M=d("parameters"),Q=d("optional"),R=a.classInfo?a:Object.getPrototypeOf(a).class;!0;var S=R.classInfo,K={};K[D]=e(S.instanceInfo.name);K[d("isDynamic")]=R===a?!0:!(S.instanceInfo.flags&1);K[d("isStatic")]=
R===a;K[d("isFinal")]=R===a?!0:!(S.instanceInfo.flags&2);if(b&256){var G=d("traits"),H=function(a){!0;for(var b=0;a&&b<a.length;b++){var d=a[b];if(I[d.kind]&&(d.name.getNamespace().isPublic()||d.name.uri)){var r=e(d.name);if(da[r]){var s=da[r];s[m]="readwrite";2===d.kind&&(s[F]=e(d.methodInfo.returnType))}else{s={};if(N&&d.metadata){var w=s[l]=[],C;for(C in d.metadata)w.push(f(d.metadata[C]))}else s[l]=null;s[g]=ia;s[p]=void 0===d.name.uri?null:d.name.uri;s[D]=r;if(d.typeName||d.methodInfo&&d.methodInfo.returnType)switch(s[d.kind===
TRAIT_Method?E:F]=e(0===d.kind?d.typeName:d.methodInfo.returnType),d.kind){case 0:s[m]="readwrite";W.push(s);break;case 1:r=s[M]=[];d=d.methodInfo.parameters;for(w=0;w<d.length;w++){var G=d[w],H={};H[F]=G.type?e(G.type):"*";H[Q]="value"in G;r.push(H)}ca.push(s);break;case 2:case 3:s[m]=2===d.kind?"read":"write",fa.push(s),da[r]=s}}}}},I=[b&8,b&32,b&16,b&16],J=b&2,N=b&64,P={},U=P[d("bases")]=J?[]:null;if(b&4){var L=P[d("interfaces")]=[];if(b&512)for(var O in R.implementedInterfaces)L.push(e(R.implementedInterfaces[O].name))}else P[d("interfaces")]=
null;var W=P[d("variables")]=b&8?[]:null,fa=P[d("accessors")]=b&16?[]:null,ca=P[d("methods")]=b&32?[]:null,da={};for(O=!1;R;){var ia=e(R.classInfo.instanceInfo.name);J&&O?U.push(ia):O=!0;b&512?H(R.classInfo.instanceInfo.traits):H(R.classInfo.traits);R=R.baseClass}K[G]=P}G=null;S.metadata&&(G=Object.keys(S.metadata).map(function(a){return f(S.metadata[a])}));K[l]=G;return K}),original:jsGlobal["vm originals"]}}();
function getNative(a){a=a.split(".");for(var b=natives,e=0,d=a.length;e<d;e++)b=b&&b[a[e]];!0;return b}var disassemblerOptions=systemOptions.register(new OptionSet("Disassembler Options")),filter=disassemblerOptions.register(new Option("f","filter","string","SpciMsmNtu","[S]ource, constant[p]ool, [c]lasses, [i]nstances, [M]etadata, [s]cripts, [m]ethods, multi[N]ames, S[t]atistics, [u]tf"));
function traceArray(a,b,e,d){0!==e.length&&(a.enter(b+" {"),e.forEach(function(b){b.trace(a,d)}),a.leave("}"))}
AbcFile.prototype.trace=function(a){0<=filter.value.indexOf("p")&&this.constantPool.trace(a);0<=filter.value.indexOf("N")&&this.constantPool.traceMultinamesOnly(a);0<=filter.value.indexOf("c")&&traceArray(a,"classes",this.classes);0<=filter.value.indexOf("i")&&traceArray(a,"instances",this.instances);0<=filter.value.indexOf("M")&&traceArray(a,"metadata",this.metadata);0<=filter.value.indexOf("s")&&traceArray(a,"scripts",this.scripts);0<=filter.value.indexOf("m")&&traceArray(a,"methods",this.methods,
this);0<=filter.value.indexOf("S")&&traceSource(a,this);0<=filter.value.indexOf("t")&&traceStatistics(a,this);0<=filter.value.indexOf("u")&&print(JSON.stringify({strings:this.constantPool.strings,positionAfterUTFStrings:this.constantPool.positionAfterUTFStrings},null,2))};
ConstantPool.prototype.trace=function(a){a.enter("constantPool {");for(var b in this)"namespaces"===b?(a.enter("namespaces {"),this.namespaces.forEach(function(b,d){a.writeLn((""+d).padRight(" ",3)+(b?b.toString():"*"))}),a.leave("}")):this[b]instanceof Array&&(a.enter(b+" "+this[b].length+" {"),a.writeArray(this[b]),a.leave("}"));a.leave("}")};ConstantPool.prototype.traceMultinamesOnly=function(a){a.writeArray(this.multinames,null,!0)};
ClassInfo.prototype.trace=function(a){a.enter("class "+this+" {");traceArray(a,"traits",this.traits);a.leave("}")};MetaDataInfo.prototype.trace=function(a){a.enter(this+" {");this.value.forEach(function(b){a.writeLn((b.key?b.key+": ":"")+'"'+b.value+'"')});a.leave("}")};InstanceInfo.prototype.trace=function(a){a.enter("instance "+this+" {");traceArray(a,"traits",this.traits);a.leave("}")};ScriptInfo.prototype.trace=function(a){a.enter("script "+this+" {");traceArray(a,"traits",this.traits);a.leave("}")};
Trait.prototype.trace=function(a){if(this.metadata)for(var b in this.metadata)this.metadata.hasOwnProperty(b)&&this.metadata[b].trace(a);a.writeLn(this)};function traceAbc(a,b){b.trace(a)}
function traceOperand(a,b,e){var d=0;switch(a.size){case "s08":d=e.readS8();break;case "u08":d=e.readU8();break;case "s16":d=e.readS16();break;case "s24":d=e.readS24();break;case "u30":d=e.readU30();break;case "u32":d=e.readU32();break;default:!0}e="";switch(a.type){case "":break;case "I":e=b.constantPool.ints[d];break;case "U":e=b.constantPool.uints[d];break;case "D":e=b.constantPool.doubles[d];break;case "S":e=b.constantPool.strings[d];break;case "N":e=b.constantPool.namespaces[d];break;case "CI":e=
b.classes[d];break;case "M":return b.constantPool.multinames[d];default:e="?"}return a.name+":"+d+(""===e?"":" ("+e+")")}function traceOperands(a,b,e,d){d=d||!1;var f=e.position,g="";null===a.operands?g="null":a.operands.forEach(function(d,f){g+=traceOperand(d,b,e);f<a.operands.length-1&&(g+=", ")});d&&e.seek(f);return g}
MethodInfo.prototype.trace=function(a){var b=this.abc;a.enter("method"+(this.name?" "+this.name:"")+" {");a.writeLn("flags: "+getFlags(this.flags,"NEED_ARGUMENTS NEED_ACTIVATION NEED_REST HAS_OPTIONAL  NATIVE SET_DXN HAS_PARAM_NAMES".split(" ")));a.writeLn("parameters: "+this.parameters.map(function(a){return(a.type?Multiname.getQualifiedName(a.type)+"::":"")+a.name}));if(this.code){var e=new AbcStream(this.code);traceArray(a,"traits",this.traits);for(a.enter("code {");0<e.remaining();){var d=e.readU8(),
f=opcodeTable[d],g;g=(""+e.position).padRight(" ",6);switch(d){case 27:g+=f.name+": defaultOffset: "+e.readS24();d=e.readU30();g+=", caseCount: "+d;for(f=0;f<d+1;f++)g+=" offset: "+e.readS24();a.writeLn(g);break;default:f?(g+=f.name.padRight(" ",20),f.operands?(0<f.operands.length&&(g+=traceOperands(f,b,e)),a.writeLn(g)):!0):!0}}a.leave("}")}a.leave("}")};
var SourceTracer=function(){function a(a){return void 0===a?"undefined":null===a?"null":"string"===typeof a?'"'+a+'"':String(a)}function b(b,e){return b.parameters.map(function(b){var d=b.name;e||(b.type&&(d+=":"+b.type.getName()),void 0!==b.value&&(d+=" = "+a(b.value)));return d}).join(", ")}function e(a){this.writer=a}e.prototype={traceTraits:function(d,e,g){var l=this.writer,m=this;d.forEach(function(d){var r;r=Multiname.getAccessModifier(d.name);var s=d.name.namespaces[0].originalURI;s&&("http://adobe.com/AS3/2006/builtin"===
s&&(s="AS3"),r="public"===r?g===s?"":s:r);e&&(r+=" static");if(d.isSlot()||d.isConst())m.traceMetadata(d.metadata),r=d.isConst()?r+" const":r+" var",r+=" "+d.name.getName(),d.typeName&&(r+=":"+d.typeName.getName()),d.value&&(r+=" = "+a(d.value)),l.writeLn(r+";");else if(d.isMethod()||d.isGetter()||d.isSetter()){m.traceMetadata(d.metadata);s=d.methodInfo;d.attributes&2&&(r+=" override");s.isNative()&&(r+=" native");r=r+" function"+(d.isGetter()?" get":d.isSetter()?" set":"");r+=" "+d.name.getName();
r+="("+b(s)+")";r+=s.returnType?":"+s.returnType.getName():"";var w;d.holder instanceof ClassInfo?(w=d.holder.instanceInfo.name,w.getName()):d.holder instanceof InstanceInfo&&(w=d.holder.name,w.getName());d.isGetter()||d.isSetter();s.isNative();s.isNative()?l.writeLn(r+";"):g?l.writeLn(r+";"):l.writeLn(r+' { notImplemented("'+d.name.getName()+'"); }')}else d.isClass()?(w=d.classInfo.instanceInfo.name,l.enter("package "+w.namespaces[0].originalURI+" {\n"),m.traceMetadata(d.metadata),m.traceClass(d.classInfo),
l.leave("\n}"),m.traceClassStub(d)):notImplemented()})},traceClassStub2:function(a){function e(a){var d=[];a.forEach(function(a){(a.isMethod()||a.isGetter()||a.isSetter())&&a.methodInfo.isNative()&&d.push(a)});d.forEach(function(a,e){var f=a.methodInfo,l=a.name.getName();g.writeLn("// "+l+" :: "+(f.parameters.length?b(f):"void")+" -> "+(f.returnType?f.returnType.getName():"any"));var m;m=a.isGetter()?'"get '+l+'"':a.isSetter()?'"set '+l+'"':l;g.enter(m+": function "+l+"("+b(f,!0)+") {");g.writeLn('  notImplemented("'+
p+"."+l+'");');g.leave("}"+(e===d.length-1?"":",\n"))})}var g=this.writer,l=a.classInfo,m=l.instanceInfo,p=m.name.getName();a=a.metadata?a.metadata.native:null;if(!a)return!1;g.writeLn("Cut and paste the following into `native.js' and edit accordingly");g.writeLn("8< --------------------------------------------------------------");g.enter("natives."+a.cls+" = function "+a.cls+"(runtime, scope, instanceConstructor, baseClass) {");g.writeLn('var c = new Class("'+p+'", instanceConstructor, ApplicationDomain.passthroughCallable(instanceConstructor));');
g.writeLn("c.extend(baseClass);\n");g.enter("c.nativeStatics = {");e(l.traits,!0);g.leave("};\n");g.enter("c.nativeMethods = {");e(m.traits);g.leave("};\n");g.writeLn("return c;");g.leave("};");g.writeLn("-------------------------------------------------------------- >8");return!0},traceClassStub:function(a){function e(a,d,f){function l(a,d){var e=a.methodInfo,p=a.name.getName(),r="// ("+(e.parameters.length?b(e):"void")+") -> "+(e.returnType?e.returnType.getName():"any"),s=p;a.isGetter()?s="get":
a.isSetter()&&(s="set");g.enter(s+": function "+p+"("+b(e,!0)+") { "+r);g.writeLn('notImplemented("'+m+"."+p+'");');f||(a.isGetter()?g.writeLn("return this._"+p+";"):a.isSetter()&&g.writeLn("this._"+p+" = "+e.parameters[0].name+";"));g.leave("}"+(d?",":""))}var p=a;a={properties:p.filter(function(a){return!d&&!(a.isMethod()||a.isGetter()||a.isSetter())}),methods:p.filter(function(a){return(a.isMethod()||a.isGetter()||a.isSetter())&&d===a.methodInfo.isNative()})};var A=[],u=createEmptyObject();a.methods.forEach(function(a){var b=
a.name.getName();a.isGetter()||a.isSetter()?(u[b]||(u[b]=[]),u[b].push(a)):A.push(a)});for(p=0;p<A.length;p++)l(A[p],p<A.length-1);for(var B=toKeyValueArray(u),y=0;y<B.length;y++){g.enter(B[y][0]+": {");for(var D=B[y][1],p=0;p<D.length;p++)l(D[p],p<D.length-1);g.leave("}"+(y<B.length-1?",":""))}a.properties.forEach(function(b,d){var e=b.name.getName(),f=d===a.properties.length-1;b.name.getNamespace().isPublic()&&g.writeLn(e+": "+("'public "+b.name.name+"'")+(f?"":","))})}var g=this.writer;a=a.classInfo;
var l=a.instanceInfo,m=l.name.getName();g.writeLn("Cut and paste the following glue and edit accordingly.");g.writeLn("Class "+l);g.writeLn("8< --------------------------------------------------------------");var p=l.name.namespaces[0].originalURI;g.enter("var "+m+"Definition = (function () {");g.enter("return {");g.writeLn("// ("+b(l.init,!1)+")");g.writeLn('__class__: "'+p+"."+m+'",');g.enter("initialize: function () {");g.leave("},");g.enter("__glue__: {");g.enter("native: {");g.enter("static: {");
e(a.traits,!0,!0);g.leave("},");g.enter("instance: {");e(l.traits,!0);g.leave("}");g.leave("},");g.enter("script: {");g.writeLn("instance: Glue.ALL");g.leave("}");g.leave("}");g.leave("};");g.leave("}).call(this);");g.writeLn("-------------------------------------------------------------- >8");return!0},traceClass:function(a){var e=this.writer,g=a.instanceInfo,l=g.name,m=Multiname.getAccessModifier(l);g.isFinal()&&(m+=" final");g.isSealed()||(m+=" dynamic");m+=g.isInterface()?" interface ":" class ";
m+=l.getName();g.superName&&"Object"!==g.superName.getName()&&(m+=" extends "+g.superName.getName());g.interfaces.length&&(m+=" implements "+g.interfaces.map(function(a){return a.getName()}).join(", "));e.enter(m+" {");g.isInterface()||e.writeLn("public function "+l.getName()+"("+b(g.init)+") {}");var p;g.isInterface()&&(p=l.namespaces[0].originalURI+":"+l.name);this.traceTraits(a.traits,!0,p);this.traceTraits(g.traits,!1,p);e.leave("}")},traceMetadata:function(a){var b=this.writer,e;for(e in a)a.hasOwnProperty(e)&&
0!==e.indexOf("__")&&b.writeLn("["+e+"("+a[e].value.map(function(a){return(a.key?a.key+"=":"")+'"'+a.value+'"'}).join(", ")+")]")}};return e}();function traceSource(a,b){var e=new SourceTracer(a);b.scripts.forEach(function(a){e.traceTraits(a.traits)})}
function traceStatistics(a,b){var e=new metrics.Counter(!0),d=new metrics.Counter(!0),f=new metrics.Counter(!0),g=new metrics.Counter(!0),l={},m={},p={};b.classes.forEach(function(a){l[a.instanceInfo.name.name]=!0});b.scripts.forEach(function(a){a.traits.forEach(function(a){if(a.isClass()){var b=a.classInfo.instanceInfo.superName?a.classInfo.instanceInfo.superName.name:"?";b in l||d.count(b);a.classInfo.traits.forEach(function(a){a.isMethod()?m[a.name.name]=!0:p[a.name.name]=!0});a.classInfo.instanceInfo.traits.forEach(function(a){a.isMethod()&&
!(a.attributes&2)?m[a.name.name]=!0:p[a.name.name]=!0})}})});var r=new metrics.Counter(!0);b.methods.forEach(function(a){function d(a){var e=0;switch(a.size){case "s08":e=v.readS8();break;case "u08":e=v.readU8();break;case "s16":e=v.readS16();break;case "s24":e=v.readS24();break;case "u30":e=v.readU30();break;case "u32":e=v.readU32();break;default:!0}var f="";switch(a.type){case "":break;case "I":f=b.constantPool.ints[e];break;case "U":f=b.constantPool.uints[e];break;case "D":f=b.constantPool.doubles[e];
break;case "S":f=b.constantPool.strings[e];break;case "N":f=b.constantPool.namespaces[e];break;case "CI":f=b.classes[e];break;case "M":f=b.constantPool.multinames[e];break;default:f="?"}return f}if(a.code)for(var v=new AbcStream(a.code);0<v.remaining();){a=v.readU8();var z=opcodeTable[a],A=null;if(z)switch(r.count(z.name),z.operands&&(A=z.operands.map(d)),a){case 65:case 67:continue;case 70:case 76:case 79:case 68:case 69:case 78:A[0]&&!(A[0].name in m)&&f.count(A[0].name);break;case 74:A[0]&&!(A[0].name in
l)&&e.count(A[0].name);break;case 102:case 97:A[0]&&!(A[0].name in p)&&g.count(A[0].name)}}});a.writeLn(JSON.stringify({definedClasses:l,definedMethods:m,definedProperties:p,libraryClasses:e.counts,librarySuperClasses:d.counts,libraryMethods:f.counts,libraryProperties:g.counts,operations:r.counts},null,2))}
var Interpreter=new (function(){function a(){}function b(a,b,f){f.flags=b.flags;f.name=b.isRuntimeName()?a.pop():b.name;f.namespaces=b.isRuntimeNamespace()?[a.pop()]:b.namespaces}a.prototype={interpretMethod:function(a,d,f,g){!0;Counter.count("Interpret Method");var l=d.abc,m=l.constantPool.ints,p=l.constantPool.uints,r=l.constantPool.doubles,s=l.constantPool.strings,w=l.methods,v=l.constantPool.multinames,z=l.applicationDomain,A=d.exceptions;a=[a];for(var u=[],B=new ScopeStack(f),y=d.parameters.length,
D=g.length,F,E=0;E<y;E++){var C=d.parameters[E];F=E<D?g[E]:C.value;C.type&&!C.type.isAnyName()&&(F=asCoerceByMultiname(z,C.type,F));a.push(F)}d.needsRest()?a.push(sliceArguments(g,y)):d.needsArguments()&&a.push(sliceArguments(g,0));g=d.analysis.bytecodes;var M,Q,R,S,K,G,y=[],D=Multiname.TEMPORARY,C=0,H=g.length;a:for(;C<H;)try{var I=g[C],J=I.op;switch(J|0){case 3:throw u.pop();case 4:b(u,v[I.index],D);u.push(u.pop().asGetSuper(f,D.namespaces,D.name,D.flags));break;case 5:F=u.pop();b(u,v[I.index],
D);u.pop().asSetSuper(f,D.namespaces,D.name,D.flags,F);break;case 8:a[I.index]=void 0;break;case 12:G=u.pop();K=u.pop();C=!(K<G)?I.offset:C+1;continue;case 24:G=u.pop();K=u.pop();C=K>=G?I.offset:C+1;continue;case 13:G=u.pop();K=u.pop();C=!(K<=G)?I.offset:C+1;continue;case 23:G=u.pop();K=u.pop();C=K>G?I.offset:C+1;continue;case 14:G=u.pop();K=u.pop();C=!(K>G)?I.offset:C+1;continue;case 22:G=u.pop();K=u.pop();C=K<=G?I.offset:C+1;continue;case 15:G=u.pop();K=u.pop();C=!(K>=G)?I.offset:C+1;continue;case 21:G=
u.pop();K=u.pop();C=K<G?I.offset:C+1;continue;case 16:C=I.offset;continue;case 17:C=u.pop()?I.offset:C+1;continue;case 18:C=!u.pop()?I.offset:C+1;continue;case 19:G=u.pop();K=u.pop();C=K==G?I.offset:C+1;continue;case 20:G=u.pop();K=u.pop();C=K!=G?I.offset:C+1;continue;case 25:G=u.pop();K=u.pop();C=K===G?I.offset:C+1;continue;case 26:G=u.pop();K=u.pop();C=K!==G?I.offset:C+1;continue;case 27:Q=u.pop();if(0>Q||Q>=I.offsets.length)Q=I.offsets.length-1;C=I.offsets[Q];continue;case 28:B.push(boxValue(u.pop()),
!0);break;case 29:B.pop();break;case 30:Q=u.pop();u[u.length-1]=boxValue(u[u.length-1]).asNextName(Q);break;case 35:Q=u.pop();u[u.length-1]=boxValue(u[u.length-1]).asNextValue(Q);break;case 50:S=asHasNext2(a[I.object],a[I.index]);a[I.object]=S.object;a[I.index]=S.index;u.push(!!S.index);break;case 32:u.push(null);break;case 33:u.push(void 0);break;case 36:case 37:u.push(I.value);break;case 44:u.push(s[I.index]);break;case 45:u.push(m[I.index]);break;case 46:u.push(p[I.index]);break;case 47:u.push(r[I.index]);
break;case 38:u.push(!0);break;case 39:u.push(!1);break;case 40:u.push(NaN);break;case 41:u.pop();break;case 42:u.push(u[u.length-1]);break;case 43:M=u[u.length-1];u[u.length-1]=u[u.length-2];u[u.length-2]=M;break;case 48:B.push(boxValue(u.pop()));break;case 64:u.push(createFunction(w[I.index],B.topScope(),!0));break;case 65:popManyInto(u,I.argCount,y);M=u.pop();u[u.length-1]=u[u.length-1].apply(M,y);break;case 66:popManyInto(u,I.argCount,y);u[u.length-1]=construct(u[u.length-1],y);break;case 71:return;
case 72:return d.returnType?asCoerceByMultiname(z,d.returnType,u.pop()):u.pop();case 73:popManyInto(u,I.argCount,y);M=u.pop();f.object.baseClass.instanceConstructorNoInitialize.apply(M,y);break;case 74:popManyInto(u,I.argCount,y);b(u,v[I.index],D);M=boxValue(u[u.length-1]);M=M.asConstructProperty(D.namespaces,D.name,D.flags,y);u[u.length-1]=M;break;case 75:notImplemented();break;case 76:case 70:case 79:popManyInto(u,I.argCount,y);b(u,v[I.index],D);S=boxValue(u.pop()).asCallProperty(D.namespaces,D.name,
D.flags,76===J,y);79!==J&&u.push(S);break;case 69:case 78:popManyInto(u,I.argCount,y);b(u,v[I.index],D);S=u.pop().asCallSuper(f,D.namespaces,D.name,D.flags,y);78!==J&&u.push(S);break;case 83:popManyInto(u,I.argCount,y);u[u.length-1]=applyType(z,u[u.length-1],y);break;case 85:M={};for(E=0;E<I.argCount;E++)F=u.pop(),M[Multiname.getPublicQualifiedName(u.pop())]=F;u.push(M);break;case 86:M=[];popManyInto(u,I.argCount,y);M.push.apply(M,y);u.push(M);break;case 87:!0;u.push(createActivation(d));break;case 88:u[u.length-
1]=createClass(l.classes[I.index],u[u.length-1],B.topScope());break;case 89:b(u,v[I.index],D);u.push(getDescendants(u.pop(),D));break;case 90:!0;u.push(A[I.index].scopeObject);break;case 94:case 93:b(u,v[I.index],D);u.push(B.topScope().findScopeProperty(D.namespaces,D.name,D.flags,z,93===J));break;case 96:R=v[I.index];M=B.topScope().findScopeProperty(R.namespaces,R.name,R.flags,z,!0);u.push(M.asGetProperty(R.namespaces,R.name,R.flags));break;case 104:case 97:F=u.pop();b(u,v[I.index],D);boxValue(u.pop()).asSetProperty(D.namespaces,
D.name,D.flags,F);break;case 98:u.push(a[I.index]);break;case 99:a[I.index]=u.pop();break;case 100:u.push(f.global.object);break;case 101:u.push(B.get(I.index));break;case 102:b(u,v[I.index],D);u[u.length-1]=boxValue(u[u.length-1]).asGetProperty(D.namespaces,D.name,D.flags);break;case 106:b(u,v[I.index],D);u[u.length-1]=boxValue(u[u.length-1]).asDeleteProperty(D.namespaces,D.name,D.flags);break;case 108:u[u.length-1]=asGetSlot(u[u.length-1],I.index);break;case 109:F=u.pop();M=u.pop();asSetSlot(M,
I.index,F);break;case 112:u[u.length-1]+="";break;case 131:case 115:u[u.length-1]|=0;break;case 136:case 116:u[u.length-1]>>>=0;break;case 132:case 117:u[u.length-1]=+u[u.length-1];break;case 129:case 118:u[u.length-1]=!!u[u.length-1];break;case 120:u[u.length-1]=checkFilter(u[u.length-1]);break;case 128:u[u.length-1]=asCoerce(z.getType(v[I.index]),u[u.length-1]);break;case 130:break;case 133:u[u.length-1]=asCoerceString(u[u.length-1]);break;case 135:u[u.length-2]=asAsType(u.pop(),u[u.length-1]);
break;case 137:M=u[u.length-1];u[u.length-1]=void 0==M?null:M;break;case 144:u[u.length-1]=-u[u.length-1];break;case 145:++u[u.length-1];break;case 146:++a[I.index];break;case 147:--u[u.length-1];break;case 148:--a[I.index];break;case 149:u[u.length-1]=asTypeOf(u[u.length-1]);break;case 150:u[u.length-1]=!u[u.length-1];break;case 151:u[u.length-1]=~u[u.length-1];break;case 160:u[u.length-2]=asAdd(u[u.length-2],u.pop());break;case 161:u[u.length-2]-=u.pop();break;case 162:u[u.length-2]*=u.pop();break;
case 163:u[u.length-2]/=u.pop();break;case 164:u[u.length-2]%=u.pop();break;case 165:u[u.length-2]<<=u.pop();break;case 166:u[u.length-2]>>=u.pop();break;case 167:u[u.length-2]>>>=u.pop();break;case 168:u[u.length-2]&=u.pop();break;case 169:u[u.length-2]|=u.pop();break;case 170:u[u.length-2]^=u.pop();break;case 171:u[u.length-2]=u[u.length-2]==u.pop();break;case 172:u[u.length-2]=u[u.length-2]===u.pop();break;case 173:u[u.length-2]=u[u.length-2]<u.pop();break;case 174:u[u.length-2]=u[u.length-2]<=
u.pop();break;case 175:u[u.length-2]=u[u.length-2]>u.pop();break;case 176:u[u.length-2]=u[u.length-2]>=u.pop();break;case 177:u[u.length-2]=asIsInstanceOf(u.pop(),u[u.length-1]);break;case 178:u[u.length-1]=asIsType(z.getType(v[I.index]),u[u.length-1]);break;case 179:u[u.length-2]=asIsType(u.pop(),u[u.length-1]);break;case 180:u[u.length-2]=boxValue(u.pop()).asHasProperty(null,u[u.length-1]);break;case 192:u[u.length-1]=(u[u.length-1]|0)+1;break;case 193:u[u.length-1]=(u[u.length-1]|0)-1;break;case 194:a[I.index]=
(a[I.index]|0)+1;break;case 195:a[I.index]=(a[I.index]|0)-1;break;case 196:u[u.length-1]=~u[u.length-1];break;case 197:u[u.length-2]=u[u.length-2]+u.pop()|0;break;case 198:u[u.length-2]=u[u.length-2]-u.pop()|0;break;case 199:u[u.length-2]=u[u.length-2]*u.pop()|0;break;case 208:case 209:case 210:case 211:u.push(a[J-208]);break;case 212:case 213:case 214:case 215:a[J-OP_setlocal0]=u.pop();break;case 239:case 240:case 241:break;default:notImplemented(opcodeName(J))}C++}catch(N){if(1>A.length)throw N;
for(var N=translateError(z,N),E=0,P=A.length;E<P;E++){var U=A[E];if(C>=U.start&&C<=U.end&&(!U.typeName||z.getType(U.typeName).isInstance(N))){u.length=0;u.push(N);B.clear();C=U.offset;continue a}}throw N;}}};return a}()),AVM2=function(){function a(a,e,d,f){this.systemDomain=new ApplicationDomain(this,null,a,!0);this.applicationDomain=new ApplicationDomain(this,this.systemDomain,e,!1);this.findDefiningAbc=d;this.loadAVM1=f;this.isAVM1Loaded=!1;this.exception={value:void 0}}a.currentDomain=function(){for(var a=
arguments.callee,e,d=0;20>d&&a;d++){var f=a.methodInfo;if(f){e=f.abc.applicationDomain;break}a=a.caller}return e};a.callStack=[];a.getStackTrace=function(){return a.callStack.slice().reverse().map(function(a){var e="";a.method&&(a.method.holder&&(e+=a.method.holder+" "),e+=a.method+":");return e+a.bc.originalPosition}).join("\n")};a.currentVM=function(){return a.stack.top().domain.system.vm};a.isRunning=function(){return 0!==a.stack.length};a.prototype={notifyConstruct:function(){}};return a}(),playerGlobalNames=
{},playerGlobalScripts={};
(function(){for(var a=[{name:"Object",offset:0,length:53432,defs:"Object Class Function Namespace Boolean Number int uint String Array AS3 bugzilla decodeURI decodeURIComponent encodeURI encodeURIComponent isNaN isFinite parseInt parseFloat escape unescape isXMLName NaN Infinity undefined __AS3__.vec:Vector __AS3__.vec:Vector$object __AS3__.vec:Vector$int __AS3__.vec:Vector$uint __AS3__.vec:Vector$double avmplus:describeTypeJSON avmplus:extendsXml avmplus:implementsXml avmplus:constructorXml avmplus:constantXml avmplus:variableXml avmplus:accessorXml avmplus:methodXml avmplus:parameterXml avmplus:metadataXml avmplus:argXml avmplus:typeXml avmplus:factoryXml avmplus:describeParams avmplus:describeMetadata avmplus:finish avmplus:describeTraits avmplus:HIDE_NSURI_METHODS avmplus:INCLUDE_BASES avmplus:INCLUDE_INTERFACES avmplus:INCLUDE_VARIABLES avmplus:INCLUDE_ACCESSORS avmplus:INCLUDE_METHODS avmplus:INCLUDE_METADATA avmplus:INCLUDE_CONSTRUCTOR avmplus:INCLUDE_TRAITS avmplus:USE_ITRAITS avmplus:HIDE_OBJECT avmplus:FLASH10_FLAGS avmplus:describeType avmplus:getQualifiedClassName avmplus:getQualifiedSuperclassName".split(" ")},{name:"flash/xml/XMLTag",
offset:53432,length:859,defs:["flash.xml:XMLTag"]},{name:"flash/net/NetStreamInfo",offset:54291,length:5307,defs:["flash.net:NetStreamInfo"]},{name:"flash/sampler/StackFrame",offset:59598,length:4475,defs:"flash.sampler:StackFrame flash.sampler:Sample flash.sampler:NewObjectSample flash.sampler:DeleteObjectSample flash.sampler:clearSamples flash.sampler:startSampling flash.sampler:stopSampling flash.sampler:pauseSampling flash.sampler:sampleInternalAllocs flash.sampler:setSamplerCallback flash.sampler:_setSamplerCallback flash.sampler:getSize flash.sampler:getMemberNames flash.sampler:getSamples flash.sampler:_getSamples flash.sampler:getSampleCount flash.sampler:getInvocationCount flash.sampler:getSetterInvocationCount flash.sampler:getGetterInvocationCount flash.sampler:_getInvocationCount flash.sampler:isGetterSetter flash.sampler:getLexicalScopes flash.sampler:getSavedThis flash.sampler:getMasterString flash.sampler:ClassFactory".split(" ")},
{name:"flash/display3D/Context3DBlendFactor",offset:64073,length:1101,defs:["flash.display3D:Context3DBlendFactor"]},{name:"flash/net/registerClassAlias",offset:65174,length:429,defs:["flash.net:registerClassAlias","flash.net:getClassByAlias"]},{name:"flash/display3D/Context3DStencilAction",offset:65603,length:896,defs:["flash.display3D:Context3DStencilAction"]},{name:"flash/text/engine/CFFHinting",offset:66499,length:504,defs:["flash.text.engine:CFFHinting"]},{name:"flash/display/IDrawCommand",offset:67003,
length:280,defs:["flash.display:IDrawCommand"]},{name:"flash/net/Responder",offset:67283,length:600,defs:["flash.net:Responder"]},{name:"flash/utils/IDataInput",offset:67883,length:2232,defs:["flash.utils:IDataInput"]},{name:"flash/utils/ObjectInput",offset:70115,length:1952,defs:["flash.utils:ObjectInput"]},{name:"flash/events/EventPhase",offset:72067,length:504,defs:["flash.events:EventPhase"]},{name:"flash/net/URLLoaderDataFormat",offset:72571,length:551,defs:["flash.net:URLLoaderDataFormat"]},
{name:"flash/net/IDynamicPropertyWriter",offset:73122,length:537,defs:["flash.net:IDynamicPropertyWriter"]},{name:"flash/geom/PerspectiveProjection",offset:73659,length:1312,defs:["flash.geom:PerspectiveProjection"]},{name:"flash/events/IEventDispatcher",offset:74971,length:1046,defs:["flash.events:IEventDispatcher"]},{name:"flash/events/EventDispatcher",offset:76017,length:3072,defs:["flash.events:EventDispatcher"]},{name:"flash/display/Stage3D",offset:79089,length:1225,defs:["flash.display:Stage3D"]},
{name:"flash/sensors/Geolocation",offset:80314,length:932,defs:["flash.sensors:Geolocation"]},{name:"Error",offset:81246,length:5961,defs:"Error DefinitionError EvalError RangeError ReferenceError SecurityError SyntaxError TypeError URIError VerifyError UninitializedError ArgumentError flash.errors:IOError flash.errors:EOFError flash.errors:MemoryError flash.errors:IllegalOperationError".split(" ")},{name:"flash/text/engine/ContentElement",offset:87207,length:1868,defs:["flash.text.engine:ContentElement"]},
{name:"flash/text/engine/TextElement",offset:89075,length:954,defs:["flash.text.engine:TextElement"]},{name:"flash/concurrent/Mutex",offset:90029,length:2484,defs:["flash.concurrent:Mutex","flash.concurrent:Condition","avm2.intrinsics.memory:mfence","avm2.intrinsics.memory:casi32"]},{name:"flash/display/NativeMenu",offset:92513,length:604,defs:["flash.display:NativeMenu"]},{name:"flash/ui/ContextMenu",offset:93117,length:2359,defs:["flash.ui:ContextMenu"]},{name:"flash/net/drm/DRMManagerSession",
offset:95476,length:20509,defs:"flash.net.drm:DRMManagerSession flash.net.drm:DRMAuthenticationContext flash.net.drm:DRMPlaybackTimeWindow flash.net.drm:DRMVoucher flash.net.drm:DRMVoucherDownloadContext flash.net.drm:DRMVoucherStoreContext flash.net.drm:DRMManager flash.net.drm:DRMModuleCycleProvider flash.net.drm:DRMURLDownloadContext".split(" ")},{name:"flash/display/IBitmapDrawable",offset:115985,length:281,defs:["flash.display:IBitmapDrawable"]},{name:"flash/display/DisplayObject",offset:116266,
length:5912,defs:["flash.display:DisplayObject"]},{name:"flash/display/Bitmap",offset:122178,length:1149,defs:["flash.display:Bitmap"]},{name:"flash/globalization/DateTimeFormatter",offset:123327,length:2422,defs:["flash.globalization:DateTimeFormatter"]},{name:"flash/media/VideoStatus",offset:125749,length:545,defs:["flash.media:VideoStatus"]},{name:"flash/system/fscommand",offset:126294,length:632,defs:["flash.system:fscommand","flash.system:FSCommand"]},{name:"adobe/utils/MMExecute",offset:126926,
length:436,defs:["adobe.utils:MMExecute","adobe.utils:MMEndCommand"]},{name:"flash/external/ExternalInterface",offset:127362,length:7206,defs:["flash.external:ExternalInterface"]},{name:"flash/security/CertificateStatus",offset:134568,length:939,defs:["flash.security:CertificateStatus"]},{name:"flash/system/Security",offset:135507,length:2365,defs:["flash.system:Security"]},{name:"flash/events/Event",offset:137872,length:4511,defs:["flash.events:Event"]},{name:"flash/events/KeyboardEvent",offset:142383,
length:2329,defs:["flash.events:KeyboardEvent"]},{name:"flash/net/navigateToURL",offset:144712,length:392,defs:["flash.net:navigateToURL","flash.net:sendToURL"]},{name:"flash/events/SoftKeyboardTrigger",offset:145104,length:562,defs:["flash.events:SoftKeyboardTrigger"]},{name:"flash/display3D/Context3DRenderMode",offset:145666,length:534,defs:["flash.display3D:Context3DRenderMode"]},{name:"flash/ui/GameInputControl",offset:146200,length:1234,defs:["flash.ui:GameInputControl"]},{name:"flash/geom/Matrix",
offset:147434,length:4980,defs:["flash.geom:Matrix"]},{name:"flash/events/ThrottleType",offset:152414,length:534,defs:["flash.events:ThrottleType"]},{name:"flash/text/TextInteractionMode",offset:152948,length:526,defs:["flash.text:TextInteractionMode"]},{name:"flash/filters/DisplacementMapFilterMode",offset:153474,length:636,defs:["flash.filters:DisplacementMapFilterMode"]},{name:"flash/geom/Rectangle",offset:154110,length:5057,defs:["flash.geom:Rectangle"]},{name:"flash/net/drm/AuthenticationMethod",
offset:159167,length:1246,defs:["flash.net.drm:AuthenticationMethod","flash.net.drm:LoadVoucherSetting","flash.net.drm:AddToDeviceGroupSetting"]},{name:"flash/utils/Timer",offset:160413,length:2134,defs:["flash.utils:Timer"]},{name:"flash/utils/SetIntervalTimer",offset:162547,length:1758,defs:["flash.utils:SetIntervalTimer","flash.utils:setInterval","flash.utils:setTimeout","flash.utils:clearInterval","flash.utils:clearTimeout"]},{name:"flash/text/engine/TextJustifier",offset:164305,length:1512,defs:["flash.text.engine:TextJustifier"]},
{name:"flash/media/Microphone",offset:165817,length:3070,defs:["flash.media:Microphone"]},{name:"flash/sensors/Accelerometer",offset:168887,length:958,defs:["flash.sensors:Accelerometer"]},{name:"flash/display3D/textures/TextureBase",offset:169845,length:622,defs:["flash.display3D.textures:TextureBase"]},{name:"flash/display3D/textures/Texture",offset:170467,length:1061,defs:["flash.display3D.textures:Texture"]},{name:"flash/net/drm/DRMDeviceGroup",offset:171528,length:1200,defs:["flash.net.drm:DRMDeviceGroup"]},
{name:"flash/display/InteractiveObject",offset:172728,length:4152,defs:["flash.display:InteractiveObject"]},{name:"flash/display/DisplayObjectContainer",offset:176880,length:2730,defs:["flash.display:DisplayObjectContainer"]},{name:"flash/display/FocusDirection",offset:179610,length:11058,defs:["flash.display:FocusDirection","flash.display:Stage"]},{name:"flash/events/UncaughtErrorEvents",offset:190668,length:573,defs:["flash.events:UncaughtErrorEvents"]},{name:"flash/display/IGraphicsData",offset:191241,
length:289,defs:["flash.display:IGraphicsData"]},{name:"flash/display/IGraphicsFill",offset:191530,length:289,defs:["flash.display:IGraphicsFill"]},{name:"flash/display/GraphicsEndFill",offset:191819,length:485,defs:["flash.display:GraphicsEndFill"]},{name:"flash/accessibility/Accessibility",offset:192304,length:842,defs:["flash.accessibility:Accessibility"]},{name:"flash/text/GridFitType",offset:193146,length:503,defs:["flash.text:GridFitType"]},{name:"flash/globalization/CollatorMode",offset:193649,
length:517,defs:["flash.globalization:CollatorMode"]},{name:"adobe/utils/CustomActions",offset:194166,length:799,defs:["adobe.utils:CustomActions"]},{name:"flash/errors/StackOverflowError",offset:194965,length:1011,defs:["flash.errors:StackOverflowError","flash.errors:ScriptTimeoutError","flash.errors:InvalidSWFError"]},{name:"flash/media/VideoCodec",offset:195976,length:510,defs:["flash.media:VideoCodec"]},{name:"flash/geom/Point",offset:196486,length:2138,defs:["flash.geom:Point"]},{name:"flash/ui/Mouse",
offset:198624,length:996,defs:["flash.ui:Mouse"]},{name:"flash/xml/XMLParser",offset:199620,length:619,defs:["flash.xml:XMLParser"]},{name:"flash/net/NetGroupInfo",offset:200239,length:2622,defs:["flash.net:NetGroupInfo"]},{name:"flash/display/ShaderJob",offset:202861,length:1486,defs:["flash.display:ShaderJob"]},{name:"flash/text/FontStyle",offset:204347,length:547,defs:["flash.text:FontStyle"]},{name:"flash/accessibility/ISearchableText",offset:204894,length:479,defs:["flash.accessibility:ISearchableText"]},
{name:"flash/display/GraphicsShaderFill",offset:205373,length:648,defs:["flash.display:GraphicsShaderFill"]},{name:"flash/net/NetStream",offset:206021,length:12820,defs:["flash.net:NetStream"]},{name:"flash/printing/PrintJobOptions",offset:218841,length:520,defs:["flash.printing:PrintJobOptions"]},{name:"flash/net/FileReference",offset:219361,length:3031,defs:["flash.net:FileReference"]},{name:"flash/display/StageQuality",offset:222392,length:777,defs:["flash.display:StageQuality"]},{name:"flash/geom/Transform",
offset:223169,length:1655,defs:["flash.geom:Transform"]},{name:"flash/accessibility/AccessibilityProperties",offset:224824,length:783,defs:["flash.accessibility:AccessibilityProperties"]},{name:"flash/filters/BitmapFilter",offset:225607,length:554,defs:["flash.filters:BitmapFilter"]},{name:"flash/filters/DropShadowFilter",offset:226161,length:2578,defs:["flash.filters:DropShadowFilter"]},{name:"flash/system/ApplicationInstaller",offset:228739,length:1092,defs:["flash.system:ApplicationInstaller"]},
{name:"flash/display3D/Context3DVertexBufferFormat",offset:229831,length:725,defs:["flash.display3D:Context3DVertexBufferFormat"]},{name:"flash/globalization/DateTimeNameContext",offset:230556,length:561,defs:["flash.globalization:DateTimeNameContext"]},{name:"flash/display/GraphicsSolidFill",offset:231117,length:635,defs:["flash.display:GraphicsSolidFill"]},{name:"flash/display/ShaderParameterType",offset:231752,length:1144,defs:["flash.display:ShaderParameterType"]},{name:"flash/filters/GradientGlowFilter",
offset:232896,length:2661,defs:["flash.filters:GradientGlowFilter"]},{name:"JSON",offset:235557,length:2655,defs:["JSON","Walker"]},{name:"flash/system/SecurityDomain",offset:238212,length:813,defs:["flash.system:SecurityDomain"]},{name:"flash/net/IDynamicPropertyOutput",offset:239025,length:507,defs:["flash.net:IDynamicPropertyOutput"]},{name:"flash/net/DynamicPropertyOutput",offset:239532,length:695,defs:["flash.net:DynamicPropertyOutput"]},{name:"flash/media/SoundTransform",offset:240227,length:1599,
defs:["flash.media:SoundTransform"]},{name:"flash/text/engine/FontLookup",offset:241826,length:501,defs:["flash.text.engine:FontLookup"]},{name:"flash/display/MorphShape",offset:242327,length:526,defs:["flash.display:MorphShape"]},{name:"flash/net/LocalConnection",offset:242853,length:1613,defs:["flash.net:LocalConnection"]},{name:"flash/display3D/Program3D",offset:244466,length:707,defs:["flash.display3D:Program3D"]},{name:"flash/ui/MouseCursor",offset:245173,length:596,defs:["flash.ui:MouseCursor"]},
{name:"flash/events/TextEvent",offset:245769,length:1293,defs:["flash.events:TextEvent"]},{name:"flash/net/URLRequestHeader",offset:247062,length:542,defs:["flash.net:URLRequestHeader"]},{name:"flash/display/TriangleCulling",offset:247604,length:561,defs:["flash.display:TriangleCulling"]},{name:"flash/display/JPEGEncoderOptions",offset:248165,length:624,defs:["flash.display:JPEGEncoderOptions"]},{name:"flash/net/URLLoader",offset:248789,length:2592,defs:["flash.net:URLLoader"]},{name:"flash/accessibility/ISimpleTextSelection",
offset:251381,length:685,defs:["flash.accessibility:ISimpleTextSelection"]},{name:"flash/display/Sprite",offset:252066,length:1976,defs:["flash.display:Sprite"]},{name:"_3fa260287b70f9c2758634de100a49d54c3f5d3f6359cd77d07fc7f4a8ccecbd_flash_display_Sprite",offset:254042,length:1433,defs:["_3fa260287b70f9c2758634de100a49d54c3f5d3f6359cd77d07fc7f4a8ccecbd_flash_display_Sprite"]},{name:"flash/utils/IDataOutput",offset:255475,length:1976,defs:["flash.utils:IDataOutput"]},{name:"flash/net/Socket",offset:257451,
length:4914,defs:["flash.net:Socket"]},{name:"flash/net/SecureSocket",offset:262365,length:3247,defs:["flash.net:SecureSocket"]},{name:"flash/text/engine/TypographicCase",offset:265612,length:793,defs:["flash.text.engine:TypographicCase"]},{name:"flash/display/IGraphicsPath",offset:266405,length:289,defs:["flash.display:IGraphicsPath"]},{name:"flash/display/GraphicsTrianglePath",offset:266694,length:1240,defs:["flash.display:GraphicsTrianglePath"]},{name:"flash/display/PixelSnapping",offset:267934,
length:521,defs:["flash.display:PixelSnapping"]},{name:"flash/display3D/Context3DProgramType",offset:268455,length:543,defs:["flash.display3D:Context3DProgramType"]},{name:"flash/display/Shape",offset:268998,length:590,defs:["flash.display:Shape"]},{name:"flash/media/SoundMixer",offset:269588,length:1436,defs:["flash.media:SoundMixer"]},{name:"flash/filters/ConvolutionFilter",offset:271024,length:2284,defs:["flash.filters:ConvolutionFilter"]},{name:"flash/net/NetGroupReceiveMode",offset:273308,length:523,
defs:["flash.net:NetGroupReceiveMode"]},{name:"flash/events/DRMDeviceGroupEvent",offset:273831,length:1334,defs:["flash.events:DRMDeviceGroupEvent"]},{name:"flash/text/engine/TextLineCreationResult",offset:275165,length:689,defs:["flash.text.engine:TextLineCreationResult"]},{name:"flash/events/StatusEvent",offset:275854,length:1267,defs:["flash.events:StatusEvent"]},{name:"flash/display/ShaderData",offset:277121,length:672,defs:["flash.display:ShaderData"]},{name:"flash/system/WorkerState",offset:277793,
length:2870,defs:["flash.system:WorkerState","flash.system:Worker"]},{name:"flash/system/LoaderContext",offset:280663,length:1320,defs:["flash.system:LoaderContext"]},{name:"flash/system/JPEGLoaderContext",offset:281983,length:735,defs:["flash.system:JPEGLoaderContext"]},{name:"flash/debugger/enterDebugger",offset:282718,length:279,defs:["flash.debugger:enterDebugger"]},{name:"flash/ui/Multitouch",offset:282997,length:1121,defs:["flash.ui:Multitouch"]},{name:"Date",offset:284118,length:10379,defs:["Date"]},
{name:"flash/display/SWFVersion",offset:294497,length:864,defs:["flash.display:SWFVersion"]},{name:"flash/events/ProgressEvent",offset:295361,length:1435,defs:["flash.events:ProgressEvent"]},{name:"flash/media/scanHardware",offset:296796,length:2968,defs:["flash.media:scanHardware","flash.media:Camera"]},{name:"flash/text/engine/TextBaseline",offset:299764,length:832,defs:["flash.text.engine:TextBaseline"]},{name:"flash/text/AntiAliasType",offset:300596,length:474,defs:["flash.text:AntiAliasType"]},
{name:"flash/net/NetGroup",offset:301070,length:5049,defs:["flash.net:NetGroup"]},{name:"flash/events/ErrorEvent",offset:306119,length:1052,defs:["flash.events:ErrorEvent"]},{name:"flash/events/IOErrorEvent",offset:307171,length:1204,defs:["flash.events:IOErrorEvent"]},{name:"flash/utils/describeType",offset:308375,length:1393,defs:"flash.utils:describeType flash.utils:getAliasName flash.utils:getQualifiedClassName flash.utils:getDefinitionByName flash.utils:getQualifiedSuperclassName flash.utils:getTimer flash.utils:escapeMultiByte flash.utils:unescapeMultiByte trace watson".split(" ")},
{name:"flash/display/ColorCorrectionSupport",offset:309768,length:621,defs:["flash.display:ColorCorrectionSupport"]},{name:"flash/ui/MultitouchInputMode",offset:310389,length:573,defs:["flash.ui:MultitouchInputMode"]},{name:"flash/text/TextFormatAlign",offset:310962,length:658,defs:["flash.text:TextFormatAlign"]},{name:"flash/text/engine/Kerning",offset:311620,length:500,defs:["flash.text.engine:Kerning"]},{name:"flash/net/NetStreamAppendBytesAction",offset:312120,length:639,defs:["flash.net:NetStreamAppendBytesAction"]},
{name:"flash/display/IGraphicsStroke",offset:312759,length:297,defs:["flash.display:IGraphicsStroke"]},{name:"flash/net/NetGroupSendResult",offset:313056,length:560,defs:["flash.net:NetGroupSendResult"]},{name:"flash/display/LineScaleMode",offset:313616,length:582,defs:["flash.display:LineScaleMode"]},{name:"flash/events/AsyncErrorEvent",offset:314198,length:1076,defs:["flash.events:AsyncErrorEvent"]},{name:"flash/display/StageScaleMode",offset:315274,length:595,defs:["flash.display:StageScaleMode"]},
{name:"flash/ui/GameInput",offset:315869,length:835,defs:["flash.ui:GameInput"]},{name:"flash/filters/BitmapFilterQuality",offset:316704,length:535,defs:["flash.filters:BitmapFilterQuality"]},{name:"flash/profiler/profile",offset:317239,length:454,defs:["flash.profiler:profile","flash.profiler:showRedrawRegions"]},{name:"flash/display/BitmapData",offset:317693,length:4790,defs:["flash.display:BitmapData"]},{name:"flash/events/ShaderEvent",offset:322483,length:1669,defs:["flash.events:ShaderEvent"]},
{name:"flash/events/TimerEvent",offset:324152,length:1048,defs:["flash.events:TimerEvent"]},{name:"XML",offset:325200,length:12638,defs:["XML","XMLList","QName"]},{name:"flash/ui/GameInputHand",offset:337838,length:523,defs:["flash.ui:GameInputHand"]},{name:"Math",offset:338361,length:1672,defs:["Math"]},{name:"flash/events/DRMAuthenticateEvent",offset:340033,length:2108,defs:["flash.events:DRMAuthenticateEvent"]},{name:"flash/media/H264Level",offset:342141,length:1104,defs:["flash.media:H264Level"]},
{name:"flash/text/FontType",offset:343245,length:504,defs:["flash.text:FontType"]},{name:"flash/display/NativeMenuItem",offset:343749,length:787,defs:["flash.display:NativeMenuItem"]},{name:"flash/net/FileFilter",offset:344536,length:937,defs:["flash.net:FileFilter"]},{name:"flash/text/Font",offset:345473,length:845,defs:["flash.text:Font"]},{name:"flash/events/SampleDataEvent",offset:346318,length:1415,defs:["flash.events:SampleDataEvent"]},{name:"flash/utils/Endian",offset:347733,length:454,defs:["flash.utils:Endian"]},
{name:"flash/filters/BevelFilter",offset:348187,length:2674,defs:["flash.filters:BevelFilter"]},{name:"flash/net/SharedObject",offset:350861,length:3383,defs:["flash.net:SharedObject"]},{name:"flash/media/SoundLoaderContext",offset:354244,length:596,defs:["flash.media:SoundLoaderContext"]},{name:"flash/events/AccelerometerEvent",offset:354840,length:1946,defs:["flash.events:AccelerometerEvent"]},{name:"flash/display/ShaderParameter",offset:356786,length:845,defs:["flash.display:ShaderParameter"]},
{name:"flash/ui/ContextMenuClipboardItems",offset:357631,length:1879,defs:["flash.ui:ContextMenuClipboardItems"]},{name:"flash/media/SoundCodec",offset:359510,length:563,defs:["flash.media:SoundCodec"]},{name:"flash/events/DRMCustomProperties",offset:360073,length:2540,defs:["flash.events:DRMCustomProperties","flash.events:DRMStatusEvent"]},{name:"flash/automation/ActionGenerator",offset:362613,length:801,defs:["flash.automation:ActionGenerator"]},{name:"flash/text/TextFormat",offset:363414,length:3332,
defs:["flash.text:TextFormat"]},{name:"flash/events/NetStatusEvent",offset:366746,length:1085,defs:["flash.events:NetStatusEvent"]},{name:"flash/display/GraphicsBitmapFill",offset:367831,length:760,defs:["flash.display:GraphicsBitmapFill"]},{name:"flash/system/DomainMemoryWithStage3D",offset:368591,length:1743,defs:["flash.system:DomainMemoryWithStage3D"]},{name:"flash/system/MessageChannelState",offset:370334,length:2210,defs:["flash.system:MessageChannelState","flash.system:MessageChannel"]},{name:"RegExp",
offset:372544,length:1471,defs:["RegExp"]},{name:"flash/display/LoaderInfo",offset:374015,length:3881,defs:["flash.display:LoaderInfo"]},{name:"flash/text/TextDisplayMode",offset:377896,length:518,defs:["flash.text:TextDisplayMode"]},{name:"flash/net/URLRequestMethod",offset:378414,length:624,defs:["flash.net:URLRequestMethod"]},{name:"flash/display/Shader",offset:379038,length:961,defs:["flash.display:Shader"]},{name:"flash/events/NetDataEvent",offset:379999,length:1149,defs:["flash.events:NetDataEvent"]},
{name:"flash/system/ImageDecodingPolicy",offset:381148,length:539,defs:["flash.system:ImageDecodingPolicy"]},{name:"flash/display/GraphicsGradientFill",offset:381687,length:2224,defs:["flash.display:GraphicsGradientFill"]},{name:"flash/text/engine/TextLineMirrorRegion",offset:383911,length:1170,defs:["flash.text.engine:TextLineMirrorRegion"]},{name:"flash/display3D/IndexBuffer3D",offset:385081,length:921,defs:["flash.display3D:IndexBuffer3D"]},{name:"flash/events/IMEEvent",offset:386002,length:1303,
defs:["flash.events:IMEEvent"]},{name:"flash/text/engine/TextLine",offset:387305,length:5029,defs:["flash.text.engine:TextLine"]},{name:"flash/display3D/VertexBuffer3D",offset:392334,length:940,defs:["flash.display3D:VertexBuffer3D"]},{name:"flash/utils/CompressionAlgorithm",offset:393274,length:5295,defs:["flash.utils:CompressionAlgorithm","flash.utils:IDataInput2","flash.utils:IDataOutput2","flash.utils:ByteArray"]},{name:"flash/display/FrameLabel",offset:398569,length:871,defs:["flash.display:FrameLabel"]},
{name:"adobe/utils/ProductManager",offset:399440,length:2071,defs:["adobe.utils:ProductManager"]},{name:"flash/events/GameInputEvent",offset:401511,length:849,defs:["flash.events:GameInputEvent"]},{name:"flash/net/ObjectEncoding",offset:402360,length:794,defs:["flash.net:ObjectEncoding"]},{name:"flash/geom/Matrix3D",offset:403154,length:3313,defs:["flash.geom:Matrix3D"]},{name:"flash/media/H264Profile",offset:406467,length:474,defs:["flash.media:H264Profile"]},{name:"flash/display/Scene",offset:406941,
length:802,defs:["flash.display:Scene"]},{name:"flash/display3D/Context3DClearMask",offset:407743,length:611,defs:["flash.display3D:Context3DClearMask"]},{name:"flash/net/NetStreamMulticastInfo",offset:408354,length:5325,defs:["flash.net:NetStreamMulticastInfo"]},{name:"flash/globalization/LastOperationStatus",offset:413679,length:1671,defs:["flash.globalization:LastOperationStatus"]},{name:"flash/events/ActivityEvent",offset:415350,length:1099,defs:["flash.events:ActivityEvent"]},{name:"flash/net/NetConnection",
offset:416449,length:3692,defs:["flash.net:NetConnection"]},{name:"flash/events/VideoEvent",offset:420141,length:968,defs:["flash.events:VideoEvent"]},{name:"flash/filters/BitmapFilterType",offset:421109,length:535,defs:["flash.filters:BitmapFilterType"]},{name:"flash/display/SpreadMethod",offset:421644,length:519,defs:["flash.display:SpreadMethod"]},{name:"flash/text/TextField",offset:422163,length:10471,defs:["flash.text:TextField"]},{name:"flash/events/GestureEvent",offset:432634,length:2768,defs:["flash.events:GestureEvent"]},
{name:"flash/events/PressAndTapGestureEvent",offset:435402,length:2208,defs:["flash.events:PressAndTapGestureEvent"]},{name:"flash/media/SoundChannel",offset:437610,length:1031,defs:["flash.media:SoundChannel"]},{name:"flash/text/engine/EastAsianJustifier",offset:438641,length:1350,defs:["flash.text.engine:EastAsianJustifier"]},{name:"flash/accessibility/AccessibilityImplementation",offset:439991,length:2663,defs:["flash.accessibility:AccessibilityImplementation"]},{name:"flash/text/CSMSettings",
offset:442654,length:648,defs:["flash.text:CSMSettings"]},{name:"flash/net/drm/DRMContentData",offset:443302,length:2300,defs:["flash.net.drm:DRMContentData"]},{name:"flash/events/StageVideoAvailabilityEvent",offset:445602,length:890,defs:["flash.events:StageVideoAvailabilityEvent"]},{name:"flash/net/NetGroupSendMode",offset:446492,length:538,defs:["flash.net:NetGroupSendMode"]},{name:"flash/text/TextRun",offset:447030,length:569,defs:["flash.text:TextRun"]},{name:"flash/net/XMLSocket",offset:447599,
length:2766,defs:["flash.net:XMLSocket"]},{name:"flash/utils/Dictionary",offset:450365,length:722,defs:["flash.utils:Dictionary"]},{name:"flash/display3D/Context3DCompareMode",offset:451087,length:827,defs:["flash.display3D:Context3DCompareMode"]},{name:"flash/text/TextFieldAutoSize",offset:451914,length:578,defs:["flash.text:TextFieldAutoSize"]},{name:"flash/text/engine/GroupElement",offset:452492,length:1911,defs:["flash.text.engine:GroupElement"]},{name:"flash/automation/AutomationAction",offset:454403,
length:669,defs:["flash.automation:AutomationAction"]},{name:"flash/automation/KeyboardAutomationAction",offset:455072,length:992,defs:["flash.automation:KeyboardAutomationAction"]},{name:"flash/net/NetStreamPlayOptions",offset:456064,length:891,defs:["flash.net:NetStreamPlayOptions"]},{name:"flash/text/engine/ElementFormat",offset:456955,length:4281,defs:["flash.text.engine:ElementFormat"]},{name:"flash/filters/DisplacementMapFilter",offset:461236,length:2454,defs:["flash.filters:DisplacementMapFilter"]},
{name:"flash/globalization/CurrencyParseResult",offset:463690,length:936,defs:["flash.globalization:CurrencyParseResult"]},{name:"flash/display3D/Context3D",offset:464626,length:5441,defs:["flash.display3D:Context3D"]},{name:"flash/printing/PrintJob",offset:470067,length:2693,defs:["flash.printing:PrintJob"]},{name:"flash/xml/XMLNodeType",offset:472760,length:746,defs:["flash.xml:XMLNodeType"]},{name:"flash/events/TransformGestureEvent",offset:473506,length:2762,defs:["flash.events:TransformGestureEvent"]},
{name:"flash/net/GroupSpecifier",offset:476268,length:9817,defs:["flash.net:GroupSpecifier"]},{name:"flash/system/SecurityPanel",offset:486085,length:760,defs:["flash.system:SecurityPanel"]},{name:"flash/globalization/Collator",offset:486845,length:2251,defs:["flash.globalization:Collator"]},{name:"flash/display/Graphics",offset:489096,length:5565,defs:["flash.display:Graphics"]},{name:"flash/ui/ContextMenuItem",offset:494661,length:1400,defs:["flash.ui:ContextMenuItem"]},{name:"flash/net/FileReferenceList",
offset:496061,length:805,defs:["flash.net:FileReferenceList"]},{name:"flash/events/DataEvent",offset:496866,length:1126,defs:["flash.events:DataEvent"]},{name:"flash/ui/GameInputFinger",offset:497992,length:584,defs:["flash.ui:GameInputFinger"]},{name:"flash/geom/Utils3D",offset:498576,length:768,defs:["flash.geom:Utils3D"]},{name:"flash/text/TextColorType",offset:499344,length:476,defs:["flash.text:TextColorType"]},{name:"flash/ui/KeyLocation",offset:499820,length:574,defs:["flash.ui:KeyLocation"]},
{name:"flash/display/BitmapDataChannel",offset:500394,length:566,defs:["flash.display:BitmapDataChannel"]},{name:"flash/text/StaticText",offset:500960,length:616,defs:["flash.text:StaticText"]},{name:"flash/events/FocusEvent",offset:501576,length:2097,defs:["flash.events:FocusEvent"]},{name:"flash/display/BlendMode",offset:503673,length:1090,defs:["flash.display:BlendMode"]},{name:"flash/net/SharedObjectFlushStatus",offset:504763,length:531,defs:["flash.net:SharedObjectFlushStatus"]},{name:"flash/display/GraphicsPath",
offset:505294,length:2513,defs:["flash.display:GraphicsPath"]},{name:"flash/events/HTTPStatusEvent",offset:507807,length:1677,defs:["flash.events:HTTPStatusEvent"]},{name:"flash/geom/Orientation3D",offset:509484,length:560,defs:["flash.geom:Orientation3D"]},{name:"flash/text/engine/TextBlock",offset:510044,length:5617,defs:["flash.text.engine:TextBlock"]},{name:"flash/system/System",offset:515661,length:1753,defs:["flash.system:System"]},{name:"flash/filters/BlurFilter",offset:517414,length:1123,
defs:["flash.filters:BlurFilter"]},{name:"flash/media/StageVideoAvailability",offset:518537,length:556,defs:["flash.media:StageVideoAvailability"]},{name:"flash/system/Capabilities",offset:519093,length:3483,defs:["flash.system:Capabilities"]},{name:"flash/system/ApplicationDomain",offset:522576,length:1494,defs:["flash.system:ApplicationDomain"]},{name:"flash/display/StageAlign",offset:524070,length:716,defs:["flash.display:StageAlign"]},{name:"flash/text/TextFieldType",offset:524786,length:470,
defs:["flash.text:TextFieldType"]},{name:"flash/display/GraphicsStroke",offset:525256,length:2213,defs:["flash.display:GraphicsStroke"]},{name:"flash/utils/flash_proxy",offset:527469,length:1800,defs:["flash.utils:flash_proxy","flash.utils:Proxy"]},{name:"flash/globalization/DateTimeStyle",offset:529269,length:647,defs:["flash.globalization:DateTimeStyle"]},{name:"flash/events/DRMAuthenticationErrorEvent",offset:529916,length:1895,defs:["flash.events:DRMAuthenticationErrorEvent"]},{name:"flash/net/NetGroupReplicationStrategy",
offset:531811,length:591,defs:["flash.net:NetGroupReplicationStrategy"]},{name:"flash/events/NetFilterEvent",offset:532402,length:950,defs:["flash.events:NetFilterEvent"]},{name:"flash/geom/Vector3D",offset:533352,length:3920,defs:["flash.geom:Vector3D"]},{name:"flash/events/ThrottleEvent",offset:537272,length:1278,defs:["flash.events:ThrottleEvent"]},{name:"flash/globalization/LocaleID",offset:538550,length:1487,defs:["flash.globalization:LocaleID"]},{name:"flash/events/GesturePhase",offset:540037,
length:570,defs:["flash.events:GesturePhase"]},{name:"flash/globalization/DateTimeNameStyle",offset:540607,length:627,defs:["flash.globalization:DateTimeNameStyle"]},{name:"flash/automation/MouseAutomationAction",offset:541234,length:1829,defs:["flash.automation:MouseAutomationAction"]},{name:"flash/ui/GameInputControlType",offset:543063,length:738,defs:["flash.ui:GameInputControlType"]},{name:"flash/display3D/Context3DTextureFormat",offset:543801,length:631,defs:["flash.display3D:Context3DTextureFormat"]},
{name:"flash/ui/MouseCursorData",offset:544432,length:1004,defs:["flash.ui:MouseCursorData"]},{name:"flash/display/StageDisplayState",offset:545436,length:592,defs:["flash.display:StageDisplayState"]},{name:"flash/net/NetMonitor",offset:546028,length:655,defs:["flash.net:NetMonitor"]},{name:"flash/events/SyncEvent",offset:546683,length:1055,defs:["flash.events:SyncEvent"]},{name:"flash/globalization/NumberFormatter",offset:547738,length:3379,defs:["flash.globalization:NumberFormatter"]},{name:"flash/media/MicrophoneEnhancedOptions",
offset:551117,length:2019,defs:["flash.media:MicrophoneEnhancedOptions"]},{name:"flash/xml/XMLNode",offset:553136,length:4338,defs:["flash.xml:XMLNode"]},{name:"flash/trace/Trace",offset:557474,length:1014,defs:["flash.trace:Trace"]},{name:"flash/system/IMEConversionMode",offset:558488,length:793,defs:["flash.system:IMEConversionMode"]},{name:"flash/text/TextFormatDisplay",offset:559281,length:508,defs:["flash.text:TextFormatDisplay"]},{name:"flash/events/DRMErrorEvent",offset:559789,length:2017,
defs:["flash.events:DRMErrorEvent"]},{name:"flash/filters/ColorMatrixFilter",offset:561806,length:895,defs:["flash.filters:ColorMatrixFilter"]},{name:"flash/system/SystemUpdater",offset:562701,length:2410,defs:["flash.system:SystemUpdater","flash.system:SystemUpdaterType"]},{name:"flash/display/ActionScriptVersion",offset:565111,length:515,defs:["flash.display:ActionScriptVersion"]},{name:"flash/media/Video",offset:565626,length:1376,defs:["flash.media:Video"]},{name:"flash/desktop/ClipboardFormats",
offset:567002,length:8298,defs:["flash.desktop:ClipboardFormats","flash.desktop:ClipboardTransferMode","flash.desktop:Clipboard"]},{name:"flash/display/AVM1Movie",offset:575300,length:1865,defs:["flash.display:AVM1Movie"]},{name:"flash/filters/GradientBevelFilter",offset:577165,length:2694,defs:["flash.filters:GradientBevelFilter"]},{name:"flash/ui/ContextMenuBuiltInItems",offset:579859,length:2547,defs:["flash.ui:ContextMenuBuiltInItems"]},{name:"flash/text/engine/BreakOpportunity",offset:582406,
length:601,defs:["flash.text.engine:BreakOpportunity"]},{name:"flash/display/PNGEncoderOptions",offset:583007,length:627,defs:["flash.display:PNGEncoderOptions"]},{name:"flash/globalization/NationalDigitsType",offset:583634,length:1896,defs:["flash.globalization:NationalDigitsType"]},{name:"flash/text/TextExtent",offset:585530,length:695,defs:["flash.text:TextExtent"]},{name:"flash/text/engine/GraphicElement",offset:586225,length:1341,defs:["flash.text.engine:GraphicElement"]},{name:"flash/system/IME",
offset:587566,length:1381,defs:["flash.system:IME"]},{name:"flash/text/engine/FontMetrics",offset:588947,length:1075,defs:["flash.text.engine:FontMetrics"]},{name:"flash/security/X509Certificate",offset:590022,length:1735,defs:["flash.security:X509Certificate"]},{name:"flash/events/TouchEvent",offset:591757,length:5240,defs:["flash.events:TouchEvent"]},{name:"flash/text/engine/TextRotation",offset:596997,length:661,defs:["flash.text.engine:TextRotation"]},{name:"flash/display3D/Context3DProfile",
offset:597658,length:547,defs:["flash.display3D:Context3DProfile"]},{name:"flash/text/ime/IIMEClient",offset:598205,length:1802,defs:["flash.text.ime:IIMEClient"]},{name:"flash/display3D/Context3DTriangleFace",offset:600007,length:641,defs:["flash.display3D:Context3DTriangleFace"]},{name:"flash/events/MouseEvent",offset:600648,length:4905,defs:["flash.events:MouseEvent"]},{name:"flash/xml/XMLDocument",offset:605553,length:3522,defs:["flash.xml:XMLDocument"]},{name:"flash/text/engine/RenderingMode",
offset:609075,length:502,defs:["flash.text.engine:RenderingMode"]},{name:"flash/net/URLRequest",offset:609577,length:2169,defs:["flash.net:URLRequest"]},{name:"flash/automation/StageCapture",offset:611746,length:1555,defs:["flash.automation:StageCapture"]},{name:"flash/media/StageVideo",offset:613301,length:1641,defs:["flash.media:StageVideo"]},{name:"flash/events/DRMDeviceGroupErrorEvent",offset:614942,length:2201,defs:["flash.events:DRMDeviceGroupErrorEvent"]},{name:"flash/events/SoftKeyboardEvent",
offset:617143,length:1653,defs:["flash.events:SoftKeyboardEvent"]},{name:"flash/errors/DRMManagerError",offset:618796,length:874,defs:["flash.errors:DRMManagerError"]},{name:"flash/text/engine/FontPosture",offset:619670,length:494,defs:["flash.text.engine:FontPosture"]},{name:"flash/display/JointStyle",offset:620164,length:502,defs:["flash.display:JointStyle"]},{name:"flash/display/ShaderPrecision",offset:620666,length:502,defs:["flash.display:ShaderPrecision"]},{name:"flash/text/engine/LineJustification",
offset:621168,length:710,defs:["flash.text.engine:LineJustification"]},{name:"flash/globalization/StringTools",offset:621878,length:1250,defs:["flash.globalization:StringTools"]},{name:"flash/text/StyleSheet",offset:623128,length:3305,defs:["flash.text:StyleSheet"]},{name:"flash/display/ShaderInput",offset:626433,length:1038,defs:["flash.display:ShaderInput"]},{name:"flash/net/NetStreamPlayTransitions",offset:627471,length:848,defs:["flash.net:NetStreamPlayTransitions"]},{name:"flash/display/BitmapEncodingColorSpace",
offset:628319,length:688,defs:["flash.display:BitmapEncodingColorSpace"]},{name:"flash/display/InterpolationMethod",offset:629007,length:518,defs:["flash.display:InterpolationMethod"]},{name:"flash/media/ID3Info",offset:629525,length:541,defs:["flash.media:ID3Info"]},{name:"flash/system/TouchscreenType",offset:630066,length:549,defs:["flash.system:TouchscreenType"]},{name:"flash/events/DRMAuthenticationCompleteEvent",offset:630615,length:1774,defs:["flash.events:DRMAuthenticationCompleteEvent"]},
{name:"flash/events/SecurityErrorEvent",offset:632389,length:1045,defs:["flash.events:SecurityErrorEvent"]},{name:"flash/system/AuthorizedFeatures",offset:633434,length:1104,defs:["flash.system:AuthorizedFeatures"]},{name:"flash/media/Sound",offset:634538,length:2359,defs:["flash.media:Sound"]},{name:"flash/system/WorkerDomain",offset:636897,length:996,defs:["flash.system:WorkerDomain"]},{name:"flash/net/URLStream",offset:637893,length:2721,defs:["flash.net:URLStream"]},{name:"flash/events/OutputProgressEvent",
offset:640614,length:1459,defs:["flash.events:OutputProgressEvent"]},{name:"flash/display/SimpleButton",offset:642073,length:2124,defs:["flash.display:SimpleButton"]},{name:"flash/display/JPEGXREncoderOptions",offset:644197,length:760,defs:["flash.display:JPEGXREncoderOptions"]},{name:"flash/display/GradientType",offset:644957,length:472,defs:["flash.display:GradientType"]},{name:"flash/net/URLVariables",offset:645429,length:1584,defs:["flash.net:URLVariables"]},{name:"flash/globalization/CurrencyFormatter",
offset:647013,length:4010,defs:["flash.globalization:CurrencyFormatter"]},{name:"flash/printing/PrintJobOrientation",offset:651023,length:529,defs:["flash.printing:PrintJobOrientation"]},{name:"flash/crypto/generateRandomBytes",offset:651552,length:347,defs:["flash.crypto:generateRandomBytes"]},{name:"flash/events/NetMonitorEvent",offset:651899,length:1060,defs:["flash.events:NetMonitorEvent"]},{name:"flash/text/engine/TextLineValidity",offset:652959,length:638,defs:["flash.text.engine:TextLineValidity"]},
{name:"flash/text/TextSnapshot",offset:653597,length:1344,defs:["flash.text:TextSnapshot"]},{name:"flash/display/Loader",offset:654941,length:4198,defs:["flash.display:Loader"]},{name:"flash/events/FullScreenEvent",offset:659139,length:1328,defs:["flash.events:FullScreenEvent"]},{name:"flash/utils/ObjectOutput",offset:660467,length:1784,defs:["flash.utils:ObjectOutput"]},{name:"flash/utils/IExternalizable",offset:662251,length:577,defs:["flash.utils:IExternalizable"]},{name:"flash/text/engine/FontDescription",
offset:662828,length:2196,defs:["flash.text.engine:FontDescription"]},{name:"flash/globalization/NumberParseResult",offset:665024,length:1E3,defs:["flash.globalization:NumberParseResult"]},{name:"flash/automation/StageCaptureEvent",offset:666024,length:1310,defs:["flash.automation:StageCaptureEvent"]},{name:"flash/security/X500DistinguishedName",offset:667334,length:1215,defs:["flash.security:X500DistinguishedName"]},{name:"adobe/utils/XMLUI",offset:668549,length:662,defs:["adobe.utils:XMLUI"]},{name:"flash/display/ColorCorrection",
offset:669211,length:542,defs:["flash.display:ColorCorrection"]},{name:"flash/text/engine/LigatureLevel",offset:669753,length:652,defs:["flash.text.engine:LigatureLevel"]},{name:"flash/media/VideoStreamSettings",offset:670405,length:2164,defs:["flash.media:VideoStreamSettings"]},{name:"flash/media/H264VideoStreamSettings",offset:672569,length:1813,defs:["flash.media:H264VideoStreamSettings"]},{name:"flash/automation/Configuration",offset:674382,length:786,defs:["flash.automation:Configuration"]},
{name:"flash/text/engine/JustificationStyle",offset:675168,length:652,defs:["flash.text.engine:JustificationStyle"]},{name:"flash/ui/KeyboardType",offset:675820,length:532,defs:["flash.ui:KeyboardType"]},{name:"flash/display/CapsStyle",offset:676352,length:497,defs:["flash.display:CapsStyle"]},{name:"flash/text/ime/CompositionAttributeRange",offset:676849,length:753,defs:["flash.text.ime:CompositionAttributeRange"]},{name:"flash/text/engine/TabStop",offset:677602,length:1048,defs:["flash.text.engine:TabStop"]},
{name:"flash/text/engine/FontWeight",offset:678650,length:485,defs:["flash.text.engine:FontWeight"]},{name:"flash/ui/GameInputDevice",offset:679135,length:1552,defs:["flash.ui:GameInputDevice"]},{name:"flash/media/AudioDecoder",offset:680687,length:768,defs:["flash.media:AudioDecoder"]},{name:"flash/text/TextRenderer",offset:681455,length:1074,defs:["flash.text:TextRenderer"]},{name:"flash/events/StageVideoEvent",offset:682529,length:1341,defs:["flash.events:StageVideoEvent"]},{name:"flash/text/engine/DigitWidth",
offset:683870,length:553,defs:["flash.text.engine:DigitWidth"]},{name:"flash/geom/ColorTransform",offset:684423,length:1790,defs:["flash.geom:ColorTransform"]},{name:"flash/system/AuthorizedFeaturesLoader",offset:686213,length:969,defs:["flash.system:AuthorizedFeaturesLoader"]},{name:"flash/display/GraphicsPathWinding",offset:687182,length:539,defs:["flash.display:GraphicsPathWinding"]},{name:"flash/display/GraphicsPathCommand",offset:687721,length:744,defs:["flash.display:GraphicsPathCommand"]},
{name:"flash/text/engine/TabAlignment",offset:688465,length:588,defs:["flash.text.engine:TabAlignment"]},{name:"flash/profiler/Telemetry",offset:689053,length:1062,defs:["flash.profiler:Telemetry"]},{name:"flash/events/UncaughtErrorEvent",offset:690115,length:1159,defs:["flash.events:UncaughtErrorEvent"]},{name:"flash/text/engine/DigitCase",offset:691274,length:538,defs:["flash.text.engine:DigitCase"]},{name:"flash/filters/ShaderFilter",offset:691812,length:1919,defs:["flash.filters:ShaderFilter"]},
{name:"flash/events/GeolocationEvent",offset:693731,length:2920,defs:["flash.events:GeolocationEvent"]},{name:"flash/ui/Keyboard",offset:696651,length:17797,defs:["flash.ui:Keyboard"]},{name:"flash/media/MicrophoneEnhancedMode",offset:714448,length:708,defs:["flash.media:MicrophoneEnhancedMode"]},{name:"flash/filters/GlowFilter",offset:715156,length:1920,defs:["flash.filters:GlowFilter"]},{name:"flash/display/MovieClip",offset:717076,length:2591,defs:["flash.display:MovieClip"]},{name:"flash/text/engine/SpaceJustifier",
offset:719667,length:1661,defs:["flash.text.engine:SpaceJustifier"]},{name:"flash/net/drm/VoucherAccessInfo",offset:721328,length:1113,defs:["flash.net.drm:VoucherAccessInfo"]},{name:"flash/events/ContextMenuEvent",offset:722441,length:1822,defs:["flash.events:ContextMenuEvent"]},{name:"flash/display3D/textures/CubeTexture",offset:724263,length:1114,defs:["flash.display3D.textures:CubeTexture"]},{name:"flash/text/TextLineMetrics",offset:725377,length:732,defs:["flash.text:TextLineMetrics"]}],b=0;b<
a.length;b++){var e=a[b];playerGlobalScripts[e.name]=e;if("string"===typeof e.defs)playerGlobalNames[e.defs]=e.name;else for(var d=0;d<e.defs.length;d++)playerGlobalNames[e.defs[d]]=e.name}})();enableVerifier.value=!0;
var release=enableC4.value=!0,avm2Root=SHUMWAY_ROOT+"avm2/",builtinPath=avm2Root+"generated/builtin/builtin.abc",avm1Path=avm2Root+"generated/avm1lib/avm1lib.abc",playerGlobalPath=SHUMWAY_ROOT+"flash/playerglobal.abc",BinaryFileReader=function(){function a(a,e){this.url=a;this.responseType=e||"arraybuffer"}a.prototype={readAll:function(a,e){var d=this.url,f=new XMLHttpRequest;f.open("GET",this.url,!0);f.responseType=this.responseType;a&&(f.onprogress=function(d){a(f.response,d.loaded,d.total)});f.onreadystatechange=
function(){4===f.readyState&&(200!==f.status&&0!==f.status?(unexpected("Path: "+d+" not found."),e(null,f.statusText)):e(f.response))};f.send(null)},readAsync:function(a,e,d,f,g){var l=new XMLHttpRequest({mozSystem:!0}),m=this.url;l.open(this.method||"GET",m,!0);var p;try{l.responseType="moz-chunked-arraybuffer",p="moz-chunked-arraybuffer"!==l.responseType}catch(r){p=!0}p&&(l.responseType="arraybuffer");l.onprogress=function(d){p||a(new Uint8Array(l.response),{loaded:d.loaded,total:d.total})};l.onreadystatechange=
function(){2===l.readyState&&g&&g(m,l.status,l.getAllResponseHeaders());if(4===l.readyState){200!==l.status&&0!==l.status&&e(l.statusText);if(p){var r=l.response;a(new Uint8Array(r),{loaded:r.byteLength,total:r.byteLength})}f&&f()}else 2===l.readyState&&d&&d()};l.send(null)}};return a}(),libraryAbcs;function grabAbc(a){var b=libraryScripts[a];return b?new AbcFile(new Uint8Array(libraryAbcs,b.offset,b.length),a):null}
function findDefiningAbc(a){if(!avm2.builtinsLoaded)return null;for(var b,e=0;e<a.namespaces.length&&!(b=a.namespaces[e].originalURI+":"+a.name,b=playerGlobalNames[b]);e++);return b?grabAbc(b):null}var avm2,libraryScripts=playerGlobalScripts,libraryNames=playerGlobalNames;
function createAVM2(a,b,e,d,f,g){avm2=new AVM2(d,f,findDefiningAbc,function(a){(new BinaryFileReader(e)).readAll(null,function(b){m=new AbcFile(new Uint8Array(b),"avm1.abc");avm2.systemDomain.executeAbc(m);a()})});var l,m;(new BinaryFileReader(b)).readAll(null,function(b){libraryAbcs=b;(new BinaryFileReader(a)).readAll(null,function(a){l=new AbcFile(new Uint8Array(a),"builtin.abc");avm2.builtinsLoaded=!1;avm2.systemDomain.onMessage.register("classCreated",Stubs.onClassCreated);avm2.systemDomain.executeAbc(l);
avm2.builtinsLoaded=!0;console.info(JSON.stringify(Counter.toJSON()));console.timeEnd("Load AVM2");g(avm2)})})}
var MAX_SNAP_DRAW_SCALE_TO_CACHE=8,CACHE_SNAP_DRAW_AFTER=3,BitmapDefinition=function(){function a(a){this._bitmapData&&(this._bitmapData._changeNotificationTarget=null);if(this._bitmapData=a)this._bitmapData._changeNotificationTarget=this;a?(a=a._drawable,this._bbox={xMin:0,yMin:0,xMax:20*a.width,yMax:20*a.height}):this._bbox={xMin:0,yMin:0,xMax:0,yMax:0};this._drawableChanged();this._invalidateBounds();this._invalidateTransform()}return{__class__:"flash.display.Bitmap",draw:function(a,e,d){if(this._bitmapData){var f;
a.save();if("auto"===this._pixelSnapping||"always"===this._pixelSnapping){e=this._getConcatenatedTransform(null,!0);var g=Math.abs(Math.round(e.a)),l=Math.abs(Math.round(e.d));1<=g&&8>=g&&1<=l&&8>=l&&0.001>=Math.abs(Math.abs(e.a)/g-1)&&0.001>=Math.abs(Math.abs(e.d)/l-1)&&0.001>=Math.abs(e.b)&&0.001>=Math.abs(e.c)?1===g&&1===l?g=!0:(f=g+"x"+l,this._snapImageCache.size!==f&&(this._snapImageCache.size=f,this._snapImageCache.hits=0,this._snapImageCache.image=null),3===++this._snapImageCache.hits&&this._cacheSnapImage(f,
g,l),f=this._snapImageCache.image,g=!!f):g=!1;g&&a.setTransform(0>e.a?-1:1,0,0,0>e.d?-1:1,e.tx/20|0,e.ty/20|0)}d.setAlpha(a,!0);a.imageSmoothingEnabled=a.mozImageSmoothingEnabled=this._smoothing;a.drawImage(f||this._bitmapData._getDrawable(),0,0);a.imageSmoothingEnabled=a.mozImageSmoothingEnabled=!1;a.restore();traceRenderer.value&&frameWriter.writeLn("Bitmap.draw() snapping: "+this._pixelSnapping+", dimensions: "+this._bitmapData._drawable.width+" x "+this._bitmapData._drawable.height)}},_drawableChanged:function(){this._invalidate();
this._snapImageCache.image=null;this._snapImageCache.hints=0},_cacheSnapImage:function(a,e,d){Counter.count("Cache scaled image");var f=this._bitmapData._getDrawable(),g=document.createElement("canvas");g.width=e*f.width;g.height=d*f.height;e=g.getContext("2d");e.imageSmoothingEnabled=e.mozImageSmoothingEnabled=this._smoothing;e.drawImage(f,0,0,f.width,f.height,0,0,g.width,g.height);var l=this._snapImageCache,m=document.createElement("img");l._tmp=[g,m];"toBlob"in g?g.toBlob(function(d){l.size===
a&&(m.onload=function(){URL.revokeObjectURL(d);l.size===a&&(l.image=m)},m.src=URL.createObjectURL(d))}):(m.onload=function(){l.size===a&&(l.image=m)},m.src=g.toDataURL())},initialize:function(){},__glue__:{"native":{"static":{},instance:{ctor:function(b,e,d){this._pixelSnapping="never"===e||"always"===e?e:"auto";this._smoothing=!!d;this._snapImageCache={hits:0,size:"",image:null};!b&&this.symbol&&(e=this.symbol,b=new flash.display.BitmapData(e.width,e.height,!0,0),b._ctx.imageSmoothingEnabled=this._smoothing,
b._ctx.mozImageSmoothingEnabled=this._smoothing,b._ctx.drawImage(e.img,0,0),b._ctx.imageSmoothingEnabled=!1,b._ctx.mozImageSmoothingEnabled=!1);a.call(this,b||null)},pixelSnapping:{get:function(){return this._pixelSnapping},set:function(a){this._pixelSnapping=a}},smoothing:{get:function(){return this._smoothing},set:function(a){this._smoothing=a}},bitmapData:{get:function(){return this._bitmapData},set:a}}}}}}.call(this),CACHE_DRAWABLE_AFTER=10,BitmapDataDefinition=function(){function a(a,b,e,l,m,
p){255>p&&a.clearRect(b,e,l,m);0<p&&a.fillRect(b,e,l,m)}var b={__class__:"flash.display.BitmapData",initialize:function(){this._changeNotificationTarget=null;this._locked=!1;this._requested=0;this._cache=null;this.symbol&&(this._img=this.symbol.img,this._skipCopyToCanvas=this.symbol.skipCopyToCanvas)},_checkCanvas:function(){if(null===this._drawable)throw ArgumentError();},ctor:function(a,b,e,l){this._img?(a=this._img.naturalWidth||this._img.width,b=this._img.naturalHeight||this._img.height):(isNaN(a+
b)||0>=a||0>=b)&&throwError("ArgumentError",Errors.ArgumentError);this._transparent=void 0===e?!0:!!e;this._backgroundColor=void 0===l?4294967295:l;this._transparent||(this._backgroundColor|=4278190080);this._skipCopyToCanvas?this._drawable=this._img:(e=document.createElement("canvas"),this._ctx=e.getContext("2d"),e.width=a|0,e.height=b|0,this._drawable=e,(!this._transparent||!this._img&&this._backgroundColor)&&this.fillRect(new flash.geom.Rectangle(0,0,a|0,b|0),this._backgroundColor),this._img&&
this._ctx.drawImage(this._img,0,0))},dispose:function(){this._ctx=null;this._drawable.width=0;this._drawable.height=0;this._drawable=null},draw:function(a,b,e,l,m,p){this._checkCanvas();e=this._ctx;e.save();e.beginPath();m&&(0<m.width&&0<m.height)&&(e.rect(m.x,m.y,m.width,m.height),e.clip());b&&e.transform(b.a,b.b,b.c,b.d,b.tx,b.ty);e.globalCompositeOperation=getBlendModeName(l);e.imageSmoothingEnabled=e.mozImageSmoothingEnabled=!!p;flash.display.BitmapData.class.isInstanceOf(a)?e.drawImage(a._drawable,
0,0):(new RenderVisitor(a,e,null,!0)).startFragment(b);e.imageSmoothingEnabled=e.mozImageSmoothingEnabled=!1;e.restore();this._invalidate()},fillRect:function(b,e){this._checkCanvas();this._transparent||(e|=4278190080);var g=this._ctx;g.fillStyle=argbUintToStr(e);a(g,b.x,b.y,b.width,b.height,e>>>24&255);this._invalidate()},getPixel:function(a,b){this._checkCanvas();var e=this._ctx.getImageData(a,b,1,1).data;return dataToRGB(e)},getPixel32:function(a,b){this._checkCanvas();var e=this._ctx.getImageData(a,
b,1,1).data;return dataToARGB(e)},_invalidate:function(a){a&&somewhatImplemented("BitmapData._invalidate(changeRect)");this._locked||(this._changeNotificationTarget&&this._changeNotificationTarget._drawableChanged(),this._requested=0,this._cache=null)},_getDrawable:function(){if(this._img===this._drawable)return this._drawable;this._requested++;if(10<=this._requested){if(!this._cache){Counter.count("Cache drawable");var a=document.createElement("img");"toBlob"in this._drawable?this._drawable.toBlob(function(b){a.src=
URL.createObjectURL(b);a.onload=function(){URL.revokeObjectURL(b)}}):a.src=this._drawable.toDataURL();this._cache=a}if(0<this._cache.width)return this._cache}return this._drawable},setPixel:function(a,b,e){this.fillRect({x:a,y:b,width:1,height:1},e|4278190080);this._invalidate()},setPixel32:function(a,b,e){this.fillRect({x:a,y:b,width:1,height:1},e);this._invalidate()},copyPixels:function(a,b,e,l,m,p){l&&notImplemented("BitmapData.copyPixels w/ alpha");l=b.width;m=b.height;var r=b.x;b=b.y;var s=e.x;
e=e.y;p||this._ctx.clearRect(s,e,l,m);this._ctx.drawImage(a._drawable,r,b,l,m,s,e,l,m);this._invalidate()},lock:function(){this._locked=!0},unlock:function(a){this._locked=!1;this._invalidate(a)},clone:function(){this._checkCanvas();var a=new flash.display.BitmapData(this._drawable.width,this._drawable.height,!0,0);a._ctx.drawImage(this._drawable,0,0);return a},scroll:function(b,e){this._checkCanvas();this._ctx.draw(this._drawable,b,e);this._ctx.save();var g=this._img?0:this._backgroundColor;this._transparent||
(g|=4278190080);var l=g>>>24&255;this._ctx.fillStyle=argbUintToStr(g);var g=this._drawable.width,m=this._drawable.height;0<b?a(this._ctx,0,0,b,m,l):0>b&&a(this._ctx,g+b,0,-b,m,l);0<e?a(this._ctx,0,0,g,e,l):0>e&&a(this._ctx,m+e,g,-e,l);this._ctx.restore();this._invalidate()},get width(){return this._drawable.width},get height(){return this._drawable.height}},e=Object.getOwnPropertyDescriptor;b.__glue__={"native":{instance:{ctor:b.ctor,fillRect:b.fillRect,dispose:b.dispose,getPixel:b.getPixel,getPixel32:b.getPixel32,
setPixel:b.setPixel,setPixel32:b.setPixel32,copyPixels:b.copyPixels,lock:b.lock,unlock:b.unlock,draw:b.draw,clone:b.clone,scroll:b.scroll,width:e(b,"width"),height:e(b,"height")}}};return b}.call(this);function dataToRGB(a){return a[0]<<16|a[1]<<8|a[2]}function dataToARGB(a){return a[3]<<24|dataToRGB(a)}
var DisplayObjectDefinition=function(){var a,b=1,e={advanceFrame:!1,enterFrame:!0,constructChildren:!1,frameConstructed:!0,executeFrame:!1,exitFrame:!0,render:!0},d={x:0,y:0},f={__class__:"flash.display.DisplayObject",initialize:function(){var b=flash.display.BlendMode.class;this._alpha=1;this._animated=!1;this._bitmap=this._bbox=null;this._blendMode=b.NORMAL;this._bounds={xMin:0,xMax:0,yMin:0,yMax:0,invalid:!0};this._cacheAsBitmap=!1;this._children=[];this._clipDepth=null;this._currentTransform=
{a:1,b:0,c:0,d:1,tx:0,ty:0};this._concatenatedTransform={a:1,b:0,c:0,d:1,tx:0,ty:0,invalid:!0};this._graphics=this._cxform=this._current3DTransform=null;this._filters=[];this._loader=null;this._mouseChildren=!0;this._mouseOver=!1;this._mouseY=this._mouseX=0;this._opaqueBackground=this._name=null;this._owned=!1;this._parent=null;this._rotation=0;this._rotationCos=1;this._rotationSin=0;this._scale9Grid=null;this._scaleY=this._scaleX=1;this._stage=null;this._visible=!0;this._destroyed=this._wasCachedAsBitmap=
this._hidden=!1;this._scrollRect=this._maskedObject=null;this._invalid=!1;this._region=null;this._depth=this._index=this._level=-1;this._isContainer=!1;a=[b.NORMAL,b.NORMAL,b.LAYER,b.MULTIPLY,b.SCREEN,b.LIGHTEN,b.DARKEN,b.DIFFERENCE,b.ADD,b.SUBTRACT,b.INVERT,b.ALPHA,b.ERASE,b.OVERLAY,b.HARDLIGHT,b.SHADER];if(b=this.symbol){this._animated=b.animated||!1;this._bbox=b.bbox||null;this._blendMode=this._resolveBlendMode(b.blendMode);this._children=b.children||[];this._clipDepth=b.clipDepth||null;this._cxform=
b.cxform||null;this._loader=b.loader||null;this._name=b.name||null;this._owned=b.owned||!1;this._parent=b.parent||null;this._level=isNaN(b.level)?-1:b.level;this._index=isNaN(b.index)?-1:b.index;this._depth=isNaN(b.depth)?-1:b.depth;this._root=b.root||null;this._stage=b.stage||null;var d=b.scale9Grid;d&&(this._scale9Grid=new flash.geom.Rectangle(d.left,d.top,d.right-d.left,d.bottom-d.top));(b=b.currentTransform)&&this._setTransformMatrix(b,!1)}this._accessibilityProperties=null;var e=this;this._onBroadcastMessage=
function(a){e._listeners[a]&&e._dispatchEvent(a)}},_addEventListener:function(a,b,d,f){!1===e[a]?avm2.systemDomain.onMessage.register(a,b):(a in e&&!this._listeners[a]&&avm2.systemDomain.onMessage.register(a,this._onBroadcastMessage),this._addEventListenerImpl(a,b,d,f))},_removeEventListener:function(a,b,d){!1===e[a]?avm2.systemDomain.onMessage.unregister(a,b):(this._removeEventListenerImpl(a,b,d),a in e&&!this._listeners[a]&&avm2.systemDomain.onMessage.unregister(a,this._onBroadcastMessage))},_resolveBlendMode:function(b){return a[b]||
flash.display.BlendMode.class.NORMAL},_getConcatenatedTransform:function(a,b){var d=this._stage;if(this===this._stage)return b?this._concatenatedTransform:this._currentTransform;if(a===this._parent)return this._currentTransform;var e=null,f,g;for(f=this;f!==d;)f._concatenatedTransform.invalid&&(e=f),f===a&&(g=f._concatenatedTransform),f=f._parent;if(e)if(this._parent===d)e=this._concatenatedTransform,f=this._currentTransform,e.a=f.a,e.b=f.b,e.c=f.c,e.d=f.d,e.tx=f.tx,e.ty=f.ty;else{var v=[];for(f=
this;f!==e;)v.push(f),f=f._parent;var z=e;do{var A=z._parent,e=z._concatenatedTransform;f=z._currentTransform;A?A!==d&&(A=A._concatenatedTransform,e.a=f.a*A.a+f.b*A.c,e.b=f.a*A.b+f.b*A.d,e.c=f.c*A.a+f.d*A.c,e.d=f.d*A.d+f.c*A.b,e.tx=f.tx*A.a+A.tx+f.ty*A.c,e.ty=f.ty*A.d+A.ty+f.tx*A.b):(e.a=f.a,e.b=f.b,e.c=f.c,e.d=f.d,e.tx=f.tx,e.ty=f.ty);e.invalid=!1;f=v.pop();z=z._children;for(A=0;A<z.length;A++){var u=z[A];u!==f&&(u._concatenatedTransform.invalid=!0)}z=f}while(z)}else e=this._concatenatedTransform;
return a&&a!==this._stage?(f=g||a._getConcatenatedTransform(),d=1,v=g=0,z=1,u=A=0,f.b||f.c?(z=1/(f.a*f.d-f.b*f.c),d=f.d*z,g=-f.b*z,v=-f.c*z,z*=f.a,A=-(d*f.tx+v*f.ty),u=-(g*f.tx+z*f.ty)):(d=1/f.a,z=1/f.d,A=f.tx*-d,u=f.ty*-z),{a:d*e.a+v*e.b,b:g*e.a+z*e.b,c:d*e.c+v*e.d,d:g*e.c+z*e.d,tx:d*e.tx+v*e.ty+A,ty:g*e.tx+z*e.ty+u}):b&&d?(f=d._concatenatedTransform,{a:e.a*f.a,b:e.b*f.d,c:e.c*f.a,d:e.d*f.d,tx:e.tx*f.a+f.tx,ty:e.ty*f.d+f.ty}):e},_applyCurrentTransform:function(a){var b=this._getConcatenatedTransform(),
d=a.x,e=a.y;a.x=b.a*d+b.c*e+b.tx|0;a.y=b.d*e+b.b*d+b.ty|0},_applyConcatenatedInverseTransform:function(a){var b=this._getConcatenatedTransform(),d=1/(b.a*b.d-b.b*b.c),e=a.x-b.tx,f=a.y-b.ty;a.x=(b.d*e-b.c*f)*d|0;a.y=(b.a*f-b.b*e)*d|0},_hitTest:function(a,b,e,f,g){if(a){d.x=b;d.y=e;this._applyConcatenatedInverseTransform(d);g=this._getContentBounds();if(!(d.x>=g.xMin&&d.x<g.xMax&&d.y>=g.yMin&&d.y<g.yMax))return!1;if(!f||!this._graphics)return!0;if(this._graphics){a=this._graphics._paths;f=0;for(g=a.length;f<
g;f++){var w=a[f];if(w.isPointInPath(d.x,d.y))return!0;if(w.strokeStyle){var v=w._strokePath;v||(v=w.strokePath(w.drawingStyles),w._strokePath=v);if(v.isPointInPath(d.x,d.y))return!0}}}a=this._children;f=0;for(g=a.length;f<g;f++)if(w=a[f],w._hitTest&&w._hitTest(!0,b,e,!0))return!0;return!1}f=this.getBounds(this._stage);g=g.getBounds(g._stage);b=Math.max(f.xMin,g.xMin);e=Math.max(f.yMin,g.yMin);b=Math.min(f.xMax,g.xMax)-b;e=Math.min(f.yMax,g.yMax)-e;return 0<b&&0<e},_invalidate:function(){!this._invalid&&
this._stage&&this._stage._invalidateOnStage(this)},_invalidateBounds:function(){for(var a=this;a&&!a._bounds.invalid;)a._bounds.invalid=!0,a=a._parent},_invalidateTransform:function(){this._concatenatedTransform.invalid=!0;this._parent&&this._parent._invalidateBounds()},_setTransformMatrix:function(a,b){var d=a.a,e=a.b,f=a.c,g=a.d,v,z;b?(v=20*a.tx|0,z=20*a.ty|0):(v=a.tx,z=a.ty);var A=0!==d?Math.atan(e/d):0<e?Math.PI/2:-Math.PI/2;this._rotation=180*A/Math.PI;this._rotationCos=Math.cos(A);this._rotationSin=
Math.sin(A);A=Math.sqrt(d*d+e*e);this._scaleX=0<d?A:-A;A=Math.sqrt(g*g+f*f);this._scaleY=0<g?A:-A;A=this._currentTransform;A.a=d;A.b=e;A.c=f;A.d=g;A.tx=v;A.ty=z;this._invalidateTransform()},get accessibilityProperties(){return this._accessibilityProperties},set accessibilityProperties(a){this._accessibilityProperties=a},get alpha(){return this._alpha},set alpha(a){a!==this._alpha&&(this._invalidate(),this._alpha=a,this._animated=!1)},get blendMode(){return this._blendMode},set blendMode(b){0<=a.indexOf(b)?
this._blendMode=b:throwError("ArgumentError",Errors.InvalidEnumError,"blendMode");this._animated=!1},get cacheAsBitmap(){return this._cacheAsBitmap},set cacheAsBitmap(a){this._cacheAsBitmap=this._filters.length?!0:a;this._animated=!1},get filters(){return this._filters},set filters(a){a.length?(this._filters.length||(this._wasCachedAsBitmap=this._cacheAsBitmap),this._cacheAsBitmap=!0):this._cacheAsBitmap=this._wasCachedAsBitmap;this._filters=a;this._animated=!1},get height(){var a=this._getContentBounds(),
b=this._currentTransform;return Math.abs(b.b)*(a.xMax-a.xMin)+Math.abs(b.d)*(a.yMax-a.yMin)|0},set height(a){if(!(0>a)){var b=Math.abs(this._rotationCos),d=Math.abs(this._rotationSin),e=this._getContentBounds(),f=d*(e.xMax-e.xMin)+b*(e.yMax-e.yMin);f&&(this.scaleX=this.width/(b*(e.xMax-e.xMin)+d*(e.yMax-e.yMin)),this.scaleY=a/f)}},get loaderInfo(){return this._loader&&this._loader._contentLoaderInfo||this._parent.loaderInfo},get mask(){return this._mask},set mask(a){if(this._mask!==a){this._invalidate();
a&&a._maskedObject&&(a._maskedObject.mask=null);if(this._mask=a)a._maskedObject=this;this._animated=!1}},get name(){return this._name||(this._name="instance"+b++)},set name(a){this._name=a},get mouseX(){if(!this._stage)return 0;d.x=this._stage._mouseX;d.y=this._stage._mouseY;this._applyConcatenatedInverseTransform(d);return d.x},get mouseY(){if(!this._stage)return 0;d.x=this._stage._mouseX;d.y=this._stage._mouseY;this._applyConcatenatedInverseTransform(d);return d.y},get opaqueBackground(){return this._opaqueBackground},
set opaqueBackground(a){this._opaqueBackground=a;this._animated=!1},get parent(){return-1<this._index?this._parent:null},get root(){return this._stage&&this._stage._root},get rotation(){return this._rotation},set rotation(a){a%=360;180<a&&(a-=360);if(a!==this._rotation){this._invalidate();this._invalidateTransform();this._rotation=a;var b;switch(a){case 0:case 360:a=1;b=0;break;case 90:case -270:a=0;b=1;break;case 180:case -180:a=-1;b=0;break;case 270:case -90:a=0;b=-1;break;default:b=this._rotation/
180*Math.PI,a=Math.cos(b),b=Math.sin(b)}this._rotationCos=a;this._rotationSin=b;var d=this._currentTransform;d.a=a*this._scaleX;d.b=b*this._scaleX;d.c=-b*this._scaleY;d.d=a*this._scaleY;this._animated=!1}},get rotationX(){return 0},set rotationX(a){somewhatImplemented("DisplayObject.rotationX")},get rotationY(){return 0},set rotationY(a){somewhatImplemented("DisplayObject.rotationY")},get rotationZ(){return this.rotation},set rotationZ(a){this.rotation=a;somewhatImplemented("DisplayObject.rotationZ")},
get stage(){return this._stage},get scaleX(){return this._scaleX},set scaleX(a){if(a!==this._scaleX){this._invalidate();this._invalidateTransform();this._scaleX=a;var b=this._currentTransform;b.a=this._rotationCos*a;b.b=this._rotationSin*a;this._animated=!1}},get scaleY(){return this._scaleY},set scaleY(a){if(a!==this._scaleY){this._invalidate();this._invalidateTransform();this._scaleY=a;var b=this._currentTransform;b.c=-this._rotationSin*a;b.d=this._rotationCos*a;this._animated=!1}},get scaleZ(){return 1},
set scaleZ(a){somewhatImplemented("DisplayObject.scaleZ")},get scale9Grid(){return this._scale9Grid},set scale9Grid(a){somewhatImplemented("DisplayObject.scale9Grid");this._scale9Grid=a;this._animated=!1},get scrollRect(){return this._scrollRect},set scrollRect(a){somewhatImplemented("DisplayObject.scrollRect");this._scrollRect=a},get transform(){return new flash.geom.Transform(this)},set transform(a){var b=this.transform;b.colorTransform=a.colorTransform;a.matrix3D?b.matrix3D=a.matrix3D:b.matrix=
a.matrix},get visible(){return this._visible},set visible(a){a!==this._visible&&(this._invalidate(),this._visible=a,this._animated=!1)},get width(){var a=this._getContentBounds(),b=this._currentTransform;return Math.abs(b.a)*(a.xMax-a.xMin)+Math.abs(b.c)*(a.yMax-a.yMin)|0},set width(a){if(!(0>a)){var b=Math.abs(this._rotationCos),d=Math.abs(this._rotationSin),e=this._getContentBounds(),f=b*(e.xMax-e.xMin)+d*(e.yMax-e.yMin);f&&(this.scaleY=this.height/(d*(e.xMax-e.xMin)+b*(e.yMax-e.yMin)),this.scaleX=
a/f)}},get x(){return this._currentTransform.tx},set x(a){a!==this._currentTransform.tx&&(this._invalidate(),this._invalidateTransform(),this._currentTransform.tx=a,this._animated=!1)},get y(){return this._currentTransform.ty},set y(a){a!==this._currentTransform.ty&&(this._invalidate(),this._invalidateTransform(),this._currentTransform.ty=a,this._animated=!1)},get z(){return 0},set z(a){somewhatImplemented("DisplayObject.z")},_getContentBounds:function(){var a=this._bounds;if(a.invalid){var b=this._bbox,
d=Number.MAX_VALUE,e=Number.MIN_VALUE,f=Number.MAX_VALUE,g=Number.MIN_VALUE;if(b)d=b.xMin,e=b.xMax,f=b.yMin,g=b.yMax;else{for(var b=this._children,v=b.length,z=0;z<v;z++)var A=b[z].getBounds(this),u=A.xMin,B=A.yMin,y=A.xMax,A=A.yMax,d=Math.min(d,u,y),e=Math.max(e,u,y),f=Math.min(f,B,A),g=Math.max(g,B,A);this._graphics&&(A=this._graphics._getBounds(!0),A.xMin!==A.xMax&&A.yMin!==A.yMax&&(u=A.xMin,B=A.yMin,y=A.xMax,A=A.yMax,d=Math.min(d,u,y),e=Math.max(e,u,y),f=Math.min(f,B,A),g=Math.max(g,B,A)))}d===
Number.MAX_VALUE&&(d=e=f=g=0);a.xMin=d;a.xMax=e;a.yMin=f;a.yMax=g;a.invalid=!1}return a},_getRegion:function(a){var b=this._graphics?this._graphics._getBounds(!0):this._getContentBounds();return this._getTransformedRect(b,a)},getBounds:function(a){return this._getTransformedRect(this._getContentBounds(),a)},_getTransformedRect:function(a,b){if(!b||b===this)return a;var d=a.xMin,e=a.xMax,f=a.yMin,g=a.yMax;if(0===e-d||0===g-f)return{xMin:0,yMin:0,xMax:0,yMax:0};var v=this._getConcatenatedTransform(b),
z=v.a*d+v.c*f+v.tx|0,A=v.b*d+v.d*f+v.ty|0,u=v.a*e+v.c*f+v.tx|0,f=v.b*e+v.d*f+v.ty|0,B=v.a*e+v.c*g+v.tx|0,e=v.b*e+v.d*g+v.ty|0,y=v.a*d+v.c*g+v.tx|0,d=v.b*d+v.d*g+v.ty|0,g=0;z>u&&(g=z,z=u,u=g);B>y&&(g=B,B=y,y=g);A>f&&(g=A,A=f,f=g);e>d&&(g=e,e=d,d=g);return{xMin:z<B?z:B,yMin:A<e?A:e,xMax:u>y?u:y,yMax:f>d?f:d}},hitTestObject:function(a){return this._hitTest(!1,0,0,!1,a)},hitTestPoint:function(a,b,d){return this._hitTest(!0,a,b,d,null)},destroy:function(){this._destroyed||(this._destroyed=!0,this.cleanupBroadcastListeners())},
cleanupBroadcastListeners:function(){var a=this._listeners,b;for(b in a)avm2.systemDomain.onMessage.unregister(b,this._onBroadcastMessage)}},g=Object.getOwnPropertyDescriptor;f.__glue__={"native":{instance:{root:g(f,"root"),stage:g(f,"stage"),name:g(f,"name"),parent:g(f,"parent"),mask:g(f,"mask"),visible:g(f,"visible"),x:{get:function(){return this.x/20},set:function(a){this.x=20*a|0}},y:{get:function(){return this.y/20},set:function(a){this.y=20*a|0}},z:{get:function(){return this.z/20},set:function(a){this.z=
20*a|0}},scaleX:g(f,"scaleX"),scaleY:g(f,"scaleY"),scaleZ:g(f,"scaleZ"),mouseX:{get:function(){return this.mouseX/20},set:function(a){this.mouseX=20*a|0}},mouseY:{get:function(){return this.mouseY/20},set:function(a){this.mouseY=20*a|0}},rotation:g(f,"rotation"),rotationX:g(f,"rotationX"),rotationY:g(f,"rotationY"),rotationZ:g(f,"rotationZ"),alpha:g(f,"alpha"),width:{get:function(){return this.width/20},set:function(a){this.width=20*a|0}},height:{get:function(){return this.height/20},set:function(a){this.height=
20*a|0}},_hitTest:function(a,b,d,e,f){return this._hitTest(a,20*b|0,20*d|0,e,f)},cacheAsBitmap:g(f,"cacheAsBitmap"),opaqueBackground:g(f,"opaqueBackground"),scrollRect:g(f,"scrollRect"),filters:g(f,"filters"),blendMode:g(f,"blendMode"),transform:g(f,"transform"),scale9Grid:g(f,"scale9Grid"),loaderInfo:g(f,"loaderInfo"),accessibilityProperties:g(f,"accessibilityProperties"),globalToLocal:function(a){d.x=20*a.x|0;d.y=20*a.y|0;this._applyConcatenatedInverseTransform(d);return new flash.geom.Point(d.x/
20,d.y/20)},localToGlobal:function(a){d.x=20*a.x|0;d.y=20*a.y|0;this._applyCurrentTransform(d);return new flash.geom.Point(d.x/20,d.y/20)},getBounds:function(a){a=this.getBounds(a);return new flash.geom.Rectangle(a.xMin/20,a.yMin/20,(a.xMax-a.xMin)/20,(a.yMax-a.yMin)/20)},getRect:function(a){somewhatImplemented("DisplayObject.getRect");a=this.getBounds(a);return new flash.geom.Rectangle(a.xMin/20,a.yMin/20,(a.xMax-a.xMin)/20,(a.yMax-a.yMin)/20)}}}};return f}.call(this),DisplayObjectContainerDefinition=
function(){var a={get mouseChildren(){return this._mouseChildren},set mouseChildren(a){this._mouseChildren=a},get numChildren(){return this._children.length},get tabChildren(){return this._tabChildren},set tabChildren(a){this._tabChildren=a},get textSnapshot(){notImplemented()},addChild:function(a){return this.addChildAt(a,this._children.length)},addChildAt:function(b,d){b===this&&throwError("ArgumentError",Errors.CantAddSelfError);if(b._parent===this)return this.setChildIndex(b,d);var f=this._children;
(0>d||d>f.length)&&throwError("RangeError",Errors.ParamRangeError);-1<b._index&&(avm2.systemDomain.getClass("flash.display.Loader").isInstanceOf(b._parent)?a.removeChild.call(b._parent,b):b._parent.removeChild(b));if(!this._sparse)for(var g=f.length;g&&g>d;g--)f[g-1]._index++;f.splice(d,0,b);b._invalidateTransform();b._owned=!1;b._parent=this;b._stage=this._stage;b._index=d;b._dispatchEvent("added",void 0,!0);this._stage&&this._stage._addToStage(b);return b},areInaccessibleObjectsUnderPoint:function(){notImplemented()},
contains:function(a){return a._parent===this},getChildAt:function(a){var b=this._children;(0>a||a>b.length)&&throwError("RangeError",Errors.ParamRangeError);a=b[a];return!flash.display.DisplayObject.class.isInstanceOf(a)?null:a},getChildByName:function(a){for(var b=this._children,f=0,g=b.length;f<g;f++)if(b[f].name===a)return this.getChildAt(f);return null},getChildIndex:function(a){a._parent!==this&&throwError("ArgumentError",Errors.NotAChildError);return this._sparse?this._children.indexOf(a):a._index},
getObjectsUnderPoint:function(){notImplemented()},removeChild:function(a){a._parent!==this&&throwError("ArgumentError",Errors.NotAChildError);return this.removeChildAt(this.getChildIndex(a))},removeChildAt:function(a){var b=this._children;(0>a||a>=b.length)&&throwError("RangeError",Errors.ParamRangeError);var f=b[a];f._dispatchEvent("removed",void 0,!0);this._stage&&this._stage._removeFromStage(f);if(!this._sparse)for(var g=b.length;g&&g>a;g--)b[g-1]._index--;b.splice(a,1);f._invalidateTransform();
f._owned=!1;f._parent=null;f._index=-1;return f},setChildIndex:function(a,b){a._parent!==this&&throwError("ArgumentError",Errors.NotAChildError);var f=this.getChildIndex(a);if(f!==b){var g=this._children;(0>b||b>g.length)&&throwError("RangeError",Errors.ParamRangeError);g.splice(f,1);g.splice(b,0,a);if(!this._sparse)for(f=f<b?f:b;f<g.length;)g[f]._index=f++;a._owned=!1;a._invalidate();return a}},removeChildren:function(a,b){a=1>arguments.length?0:a|0;b=2>arguments.length?2147483647:b|0;var f=this._children.length;
(0>a||0>b||b<a)&&throwError("RangeError",Errors.ParamRangeError);if(0!==f){b>f-1&&(b=f-1);for(f=b-a+1;f--;)this.removeChildAt(a)}},swapChildren:function(a,b){(a._parent!==this||b._parent!==this)&&throwError("ArgumentError",Errors.NotAChildError);this.swapChildrenAt(this.getChildIndex(a),this.getChildIndex(b))},swapChildrenAt:function(a,b){var f=this._children,g=f.length;(0>a||a>g||0>b||b>g)&&throwError("RangeError",Errors.ParamRangeError);var g=f[a],l=f[b];f[a]=l;f[b]=g;g._index=b;l._index=a;g._owned=
!1;l._owned=!1;g._invalidate();l._invalidate()},destroy:function(){this._destroyed||(this._destroyed=!0,this._children.forEach(function(a){a.destroy&&a.destroy()}),this.cleanupBroadcastListeners())}},b=Object.getOwnPropertyDescriptor;a.initialize=function(){this._tabChildren=this._mouseChildren=!0;this._sparse=!1;this._isContainer=!0};a.__glue__={"native":{instance:{numChildren:b(a,"numChildren"),tabChildren:b(a,"tabChildren"),mouseChildren:b(a,"mouseChildren"),textSnapshot:b(a,"textSnapshot"),addChild:a.addChild,
addChildAt:a.addChildAt,removeChild:a.removeChild,removeChildAt:a.removeChildAt,getChildIndex:a.getChildIndex,setChildIndex:a.setChildIndex,getChildAt:a.getChildAt,getChildByName:a.getChildByName,contains:a.contains,swapChildrenAt:a.swapChildrenAt,swapChildren:a.swapChildren,removeChildren:a.removeChildren}}};return a}.call(this),FrameLabelDefinition=function(){return{__class__:"flash.display.FrameLabel",initialize:function(){},__glue__:{"native":{"static":{},instance:{ctor:function(a,b){this._name=
a;this._frame=b},name:{get:function(){return this._name}},frame:{get:function(){return this._frame}}}}}}}.call(this),GraphicsDefinition=function(){var a={__class__:"flash.display.Graphics",initialize:function(){this._paths=[];this.beginPath();this._bitmap=null;this._parent=0;this.strokeBbox=this.bbox=null},_invalidate:function(){this.strokeBbox=this.bbox=null;this._parent._stage&&this._parent._stage._invalidateOnStage(this._parent);this._parent._invalidateBounds()},beginPath:function(){var a=this._currentPath;
if(!a||!(0===a.commands.length||1===a.commands.length&&1===a.commands[0])){var e=this._currentPath=new ShapePath(null,null);this._paths.push(e);a&&(e.fillStyle=a.fillStyle,e.lineStyle=a.lineStyle,e.fillRule=a.fillRule)}},_drawPathObject:function(a){"flash.display.GraphicsPath"===a.__class__?this.drawPath(a.commands,a.data,a.winding):"flash.display.GraphicsTrianglePath"===a.__class__&&this.drawTriangles(a.vertices,a.indices,a.uvtData,a.culling)},draw:function(a,e,d,f){for(var g=this._paths,l=0;l<g.length;l++)g[l].draw(a,
e,d,f)},beginFill:function(a,e){void 0===e&&(e=1);this.beginPath();this._currentPath.fillStyle=e?{style:rgbIntAlphaToStr(a,e)}:null},beginGradientFill:function(a,e,d,f,g,l,m,p){a=createGradientStyle(a,e,d,f,g,l,m,p);this.beginPath();this._currentPath.fillStyle=a},beginBitmapFill:function(a,e,d,f){this.beginPath();this._currentPath.fillStyle=createPatternStyle(a,e,!1!==d,!!f)},clear:function(){this._invalidate();this._paths=[];this._currentPath=null;this.beginPath()},copyFrom:function(){notImplemented("Graphics#copyFrom")},
cubicCurveTo:function(a,e,d,f,g,l){this._invalidate();this._currentPath.cubicCurveTo(20*a|0,20*e|0,20*d|0,20*f|0,20*g|0,20*l|0)},curveTo:function(a,e,d,f){this._invalidate();this._currentPath.curveTo(20*a|0,20*e|0,20*d|0,20*f|0)},drawCircle:function(a,e,d){this._invalidate();this._currentPath.circle(20*a|0,20*e|0,20*d|0)},drawEllipse:function(a,e,d,f){this._invalidate();d=20*(d/2)|0;f=20*(f/2)|0;this._currentPath.ellipse(20*a|0+d,20*e|0+f,d,f)},drawPath:function(a,e,d){this._invalidate();this.beginPath();
this._currentPath.fillRule=d||"evenOdd";this._currentPath.commands=a;this._currentPath.data=e},drawRect:function(a,e,d,f){isNaN(d+f)&&throwError("ArgumentError",Errors.InvalidParamError);this._invalidate();this._currentPath.rect(20*a|0,20*e|0,20*d|0,20*f|0)},drawRoundRect:function(a,e,d,f,g,l){(isNaN(d+f+g)||void 0!==l&&isNaN(l))&&throwError("ArgumentError",Errors.InvalidParamError);this._invalidate();void 0===l&&(l=g);a=20*a|0;e=20*e|0;d=20*d|0;f=20*f|0;if(!l||!g)this._currentPath.rect(a,e,d,f);
else{g=20*(g/2)|0;l=20*(l/2)|0;var m=d/2|0,p=f/2|0;g>m&&(g=m);l>p&&(l=p);m===g&&p===l?g===l?this._currentPath.circle(a+g,e+l,g):this._currentPath.ellipse(a+g,e+l,g,l):(d=a+d,f=e+f,m=a+g,g=d-g,p=e+l,l=f-l,this._currentPath.moveTo(d,l),this._currentPath.curveTo(d,f,g,f),this._currentPath.lineTo(m,f),this._currentPath.curveTo(a,f,a,l),this._currentPath.lineTo(a,p),this._currentPath.curveTo(a,e,m,e),this._currentPath.lineTo(g,e),this._currentPath.curveTo(d,e,d,p),this._currentPath.lineTo(d,l))}},drawRoundRectComplex:function(a,
e,d,f,g,l,m,p){isNaN(d+f+g+l+m+p)&&throwError("ArgumentError",Errors.InvalidParamError);this._invalidate();a=20*a|0;e=20*e|0;d=20*d|0;f=20*f|0;if(!g&&!l&&!m&&!p)this._currentPath.rect(a,e,d,f);else{g=20*g|0;l=20*l|0;m=20*m|0;p=20*p|0;d=a+d;f=e+f;var r=a+g;this._currentPath.moveTo(d,f-p);this._currentPath.curveTo(d,f,d-p,f);this._currentPath.lineTo(a+m,f);this._currentPath.curveTo(a,f,a,f-m);this._currentPath.lineTo(a,e+g);this._currentPath.curveTo(a,e,r,e);this._currentPath.lineTo(d-l,e);this._currentPath.curveTo(d,
e,d,e+l);this._currentPath.lineTo(d,f-p)}},drawTriangles:function(){notImplemented("Graphics#drawTriangles")},endFill:function(){this.beginPath();this._currentPath.fillStyle=null},lineBitmapStyle:function(a,e,d,f){this.beginPath();this._currentPath.lineStyle=createPatternStyle(a,e,d,f)},lineGradientStyle:function(a,e,d,f,g,l,m,p){a=createGradientStyle(a,e,d,f,g,l,m,p);this.beginPath();this._currentPath.lineStyle=a},lineStyle:function(a,e,d,f,g,l,m,p){this.beginPath();a?(void 0===d&&(d=1),void 0===
p&&(p=3),this._currentPath.lineStyle={style:rgbIntAlphaToStr(e,d),lineCap:l||"round",lineJoin:l||"round",width:20*a|0,miterLimit:2*p}):this._currentPath.lineStyle=null},lineTo:function(a,e){this._invalidate();this._currentPath.lineTo(20*a|0,20*e|0)},moveTo:function(a,e){this._currentPath.moveTo(20*a|0,20*e|0)},_getBounds:function(a){var e;a&&this.strokeBbox?e=this.strokeBox:this.bbox&&(e=this.bbox);if(e)return e;if(this.bbox)return this.bbox;Counter.count("CACHE ME: Graphics._getBounds");e=this._paths;
for(var d=[],f=[],g=[],l=[],m=0,p=e.length;m<p;m++){var r=e[m];if(r.commands.length&&(r=r.getBounds(a)))d.push(r.xMin),f.push(r.yMin),g.push(r.xMax),l.push(r.yMax)}if(0===d.length)return 0;e={xMin:Math.min.apply(Math,d),yMin:Math.min.apply(Math,f),xMax:Math.max.apply(Math,g),yMax:Math.max.apply(Math,l)};a?this.strokeBbox=e:this.bbox=e;return e}};a.__glue__={"native":{instance:{beginFill:a.beginFill,beginGradientFill:a.beginGradientFill,beginBitmapFill:a.beginBitmapFill,beginFillObject:a.beginFillObject,
beginStrokeObject:a.beginStrokeObject,clear:a.clear,copyFrom:a.copyFrom,cubicCurveTo:a.cubicCurveTo,curveTo:a.curveTo,drawCircle:a.drawCircle,drawEllipse:a.drawEllipse,drawPath:a.drawPath,drawRect:a.drawRect,drawRoundRect:a.drawRoundRect,drawRoundRectComplex:a.drawRoundRectComplex,drawTriangles:a.drawTriangles,endFill:a.endFill,lineBitmapStyle:a.lineBitmapStyle,lineGradientStyle:a.lineGradientStyle,lineStyle:a.lineStyle,moveTo:a.moveTo,lineTo:a.lineTo}}};return a}.call(this);
function createPatternStyle(a,b,e,d){return{style:factoryCtx.createPattern(a._drawable,!1===e?"no-repeat":"repeat"),transform:b?{a:b.a,b:b.b,c:b.c,d:b.d,e:b.tx,f:b.ty}:{a:1,b:0,c:0,d:1,e:0,f:0},smooth:d}}
function createGradientStyle(a,b,e,d,f,g,l,m){null===a||void 0===a&&throwError("TypeError",Errors.NullPointerError,"type");null===b||void 0===a&&throwError("TypeError",Errors.NullPointerError,"colors");"linear"===a||"radial"===a||throwError("ArgumentError",Errors.InvalidEnumError,"type");g=[];l=0;for(var p=b.length;l<p;l++)g.push({ratio:d[l]/255,color:rgbIntAlphaToStr(b[l],e[l])});return{style:"linear"===a?buildLinearGradientFactory(g):buildRadialGradientFactory(m||0,g),transform:f?{a:819.2*f.a,b:819.2*
f.b,c:819.2*f.c,d:819.2*f.d,e:f.tx,f:f.ty}:{a:819.2,b:0,c:0,d:819.2,e:0,f:0}}}
var InteractiveObjectDefinition=function(){var a={initialize:function(){this._contextMenu=null;this._doubleClickEnabled=!1;this._focusRect=null;this._mouseEnabled=!0;this._tabEnabled=!1},get accessibilityImplementation(){return null},set accessibilityImplementation(a){somewhatImplemented("accessibilityImplementation")},get contextMenu(){somewhatImplemented("contextMenu");return this._contextMenu},set contextMenu(a){somewhatImplemented("contextMenu");this._contextMenu=a},get doubleClickEnabled(){return this._doubleClickEnabled},
set doubleClickEnabled(a){this._doubleClickEnabled=a},get focusRect(){return this._focusRect},set focusRect(a){this._focusRect=a},get mouseEnabled(){return this._mouseEnabled},set mouseEnabled(a){this._mouseEnabled=a},get needsSoftKeyboard(){return!1},set needsSoftKeyboard(a){notImplemented()},get softKeyboardInputAreaOfInterest(){return null},set softKeyboardInputAreaOfInterest(a){notImplemented()},get tabEnabled(){return this._tabEnabled},set tabEnabled(a){var b=this._tabEnabled;this._tabEnabled=
a;b!==a&&this._dispatchEvent(new flash.events.Event("tabEnabledChange",!1,!1))},requestSoftKeyboard:function(){notImplemented()}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{tabEnabled:b(a,"tabEnabled"),tabIndex:{get:function(){return this._tabIndex},set:function(a){this._tabIndex=a}},focusRect:b(a,"focusRect"),mouseEnabled:b(a,"mouseEnabled"),doubleClickEnabled:b(a,"doubleClickEnabled"),accessibilityImplementation:b(a,"accessibilityImplementation"),softKeyboardInputAreaOfInterest:b(a,
"softKeyboardInputAreaOfInterest"),needsSoftKeyboard:b(a,"needsSoftKeyboard"),contextMenu:b(a,"contextMenu"),requestSoftKeyboard:a.requestSoftKeyboard}}};return a}.call(this),$RELEASE=!1,LoaderDefinition=function(){var a=document.head;a.insertBefore(document.createElement("style"),a.firstChild);var b=document.styleSheets[0],e={__class__:"flash.display.Loader",initialize:function(){this._contentLoaderInfo=new flash.display.LoaderInfo;this._contentLoaderInfo._loader=this;this._dictionary={};this._dictionaryResolved=
{};this._displayList=null;this._timeline=[];this._worker=this._uncaughtErrorEvents=this._lastPromise=null},_commitData:function(a){switch(a.command){case "init":this._init(a.result);break;case "progress":this._updateProgress(a.result);break;case "complete":var b=new Promise(function(a){avm2.systemDomain.onMessage.register("frameConstructed",function m(b){"frameConstructed"===b&&(a(),avm2.systemDomain.onMessage.unregister("frameConstructed",m))})});Promise.all([b,this._lastPromise]).then(function(){this._content._complete=
!0;this._contentLoaderInfo._dispatchEvent("complete")}.bind(this));(a=a.stats)&&TelemetryService.reportTelemetry(a);this._worker&&this._worker.terminate();break;case "empty":this._lastPromise=Promise.resolve();break;case "error":this._contentLoaderInfo._dispatchEvent("ioError",flash.events.IOErrorEvent);break;default:if(0===a.id)break;a.isSymbol?this._commitSymbol(a):"frame"===a.type?this._commitFrame(a):"image"===a.type&&this._commitImage(a)}},_updateProgress:function(a){var b=this._contentLoaderInfo;
b._bytesLoaded=a.bytesLoaded||0;b._bytesTotal=a.bytesTotal||0;a=new flash.events.ProgressEvent("progress",!1,!1,b._bytesLoaded,b._bytesTotal);b._dispatchEvent(a)},_buildFrame:function(a,b,e,l){var m=this._dictionary,p=this._dictionaryResolved,r={},s=[],w=l.depths;if(a)for(var v=a.depths,z=0;z<v.length;z++){var A=v[z];null!==w[A]&&(r[A]=a[A],s.push(A))}for(A in w)if(v=w[A]){if(v.move){var z=v,v=cloneObject(a[A]),u;for(u in z){var B=z[u];B&&(v[u]=B)}}v.symbolId&&((z=m[v.symbolId])&&!p[v.symbolId]&&
e.push(z),v=cloneObject(v),Object.defineProperty(v,"symbolInfo",{get:function(a,b){return function(){return a[b]}}(p,v.symbolId)}));r[A]||s.push(A);r[A]=v}s.sort(sortNumeric);r.depths=s;for(z=l.repeat;z--;)b.push(r);return r},_commitFrame:function(a){var b=a.abcBlocks,e=a.actionBlocks,l=a.initActionBlocks,m=a.exports,p=a.symbolClasses,r=a.sceneData,s=this,w=s._dictionary,v=s._contentLoaderInfo,z=s._timeline,A=z.length+1,u,B=new Promise(function(a){u=a}),y=a.labelName,D=this._lastPromise;this._lastPromise=
B;B=[D];this._displayList=this._buildFrame(this._displayList,z,B,a,A);var F=z.length;a.bgcolor?v._backgroundColor=a.bgcolor:isNullOrUndefined(v._backgroundColor)&&(v._backgroundColor={red:255,green:255,blue:255,alpha:255});Promise.all(B).then(function(){if(b&&s._isAvm2Enabled)for(var a=avm2.applicationDomain,d=0,e=b.length;d<e;d++){var g=new AbcFile(b[d].data,"abc_block_"+d);b[d].flags?a.loadAbc(g):a.executeAbc(g)}if(p&&s._isAvm2Enabled){for(var l=[],d=0,e=p.length;d<e;d++)if(a=p[d],g=w[a.symbolId])g.then(function(a){return function(b){b.className=
a;avm2.applicationDomain.getClass(a).setSymbol(b.props)}}(a.className)),l.push(g);return Promise.all(l)}if(m&&!s._isAvm2Enabled){l=[];d=0;for(e=m.length;d<e;d++)if(a=m[d],g=w[a.symbolId])g.then(function(a){return function(b){s._avm1Context.addAsset(a,b.props)}}(a.className)),l.push(g);return Promise.all(l)}}).then(function(){var b=s._content,f;if(b){if(b._framesLoaded=F,y&&b._labelMap&&void 0===b._labelMap[y]){b._labelMap[y]=A;for(var m=0,p=b.symbol.scenes.length;m<p;m++)if(N=b.symbol.scenes[m],A>=
N._startFrame&&A<=N._endFrame){N.labels.push(new flash.display.FrameLabel(y,A-N._startFrame));break}}}else{var w=s._parent;!0;b=s._dictionaryResolved[0];p=avm2.applicationDomain.getClass(b.className);b=p.createAsSymbol({framesLoaded:F,loader:s,parent:w||s,index:w?0:-1,level:w?0:-1,timeline:z,totalFrames:b.props.totalFrames,stage:s._stage,complete:a.complete});w&&w==s._stage&&0===s._stage._children.length?(w._frameRate=v._frameRate,w._stageHeight=v._height,w._stageWidth=v._width,w._root=b,w._setup()):
s._children.push(b);f=b.symbol.labelMap=createEmptyObject();if(r){for(var D=[],B,G=b.symbol.totalFrames-1,H=r.scenes,I=r.labels,m=H.length;m--;){var J=H[m];B=J.offset;for(var N=[],P=I.length;P--;){var U=I[P];U.frame>=B&&U.frame<=G&&(f[U.name]=U.frame+1,N.unshift(new flash.display.FrameLabel(U.name,U.frame-B+1)))}var N=new flash.display.Scene(J.name,N,G-B+1);N._startFrame=B+1;N._endFrame=G+1;D.unshift(N);G=B-1}b.symbol.scenes=D}else N=[],y&&(f[y]=A,N.push(new flash.display.FrameLabel(y,A))),N=new flash.display.Scene("Scene 1",
N,b.symbol.totalFrames),N._startFrame=1,N._endFrame=b.symbol.totalFrames,b.symbol.scenes=[N];if(!s._isAvm2Enabled){var L=s._avm1Context,m=b;if(w&&w!==s._stage){for(w=w.loaderInfo._loader;w._parent&&w._parent!==s._stage;)w=w._parent.loaderInfo._loader;if(w._isAvm2Enabled){somewhatImplemented("AVM1Movie");this._worker&&this._worker.terminate();return}m=w._content}w=m._getAS2Object();L.globals.asSetPublicProperty("_root",w);L.globals.asSetPublicProperty("_level0",w);L.globals.asSetPublicProperty("_level1",
w);var m=s.loaderInfo._parameters,O;for(O in m)O in w||(w[O]=m[O])}s._stage&&(s._stage._children[0]=b);p.instanceConstructor.call(b);s._content=b}a.startSounds&&b._registerStartSounds(A,a.startSounds);a.soundStream&&b._initSoundStream(a.soundStream);a.soundStreamBlock&&b._addSoundStreamBlock(A,a.soundStreamBlock);if(!s._isAvm2Enabled){L=s._avm1Context;if(l)for(m=0;m<l.length;m++)b.addFrameScript(A-1,function(a,b,d){if(!d.executed)return d.executed=!0,executeActions(a,L,this._getAS2Object())}.bind(b,
l[m].actionsData,l[m].spriteId,{executed:!1}));if(e)for(m=0;m<e.length;m++)b.addFrameScript(A-1,function(a){return function(){return executeActions(a,L,this._getAS2Object())}}(e[m]))}1===A&&v._dispatchEvent(new flash.events.Event("init",!1,!1));u(a)})},_commitImage:function(a){var b=this,e;this._lastPromise=new Promise(function(a){e=a});var l=new Image;a.props.img=l;l.onload=function(){var l=a.props;l.parent=b._parent;l.stage=b._stage;l.skipCopyToCanvas=!0;var p=avm2.systemDomain.getClass("flash.display.Bitmap"),
r=avm2.systemDomain.getClass("flash.display.BitmapData"),l=r.createAsSymbol(l);r.instanceConstructor.call(l,0,0,!0,4294967295);r=p.createAsSymbol(l);b._children.push(r);p.instanceConstructor.call(r,l);r._parent=b;b._content=r;e(a);b._contentLoaderInfo._dispatchEvent("init")};l.src=URL.createObjectURL(a.data);delete a.data},_commitSymbol:function(a){var e=this._dictionary,g=this._dictionaryResolved;if("updates"in a)e[a.id].then(function(b){for(var e in a.updates)b.props[e]=a.updates[e]});else{var l=
"flash.display.DisplayObject",m=a.require,p=[],r={symbolId:a.id,loader:this},s,w=new Promise(function(a){s=a});if(m&&m.length)for(var v=0,z=m.length;v<z;v++){var A=m[v],u=e[A];u&&!g[A]&&p.push(u)}switch(a.type){case "button":var z={},B;for(B in a.states){for(var A=[],m={},u=a.states[B],y=Object.keys(u),v=0;v<y.length;v++){var D=y[v],F=u[D],E=e[F.symbolId];E&&!g[F.symbolId]&&p.push(E);A.push(E);m[D]=Object.create(F,{symbolInfo:{get:function(a,b){return function(){return a[b]}}(g,F.symbolId)}})}y.sort(sortNumeric);
m.depths=y;z[B]={className:"flash.display.Sprite",props:{loader:this,timeline:[m]}}}l="flash.display.SimpleButton";r.states=z;r.buttonActions=a.buttonActions;break;case "font":if(fromCharCode.apply(null,a.codes)&&(b.insertRule('@font-face{font-family:"'+a.uniqueName+'";src:url(data:font/opentype;base64,'+btoa(a.data)+")}",b.cssRules.length),!/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.test(window.navigator.userAgent))){var C=document.createElement("div");C.setAttribute("style",'position: absolute; top: 0; right: 0;visibility: hidden; z-index: -500;font-family:"'+
a.uniqueName+'";');C.textContent="font test";document.body.appendChild(C);v=new Promise(function(a){setTimeout(function(){a();document.body.removeChild(C)},200)});p.push(v)}l="flash.text.Font";r.name=a.name;r.uniqueName=a.uniqueName;r.charset=a.charset;r.bold=a.bold;r.italic=a.italic;r.metrics=a.metrics;this._registerFont(l,r);break;case "image":var M=new Image,Q,v=new Promise(function(a){Q=a});M.onload=function(){if(a.mask){var b=document.createElement("canvas");b.width=a.width;b.height=a.height;
var e=b.getContext("2d");e.drawImage(M,0,0);for(var f=e.getImageData(0,0,a.width,a.height),g=f.data,l=a.mask,m=f.width*f.height,p=0,s=3;p<m;p++,s+=4)g[s]=l[p];e.putImageData(f,0,0);r.img=b}Q()};M.src=URL.createObjectURL(a.data);p.push(v);l="flash.display.Bitmap";r.img=M;r.width=a.width;r.height=a.height;break;case "label":v=new Function("c,r,ct",a.data);l="flash.text.StaticText";r.bbox=a.bbox;r.draw=v;break;case "text":r.bbox=a.bbox;r.html=a.html;"label"===a.type?l="flash.text.StaticText":(l="flash.text.TextField",
r.tag=a.tag,r.variableName=a.variableName);break;case "shape":l=a.morph?"flash.display.MorphShape":"flash.display.Shape";r.bbox=a.bbox;r.strokeBbox=a.strokeBbox;r.paths=a.paths;r.dictionaryResolved=g;break;case "sound":if(!a.pcm&&!PLAY_USING_AUDIO_TAG){var R,v=new Promise(function(a){R=a});MP3DecoderSession.processAll(a.packaged.data,function(a,b,d,e){a.pcm=b||new Uint8Array(0);R();e&&console.error("ERROR: "+e)}.bind(null,r));p.push(v)}l="flash.media.Sound";r.sampleRate=a.sampleRate;r.channels=a.channels;
r.pcm=a.pcm;r.packaged=a.packaged;break;case "binary":r.data=a.data;break;case "sprite":m=null;B=a.frameCount;A={};u=1;F=a.frames;y=[];D=[];v=0;for(z=F.length;v<z;v++){E=F[v];u=y.length+1;E.labelName&&(A[E.labelName]=u);if(E.startSounds){D[u]=E.startSounds;for(var S=0;S<E.startSounds.length;S++){var K=E.startSounds[S].soundId,G=e[K];G&&!g[K]&&p.push(G)}}m=this._buildFrame(m,y,p,E,u)}m={};if(!this._isAvm2Enabled&&a.frameScripts){z=a.frameScripts;for(v=0;v<z.length;v+=2)u=z[v]+1,F=function(a,b){return function(){return executeActions(a,
b._avm1Context,this._getAS2Object())}}(z[v+1],this),m[u]?m[u].push(F):m[u]=[F]}l="flash.display.MovieClip";r.timeline=y;r.framesLoaded=B;r.labelMap=A;r.frameScripts=m;r.totalFrames=B;r.startSoundRegistrations=D}e[a.id]=w;Promise.all(p).then(function(){var b={className:l,props:r};g[a.id]=b;s(b)})}},_registerFont:function(a,b){this._vmPromise.then(function(){var e=avm2.applicationDomain.getClass(a),l=e.createAsSymbol(b);e.instanceConstructor.call(l)})},_init:function(a){var b=this,e=b._contentLoaderInfo;
e._swfVersion=a.swfVersion;var l=a.bbox;e._width=l.xMax-l.xMin;e._height=l.yMax-l.yMin;e._frameRate=a.frameRate;var m,p,r=new Promise(function(a,b){m=a;p=b});r.resolve=m;r.reject=p;e=new Promise(function(e){r.then(function(){var g={className:"flash.display.MovieClip",props:{totalFrames:a.frameCount}};b._dictionaryResolved[0]=g;e(g)})});b._dictionary[0]=e;b._lastPromise=e;b._vmPromise=r;b._isAvm2Enabled=a.fileAttributes.doAbc;this._setup()},_load:function(a){flash.net.URLRequest.class.isInstanceOf(a)&&
(this._contentLoaderInfo._url=a._url);var b;b=new Worker(SHUMWAY_ROOT+"shumway-worker.js");var e=this;e._worker=b;b.onmessage=function(a){e._commitData(a.data)};if(flash.net.URLRequest.class.isInstanceOf(a)){var l=FileLoadingService.createSession();l.onprogress=function(a,d){b.postMessage({data:a,progress:d})};l.onerror=function(a){e._commitData({command:"error",error:a})};l.onopen=function(){b.postMessage("pipe:")};l.onclose=function(){b.postMessage({data:null})};l.open(a._toFileRequest())}else b.postMessage(a)},
_setup:function(){var a=this,b=a._stage;if(a._isAvm2Enabled)avm2.systemDomain.getClass("flash.ui.Mouse")._stage=b,a._vmPromise.resolve();else if(avm2.loadAVM1){var e=function(){var e=new AS2Context(a._contentLoaderInfo._swfVersion);e.stage=b;a._avm1Context=e;avm1lib.AS2Key.class.$bind(b);avm1lib.AS2Mouse.class.$bind(b);b._addEventListener("frameConstructed",e.flushPendingScripts.bind(e),!1,Number.MAX_VALUE);a._vmPromise.resolve()};avm2.isAVM1Loaded?e():(avm2.isAVM1Loaded=!0,avm2.loadAVM1(e))}else a._vmPromise.reject("AVM1 loader is not found")},
get contentLoaderInfo(){return this._contentLoaderInfo},get content(){somewhatImplemented("Loader.content");return this._content}};e.__glue__={"native":{instance:{content:Object.getOwnPropertyDescriptor(e,"content"),contentLoaderInfo:Object.getOwnPropertyDescriptor(e,"contentLoaderInfo"),_getJPEGLoaderContextdeblockingfilter:function(){return 0},_load:e._load,_loadBytes:function(a,b,g,l){e._load.call(this,a.a,b,g,l)},_unload:function(){somewhatImplemented("Loader._unload, do we even need to do anything here?")},
_close:function(){somewhatImplemented("Loader._close")},_getUncaughtErrorEvents:function(){somewhatImplemented("Loader._getUncaughtErrorEvents");return this._uncaughtErrorEvents},_setUncaughtErrorEvents:function(a){somewhatImplemented("Loader._setUncaughtErrorEvents");this._uncaughtErrorEvents=a}}}};return e}.call(this),LoaderInfoDefinition=function(){return{__class__:"flash.display.LoaderInfo",initialize:function(){this._bytes=this._backgroundColor=this._actionScriptVersion=null;this._bytesTotal=
this._bytesLoaded=0;this._width=this._url=this._swfVersion=this._loaderURL=this._loader=this._height=this._frameRate=this._contentType=this._content=null},__glue__:{"native":{"static":{getLoaderInfoByDefinition:function(){notImplemented("LoaderInfo.getLoaderInfoByDefinition")}},instance:{_getArgs:function(){var a=this._parameters,b={},e;for(e in a)b[Multiname.getPublicQualifiedName(e)]=a[e];return b},_getUncaughtErrorEvents:function(){notImplemented("LoaderInfo._getUncaughtErrorEvents")},_setUncaughtErrorEvents:function(){notImplemented("LoaderInfo._setUncaughtErrorEvents")},
loaderURL:{get:function(){return this._loaderURL}},url:{get:function(){return this._url}},isURLInaccessible:{get:function(){return this._isURLInaccessible}},bytesLoaded:{get:function(){return this._bytesLoaded}},bytesTotal:{get:function(){return this._bytesTotal}},applicationDomain:{get:function(){return new flash.system.ApplicationDomain(avm2.applicationDomain)}},swfVersion:{get:function(){return this._swfVersion}},actionScriptVersion:{get:function(){return this._actionScriptVersion}},frameRate:{get:function(){return this._frameRate}},
width:{get:function(){return this._width}},height:{get:function(){return this._height}},contentType:{get:function(){return this._contentType}},sharedEvents:{get:function(){return this._sharedEvents}},parentSandboxBridge:{get:function(){return this._parentSandboxBridge},set:function(a){this._parentSandboxBridge=a}},childSandboxBridge:{get:function(){return this._childSandboxBridge},set:function(a){this._childSandboxBridge=a}},sameDomain:{get:function(){return this._sameDomain}},childAllowsParent:{get:function(){return this._childAllowsParent}},
parentAllowsChild:{get:function(){return this._parentAllowsChild}},loader:{get:function(){return this._loader}},content:{get:function(){return this._loader._content}},bytes:{get:function(){return this._bytes}}}},script:{instance:scriptProperties("public",["swfVersion","bytesTotal","bytesLoaded","parameters","uncaughtErrorEvent"])}}}}.call(this),MorphShapeDefinition=function(){return{__class__:"flash.display.MorphShape",initialize:function(){var a=this._graphics=new flash.display.Graphics,b=this.symbol;
b&&b.paths&&(a._paths=b.paths,a.bbox=b.bbox,a.strokeBbox=b.strokeBbox,this._stage&&("low"===this._stage._quality&&!a._bitmap)&&a._cacheAsBitmap(this._bbox))},__glue__:{"native":{instance:{graphics:{get:function(){return this._graphics}}}}}}}.call(this),MovieClipDefinition=function(){var a={__class__:"flash.display.MovieClip",initialize:function(){this._currentFrame=this._playHead=1;this._currentLabel=this._currentFrameLabel=null;this._currentScene=0;this._enabled=!0;this._frameScripts={};this._framesLoaded=
1;this._isPlaying=!1;this._labelMap={};this._sceneFrameMap={};this._sceneMap={};this._timeline=this._scenes=null;this._totalFrames=1;this._startSoundRegistrations=[];this._complete=this._allowFrameNavigation=!0;var a=this.symbol;if(a){this._timeline=a.timeline||null;this._framesLoaded=a.framesLoaded||1;this._labelMap=Object.create(a.labelMap||null);this._frameScripts=Object.create(a.frameScripts||null);this._totalFrames=a.totalFrames||1;this._startSoundRegistrations=a.startSoundRegistrations||[];
this._scenes=a.scenes||null;this._complete=!1===a.complete?!1:!0;var a=this._labelMap,b;for(b in a)1==a[b]&&(this._currentFrameLabel=this._currentLabel=b)}this._enterFrame(1);var f=this;this._onExecuteFrame=function l(){f._removeEventListener("executeFrame",l);f._allowFrameNavigation=!1;f._callFrame(f._currentFrame);f._allowFrameNavigation=!0;f._playHead!==f._currentFrame&&f._gotoFrame(f._playHead,!0);f._postConstructChildren()};this._addEventListener("executeFrame",this._onExecuteFrame);if(this._complete&&
1>=this._totalFrames)return this;this._onAdvanceFrame=function(){var a=f._playHead+1;if(f._complete&&a>f._totalFrames)a=1;else if(a>f._framesLoaded)return;f._updateDisplayList(a);f._sparse&&f._addEventListener("constructChildren",f._onConstructChildren);f._startSounds(a);f._enterFrame(a);a in f._frameScripts&&f._addEventListener("executeFrame",f._onExecuteFrame)};this._onConstructChildren=function m(){f._removeEventListener("constructChildren",m);f._constructChildren()};this.play()},_updateDisplayList:function(a){this._destructChildren(a);
this._declareChildren(a)},_declareChildren:function(a){var b=this._currentFrame;if(a!==b){var f=this._timeline;a=f[a-1];if(a!==f[b-1])for(var b=null,f=this._currentDisplayList,g=a.depths,l=this._children.length,m=g.length;m--;){for(var p=g[m],r=p|0;f&&f.depth>r;)b=f,f=f.next;var s=null;f&&f.depth===r&&(s=f.obj)&&s._owned&&(l=this.getChildIndex(s));r=f&&f.depth===r?f.cmd:null;if((p=a[p])&&p!==r)r&&s&&p.symbolId===r.symbolId&&p.ratio===r.ratio?(s._animated&&(s._invalidate(),p.hasMatrix&&s._setTransformMatrix(p.matrix,
!1),p.hasCxform&&(s._cxform=p.cxform),p.clip&&(s._clipDepth=p.clipDepth),p.hasName&&(s.name=p.name),p.blend&&(s.blendMode=this._resolveBlendMode(p.blendMode))),f.cmd=p):(s=this._addTimelineChild(p,l),s.next=f,b?b.next=s:this._currentDisplayList=s,b=s)}}},_destructChildren:function(a){var b=this._currentFrame;if(a!==b){var f=this._timeline;a=f[a-1];if(a!==f[b-1]){for(var f=null,g=this._currentDisplayList,b=null;g;){var l=g.cmd,m=a[g.depth];!m||m.symbolId!==l.symbolId||m.ratio!==l.ratio?(l=g.next,f?
f.next=l:this._currentDisplayList=l,g.next=b,b=g,g=l):(f=g,g=g.next)}for(;b;){if((a=b.obj)&&a._owned)this._sparse=!0,this.removeChild(a),a.destroy(),a._isPlaying&&a.stop();b=b.next}}}},_gotoFrame:function(a,b){var f=a!==this._currentFrame;this._allowFrameNavigation||!this._loader._isAvm2Enabled?(f&&(this._updateDisplayList(a),this._enterFrame(a)),this._constructChildren(),this._loader._isAvm2Enabled&&10<=this.loaderInfo._swfVersion?(f&&this._addEventListener("executeFrame",this._onExecuteFrame),f=
avm2.systemDomain,f.broadcastMessage("frameConstructed"),f.broadcastMessage("executeFrame"),f.broadcastMessage("exitFrame")):(f&&(b||!this._loader._isAvm2Enabled)&&this._callFrame(a),this._postConstructChildren())):f&&(this._playHead=a)},_enterFrame:function(a){if(a!==this._currentFrame){this._currentFrameLabel=null;1===a&&(this._currentLabel=null);var b=this._labelMap,f;for(f in b)if(b[f]===a){this._currentFrameLabel=this._currentLabel=f;break}if(this._scenes){b=this._scenes;f=0;for(var g=b.length;f<
g;f++){var l=b[f];if(a>=l._startFrame&&a<=l._endFrame){this._currentScene=f;break}}}this._playHead=this._currentFrame=a}},_callFrame:function(a){if(isNaN(a)&&(a=this._labelMap[a],void 0===a))return;if(a in this._frameScripts){a=this._frameScripts[a];try{for(var b=0,f=a.length;b<f;b++)a[b].call(this)}catch(g){throw TelemetryService.reportTelemetry({topic:"error",error:2}),this.stop(),g;}}},_gotoButtonState:function(a){this._enabled&&this.gotoLabel("_"+a)},_getAbsFrameNum:function(a,b){1>a&&(a=1);if(b&&
this._scenes&&1<this._scenes.length)for(var f=this._scenes,g=0;g<f.length;g++){var l=f[g];if(l.name===b){a+=l._startFrame-1;a>l._endFrame&&(a=l._endFrame);break}}return a>this._framesLoaded?this._framesLoaded:a},_registerStartSounds:function(a,b){this._startSoundRegistrations[a]=b},_initSoundStream:function(a){var b=this._soundStream={data:{sampleRate:a.sampleRate,channels:a.channels},seekIndex:[],position:0},f="mp3"===a.format;if(f&&PLAY_USING_AUDIO_TAG){var g=document.createElement("audio");if(g.canPlayType("audio/mpeg")){b.element=
g;b.rawFrames=[];return}}b.data.pcm=new Float32Array(a.samplesCount*a.channels);f&&(b.decoderPosition=0,b.decoderSession=new MP3DecoderSession,b.decoderSession.onframedata=function(a){var e=b.decoderPosition;b.data.pcm.set(a,e);b.decoderPosition=e+a.length}.bind(this),b.decoderSession.onerror=function(a){console.error("ERROR: MP3DecoderSession: "+a)})},_addSoundStreamBlock:function(a,b){var f=this._soundStream,g=f.position;f.seekIndex[a]=g+b.seek*f.data.channels;f.position=g+b.samplesCount*f.data.channels;
if(f.rawFrames)f.rawFrames.push(b.data);else{var l=f.decoderSession;l?l.pushAsync(b.data):f.data.pcm.set(b.pcm,g)}},_startSounds:function(a){var b=this._startSoundRegistrations[a];if(b)for(var f=this._sounds||(this._sounds={}),g=this.loaderInfo._loader,l=0;l<b.length;l++){var m=b[l],p=m.soundId,r=m.soundInfo,s=f[p];if(!s){s=g._dictionaryResolved[p];if(!s)continue;m=avm2.systemDomain.findClass(s.className)?avm2.systemDomain.getClass(s.className):avm2.applicationDomain.getClass(s.className);s=m.createAsSymbol(s.props);
m.instanceConstructor.call(s);f[p]=s={object:s}}s.channel&&(s.channel.stop(),delete s.channel);r.stop||(s.channel=s.object.play(0,r.hasLoops?r.loopCount:0))}if(this._soundStream&&!isNaN(this._soundStream.seekIndex[a]))if(b=this._soundStream,f=b.element)if(m=b.data,a=b.seekIndex[a]/m.sampleRate/m.channels,this._complete&&!b.channel)a=new Blob(b.rawFrames),f.preload="metadata",f.loop=!1,f.src=URL.createObjectURL(a),m=flash.media.SoundChannel.class,a=m.createAsSymbol({element:f}),m.instanceConstructor.call(a),
b.channel=a;else if(!isNaN(f.duration)&&f.currentTime>a+2&&f.currentTime<a+4)f.pause();else{if(!isNaN(f.duration)&&(f.paused||4<Math.abs(f.currentTime-a)))2<Math.abs(f.currentTime-a)&&(f.pause(),f.currentTime=a),f.play()}else b.sound||(m=flash.media.Sound.class,s=m.createAsSymbol(this._soundStream.data),m.instanceConstructor.call(s),a=s.play(),b.sound=s,b.channel=a)},_getAS2Object:function(){if(!this.$as2Object)if(this._avm1SymbolClass){var a=this,b=this._avm1SymbolClass,f=function(){this.init(a);
b.call(this)};f.prototype=Object.create(b.prototype);f.instanceConstructor=f;f.debugName="avm1 <symbol constructor wrapper>";construct(f)}else new avm1lib.AS2MovieClip(this);return this.$as2Object},get currentFrame(){var a=this._currentFrame;return this._scenes?a-this.currentScene._startFrame+1:a},get currentFrameLabel(){return this._currentFrameLabel},get currentLabel(){return this._currentLabel},get currentLabels(){if(this._scenes)return this._scenes[this._currentScene].labels;var a=[],b=this._labelMap,
f;for(f in b)a.push(new flash.display.FrameLabel(f,b[f]));return a},get currentScene(){return this._scenes?this._scenes[this._currentScene]:new flash.display.Scene("",this.currentLabels,this._framesLoaded)},get enabled(){return this._enabled},set enabled(a){this._enabled=a},get framesLoaded(){return this._framesLoaded},get totalFrames(){return this._totalFrames},get scenes(){return this._scenes||[new flash.display.Scene("",this.currentLabels,this._framesLoaded)]},get trackAsMenu(){return!1},set trackAsMenu(a){notImplemented()},
addFrameScript:function(){for(var a=this._frameScripts,b=0,f=arguments.length;b<f;b+=2){var g=arguments[b]+1,l=arguments[b+1],m=a[g];m?m.push(l):a[g]=[l];g===this._currentFrame&&this._addEventListener("executeFrame",this._onExecuteFrame)}},gotoAndPlay:function(a,b){this.play();isNaN(a)?this.gotoLabel(a):this._gotoFrame(this._getAbsFrameNum(a,b))},gotoAndStop:function(a,b){this.stop();isNaN(a)?this.gotoLabel(a):this._gotoFrame(this._getAbsFrameNum(a,b))},gotoLabel:function(a){a=this._labelMap[a];void 0!==
a&&this._gotoFrame(a)},isPlaying:function(){return this._isPlaying},nextFrame:function(){this.stop();this._currentFrame<this._framesLoaded&&this._gotoFrame(this._currentFrame+1)},nextScene:function(){this._scenes&&this._currentScene<this._scenes.length-1&&this._gotoFrame(this._scenes[this._currentScene+1]._startFrame)},play:function(){this._isPlaying||this._complete&&1>=this._totalFrames||(this._isPlaying=!0,this._addEventListener("advanceFrame",this._onAdvanceFrame))},prevFrame:function(){this.stop();
1<this._currentFrame&&this._gotoFrame(this._currentFrame-1)},prevScene:function(){this._scenes&&0<this._currentScene&&this._gotoFrame(this._scenes[this._currentScene-1]._startFrame)},stop:function(){this._isPlaying&&!(this._complete&&1>=this._totalFrames)&&(this._isPlaying=!1,this._removeEventListener("advanceFrame",this._onAdvanceFrame))}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{currentFrame:b(a,"currentFrame"),framesLoaded:b(a,"framesLoaded"),totalFrames:b(a,"totalFrames"),
trackAsMenu:b(a,"trackAsMenu"),scenes:b(a,"scenes"),currentScene:b(a,"currentScene"),currentLabel:b(a,"currentLabel"),currentFrameLabel:b(a,"currentFrameLabel"),enabled:b(a,"enabled"),isPlaying:b(a,"isPlaying"),play:a.play,stop:a.stop,nextFrame:a.nextFrame,prevFrame:a.prevFrame,gotoAndPlay:a.gotoAndPlay,gotoAndStop:a.gotoAndStop,addFrameScript:a.addFrameScript,prevScene:a.prevScene,nextScene:a.nextScene}}};return a}.call(this),NativeMenuDefinition=function(){return{__class__:"flash.display.NativeMenu",
initialize:function(){},__glue__:{"native":{"static":{},instance:{}}}}}.call(this),NativeMenuItemDefinition=function(){return{__class__:"flash.display.NativeMenuItem",initialize:function(){},__glue__:{"native":{"static":{},instance:{enabled:{get:function(){somewhatImplemented("NativeMenuItem.enabled");return this._enabled},set:function(a){somewhatImplemented("NativeMenuItem.enabled");this._enabled=a}}}}}}}.call(this),SceneDefinition=function(){return{__class__:"flash.display.Scene",initialize:function(){this._endFrame=
this._startFrame=1},__glue__:{"native":{"static":{},instance:{}},script:{"static":{},instance:{name:{get:function(){notImplemented("Scene.name");return this._name}},labels:{get:function(){notImplemented("Scene.labels");return this._labels}},numFrames:{get:function(){notImplemented("Scene.numFrames");return this._numFrames}}}}}}}.call(this),ShaderDefinition=function(){return{__class__:"flash.display.Shader",initialize:function(){this._data=null},__glue__:{"native":{"static":{},instance:{data:{get:function(){return this._data},
set:function(a){this._data=a}},precisionHint:{get:function(){return this._precisionHint},set:function(a){this._precisionHint=a}}}},script:{instance:Glue.ALL}}}}.call(this),ShaderDataDefinition=function(){return{__class__:"flash.display.ShaderData",initialize:function(){this._byteCode=null},__glue__:{"native":{"static":{},instance:{_setByteCode:function(a){this._byteCode=a}}},script:{instance:Glue.ALL}}}}.call(this),ShapeDefinition=function(){return{__class__:"flash.display.Shape",initialize:function(){var a=
this._graphics=new flash.display.Graphics;a._parent=this;var b=this.symbol;if(b&&b.paths){a._paths=b.paths;for(var e=0;e<b.paths.length;e++)b.paths[e]=finishShapePath(b.paths[e],b.dictionaryResolved);a.bbox=b.bbox;a.strokeBbox=b.strokeBbox;this._stage&&("low"===this._stage._quality&&!a._bitmap)&&a._cacheAsBitmap(this._bbox);this.ratio=b.ratio||0}},__glue__:{"native":{instance:{graphics:{get:function(){return this._graphics}}}}}}}.call(this),SimpleButtonDefinition=function(){var a=[0,37,39,36,35,45,
46,0,8,0,0,0,0,13,38,40,33,34,9,27],b=[0,0,1,128,64,0,0,32,2,0,0,4,256,16,8,0];return{__class__:"flash.display.SimpleButton",initialize:function(){this._enabled=this._useHandCursor=!0;this._trackAsMenu=!1;this._hitTestState=this._downState=this._overState=this._upState=null;this._currentButtonState="up";this._mouseChildren=!1;this._buttonMode=!0;this._avm1StateCode=this._prevAvm1StateCode=0;this._avm1MouseEvents=null;this._isContainer=!0;var a=this.symbol;if(a){var b=a.states;b.down&&(this._downState=
this._constructState(b.down,this));b.hitTest&&(this._hitTestState=this._constructState(b.hitTest,this));b.over&&(this._overState=this._constructState(b.over,this));b.up&&(this._upState=this._constructState(b.up,this))}this._loader&&(!this._loader._isAvm2Enabled&&a&&a.buttonActions)&&this._addEventListener("addedToStage",function(){this._initAvm1Events(a.buttonActions)}.bind(this),!1)},_constructState:function(a){var b=avm2.systemDomain.findClass(a.className)?avm2.systemDomain.getClass(a.className):
avm2.applicationDomain.getClass(a.className);a=b.createAsSymbol(a.props);b.instanceConstructor.call(a);1===a._children.length&&(a=a._children[0],a._parent=null,a._index=-1);return a},_updateButton:function(){var a=null;switch(this._currentButtonState){case "up":a=this._upState;break;case "over":a=this._overState;break;case "down":a=this._downState}if(a){var b=this._children[0];if(b){if(b===a)return;this._stage&&this._stage._removeFromStage(b);b._invalidateTransform()}a?(this._children[0]=a,a._parent=
this,a._invalidateTransform(),this._stage&&this._stage._addToStage(a)):this._children.shift()}},_gotoButtonState:function(a){this._invalidateBounds();this._currentButtonState=a;this._updateButton();this._avm1MouseEvents&&this._processAvm1MouseEvents(this._avm1MouseEvents)},_getRegion:function(a){if(!this._hitTestState)return{xMin:0,yMin:0,xMax:0,yMax:0};var b=this._hitTestState.getBounds(null);return this._getTransformedRect(b,a)},_getAS2Object:function(){this.$as2Object||new avm1lib.AS2Button(this);
return this.$as2Object},_initAvm1Events:function(b){for(var d=this._loader._avm1Context,f=null,g=0;g<b.length;g++){var l=b[g],m=function(a){return executeActions(a,d,this._getAS2Object())}.bind(this.parent,l.actionsData),p=l.mouseEventFlags;p&&(this._avm1MouseEvents||(this._avm1MouseEvents=[])).push({flags:p,listener:m});if(l=l.keyPress)f=f||(f=[]),f.push({keyCode:a[l]||0,charCode:l,listener:m})}if(f){var r=function(a){for(var b=0;b<f.length;b++){var d=f[b];(d.keyCode?d.keyCode===a.keyCode:d.charCode===
a.charCode)&&d.listener()}},s=flash.events.KeyboardEvent;this.stage._addEventListener(s.class.KEY_DOWN,r,!1);this._addEventListener("removedFromStage",function(a){a._removeEventListener(s.class.KEY_DOWN,r,!1)}.bind(this,this.stage),!1)}},_processAvm1MouseEvents:function(a){var d=this._avm1StateCode,f=("down"===this._currentButtonState?1:0)|("up"!==this._currentButtonState?2:0);if(d!==f){this._prevAvm1StateCode=d;this._avm1StateCode=f;d=b[d<<2|f];for(f=0;f<a.length;f++){var g=a[f];0!==(g.flags&d)&&
g.listener()}}},__glue__:{"native":{instance:{_updateButton:function(){this._updateButton()},useHandCursor:{get:function(){return this._useHandCursor},set:function(a){this._useHandCursor=a}},enabled:{get:function(){return this._enabled},set:function(a){this._enabled=a}},trackAsMenu:{get:function(){notImplemented("SimpleButton.trackAsMenu");return this._trackAsMenu},set:function(a){notImplemented("SimpleButton.trackAsMenu");this._trackAsMenu=a}},upState:{get:function(){return this._upState},set:function(a){this._upState=
a;this._updateButton()}},overState:{get:function(){return this._overState},set:function(a){this._overState=a;this._updateButton()}},downState:{get:function(){return this._downState},set:function(a){this._downState=a;this._updateButton()}},hitTestState:{get:function(){return this._hitTestState},set:function(a){a!==this._hitTestState&&(this._invalidate(),this._hitTestState=a)}},soundTransform:{get:function(){notImplemented("SimpleButton.soundTransform");return this._soundTransform},set:function(a){notImplemented("SimpleButton.soundTransform");
this._soundTransform=a}}}}}}}.call(this),SpriteDefinition=function(){var a={__class__:"flash.display.Sprite",initialize:function(){this._buttonMode=!1;this._hitArea=null;this._useHandCursor=!0;this._currentDisplayList=this._hitTarget=null;var a=this.symbol;if(a){if(this._graphics=a.graphics||new flash.display.Graphics,a.timeline&&(a=a.timeline[0]))for(var b=a.depths,f=0;f<b.length;f++){var g=a[b[f]];g&&(g=this._addTimelineChild(g),g.next=this._currentDisplayList,this._currentDisplayList=g)}}else this._graphics=
new flash.display.Graphics;this._graphics._parent=this},_addTimelineChild:function(a,b){var f=a.symbolInfo,g=Object.create(f.props);g.symbolId=a.symbolId;g.depth=a.depth;a.clip&&(g.clipDepth=a.clipDepth);a.hasCxform&&(g.cxform=a.cxform);a.hasMatrix&&(g.currentTransform=a.matrix);a.hasName&&(g.name=a.name);a.hasRatio&&(g.ratio=a.ratio/65535);a.blend&&(g.blendMode=a.blendMode);f={cmd:a,depth:a.depth,className:f.className,props:g,events:a.events,obj:null};void 0!==b?this._children.splice(b,0,f):this._children.push(f);
this._sparse=!0;return f},_constructChildren:function(){if(this._sparse){for(var a=this._loader,b=this._children,f=0;f<b.length;f++){var g=b[f];Counter.count("constructChild");if(flash.display.DisplayObject.class.isInstanceOf(g))g._index=f;else{var l=avm2.systemDomain.findClass(g.className)?avm2.systemDomain.getClass(g.className):avm2.applicationDomain.getClass(g.className),m=Object.create(g.props),p=m.name;m.animated=!0;m.owned=!0;m.parent=this;m.stage=this._stage;-1<this._level&&(m.level=this._level+
1);m.index=f;var r=l.createAsSymbol(m);p&&(this[Multiname.getPublicQualifiedName(p)]=r);l.instanceConstructor.call(r);flash.display.BitmapData.class.isInstanceOf(r)&&(l=r,r=flash.display.Bitmap.class.createAsSymbol(m),flash.display.Bitmap.class.instanceConstructor.call(r,l));a._isAvm2Enabled?r._dispatchEvent("load"):(this._initAvm1Bindings(r,p,g.events),r._dispatchEvent("init"),r._dispatchEvent("construct"),r._needLoadEvent=!0);r._dispatchEvent("added",void 0,!0);this._stage&&this._stage._addToStage(r);
b[f]=r;g.obj=r}}this._sparse=!1}},_postConstructChildren:function(){var a=this._loader;if(a&&!a._isAvm2Enabled)for(var a=this._children,b=0;b<a.length;b++){var f=a[b];f._needLoadEvent&&(delete f._needLoadEvent,f._dispatchEvent("load"))}},_duplicate:function(a,b){var f=this._loader,g=this._parent,l=g._children,m=this.class,p=this.symbol,r=Object.create(p);r.name=a;r.parent=g;r.depth=b;r=m.createAsSymbol(r);a&&(f&&!f._isAvm2Enabled&&!g.asHasProperty(void 0,a,0,!1))&&g.asSetPublicProperty(a,r);m.instanceConstructor.call(r);
r._index=l.length;l.push(r);f._isAvm2Enabled||(g._initAvm1Bindings(r,a,p&&p.events),r._dispatchEvent("init"),r._dispatchEvent("construct"));r._dispatchEvent("load");r._dispatchEvent("added");this._stage&&r._invalidate();return r},_insertChildAtDepth:function(a){this.addChild(a);var b=a._name,f=this._loader;b&&(f&&!f._isAvm2Enabled&&!this._getAS2Object().asHasProperty(void 0,b,0,!0))&&this._getAS2Object().asSetPublicProperty(b,a._getAS2Object())},_initAvm1Bindings:function(a,b,f){var g=this._loader._avm1Context,
l=a.symbol;l&&l.variableName&&a._getAS2Object().asSetPublicProperty("variable",l.variableName);if(f){for(var l=[],m=0;m<f.length;m++){var p=f[m];if(p.eoe)break;var r=function(a){return executeActions(a,g,this._getAS2Object())}.bind(a,p.actionsData),s;for(s in p)if(0===s.indexOf("on")&&p[s]){var w=s[2].toLowerCase()+s.substring(3);"enterFrame"===w&&(w="frameConstructed");var v=a;if("mouseDown"===w||"mouseUp"===w||"mouseMove"===w)v=this._stage;v._addEventListener(w,r,!1);l.push({name:w,fn:r,target:v})}}0<
l.length&&a._addEventListener("removed",function(a){for(var b=0;b<a.length;b++)a[b].target._removeEventListener(a[b].name,a[b].fn,!1)}.bind(a,l),!1)}b&&(this._getAS2Object&&a._getAS2Object)&&this._getAS2Object().asSetPublicProperty(b,a._getAS2Object())},_gotoButtonState:function(){},get buttonMode(){return this._buttonMode},set buttonMode(a){this._buttonMode=a},get graphics(){return this._graphics},get hitArea(){return this._hitArea},set hitArea(a){if(this._hitArea!==a&&(a&&a._hitTarget&&(a._hitTarget.hitArea=
null),this._hitArea=a))a._hitTarget=this},get soundTransform(){notImplemented()},set soundTransform(a){notImplemented()},get useHandCursor(){return this._useHandCursor},set useHandCursor(a){this._useHandCursor=a;this._stage&&(this._stage._mouseMoved=!0)},startDrag:function(){notImplemented()},startTouchDrag:function(){notImplemented()},stopDrag:function(){notImplemented()},stopTouchDrag:function(){notImplemented()}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{graphics:b(a,"graphics"),
buttonMode:b(a,"buttonMode"),dropTarget:b(a,"dropTarget"),startDrag:a.startDrag,stopDrag:a.stopDrag,startTouchDrag:a.startTouchDrag,stopTouchDrag:a.stopTouchDrag,constructChildren:a._constructChildren,hitArea:b(a,"hitArea"),useHandCursor:b(a,"useHandCursor"),soundTransform:b(a,"soundTransform")}}};return a}.call(this),StageDefinition=function(){return{__class__:"flash.display.Stage",initialize:function(){this._frameRate=24;this._scaleMode="showAll";this._align="";this._stageHeight=this._stageWidth=
0;this._quality="high";this._color=4294967295;this._stage=this;this._deferRenderEvent=!1;this._focus=null;this._showDefaultContextMenu=!0;this._displayState="normal";this._colorCorrection="default";this._stageFocusRect=!0;this._fullScreenSourceRect=null;this._wmodeGPU=!1;this._qtree=this._root=null;this._invalidObjects=[];this._mouseMoved=!1;this._mouseTarget=this;this._mouseEvents=[];this._cursor="auto";this._concatenatedTransform.invalid=!1},_setup:function(){this._qtree=new QuadTree(0,0,this._stageWidth,
this._stageHeight,0);this._invalid=!0},_addToStage:function(a){a._stage=this;a._level=a._parent._level+1;this._invalidateOnStage(a);for(var b=a._children,e=0;e<b.length;e++){var d=b[e];null===d._stage&&this._addToStage(d)}a._dispatchEvent("addedToStage")},_removeFromStage:function(a){for(var b=a._children,e=0;e<b.length;e++)b[e]._stage&&this._removeFromStage(b[e]);a._dispatchEvent("removedFromStage");a._stage=null;a._level=-1;this._invalidateOnStage(a)},_invalidateOnStage:function(a){a._invalid||
(a._invalid=!0,this._invalidObjects.push(a))},_processInvalidRegions:function(a){for(var b=this._invalidObjects,e=[];b.length;){var d=b.shift();if(d._children.length)for(var f=d._children,g=0;g<f.length;g++){var l=f[g];!1===l._invalid&&(l._invalid=!0,b.push(l))}g=d._region;f=d._getRegion(this);if(l=d._stage&&d._visible&&0<f.xMax&&f.xMin<this._stageWidth&&0<f.yMax&&f.yMin<this._stageHeight){for(var m=d._parent;m;){if(!m._visible||m._hidden){l=!1;break}m=m._parent}d._hidden=!l}else d._hidden=!1;m=!g||
!l||f.xMin!==g.xMin||f.yMin!==g.yMin||f.xMax!==g.xMax||f.yMax!==g.yMax;g&&m&&(g._qtree.delete(g),d._region=null,e.push(g));l?(m&&(this._qtree.insert(f),f.obj=d,d._region=f),e.push(f)):d._invalid=!1}if(a){a=new ShapePath;for(g=0;g<e.length;g++){for(var l=e[g],b=l.xMin-l.xMin%20-40,d=l.yMin-l.yMin%20-40,f=l.xMax-l.xMax%20+80,l=l.yMax-l.yMax%20+80,m=this._qtree.retrieve(b,d,f,l),p=0;p<m.length;p++){var r=m[p];if(!r.obj._invalid&&!(b>r.xMax||f<r.xMin||d>r.yMax||l<r.yMin))r.obj._invalid=!0}a.rect(b,d,
f-b,l-d)}return a}},_handleMouseButtons:function(){if(0!==this._mouseEvents.length)switch(this._mouseEvents.shift()){case "mousedown":this._mouseTarget._buttonMode&&this._mouseTarget._gotoButtonState("down");this._mouseTarget._dispatchEvent("mouseDown");break;case "mouseup":this._mouseTarget._buttonMode&&this._mouseTarget._gotoButtonState("over"),this._mouseTarget._dispatchEvent("mouseUp")}},_handleMouse:function(){for(var a=this._mouseX,b=this._mouseY,e=this._qtree.retrieve(a,b,1,1),d=[],f=0;f<e.length;f++){var g=
e[f],l=g.obj;a>=g.xMin&&(a<=g.xMax&&b>=g.yMin&&b<=g.yMax)&&(flash.display.SimpleButton.class.isInstanceOf(l)?l._enabled&&(g=l._hitTestState,g._parent=l,g._hitTest(!0,a,b,!0)&&d.push(l),g._parent=null):l._hitTest(!0,a,b,!0)&&d.push(l))}var m;if(d.length){d.sort(sortByDepth);f=d.length;a:for(;f--;){m=null;a=d[f];if(!flash.display.InteractiveObject.class.isInstanceOf(a))for(b=f;b--;)d[b]._parent===a._parent&&flash.display.InteractiveObject.class.isInstanceOf(d[b])&&(a=d[b],f=b);do{if(flash.display.InteractiveObject.class.isInstanceOf(a)){if(!a._mouseEnabled)continue a;
if((!m||!a._mouseChildren)&&!a._hitArea)m=a}a=a._parent}while(a);if(m!==d[f]&&flash.display.SimpleButton.class.isInstanceOf(m))continue a;break}}m?m._hitTarget&&(m=m._hitTarget):m=this;if(m===this._mouseTarget)m._dispatchEvent("mouseMove");else{this._mouseTarget._buttonMode&&this._mouseTarget._gotoButtonState("up");this._mouseTarget._dispatchEvent("mouseOut");d=this._mouseTarget;f=d._parent;a=m;b=a._parent;for(e="auto";0<=d._level&&d!==b;)d._hasEventListener("rollOut")&&d._dispatchEvent("rollOut"),
d=d._parent;for(;0<=a._level&&a!==f;)a._hasEventListener("rollOver")&&a._dispatchEvent("rollOver"),a._buttonMode&&a._useHandCursor&&(e="pointer"),a=a._parent;m._buttonMode&&m._gotoButtonState("over");m._dispatchEvent("mouseOver");this._mouseTarget=m;this._cursor=e}},_as2SetLevel:function(a,b){somewhatImplemented("Stage._as2SetLevel");this.addChild(b)},__glue__:{"native":{instance:{invalidate:function(){this._deferRenderEvent=this._invalid=!0},isFocusInaccessible:function(){notImplemented("Stage.isFocusInaccessible")},
set_displayState:function(a){somewhatImplemented("Stage.set_displayState");this._displayState=a},get_simulatedFullScreenWidth:function(){notImplemented("Stage.get_simulatedFullScreenWidth")},get_simulatedFullScreenHeight:function(){notImplemented("Stage.get_simulatedFullScreenHeight")},removeChildAt:function(){notImplemented("Stage.removeChildAt")},swapChildrenAt:function(){notImplemented("Stage.swapChildrenAt")},requireOwnerPermissions:function(){somewhatImplemented("Stage.requireOwnerPermissions")},
frameRate:{get:function(){return this._frameRate},set:function(a){this._frameRate=a}},scaleMode:{get:function(){return this._scaleMode},set:function(a){this._scaleMode=a;this._invalid=!0}},align:{get:function(){return this._align},set:function(a){this._align=a;this._invalid=!0}},stageWidth:{get:function(){return this._stageWidth/20},set:function(a){notImplemented("Stage.stageWidth");this._stageWidth=20*a|0}},stageHeight:{get:function(){return this._stageHeight/20},set:function(a){notImplemented("Stage.stageHeight");
this._stageHeight=20*a|0}},showDefaultContextMenu:{get:function(){return this._showDefaultContextMenu},set:function(a){somewhatImplemented("Stage.showDefaultContextMenu");this._showDefaultContextMenu=a}},focus:{get:function(){return this._focus},set:function(a){somewhatImplemented("Stage.focus");this._focus=a}},colorCorrection:{get:function(){return this._colorCorrection},set:function(a){notImplemented("Stage.colorCorrection");this._colorCorrection=a}},colorCorrectionSupport:{get:function(){return!1}},
stageFocusRect:{get:function(){return this._stageFocusRect},set:function(a){somewhatImplemented("Stage.stageFocusRect");this._stageFocusRect=a}},quality:{get:function(){return this._quality},set:function(a){somewhatImplemented("Stage.stageFocusRect");this._quality=a}},displayState:{get:function(){return this._displayState}},simulatedDisplayState:{get:function(){notImplemented("Stage.simulatedDisplayState");return this._simulatedDisplayState},set:function(a){notImplemented("Stage.simulatedDisplayState");
this._simulatedDisplayState=a}},fullScreenSourceRect:{get:function(){return this._fullScreenSourceRect},set:function(a){notImplemented("Stage.fullScreenSourceRect");this._fullScreenSourceRect=a}},simulatedFullScreenSourceRect:{get:function(){notImplemented("Stage.simulatedFullScreenSourceRect");return this._simulatedFullScreenSourceRect},set:function(a){notImplemented("Stage.simulatedFullScreenSourceRect");this._simulatedFullScreenSourceRect=a}},stageVideos:{get:function(){notImplemented("Stage.stageVideos");
return this._stageVideos}},stage3Ds:{get:function(){notImplemented("Stage.stage3Ds");return this._stage3Ds}},color:{get:function(){return this._color},set:function(a){this._color=a;this._invalid=!0}},fullScreenWidth:{get:function(){notImplemented("Stage.fullScreenWidth");return this._fullScreenWidth}},fullScreenHeight:{get:function(){notImplemented("Stage.fullScreenHeight");return this._fullScreenHeight}},wmodeGPU:{get:function(){somewhatImplemented("Stage.wmodeGPU");return this._wmodeGPU}},softKeyboardRect:{get:function(){notImplemented("Stage.softKeyboardRect");
return this._softKeyboardRect}},allowsFullScreen:{get:function(){return!1}},displayContextInfo:{get:function(){notImplemented("Stage.displayContextInfo");return this._displayContextInfo}}}}}}}.call(this),EventDefinition=function(){return{__class__:"flash.events.Event",initialize:function(){this._isDefaultPrevented=this._stopImmediatePropagation=this._stopPropagation=!1;this._currentTarget=this._target=null;this._eventPhase=2},__glue__:{"native":{instance:{ctor:function(a,b,e){Counter.count("Event: "+
a);this._type=a;this._bubbles=b;this._cancelable=e},stopPropagation:function(){this._stopPropagation=!0},stopImmediatePropagation:function(){this._stopImmediatePropagation=this._stopPropagation=!0},preventDefault:function(){this._cancelable&&(this._isDefaultPrevented=!0)},isDefaultPrevented:function(){return this._isDefaultPrevented},type:{get:function(){return this._type}},bubbles:{get:function(){return this._bubbles}},cancelable:{get:function(){return this._cancelable}},target:{get:function(){return this._target}},
currentTarget:{get:function(){return this._currentTarget}},eventPhase:{get:function(){return this._eventPhase}}}},script:{"static":Glue.ALL,instance:{clone:"open public clone"}}}}}.call(this),EventDispatcherDefinition=function(){function a(a,f,g,l){var m=a._target,p=f._type||f;a=a._listeners[p];if(l||"string"===typeof f&&e[f]||f._bubbles){for(var r=[],s=m._parent;s;)s._hasEventListener(p)&&r.push(s),s=s._parent;if(!a&&!r.length)return!0;for(var w=!0,s=r.length;s--&&w;)var w=r[s],v=w._captureListeners[p],
w=b(v,f,g,l,m,w,1);a&&w&&(w=b(a,f,g,l,m));for(s=0;s<r.length&&w;s++)w=r[s],v=w._listeners[p],w=b(v,f,g,l,m,w,3)}else a&&b(a,f,g,l,m);return!f._isDefaultPrevented}function b(a,b,g,l,m,p,r){if(a){a=a.slice();l=!0;for(var s=0;s<a.length;s++){var w=a[s],v=w.handleEvent.methodInfo;if(v&&v.parameters.length&&!v.parameters[0].isUsed)w.handleEvent();else if(l&&("string"===typeof b?g?b=new g(b):b in e?(b=new flash.events.MouseEvent(b,e[b]),m._stage&&(b._localX=m.mouseX,b._localY=m.mouseY)):b=new flash.events.Event(b):
b._target&&(b=b.clone()),b._target=m,b._currentTarget=p||m,b._eventPhase=r||2,l=!1),w.handleEvent(b),b._stopImmediatePropagation)break}}return!b._stopPropagation}var e={click:!0,contextMenu:!0,doubleClick:!0,middleClick:!0,middleMouseDown:!0,middleMouseUp:!0,mouseDown:!0,mouseMove:!0,mouseOut:!0,mouseOver:!0,mouseUp:!0,mouseWheel:!0,releaseOutside:!0,rightClick:!0,rightMouseDown:!0,rightMouseUp:!0,rollOut:!1,rollOver:!1};return{__class__:"flash.events.EventDispatcher",initialize:function(){this._target=
this;this._listeners={};this._captureListeners={}},_addEventListenerImpl:function(a,b,e,l){"function"!==typeof b&&throwError("TypeError",Errors.CheckTypeFailedError,b,"Function");var m=e?this._captureListeners:this._listeners;e=m[a];var p={handleEvent:b,priority:l||0};if(e){for(m=a=e.length;m--;){var r=e[m];if(r.handleEvent===b)return;l>r.priority&&(a=m)}e.splice(a,0,p)}else m[a]=[p]},_addEventListener:function(a,b,e,l){this._addEventListenerImpl(a,b,e,l)},_removeEventListenerImpl:function(a,b,e){"function"!==
typeof b&&throwError("TypeError",Errors.CheckTypeFailedError,b,"Function");e=e?this._captureListeners:this._listeners;var l=e[a];if(l)for(var m=0;m<l.length;m++)if(l[m].handleEvent===b){l.splice(m,1);l.length||delete e[a];break}},_removeEventListener:function(a,b,e){this._removeEventListenerImpl(a,b,e)},_hasEventListener:function(a){return a in this._listeners||a in this._captureListeners},_dispatchEvent:function(b,e,g){a(this,b,e,g)},__glue__:{"native":{instance:{ctor:function(a){this._target=a||
this},addEventListener:function(a,b,e,l){this._addEventListener(a,b,e,l)},removeEventListener:function(a,b,e){this._removeEventListener(a,b,e)},hasEventListener:function(a){return this._hasEventListener(a)},willTrigger:function(a){var b=this._target;do if(b._hasEventListener(a))return!0;while(b=b._parent);return!1},dispatchEventFunction:function(b){a(this,b)}}}}}}.call(this),KeyboardEventDefinition=function(){return{__class__:"flash.events.KeyboardEvent",__glue__:{"native":{instance:{updateAfterEvent:function(){notImplemented("KeyboardEvent.updateAfterEvent")},
charCode:{get:function(){return this._charCode},set:function(a){this._charCode=a}},ctrlKey:{get:function(){return this._ctrlKey},set:function(a){this._ctrlKey=a}},altKey:{get:function(){return this._altKey},set:function(a){this._altKey=a}},shiftKey:{get:function(){return this._shiftKey},set:function(a){this._shiftKey=a}}}},script:{"static":Glue.ALL,instance:{keyCode:"public keyCode"}}}}}.call(this),MouseEventDefinition=function(){return{__class__:"flash.events.MouseEvent",initialize:function(){this._localY=
this._localX=NaN},__glue__:{"native":{instance:{updateAfterEvent:function(){},getStageX:function(){if(this._target){var a=this._target._getConcatenatedTransform();return(a.a*this._localX+a.c*this._localY+a.tx)/20}return this._localX/20},getStageY:function(){if(this._target){var a=this._target._getConcatenatedTransform();return(a.d*this._localY+a.b*this._localX+a.ty)/20}return this._localY/20},localX:{get:function(){return this._localX/20},set:function(a){this._localX=20*a|0}},localY:{get:function(){return this._localY/
20},set:function(a){this._localY=20*a|0}}}},script:{"static":Glue.ALL}}}}.call(this),TextEventDefinition=function(){return{__class__:"flash.events.TextEvent",__glue__:{"native":{instance:{copyNativeData:function(){notImplemented("TextEvent.copyNativeData")}}}}}}.call(this),TimerEventDefinition=function(){return{__class__:"flash.events.TimerEvent",__glue__:{"native":{instance:{updateAfterEvent:function(){notImplemented("TimerEvent.updateAfterEvent")}}}}}}.call(this),ExternalInterfaceDefinition=function(){function a(a,
b){if(e.hasOwnProperty(a))return e[a](a,b)}var b=!1,e={};return{__class__:"flash.external.ExternalInterface",initialize:function(){},__glue__:{"native":{"static":{_initJS:function(){b||(TelemetryService.reportTelemetry({topic:"feature",feature:1}),b=!0,FirefoxCom.initJS(a))},_getPropNames:function(a){var b=[];forEachPublicProperty(a,function(a){b.push(a)});return b},_addCallback:function(a,b,g){FirefoxCom.request("externalCom",{action:"register",functionName:a,remove:g});g?delete e[a]:e[a]=b},_evalJS:function(a){return FirefoxCom.requestSync("externalCom",
{action:"eval",expression:a})},_callOut:function(a){return FirefoxCom.requestSync("externalCom",{action:"call",request:a})},available:{get:function(){return!0}},objectID:{get:function(){return FirefoxCom.requestSync("externalCom",{action:"getId"})}},activeX:{get:function(){return!1}}},instance:{}}}}}.call(this),BevelFilterDefinition=function(){return{__class__:"flash.filters.BevelFilter",initialize:function(){},__glue__:{}}}.call(this),BitmapFilterDefinition=function(){return{__class__:"flash.filters.BitmapFilter",
initialize:function(){},__glue__:{}}}.call(this),BlurFilterDefinition=function(){return{__class__:"flash.filters.BlurFilter",initialize:function(){},applyFilter:function(a,b,e){blurFilter(a,b,e,this._blurX,this._blurY)},updateFilterBounds:function(a){a.inflate(this._blurX,this._blurY)},__glue__:{"native":{"static":{},instance:{blurX:{get:function(){return this._blurX},set:function(a){this._blurX=a}},blurY:{get:function(){return this._blurY},set:function(a){this._blurY=a}},quality:{get:function(){return this._quality},
set:function(a){this._quality=a}}}}}}}.call(this),ColorMatrixFilterDefinition=function(){return{__class__:"flash.filters.ColorMatrixFilter",initialize:function(){},applyFilter:function(a,b,e){this._matrix&&colorFilter(a,b,e,this._matrix)},updateFilterBounds:function(a){return a},__glue__:{"native":{instance:{matrix:{get:function(){return this._matrix},set:function(a){this._matrix=a}}}}}}}.call(this),ConvolutionFilterDefinition=function(){return{__class__:"flash.filters.ConvolutionFilter",initialize:function(){},
__glue__:{}}}.call(this),DisplacementMapFilterDefinition=function(){return{__class__:"flash.filters.DisplacementMapFilter",initialize:function(){},__glue__:{}}}.call(this),DropShadowFilterDefinition=function(){return{__class__:"flash.filters.DropShadowFilter",initialize:function(){},applyFilter:function(a,b,e){dropShadowFilter(a,b,e,[this._color>>24&255,this._color>>16&255,this._color>>8&255,this._color&255],this._blurX,this._blurY,this._angle,this._distance,this._strength)},updateFilterBounds:function(a){var b=
a.clone(),e=Math.sin(this._angle)*this._distance|0,d=Math.cos(this._angle)*this._distance|0;b.offset(d,e);b.inflate(this._blurX,this._blurY);b=a.union(b);a.setTo(b.x,b.y,b.width,b.height)},__glue__:{"native":{instance:{distance:{get:function(){return this._distance},set:function(a){this._distance=a}},angle:{get:function(){return this._angle},set:function(a){this._angle=a}},color:{get:function(){return this._color},set:function(a){this._color=a}},alpha:{get:function(){return this._alpha},set:function(a){this._alpha=
a}},blurX:{get:function(){return this._blurX},set:function(a){this._blurX=a}},blurY:{get:function(){return this._blurY},set:function(a){this._blurY=a}},hideObject:{get:function(){return this._hideObject},set:function(a){this._hideObject=a}},inner:{get:function(){return this._inner},set:function(a){this._inner=a}},knockout:{get:function(){return this._knockout},set:function(a){this._knockout=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a}},strength:{get:function(){return this._strength},
set:function(a){this._strength=a}}}}}}}.call(this),GlowFilterDefinition=function(){return{__class__:"flash.filters.GlowFilter",initialize:function(){},applyFilter:function(a,b,e){glowFilter(a,b,e,[this._color>>24&255,this._color>>16&255,this._color>>8&255,this._color&255],this._blurX,this._blurY,this._strength)},updateFilterBounds:function(a){a.inflate(this._blurX,this._blurY)},__glue__:{"native":{"static":{},instance:{color:{get:function(){return this._color},set:function(a){this._color=a}},alpha:{get:function(){return this._alpha},
set:function(a){this._alpha=a}},blurX:{get:function(){return this._blurX},set:function(a){this._blurX=a}},blurY:{get:function(){return this._blurY},set:function(a){this._blurY=a}},inner:{get:function(){return this._inner},set:function(a){this._inner=a}},knockout:{get:function(){return this._knockout},set:function(a){this._knockout=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a}},strength:{get:function(){return this._strength},set:function(a){this._strength=a}}}}}}}.call(this),
GradientBevelFilterDefinition=function(){return{__class__:"flash.filters.GradientBevelFilter",initialize:function(){},__glue__:{}}}.call(this),GradientGlowFilterDefinition=function(){return{__class__:"flash.filters.GradientGlowFilter",initialize:function(){},__glue__:{}}}.call(this),ShaderFilterDefinition=function(){return{__class__:"flash.filters.ShaderFilter",initialize:function(){},__glue__:{}}}.call(this),ColorTransformDefinition=function(){return{__class__:"flash.geom.ColorTransform",__glue__:{script:{instance:Glue.ALL}}}}.call(this),
MatrixDefinition=function(){return{__class__:"flash.geom.Matrix",__glue__:{script:{instance:Glue.ALL}}}}.call(this),Matrix3DDefinition=function(){function a(a,b,f,g,l,m,p){var r=b*b,s=f*f,w=g*g,v=r+s+w,z=Math.sqrt(v);b/=z;f/=z;g/=z;r/=v;s/=v;w/=v;v=Math.cos(a);a=Math.sin(a);return new flash.geom.Matrix3D([r+(s+w)*v,b*f*(1-v)+g*a,b*g*(1-v)-f*a,0,b*f*(1-v)-g*a,s+(r+w)*v,f*g*(1-v)+b*a,0,b*g*(1-v)+f*a,f*g*(1-v)-b*a,w+(r+s)*v,0,(l*(s+w)-b*(m*f+p*g))*(1-v)+(m*g-p*f)*a,(m*(r+w)-f*(l*b+p*g))*(1-v)+(p*b-l*
g)*a,(p*(r+s)-g*(l*b+m*f))*(1-v)+(l*f-m*b)*a,1])}var b=new Uint32Array([0,4,8,12,1,5,9,13,2,6,10,14,3,7,11,15]);return{__class__:"flash.geom.Matrix3D",initialize:function(){},__glue__:{"native":{"static":{interpolate:function(){notImplemented("Matrix3D.interpolate")}},instance:{ctor:function(a){this._matrix=new Float32Array(16);a&&16<=a.length?this.copyRawDataFrom(a,0,!1):this.identity()},clone:function(){return new flash.geom.Matrix3D(this._matrix)},copyToMatrix3D:function(a){a._matrix.set(this._matrix)},
append:function(a){var b=a._matrix,f=this._matrix;a=this._matrix;var g=b[0],l=b[4],m=b[8],p=b[12],r=b[1],s=b[5],w=b[9],v=b[13],z=b[2],A=b[6],u=b[10],B=b[14],y=b[3],D=b[7],F=b[11],b=b[15],E=f[0],C=f[4],M=f[8],Q=f[12],R=f[1],S=f[5],K=f[9],G=f[13],H=f[2],I=f[6],J=f[10],N=f[14],P=f[3],U=f[7],L=f[11],f=f[15];a[0]=g*E+l*R+m*H+p*P;a[1]=r*E+s*R+w*H+v*P;a[2]=z*E+A*R+u*H+B*P;a[3]=y*E+D*R+F*H+b*P;a[4]=g*C+l*S+m*I+p*U;a[5]=r*C+s*S+w*I+v*U;a[6]=z*C+A*S+u*I+B*U;a[7]=y*C+D*S+F*I+b*U;a[8]=g*M+l*K+m*J+p*L;a[9]=r*
M+s*K+w*J+v*L;a[10]=z*M+A*K+u*J+B*L;a[11]=y*M+D*K+F*J+b*L;a[12]=g*Q+l*G+m*N+p*f;a[13]=r*Q+s*G+w*N+v*f;a[14]=z*Q+A*G+u*N+B*f;a[15]=y*Q+D*G+F*N+b*f},prepend:function(a){var b=this._matrix,f=a._matrix;a=this._matrix;var g=b[0],l=b[4],m=b[8],p=b[12],r=b[1],s=b[5],w=b[9],v=b[13],z=b[2],A=b[6],u=b[10],B=b[14],y=b[3],D=b[7],F=b[11],b=b[15],E=f[0],C=f[4],M=f[8],Q=f[12],R=f[1],S=f[5],K=f[9],G=f[13],H=f[2],I=f[6],J=f[10],N=f[14],P=f[3],U=f[7],L=f[11],f=f[15];a[0]=g*E+l*R+m*H+p*P;a[1]=r*E+s*R+w*H+v*P;a[2]=z*
E+A*R+u*H+B*P;a[3]=y*E+D*R+F*H+b*P;a[4]=g*C+l*S+m*I+p*U;a[5]=r*C+s*S+w*I+v*U;a[6]=z*C+A*S+u*I+B*U;a[7]=y*C+D*S+F*I+b*U;a[8]=g*M+l*K+m*J+p*L;a[9]=r*M+s*K+w*J+v*L;a[10]=z*M+A*K+u*J+B*L;a[11]=y*M+D*K+F*J+b*L;a[12]=g*Q+l*G+m*N+p*f;a[13]=r*Q+s*G+w*N+v*f;a[14]=z*Q+A*G+u*N+B*f;a[15]=y*Q+D*G+F*N+b*f},invert:function(){var a=this.determinant;if(1E-7>Math.abs(a))return!1;var a=1/a,b=this._matrix,f=b[0],g=b[1],l=b[2],m=b[3],p=b[4],r=b[5],s=b[6],w=b[7],v=b[8],z=b[9],A=b[10],u=b[11],B=b[12],y=b[13],D=b[14],F=
b[15];b[0]=a*(r*(A*F-D*u)-z*(s*F-D*w)+y*(s*u-A*w));b[1]=-a*(g*(A*F-D*u)-z*(l*F-D*m)+y*(l*u-A*m));b[2]=a*(g*(s*F-D*w)-r*(l*F-D*m)+y*(l*w-s*m));b[3]=-a*(g*(s*u-A*w)-r*(l*u-A*m)+z*(l*w-s*m));b[4]=-a*(p*(A*F-D*u)-v*(s*F-D*w)+B*(s*u-A*w));b[5]=a*(f*(A*F-D*u)-v*(l*F-D*m)+B*(l*u-A*m));b[6]=-a*(f*(s*F-D*w)-p*(l*F-D*m)+B*(l*w-s*m));b[7]=a*(f*(s*u-A*w)-p*(l*u-A*m)+v*(l*w-s*m));b[8]=a*(p*(z*F-y*u)-v*(r*F-y*w)+B*(r*u-z*w));b[9]=-a*(f*(z*F-y*u)-v*(g*F-y*m)+B*(g*u-z*m));b[10]=a*(f*(r*F-y*w)-p*(g*F-y*m)+B*(g*w-
r*m));b[11]=-a*(f*(r*u-z*w)-p*(g*u-z*m)+v*(g*w-r*m));b[12]=-a*(p*(z*D-y*A)-v*(r*D-y*s)+B*(r*A-z*s));b[13]=a*(f*(z*D-y*A)-v*(g*D-y*l)+B*(g*A-z*l));b[14]=-a*(f*(r*D-y*s)-p*(g*D-y*l)+B*(g*s-r*l));b[15]=a*(f*(r*A-z*s)-p*(g*A-z*l)+v*(g*s-r*l));return!0},identity:function(){var a=this._matrix;a[0]=a[5]=a[10]=a[15]=1;a[1]=a[2]=a[3]=a[4]=a[6]=a[7]=a[8]=a[9]=a[11]=a[12]=a[13]=a[14]=0},decompose:function(){notImplemented("Matrix3D.decompose")},recompose:function(){notImplemented("Matrix3D.recompose")},appendTranslation:function(a,
b,f){var g=this._matrix,l=g[3],m=g[7],p=g[11],r=g[15];g[0]+=a*l;g[1]+=b*l;g[2]+=f*l;g[4]+=a*m;g[5]+=b*m;g[6]+=f*m;g[8]+=a*p;g[9]+=b*p;g[10]+=f*p;g[12]+=a*r;g[13]+=b*r;g[14]+=f*r},appendRotation:function(b,d,f){this.append(a(b/180*Math.PI,d.x,d.y,d.z,f?f.x:0,f?f.y:0,f?f.z:0))},appendScale:function(a,b,f){var g=this._matrix;g[0]*=a;g[1]*=b;g[2]*=f;g[4]*=a;g[5]*=b;g[6]*=f;g[8]*=a;g[9]*=b;g[10]*=f;g[12]*=a;g[13]*=b;g[14]*=f},prependTranslation:function(a,b,f){var g=this._matrix,l=g[1],m=g[5],p=g[9],r=
g[2],s=g[6],w=g[10],v=g[3],z=g[7],A=g[11];g[12]+=g[0]*a+g[4]*b+g[8]*f;g[13]+=l*a+m*b+p*f;g[14]+=r*a+s*b+w*f;g[15]+=v*a+z*b+A*f},prependRotation:function(b,d,f){this.prepend(a(b/180*Math.PI,d.x,d.y,d.z,f?f.x:0,f?f.y:0,f?f.z:0))},prependScale:function(a,b,f){var g=this._matrix;g[0]*=a;g[1]*=a;g[2]*=a;g[3]*=a;g[4]*=b;g[5]*=b;g[6]*=b;g[7]*=b;g[8]*=f;g[9]*=f;g[10]*=f;g[11]*=f},transformVector:function(a){var b=this._matrix,f=a.x,g=a.y;a=a.z;return new flash.geom.Vector3D(b[0]*f+b[4]*g+b[8]*a+b[12],b[1]*
f+b[5]*g+b[9]*a+b[13],b[2]*f+b[6]*g+b[10]*a+b[14])},deltaTransformVector:function(a){var b=this._matrix,f=a.x,g=a.y;a=a.z;return new flash.geom.Vector3D(b[0]*f+b[4]*g+b[8]*a,b[1]*f+b[5]*g+b[9]*a,b[2]*f+b[6]*g+b[10]*a)},transformVectors:function(a,b){for(var f=this._matrix,g=f[0],l=f[4],m=f[8],p=f[12],r=f[1],s=f[5],w=f[9],v=f[13],z=f[2],A=f[6],u=f[10],f=f[14],B=0;B<a.length-2;B+=3){var y=a.asGetNumericProperty(B),D=a.asGetNumericProperty(B+1),F=a.asGetNumericProperty(B+2);b.push(g*y+l*D+m*F+p);b.push(r*
y+s*D+w*F+v);b.push(z*y+A*D+u*F+f)}},transpose:function(){var a=this._matrix,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[5]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b},pointAt:function(){notImplemented("Matrix3D.pointAt")},interpolateTo:function(){notImplemented("Matrix3D.interpolateTo")},copyFrom:function(a){this._matrix.set(a._matrix)},copyRawDataTo:function(a,d,f){var g=this._matrix;if(f){f=0;for(d|=0;16>f;f++,d++)a.asSetNumericProperty(d,
g[b[f]])}else{f=0;for(d|=0;16>f;f++,d++)a.asSetNumericProperty(d,g[f])}},copyRawDataFrom:function(a,d,f){var g=this._matrix;if(f){f=0;for(d|=0;16>f;f++,d++)g[b[f]]=a.asGetNumericProperty(d)||0}else{f=0;for(d|=0;16>f;f++,d++)g[f]=a.asGetNumericProperty(d)||0}},copyRowTo:function(a,b){var f=a|0,g=this._matrix;b.x=g[f];b.y=g[f+4];b.z=g[f+8];b.w=g[f+12]},copyColumnTo:function(a,b){var f=a<<2,g=this._matrix;b.x=g[f];b.y=g[f+1];b.z=g[f+2];b.w=g[f+3]},copyRowFrom:function(a,b){var f=a|0,g=this._matrix;g[f]=
b.x;g[f+4]=b.y;g[f+8]=b.z;g[f+12]=b.w},copyColumnFrom:function(a,b){var f=a<<2,g=this._matrix;g[f]=b.x;g[f+1]=b.y;g[f+2]=b.z;g[f+3]=b.w},rawData:{get:function(){var a=new Float64Vector;this.copyRawDataTo(a,0,!1);return a},set:function(a){this.copyRawDataFrom(a,0,!1)}},position:{get:function(){var a=this._matrix;return new flash.geom.Vector3D(a[12],a[13],a[14])},set:function(a){var b=this._matrix;b[12]=a.x;b[13]=a.y;b[14]=a.z}},determinant:{get:function(){var a=this._matrix,b=a[4],f=a[8],g=a[12],l=
a[5],m=a[9],p=a[13],r=a[6],s=a[10],w=a[14],v=a[7],z=a[11],A=a[15];return a[0]*(l*(s*A-z*w)-r*(m*A-z*p)+v*(m*w-s*p))-a[1]*(b*(s*A-z*w)-r*(f*A-z*g)+v*(f*w-s*g))+a[2]*(b*(m*A-z*p)-l*(f*A-z*g)+v*(f*p-m*g))-a[3]*(b*(m*w-s*p)-l*(f*w-s*g)+r*(f*p-m*g))}}}},script:{instance:Glue.ALL}}}}.call(this),PointDefinition=function(){return{__class__:"flash.geom.Point",__glue__:{script:{"static":Glue.ALL,instance:Glue.ALL}}}}.call(this),RectangleDefinition=function(){return{__class__:"flash.geom.Rectangle",__glue__:{script:{instance:Glue.ALL}}}}.call(this),
TransformDefinition=function(){var a={__class__:"flash.geom.Transform",get colorTransform(){var a=this._target._cxform;return a?new flash.geom.ColorTransform(a.redMultiplier/256,a.greenMultiplier/256,a.blueMultiplier/256,a.alphaMultiplier/256,a.redOffset,a.greenOffset,a.blueOffset,a.alphaOffset):new flash.geom.ColorTransform},set colorTransform(a){avm2.systemDomain.getClass("flash.geom.ColorTransform").isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.geom.ColorTransform");
this._target._cxform={redMultiplier:256*a.redMultiplier,greenMultiplier:256*a.greenMultiplier,blueMultiplier:256*a.blueMultiplier,alphaMultiplier:256*a.alphaMultiplier,redOffset:a.redOffset,greenOffset:a.greenOffset,blueOffset:a.blueOffset,alphaOffset:a.alphaOffset};this._target._invalidate()},get concatenatedColorTransform(){var a=this.colorTransform;a.concat(this._target.parent.transform.concatenatedColorTransform);return a},get concatenatedMatrix(){if(this._target._current3DTransform)return null;
var a=this._target._getConcatenatedTransform();return new flash.geom.Matrix(a.a,a.b,a.c,a.d,a.tx/20,a.ty/20)},get matrix(){if(this._target._current3DTransform)return null;var a=this._target._currentTransform;return new flash.geom.Matrix(a.a,a.b,a.c,a.d,a.tx/20,a.ty/20)},set matrix(a){flash.geom.Matrix.class.isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.geom.Matrix");var b=this._target;b._invalidate();b._setTransformMatrix(a,!0);b._current3DTransform=null;b._animated=
!1},get matrix3D(){var a=this._target._current3DTransform;return a&&a.clone()},set matrix3D(a){avm2.systemDomain.getClass("flash.geom.Matrix3D").isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.geom.Matrix3D");var b=a.rawData;this.matrix=new flash.geom.Matrix(b.asGetPublicProperty(0),b.asGetPublicProperty(1),b.asGetPublicProperty(4),b.asGetPublicProperty(5),b.asGetPublicProperty(12),b.asGetPublicProperty(13));this._target._current3DTransform=a},ctor:function(a){this._target=
a}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{colorTransform:b(a,"colorTransform"),concatenatedColorTransform:b(a,"concatenatedColorTransform"),concatenatedMatrix:b(a,"concatenatedMatrix"),matrix:b(a,"matrix"),matrix3D:b(a,"matrix3D"),ctor:a.ctor}}};return a}.call(this),Vector3DDefinition=function(){return{__class__:"flash.geom.Vector3D",initialize:function(){},__glue__:{script:{instance:Glue.ALL}}}}.call(this),ID3InfoDefinition=function(){return{__glue__:{script:{instance:{songName:"public songName",
genre:"public genre",artist:"public artist",track:"public track",album:"public album",year:"public year",comment:"public comment"}}}}}.call(this),MicrophoneDefinition=function(){return{__class__:"flash.media.Microphone",initialize:function(){},__glue__:{"native":{"static":{getMicrophone:function(){notImplemented("Microphone.getMicrophone")},getEnhancedMicrophone:function(){notImplemented("Microphone.getEnhancedMicrophone")},names:{get:function(){notImplemented("Microphone.names")}},isSupported:{get:function(){notImplemented("Microphone.isSupported")}}},
instance:{setSilenceLevel:function(){notImplemented("Microphone.setSilenceLevel")},setUseEchoSuppression:function(){notImplemented("Microphone.setUseEchoSuppression")},setLoopBack:function(){notImplemented("Microphone.setLoopBack")},gain:{set:function(a){notImplemented("Microphone.gain");this._gain=a},get:function(){notImplemented("Microphone.gain");return this._gain}},rate:{set:function(a){notImplemented("Microphone.rate");this._rate=a},get:function(){notImplemented("Microphone.rate");return this._rate}},
codec:{set:function(a){notImplemented("Microphone.codec");this._codec=a},get:function(){notImplemented("Microphone.codec");return this._codec}},framesPerPacket:{get:function(){notImplemented("Microphone.framesPerPacket");return this._framesPerPacket},set:function(a){notImplemented("Microphone.framesPerPacket");this._framesPerPacket=a}},encodeQuality:{get:function(){notImplemented("Microphone.encodeQuality");return this._encodeQuality},set:function(a){notImplemented("Microphone.encodeQuality");this._encodeQuality=
a}},noiseSuppressionLevel:{get:function(){notImplemented("Microphone.noiseSuppressionLevel");return this._noiseSuppressionLevel},set:function(a){notImplemented("Microphone.noiseSuppressionLevel");this._noiseSuppressionLevel=a}},enableVAD:{get:function(){notImplemented("Microphone.enableVAD");return this._enableVAD},set:function(a){notImplemented("Microphone.enableVAD");this._enableVAD=a}},activityLevel:{get:function(){notImplemented("Microphone.activityLevel");return this._activityLevel}},index:{get:function(){notImplemented("Microphone.index");
return this._index}},muted:{get:function(){notImplemented("Microphone.muted");return this._muted}},name:{get:function(){notImplemented("Microphone.name");return this._name}},silenceLevel:{get:function(){notImplemented("Microphone.silenceLevel");return this._silenceLevel}},silenceTimeout:{get:function(){notImplemented("Microphone.silenceTimeout");return this._silenceTimeout}},useEchoSuppression:{get:function(){notImplemented("Microphone.useEchoSuppression");return this._useEchoSuppression}},soundTransform:{get:function(){notImplemented("Microphone.soundTransform");
return this._soundTransform},set:function(a){notImplemented("Microphone.soundTransform");this._soundTransform=a}},enhancedOptions:{get:function(){notImplemented("Microphone.enhancedOptions");return this._enhancedOptions},set:function(a){notImplemented("Microphone.enhancedOptions");this._enhancedOptions=a}}}},script:{instance:Glue.ALL}}}}.call(this),PLAY_USING_AUDIO_TAG=!0,SoundDefinition=function(){function a(a,b){var e=document.createElement("audio");if(e.canPlayType(a.mimeType)){e.preload="metadata";
var l=new Blob([a.data],{type:a.mimeType});e.src=URL.createObjectURL(l);e.load();e.addEventListener("loadedmetadata",function(){b({duration:1E3*this.duration})})}else b({duration:0})}var b={initialize:function(){this._playQueue=[];this._url=null;this._bytesLoaded=this._bytesTotal=this._length=0;this._id3=new flash.media.ID3Info;var b=this.symbol;if(b){var e={};b.pcm&&(e.sampleRate=b.sampleRate,e.channels=b.channels,e.pcm=b.pcm,e.end=b.pcm.length);e.completed=!0;b.packaged&&(e.data=b.packaged.data.buffer,
e.mimeType=b.packaged.mimeType);var g=this;a(e,function(a){g._length=a.duration});this._soundData=e}TelemetryService.reportTelemetry({topic:"feature",feature:5})},close:function(){somewhatImplemented("Sound.close")},extract:function(){notImplemented("Sound.extract")},_load:function(b){if(b){var e=this,g=this._stream=new flash.net.URLStream,l=avm2.systemDomain.getClass("flash.utils.ByteArray").createInstance(),m=0,p={completed:!1};g._addEventListener("progress",function(a){e._bytesLoaded=a[Multiname.getPublicQualifiedName("bytesLoaded")];
e._bytesTotal=a[Multiname.getPublicQualifiedName("bytesTotal")];var b=g.bytesAvailable;g.readBytes(l,m,b);m+=b;e._dispatchEvent(a)});g._addEventListener("complete",function(b){e._dispatchEvent(b);p.data=l.a;p.mimeType="audio/mpeg";p.completed=!0;e._soundData=p;a(p,function(a){e._length=a.duration});e._playQueue.forEach(function(a){a.channel._playSoundDataViaAudio(p,a.startTime)})});g.load(b)}},loadCompressedDataFromByteArray:function(){notImplemented("Sound#loadCompressedDataFromByteArray")},loadPCMFromByteArray:function(){notImplemented("Sound#loadPCMFromByteArray")},
play:function(a,b,e){a=a||0;b=b||0;var l=new flash.media.SoundChannel;l._sound=this;l._soundTransform=isNullOrUndefined(e)?new flash.media.SoundTransform:e;this._playQueue.push({channel:l,startTime:a});this._soundData&&l._playSoundDataViaAudio(this._soundData,a,b);return l},get bytesLoaded(){return this._bytesLoaded},get bytesTotal(){return this._bytesTotal},get id3(){return this._id3},get isBuffering(){notImplemented("Sound#isBuffering")},get isURLInaccessible(){notImplemented("Sound#isURLInaccessible")},
get length(){return this._length},get url(){return this._url}},e=Object.getOwnPropertyDescriptor;b.__glue__={"native":{instance:{close:b.close,extract:b.extract,_load:b._load,loadCompressedDataFromByteArray:b.loadCompressedDataFromByteArray,loadPCMFromByteArray:b.loadPCMFromByteArray,play:b.play,bytesLoaded:e(b,"bytesLoaded"),bytesTotal:e(b,"bytesTotal"),id3:e(b,"id3"),isBuffering:e(b,"isBuffering"),isURLInaccessible:e(b,"isURLInaccessible"),length:e(b,"length"),url:e(b,"url")}}};return b}.call(this),
SoundChannelDefinition=function(){return{initialize:function(){this._element=null;this._rightPeak=this._leftPeak=this._position=0;this._pcmData=null;this._soundTransform=new flash.media.SoundTransform;this._soundMixerClass=avm2.systemDomain.getClass("flash.media.SoundMixer");var a=this.symbol;a&&(this._element=a.element||null);this._element&&this._registerWithSoundMixer()},_registerWithSoundMixer:function(){this._soundMixerClass.native.static._registerChannel(this)},_unregisterWithSoundMixer:function(){this._soundMixerClass.native.static._unregisterChannel(this)},
_applySoundTransform:function(){var a=this._soundTransform._volume;this._soundMixerClass._soundTransform&&(a*=this._soundMixerClass._soundTransform._volume);a*=this._soundMixerClass.native.static._getMasterVolume();this._element&&(this._element.volume=clamp(a,0,1))},_playSoundDataViaChannel:function(a,b,e){this._registerWithSoundMixer();var d=this,f=Math.round(b/1E3*a.sampleRate)*a.channels,g=f;this._position=b;this._audioChannel=createAudioChannel(a.sampleRate,a.channels);this._audioChannel.ondatarequested=
function(b){var m=a.end;if(g>=m&&a.completed)d._unregisterWithSoundMixer(),d._audioChannel.stop(),d._dispatchEvent(new flash.events.Event("soundComplete",!1,!1));else{var p=b.count;b=b.data;var r=a.pcm;do{for(var s=Math.min(m-g,p),w=0;w<s;w++)b[w]=r[g++];p-=s;if(g>=m){if(!e)break;e--;g=f}}while(0<p);d._position=1E3*(g/a.sampleRate/a.channels)}};this._audioChannel.start();this._applySoundTransform()},_playSoundDataViaAudio:function(a,b,e){if(a.mimeType){this._registerWithSoundMixer();this._position=
b;var d=this,f=0,g=document.createElement("audio");g.canPlayType(a.mimeType)?(g.preload="metadata",g.loop=0<e,a=new Blob([a.data],{type:a.mimeType}),g.src=URL.createObjectURL(a),g.addEventListener("loadeddata",function(){g.currentTime=b/1E3;g.play()}),g.addEventListener("timeupdate",function(){var a=g.currentTime;e&&f>a&&(--e,e||(g.loop=!1),a<b/1E3&&(g.currentTime=b/1E3));d._position=1E3*(f=a)}),g.addEventListener("ended",function(){d._unregisterWithSoundMixer();d._dispatchEvent(new flash.events.Event("soundComplete",
!1,!1));d._element=null}),this._element=g,this._applySoundTransform()):console.error('ERROR: "'+a.mimeType+'" type playback is not supported by the browser')}},__glue__:{"native":{"static":{},instance:{stop:function(){this._element&&(this._unregisterWithSoundMixer(),this._element.pause());this._audioChannel&&(this._unregisterWithSoundMixer(),this._audioChannel.stop())},position:{get:function(){return this._position}},leftPeak:{get:function(){return this._leftPeak}},rightPeak:{get:function(){return this.rightPeak}},
soundTransform:{get:function(){somewhatImplemented("SoundChannel.soundTransform");return new flash.media.SoundTransform(this._soundTransform._volume,this._soundTransform.pan)},set:function(a){somewhatImplemented("SoundChannel.soundTransform");this._soundTransform=isNullOrUndefined(a)?new flash.media.SoundTransform:a;this._applySoundTransform()}}}},script:{instance:scriptProperties("public",["stop"])}}}}.call(this);
function createAudioChannel(a,b){if(WebAudioChannel.isSupported)return new WebAudioChannel(a,b);error("PCM data playback is not supported by the browser")}function AudioResampler(a,b){this.sourceRate=a;this.targetRate=b;this.tail=[];this.sourceOffset=0}
AudioResampler.prototype={ondatarequested:function(){},getData:function(a,b){for(var e=this.sourceRate/this.targetRate,d=this.sourceOffset,f=Math.ceil((b-1)*e+d)+1,g=[],l=0;l<a.length;l++)g.push(new Float32Array(f));this.ondatarequested({data:g,count:f});for(l=0;l<a.length;l++){for(var m=a[l],p=g[l],r=0;r<b;r++){var s=r*e+d,w=s|0,v=Math.ceil(s)|0,z=0>w?this.tail[l]:p[w];w===v?m[r]=z:(s-=w,m[r]=z*(1-s)+p[v]*s)}this.tail[l]=p[f-1]}this.sourceOffset=(b-1)*e+d-(f-1)}};
function WebAudioChannel(a,b){var e=WebAudioChannel.context;e||(e="undefined"!==typeof AudioContext?new AudioContext:new webkitAudioContext,WebAudioChannel.context=e);this.context=e;this.contextSampleRate=e.sampleRate||44100;this.channels=b;this.sampleRate=a;this.contextSampleRate!=a&&(this.resampler=new AudioResampler(a,this.contextSampleRate),this.resampler.ondatarequested=function(a){this.requestData(a.data,a.count)}.bind(this))}
WebAudioChannel.prototype={start:function(){var a=this.context.createScriptProcessor?this.context.createScriptProcessor(2048,0,this.channels):this.context.createJavaScriptNode(2048,0,this.channels),b=this;a.onaudioprocess=function(a){for(var d=[],f=0;f<b.channels;f++)d.push(a.outputBuffer.getChannelData(f));a=d[0].length;b.resampler?b.resampler.getData(d,a):b.requestData(d,a)};a.connect(this.context.destination);this.source=a},stop:function(){this.source.disconnect(this.context.destination)},requestData:function(a,
b){var e=this.channels,d=new Float32Array(b*e);this.ondatarequested({data:d,count:d.length});for(var f=0,g=0;f<b;f++)for(var l=0;l<e;l++)a[l][f]=d[g++]}};WebAudioChannel.isSupported=function(){return"undefined"!==typeof AudioContext||"undefined"!=typeof webkitAudioContext}();
var SoundMixerDefinition=function(){var a=1,b=[];return{__class__:"flash.media.SoundMixer",initialize:function(){},__glue__:{"native":{"static":{_registerChannel:function(a){b.push(a)},_unregisterChannel:function(a){a=b.indexOf(a);0<=a&&b.splice(a,1)},_getMasterVolume:function(){return a},_setMasterVolume:function(e){a=e;b.forEach(function(a){a._applySoundTransform()})},stopAll:function(){b.forEach(function(a){a.stop()});b=[]},computeSpectrum:function(a){somewhatImplemented("SoundMixer.computeSpectrum");
for(var b=new Float32Array(1024),f=0;1024>f;f++)b[f]=Math.random();a.writeRawBytes(b);a.position=0},areSoundsInaccessible:function(){notImplemented("SoundMixer.areSoundsInaccessible")},bufferTime:{get:function(){notImplemented("SoundMixer.bufferTime")},set:function(){notImplemented("SoundMixer.bufferTime")}},soundTransform:{get:function(){somewhatImplemented("SoundMixer.soundTransform");return isNullOrUndefined(this._soundTransform)?new flash.media.SoundTransform:new flash.media.SoundTransform(this._soundTransform._volume,
this._soundTransform.pan)},set:function(a){somewhatImplemented("SoundMixer.soundTransform");this._soundTransform=isNullOrUndefined(a)?new flash.media.SoundTransform:a;b.forEach(function(a){a._applySoundTransform()})}},audioPlaybackMode:{get:function(){notImplemented("SoundMixer.audioPlaybackMode")},set:function(){notImplemented("SoundMixer.audioPlaybackMode")}},useSpeakerphoneForVoice:{get:function(){notImplemented("SoundMixer.useSpeakerphoneForVoice")},set:function(){notImplemented("SoundMixer.useSpeakerphoneForVoice")}}},
instance:{}}}}}.call(this),SoundTransformDefinition=function(){return{__class__:"flash.media.SoundTransform",initialize:function(){},_updateTransform:function(){somewhatImplemented("SoundTransform._updateTransform")},__glue__:{"native":{"static":{},instance:{volume:{get:function(){return this._volume},set:function(a){this._volume=a;this._updateTransform()}},leftToLeft:{get:function(){return this._leftToLeft},set:function(a){this._leftToLeft=a;this._updateTransform()}},leftToRight:{get:function(){return this._leftToRight},
set:function(a){this._leftToRight=a;this._updateTransform()}},rightToRight:{get:function(){return this._rightToRight},set:function(a){this._rightToRight=a;this._updateTransform()}},rightToLeft:{get:function(){return this._rightToLeft},set:function(a){this._rightToLeft=a;this._updateTransform()}}}},script:{instance:{pan:"public pan"}}}}}.call(this),StageVideoDefinition=function(){return{__class__:"flash.media.StageVideo",initialize:function(){},__glue__:{"native":{"static":{},instance:{attachNetStream:function(){notImplemented("StageVideo.attachNetStream")},
attachCamera:function(){notImplemented("StageVideo.attachCamera")},viewPort:{get:function(){notImplemented("StageVideo.viewPort");return this._viewPort},set:function(a){notImplemented("StageVideo.viewPort");this._viewPort=a}},pan:{set:function(a){notImplemented("StageVideo.pan");this._pan=a},get:function(){notImplemented("StageVideo.pan");return this._pan}},zoom:{set:function(a){notImplemented("StageVideo.zoom");this._zoom=a},get:function(){notImplemented("StageVideo.zoom");return this._zoom}},depth:{set:function(a){notImplemented("StageVideo.depth");
this._depth=a},get:function(){notImplemented("StageVideo.depth");return this._depth}},videoWidth:{get:function(){notImplemented("StageVideo.videoWidth");return this._videoWidth}},videoHeight:{get:function(){notImplemented("StageVideo.videoHeight");return this._videoHeight}},colorSpaces:{get:function(){notImplemented("StageVideo.colorSpaces");return this._colorSpaces}}}}}}}.call(this),VideoDefinition=function(){var a={initialize:function(){TelemetryService.reportTelemetry({topic:"feature",feature:4})},
attachNetStream:function(a){this._netStream=a;a._videoReady.then(function(e){this._element=e;a._videoMetadataReady.then(function(){this._element.width=this._videoWidth=this._element.videoWidth;this._element.height=this._videoHeight=this._element.videoHeight;this.stage&&(this.stage._invalid=!0)}.bind(this))}.bind(this))},ctor:function(a,e){if(!a||0>a)a=320;if(!e||0>e)e=240;this._bbox={xMin:0,yMin:0,xMax:20*a,yMax:20*e};this._initialWidth=this._videoWidth=a;this._initialHeight=this._videoHeight=e;this._element=
null;this._added=!1},draw:function(a){if(this._element){this._added||(a.canvas.parentNode.appendChild(this._element),this._added=!0);var e=this._initialWidth,d=this._initialHeight;0<e&&0<d&&(a.save(),a.beginPath(),a.rect(0,0,e,d),a.clip(),a.clearRect(0,0,e,d),a.restore());a=this._getConcatenatedTransform(!0);var e=e/this._videoWidth,d=d/this._videoHeight,f=this.stage&&this.stage._contentsScaleFactor||1;a="transform: matrix("+e*a.a/f+","+e*a.b/f+","+d*a.c/f+","+d*a.d/f+","+a.tx/20/f+","+a.ty/20/f+
");";this._currentCssTransform!==a&&(this._currentCssTransform=a,this._element.setAttribute("style","position: absolute; top:0; left:0; z-index: -100;transform-origin: 0px 0px 0;"+a+"-webkit-transform-origin: 0px 0px 0; -webkit-"+a))}}};a.__glue__={"native":{instance:{attachNetStream:a.attachNetStream,ctor:a.ctor,smoothing:{get:function(){return this._smoothing},set:function(a){somewhatImplemented("Video.smoothing");this._smoothing=a}},videoHeight:{get:function(){return this._videoHeight}},videoWidth:{get:function(){return this._videoWidth}}}}};
return a}.call(this),FileFilterDefinition=function(){return{__class__:"flash.net.FileFilter",initialize:function(){this._macType=this._extension=this._description=null},__glue__:{"native":{"static":{},instance:{description:{get:function(){return this._description},set:function(a){this._description=a}},extension:{get:function(){return this._extension},set:function(a){this._extension=a}},macType:{get:function(){return this._macType},set:function(a){this._macType=a}}}}}}}.call(this),LocalConnectionDefinition=
function(){return{__class__:"flash.net.LocalConnection",initialize:function(){},__glue__:{"native":{"static":{},instance:{close:function(){notImplemented("LocalConnection.close")},connect:function(){notImplemented("LocalConnection.connect")},send:function(){notImplemented("LocalConnection.send")},allowDomain:function(){notImplemented("LocalConnection.allowDomain")},allowInsecureDomain:function(){notImplemented("LocalConnection.allowInsecureDomain")},domain:{get:function(){somewhatImplemented("LocalConnection.domain");
var a=FileLoadingService.resolveUrl("/");return(a=/:\/\/(.+?)[:?#\/]/.exec(a))&&a[1]}},client:{get:function(){notImplemented("LocalConnection.client");return this._client},set:function(a){notImplemented("LocalConnection.client");this._client=a}},isPerUser:{get:function(){notImplemented("LocalConnection.isPerUser");return this._isPerUser},set:function(a){notImplemented("LocalConnection.isPerUser");this._isPerUser=a}}}}}}}.call(this),NetConnectionDefinition=function(){return{__class__:"flash.net.NetConnection",
initialize:function(){TelemetryService.reportTelemetry({topic:"feature",feature:6})},_invoke:function(a){var b=!1;switch(a){case 2:b=!0}(b?somewhatImplemented:notImplemented)("NetConnection._invoke ("+a+")")},__glue__:{"native":{"static":{defaultObjectEncoding:{get:function(){notImplemented("NetConnection.defaultObjectEncoding")},set:function(){notImplemented("NetConnection.defaultObjectEncoding")}}},instance:{connect:function(a){var b=flash.events.NetStatusEvent;somewhatImplemented("NetConnection.connect");
(this._uri=a)?this._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({level:"status",code:"NetConnection.Connect.Failed"}))):(this._connected=!0,this._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({level:"status",code:"NetConnection.Connect.Success"}))))},call:function(){notImplemented("NetConnection.call")},connected:{get:function(){return this._connected}},uri:{get:function(){return this._uri}},client:{get:function(){return this._client},set:function(a){this._client=a}},objectEncoding:{get:function(){notImplemented("NetConnection.objectEncoding");
return this._objectEncoding},set:function(a){notImplemented("NetConnection.objectEncoding");this._objectEncoding=a}},proxyType:{get:function(){notImplemented("NetConnection.proxyType");return this._proxyType},set:function(a){notImplemented("NetConnection.proxyType");this._proxyType=a}},connectedProxyType:{get:function(){notImplemented("NetConnection.connectedProxyType");return this._connectedProxyType}},usingTLS:{get:function(){somewhatImplemented("NetConnection.usingTLS");return!1}},protocol:{get:function(){notImplemented("NetConnection.protocol");
return this._protocol}},maxPeerConnections:{get:function(){notImplemented("NetConnection.maxPeerConnections");return this._maxPeerConnections},set:function(a){notImplemented("NetConnection.maxPeerConnections");this._maxPeerConnections=a}},nearID:{get:function(){notImplemented("NetConnection.nearID");return this._nearID}},farID:{get:function(){notImplemented("NetConnection.farID");return this._farID}},nearNonce:{get:function(){notImplemented("NetConnection.nearNonce");return this._nearNonce}},farNonce:{get:function(){notImplemented("NetConnection.farNonce");
return this._farNonce}},unconnectedPeerStreams:{get:function(){notImplemented("NetConnection.unconnectedPeerStreams");return this._unconnectedPeerStreams}},invoke:function(a){return this._invoke(a,Array.prototype.slice.call(arguments,1))},invokeWithArgsArray:function(a,b){return this._invoke.call(this,a,b)}}}}}}.call(this),USE_MEDIASOURCE_API=!1,NetStreamDefinition=function(){return{__class__:"flash.net.NetStream",initialize:function(){},_invoke:function(a){var b=!1;switch(a){case 4:b=!0;break;case 202:b=
!0;break;case 300:return 0;case 302:return 0;case 305:return 0;case 306:return 0}(b?somewhatImplemented:notImplemented)("NetStream._invoke ("+a+")")},_createVideoElement:function(a){var b=flash.events.NetStatusEvent,e=this,d=document.createElement("video");d.src=a;d.addEventListener("play",function(){e._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Play.Start",level:"status"})))});d.addEventListener("ended",function(){e._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Play.Stop",
level:"status"})))});d.addEventListener("loadeddata",function(){e._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Buffer.Full",level:"status"})))});d.addEventListener("waiting",function(){e._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Buffer.Empty",level:"status"})))});d.addEventListener("loadedmetadata",function(){e._videoMetadataReady.resolve({videoWidth:d.videoWidth,videoHeight:d.videoHeight})});d.addEventListener("error",function(a){e._dispatchEvent(new b(b.class.NET_STATUS,
!1,!1,wrapJSObject({code:4===a.target.error.code?"NetStream.Play.NoSupportedTrackFound":3===a.target.error.code?"NetStream.Play.FileStructureInvalid":"NetStream.Play.StreamNotFound",level:"error"})))});d.play();this._videoElement=d;this._videoReady.resolve(d)},__glue__:{script:{instance:scriptProperties("public",["appendBytes","appendBytesAction"])},"native":{"static":{},instance:{ctor:function(){somewhatImplemented("NetStream.ctor");this._mediaSource=this._contentTypeHint=null;this._checkPolicyFile=
!0;this._videoElement=null;this._videoReady=new Promise;this._videoMetadataReady=new Promise},onResult:function(){notImplemented("NetStream.onResult")},dispose:function(){notImplemented("NetStream.dispose")},play:function(a){var b=!1;b&&"undefined"===typeof MediaSource&&(console.warn("MediaSource API is not enabled, falling back to regular playback"),b=!1);if(b){var e=new MediaSource;e.addEventListener("sourceopen",function(){this._mediaSource=e}.bind(this));e.addEventListener("sourceend",function(){this._mediaSource=
null}.bind(this));this._createVideoElement(window.URL.createObjectURL(e));if(a){a=new flash.net.URLRequest(a);a._checkPolicyFile=this._checkPolicyFile;var d=new flash.net.URLStream;d._addEventListener("httpStatus",function(a){if((a=a.asGetPublicProperty("responseHeaders").filter(function(a){return"Content-Type"===a.asGetPublicProperty("name")})[0])&&"application/octet-stream"!==a.asGetPublicProperty("value"))this._contentTypeHint=a.asGetPublicProperty("value")}.bind(this));d._addEventListener("progress",
function(){var a=d.bytesAvailable,b=avm2.systemDomain.getClass("flash.utils.ByteArray").createInstance();d.readBytes(b,0,a);this.appendBytes(b)}.bind(this));d._addEventListener("complete",function(){this.appendBytesAction("endSequence")}.bind(this));d.load(a)}}else somewhatImplemented("NetStream.play"),this._createVideoElement(FileLoadingService.resolveUrl(a))},play2:function(){notImplemented("NetStream.play2")},invoke:function(a){return this._invoke(a,Array.prototype.slice.call(arguments,1))},invokeWithArgsArray:function(a,
b){return this._invoke.call(this,a,b)},appendBytes:function(a){this._mediaSource&&(this._mediaSourceBuffer||(this._mediaSourceBuffer=this._mediaSource.addSourceBuffer(this._contentTypeHint)),this._mediaSourceBuffer.appendBuffer(new Uint8Array(a.a,0,a.length)));somewhatImplemented("NetStream.appendBytes")},appendBytesAction:function(a){"endSequence"===a&&this._mediaSource&&this._mediaSource.endOfStream();somewhatImplemented("NetStream.appendBytesAction")},info:{get:function(){notImplemented("NetStream.info");
return this._info}},multicastInfo:{get:function(){notImplemented("NetStream.multicastInfo");return this._multicastInfo}},soundTransform:{get:function(){return this._soundTransform},set:function(a){somewhatImplemented("NetStream.soundTransform");this._soundTransform=a}},checkPolicyFile:{get:function(){return this._checkPolicyFile},set:function(a){this._checkPolicyFile=a}},client:{get:function(){somewhatImplemented("NetStream.client");return this._client},set:function(a){somewhatImplemented("NetStream.client");
this._client=a}},objectEncoding:{get:function(){notImplemented("NetStream.objectEncoding");return this._objectEncoding}},multicastPushNeighborLimit:{get:function(){notImplemented("NetStream.multicastPushNeighborLimit");return this._multicastPushNeighborLimit},set:function(a){notImplemented("NetStream.multicastPushNeighborLimit");this._multicastPushNeighborLimit=a}},multicastWindowDuration:{get:function(){notImplemented("NetStream.multicastWindowDuration");return this._multicastWindowDuration},set:function(a){notImplemented("NetStream.multicastWindowDuration");
this._multicastWindowDuration=a}},multicastRelayMarginDuration:{get:function(){notImplemented("NetStream.multicastRelayMarginDuration");return this._multicastRelayMarginDuration},set:function(a){notImplemented("NetStream.multicastRelayMarginDuration");this._multicastRelayMarginDuration=a}},multicastAvailabilityUpdatePeriod:{get:function(){notImplemented("NetStream.multicastAvailabilityUpdatePeriod");return this._multicastAvailabilityUpdatePeriod},set:function(a){notImplemented("NetStream.multicastAvailabilityUpdatePeriod");
this._multicastAvailabilityUpdatePeriod=a}},multicastFetchPeriod:{get:function(){notImplemented("NetStream.multicastFetchPeriod");return this._multicastFetchPeriod},set:function(a){notImplemented("NetStream.multicastFetchPeriod");this._multicastFetchPeriod=a}},multicastAvailabilitySendToAll:{get:function(){notImplemented("NetStream.multicastAvailabilitySendToAll");return this._multicastAvailabilitySendToAll},set:function(a){notImplemented("NetStream.multicastAvailabilitySendToAll");this._multicastAvailabilitySendToAll=
a}},farID:{get:function(){notImplemented("NetStream.farID");return this._farID}},nearNonce:{get:function(){notImplemented("NetStream.nearNonce");return this._nearNonce}},farNonce:{get:function(){notImplemented("NetStream.farNonce");return this._farNonce}},peerStreams:{get:function(){notImplemented("NetStream.peerStreams");return this._peerStreams}},audioReliable:{get:function(){notImplemented("NetStream.audioReliable");return this._audioReliable},set:function(a){notImplemented("NetStream.audioReliable");
this._audioReliable=a}},videoReliable:{get:function(){notImplemented("NetStream.videoReliable");return this._videoReliable},set:function(a){notImplemented("NetStream.videoReliable");this._videoReliable=a}},dataReliable:{get:function(){notImplemented("NetStream.dataReliable");return this._dataReliable},set:function(a){notImplemented("NetStream.dataReliable");this._dataReliable=a}},audioSampleAccess:{get:function(){notImplemented("NetStream.audioSampleAccess");return this._audioSampleAccess},set:function(a){notImplemented("NetStream.audioSampleAccess");
this._audioSampleAccess=a}},videoSampleAccess:{get:function(){notImplemented("NetStream.videoSampleAccess");return this._videoSampleAccess},set:function(a){notImplemented("NetStream.videoSampleAccess");this._videoSampleAccess=a}},useHardwareDecoder:{get:function(){notImplemented("NetStream.useHardwareDecoder");return this._useHardwareDecoder},set:function(a){notImplemented("NetStream.useHardwareDecoder");this._useHardwareDecoder=a}},useJitterBuffer:{get:function(){notImplemented("NetStream.useJitterBuffer");
return this._useJitterBuffer},set:function(a){notImplemented("NetStream.useJitterBuffer");this._useJitterBuffer=a}},videoStreamSettings:{get:function(){notImplemented("NetStream.videoStreamSettings");return this._videoStreamSettings},set:function(a){notImplemented("NetStream.videoStreamSettings");this._videoStreamSettings=a}}}}}}}.call(this),ObjectEncodingDefinition=function(){return{__class__:"flash.net.ObjectEncoding",initialize:function(){},__glue__:{"native":{"static":{dynamicPropertyWriter:{get:function(){notImplemented("ObjectEncoding.dynamicPropertyWriter")},
set:function(){notImplemented("ObjectEncoding.dynamicPropertyWriter")}}},instance:{}}}}}.call(this),ResponderDefinition=function(){var a={ctor:function(){}};a.__glue__={"native":{instance:{ctor:a.ctor}}};return a}.call(this),SharedObjectDefinition=function(){var a=3,b=createEmptyObject();return{__class__:"flash.net.SharedObject",initialize:function(){this._data=this._path=null;this._objectEncoding=a;TelemetryService.reportTelemetry({topic:"feature",feature:3})},__glue__:{"native":{"static":{deleteAll:function(){notImplemented("SharedObject.deleteAll")},
getDiskUsage:function(){notImplemented("SharedObject.getDiskUsage")},getLocal:function(a,d){var f=(d||"")+"/"+a;if(b[f])return b[f];var g=new flash.net.SharedObject;g._path=f;f=sessionStorage.getItem(f);g._data=f?JSON.parse(f):{};return g},getRemote:function(){notImplemented("SharedObject.getRemote")},defaultObjectEncoding:{get:function(){return a},set:function(b){a=b}}},instance:{setDirty:function(){somewhatImplemented("SharedObject.setDirty")},invoke:function(a){var b=a;Array.prototype.slice.call(arguments,
1);var f=!1,g;switch(b){case 4:g=JSON.stringify(this._data).length-2;f=!0;break;case 6:this._data={};sessionStorage.removeItem(this._path);f=!0;break;case 2:sessionStorage.setItem(this._path,JSON.stringify(this._data));g=f=!0;break;case 3:f=!0}(f?somewhatImplemented:notImplemented)("SharedObject.invoke ("+b+")");return g},invokeWithArgsArray:function d(a,b){return d.call(this,a,b)},data:{get:function(){return this._data}},objectEncoding:{get:function(){return this._objectEncoding},set:function(a){this._objectEncoding=
a}},client:{get:function(){notImplemented("SharedObject.client");return this._client},set:function(a){notImplemented("SharedObject.client");this._client=a}}}}}}}.call(this),SocketDefinition=function(){return{__class__:"flash.net.Socket",initialize:function(){},__glue__:{"native":{"static":{},instance:{internalGetSecurityErrorMessage:function(){notImplemented("Socket.internalGetSecurityErrorMessage")},internalConnect:function(){notImplemented("Socket.internalConnect")},didFailureOccur:function(){notImplemented("Socket.didFailureOccur")},
readBytes:function(){notImplemented("Socket.readBytes")},writeBytes:function(){notImplemented("Socket.writeBytes")},writeBoolean:function(){notImplemented("Socket.writeBoolean")},writeByte:function(){notImplemented("Socket.writeByte")},writeShort:function(){notImplemented("Socket.writeShort")},writeInt:function(){notImplemented("Socket.writeInt")},writeUnsignedInt:function(){notImplemented("Socket.writeUnsignedInt")},writeFloat:function(){notImplemented("Socket.writeFloat")},writeDouble:function(){notImplemented("Socket.writeDouble")},
writeMultiByte:function(){notImplemented("Socket.writeMultiByte")},writeUTF:function(){notImplemented("Socket.writeUTF")},writeUTFBytes:function(){notImplemented("Socket.writeUTFBytes")},readBoolean:function(){notImplemented("Socket.readBoolean")},readByte:function(){notImplemented("Socket.readByte")},readUnsignedByte:function(){notImplemented("Socket.readUnsignedByte")},readShort:function(){notImplemented("Socket.readShort")},readUnsignedShort:function(){notImplemented("Socket.readUnsignedShort")},
readInt:function(){notImplemented("Socket.readInt")},readUnsignedInt:function(){notImplemented("Socket.readUnsignedInt")},readFloat:function(){notImplemented("Socket.readFloat")},readDouble:function(){notImplemented("Socket.readDouble")},readMultiByte:function(){notImplemented("Socket.readMultiByte")},readUTF:function(){notImplemented("Socket.readUTF")},readUTFBytes:function(){notImplemented("Socket.readUTFBytes")},internalClose:function(){notImplemented("Socket.internalClose")},flush:function(){notImplemented("Socket.flush")},
writeObject:function(){notImplemented("Socket.writeObject")},readObject:function(){notImplemented("Socket.readObject")},bytesAvailable:{get:function(){notImplemented("Socket.bytesAvailable");return this._bytesAvailable}},connected:{get:function(){notImplemented("Socket.connected");return this._connected}},objectEncoding:{get:function(){notImplemented("Socket.objectEncoding");return this._objectEncoding},set:function(a){notImplemented("Socket.objectEncoding");this._objectEncoding=a}},endian:{get:function(){notImplemented("Socket.endian");
return this._endian},set:function(a){notImplemented("Socket.endian");this._endian=a}},bytesPending:{get:function(){notImplemented("Socket.bytesPending");return this._bytesPending}}}},script:{instance:Glue.ALL}}}}.call(this),URLLoaderDefinition=function(){return{initialize:function(){},__glue__:{"native":{"static":{},instance:{}},script:{"static":{},instance:{data:"public data",dataFormat:"public dataFormat",bytesTotal:"public bytesTotal",bytesLoaded:"public bytesLoaded",load:"public load"}}}}}.call(this),
URLRequestDefinition=function(){function a(){var a={};a.url=this._url;a.method=this._method;a.checkPolicyFile=this._checkPolicyFile;if(this._data)if(a.mimeType=this._contentType,avm2.systemDomain.getClass("flash.utils.ByteArray").isInstanceOf(this._data))a.data=new Uint8Array(this._data.a,0,this._data.length);else{var b=this._data.asGetPublicProperty("toString").call(this._data);if("GET"===this._method){var e=a.url.lastIndexOf("?");a.url=(0>e?a.url:a.url.substring(0,e))+"?"+b}else a.data=b}return a}
var b={initialize:function(){this._url=null;this._method="GET";this._digest=this._data=null;this._contentType="application/x-www-form-urlencoded";this._requestHeaders=null;this._checkPolicyFile=!0;this._toFileRequest=a},setMethod:function(a){this._method=a},setRequestHeaders:function(a){this._requestHeaders=a},get contentType(){return this._contentType},set contentType(a){this._contentType=a},get data(){return this._data},set data(a){this._data=a},get digest(){return this._digest},set digest(a){this._digest=
a},get method(){return this._method},set method(a){this._method=a},get requestHeaders(){return this._requestHeaders},set requestHeaders(a){this._requestHeaders=a},get url(){return this._url},set url(a){this._url=a}},e=Object.getOwnPropertyDescriptor;b.__glue__={"native":{instance:{setMethod:b.setMethod,setRequestHeaders:b.setRequestHeaders,contentType:e(b,"contentType"),data:e(b,"data"),digest:e(b,"digest"),method:e(b,"method"),requestHeaders:e(b,"requestHeaders"),url:e(b,"url")}}};return b}.call(this),
URLStreamDefinition=function(){var a={initialize:function(){this._stream=null;this._littleEndian=this._connected=!1},close:function(){this._session.close()},load:function(a){var b=FileLoadingService.createSession(),f=this,g=!0;b.onprogress=function(a,b){if(g){g=!1;var d=Math.max(b.bytesTotal,a.length),e=new ArrayBuffer(d);f._stream=new Stream(e,0,0,d)}else f._stream.end+a.length>f._stream.bytes.length&&(d=f._stream.end+a.length,e=new ArrayBuffer(d),d=new Stream(e,0,0,d),d.push(f._stream.bytes.subarray(0,
f._stream.end)),f._stream=d);f._stream.push(a);d=avm2.systemDomain.getClass("flash.events.ProgressEvent");f._dispatchEvent(d.createInstance(["progress",!1,!1,b.bytesLoaded,b.bytesTotal]))};b.onerror=function(a){f._connected=!1;f._stream||(f._stream=new Stream(new ArrayBuffer(0),0,0,0));f._dispatchEvent(new flash.events.IOErrorEvent(flash.events.IOErrorEvent.class.IO_ERROR,!1,!1,a))};b.onopen=function(){f._connected=!0;f._dispatchEvent(new flash.events.Event("open",!1,!1))};b.onhttpstatus=function(a,
b,d){var e=avm2.systemDomain.getClass("flash.events.HTTPStatusEvent"),g=avm2.systemDomain.getClass("flash.net.URLRequestHeader");b=e.createInstance(["httpStatus",!1,!1,b]);var w=[];d.split(/(?:\n|\r?\n)/g).forEach(function(b){if(b=/^([^:]+): (.*)$/.exec(b))w.push(g.createInstance([b[1],b[2]])),"Location"===b[1]&&(a=b[2])});b.asSetPublicProperty("responseHeaders",w);b.asSetPublicProperty("responseURL",a);f._dispatchEvent(b)};b.onclose=function(){f._connected=!1;f._stream||(f._stream=new Stream(new ArrayBuffer(0),
0,0,0));f._dispatchEvent(new flash.events.Event("complete",!1,!1))};b.open(a._toFileRequest());this._session=b},readBoolean:function(){notImplemented("URLStream.readBoolean")},readByte:function(){var a=this._stream;a.ensure(1);return a.bytes[a.pos++]},readBytes:function(a,b,f){if(0>f)throw"Invalid length argument";var g=this._stream;f?g.ensure(f):f=g.remaining();a.writeRawBytes(g.bytes.subarray(g.pos,g.pos+f),b,f);g.pos+=f},readDouble:function(){notImplemented("URLStream.readDouble")},readFloat:function(){notImplemented("URLStream.readFloat")},
readInt:function(){notImplemented("URLStream.readInt")},readMultiByte:function(){notImplemented("URLStream.readMultiByte")},readObject:function(){notImplemented("URLStream.readObject")},readShort:function(){notImplemented("URLStream.readShort")},readUTF:function(){return this.readUTFBytes(this.readUnsignedShort())},readUTFBytes:function(a){if(0>a)throw"Invalid length argument";var b=this._stream;b.ensure(a);var f=utf8encode(b.bytes.subarray(b.pos,b.pos+a));b.pos+=a;return f},readUnsignedByte:function(){notImplemented("URLStream.readUnsignedByte")},
readUnsignedInt:function(){notImplemented("URLStream.readUnsignedInt")},readUnsignedShort:function(){var a=this._stream;a.ensure(2);var b=a.getUint16(a.pos,this._littleEndian);a.pos+=2;return b},get bytesAvailable(){return this._stream.remaining()},get connected(){return this._connected},get endian(){return this._littleEndian?"littleEndian":"bigEndian"},set endian(a){this._littleEndian="littleEndian"==a},get objectEncoding(){notImplemented("URLStream.objectEncoding")},set objectEncoding(a){notImplemented("URLStream.objectEncoding")}},
b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{close:a.close,load:a.load,readBoolean:a.readBoolean,readByte:a.readByte,readBytes:a.readBytes,readDouble:a.readDouble,readFloat:a.readFloat,readInt:a.readInt,readMultiByte:a.readMultiByte,readObject:a.readObject,readShort:a.readShort,readUTF:a.readUTF,readUTFBytes:a.readUTFBytes,readUnsignedByte:a.readUnsignedByte,readUnsignedInt:a.readUnsignedInt,readUnsignedShort:a.readUnsignedShort,bytesAvailable:b(a,"bytesAvailable"),connected:b(a,
"connected"),endian:b(a,"endian"),objectEncoding:b(a,"objectEncoding")}}};return a}.call(this),ApplicationDomainDefinition=function(){return{__class__:"flash.system.ApplicationDomain",initialize:function(){},__glue__:{"native":{"static":{currentDomain:{get:function(){return new flash.system.ApplicationDomain(AVM2.currentDomain())}},MIN_DOMAIN_MEMORY_LENGTH:{get:function(){notImplemented("ApplicationDomain.MIN_DOMAIN_MEMORY_LENGTH")}}},instance:{ctor:function(a){a instanceof ApplicationDomain?this.nativeObject=
a:(a=a?a.nativeObject:AVM2.currentDomain().system,this.nativeObject=new ApplicationDomain(a.vm,a))},getDefinition:function(a){a=a.replace("::",".");return this.nativeObject.getProperty(Multiname.fromSimpleName(a),!0,!0)},hasDefinition:function(a){if(void 0===a)return!1;a=a.replace("::",".");return!!this.nativeObject.findDomainProperty(Multiname.fromSimpleName(a),!1,!1)},getQualifiedDefinitionNames:function(){notImplemented("ApplicationDomain.getQualifiedDefinitionNames")},parentDomain:{get:function(){var a=
this.nativeObject.base;return!a?void 0:new flash.system.ApplicationDomain(a)}},domainMemory:{get:function(){notImplemented("ApplicationDomain.domainMemory");return this._domainMemory},set:function(a){notImplemented("ApplicationDomain.domainMemory");this._domainMemory=a}}}},script:{"static":Glue.ALL,instance:Glue.ALL}}}}.call(this),CapabilitiesDefinition=function(){var a={},b,e=window.navigator.userAgent;0<e.indexOf("Macintosh")?b="Mac OS 10.5.2":0<e.indexOf("Windows")?b="Windows XP":0<e.indexOf("Linux")?
b="Linux":/(iPad|iPhone|iPod|Android)/.test(e)?b="iPhone3,1":notImplemented();a.__glue__={"native":{"static":{version:{get:function(){return"SHUMWAY 10,0,0,0"},enumerable:!0},os:{get:function(){return b},enumerable:!0},serverString:{get:function(){var a=toKeyValueArray({OS:b}).map(function(a){return a[0]+"="+encodeURIComponent(a[1])}).join("&");somewhatImplemented("Capabilities.serverString: "+a);return a}},hasAccessibility:{get:function(){somewhatImplemented("Capabilities.hasAccessibility");return!1}},
screenResolutionX:{get:function(){return window.screen.width}},screenResolutionY:{get:function(){return window.screen.height}},manufacturer:{get:function(){somewhatImplemented("Capabilities.manufacturer");return"Mozilla Research"}},language:{get:function(){somewhatImplemented("Capabilities.language");return"en"}},playerType:{get:function(){somewhatImplemented("Capabilities.playerType");return"PlugIn"}}}},script:{"static":scriptProperties("public",["version","os"])}};return a}.call(this),FSCommandDefinition=
function(){return{__glue__:{"native":{"static":{_fscommand:function(a,b){console.log("FSCommand: "+a+"; "+b);switch(a.toLowerCase()){case "quit":renderingTerminated=!0;break;case "debugger":debugger}}}}}}}.call(this),SecurityDefinition=function(){var a;return{__class__:"flash.system.Security",initialize:function(){},__glue__:{"native":{"static":{allowDomain:function(){somewhatImplemented('Security.allowDomain ["'+Array.prototype.join.call(arguments,'", "')+'"]')},allowInsecureDomain:function(){somewhatImplemented("Security.allowInsecureDomain")},
loadPolicyFile:function(){somewhatImplemented("Security.loadPolicyFile")},duplicateSandboxBridgeInputArguments:function(){notImplemented("Security.duplicateSandboxBridgeInputArguments")},duplicateSandboxBridgeOutputArgument:function(){notImplemented("Security.duplicateSandboxBridgeOutputArgument")},showSettings:function(){notImplemented("Security.showSettings")},exactSettings:{get:function(){return a},set:function(b){a=b}},disableAVM1Loading:{get:function(){notImplemented("Security.disableAVM1Loading")},
set:function(){notImplemented("Security.disableAVM1Loading")}},sandboxType:{get:function(){somewhatImplemented("Security.sandboxType");return"remote"}},pageDomain:{get:function(){somewhatImplemented("Security.pageDomain");var a=FileLoadingService.resolveUrl("/").split("/");a.pop();return a.pop()}}}}}}}.call(this),SecurityDomainDefinition=function(){return{__class__:"flash.system.SecurityDomain",initialize:function(){},_currentDomain:null,__glue__:{"native":{"static":{currentDomain:{get:function(){return this._currentDomain}}},
instance:{ctor_impl:function(){notImplemented("SecurityDomain.ctor_impl")},domainID:{get:function(){notImplemented("SecurityDomain.domainID");return this._domainID}}}}}}}.call(this),SystemDefinition=function(){return{__class__:"flash.system.System",initialize:function(){},__glue__:{"native":{"static":{setClipboard:function(a){FirefoxCom.request("setClipboard",a);TelemetryService.reportTelemetry({topic:"feature",feature:2})},pause:function(){notImplemented("System.pause")},resume:function(){notImplemented("System.resume")},
exit:function(){notImplemented("System.exit")},gc:function(){notImplemented("System.gc")},pauseForGCIfCollectionImminent:function(){notImplemented("System.pauseForGCIfCollectionImminent")},disposeXML:function(){notImplemented("System.disposeXML")},ime:{get:function(){notImplemented("System.ime")}},totalMemoryNumber:{get:function(){return performance.memory?performance.memory.usedJSHeapSize:0}},freeMemory:{get:function(){notImplemented("System.freeMemory")}},privateMemory:{get:function(){return 0}},
processCPUUsage:{get:function(){notImplemented("System.processCPUUsage")}},useCodePage:{get:function(){somewhatImplemented("System.useCodePage");return!1},set:function(){notImplemented("System.useCodePage")}},vmVersion:{get:function(){somewhatImplemented("System.vmVersion");return"1.0 shumway"}},swfVersion:{get:function(){return 19}},apiVersion:{get:function(){return 26}},getArgv:function(){return[]},getRunmode:function(){return"mixed"}},instance:{}}}}}.call(this),FontDefinition=function(){function a(){if(f)return f;
var a=window.navigator.userAgent;return f=-1<a.indexOf("Windows")?DEVICE_FONT_METRICS_WIN:/(Macintosh|iPad|iPhone|iPod|Android)/.test(a)?DEVICE_FONT_METRICS_MAC:DEVICE_FONT_METRICS_LINUX}var b=[],e=Object.create(null),d=Object.create(null),f,g={__class__:"flash.text.Font",initialize:function(){var a=this.symbol;a&&(this._fontName=a.name||null,this._uniqueName=a.uniqueName,this._fontStyle=a.bold?a.italic?"boldItalic":"bold":a.italic?"italic":"regular",a=a.metrics,a.height=a.ascent+a.descent+a.leading,
this._metrics=a,this._fontType="embedded",b.push(this),e[this._uniqueName]=this,a=this._fontName.toLowerCase()+"_"+this._fontStyle+"_embedded",d[a]=this)},get fontName(){return this._fontName},get fontStyle(){return this._fontStyle},get fontType(){return this._fontType},hasGlyphs:function(){return!0},getFont:function(b,e,f){f=b.toLowerCase()+"_"+e+(f?"_embedded":"_device");var g=d[f];if(g)return g;g=new flash.text.Font;g._fontName=g._uniqueName=b;g._fontStyle=e;g._fontType="device";b=a()[b];b||(b=
a().serif,g._fontName=g._uniqueName="serif");g._metrics={ascent:b[0],descent:b[1],leading:b[2]};g._metrics.height=b[0]+b[1]+b[2];return d[f]=g},getFontByUniqueName:function(a){return e[a]}},l=Object.getOwnPropertyDescriptor;g.__glue__={"native":{instance:{fontName:l(g,"fontName"),fontStyle:l(g,"fontStyle"),fontType:l(g,"fontType"),hasGlyphs:g.hasGlyphs},"static":{enumerateFonts:function(){return b.slice()},registerFont:function(){somewhatImplemented("Font.registerFont")}}}};return g}.call(this),DEVICE_FONT_METRICS_WIN=
{serif:[1,0.25,0],"sans-serif":[1,0.25,0],monospace:[1,0.25,0],"birch std":[0.9167,0.25,0],"blackoak std":[1,0.3333,0],"chaparral pro":[0.8333,0.3333,0],"chaparral pro light":[0.8333,0.3333,0],"charlemagne std":[0.9167,0.25,0],"cooper std black":[0.9167,0.25,0],"giddyup std":[0.8333,0.3333,0],"hobo std":[1.0833,0.3333,0],"kozuka gothic pro b":[1,0.4167,0],"kozuka gothic pro el":[1.0833,0.25,0],"kozuka gothic pro h":[1,0.4167,0],"kozuka gothic pro l":[1,0.3333,0],"kozuka gothic pro m":[1.0833,0.3333,
0],"kozuka gothic pro r":[1,0.3333,0],"kozuka mincho pro b":[1.0833,0.25,0],"kozuka mincho pro el":[1.0833,0.25,0],"kozuka mincho pro h":[1.1667,0.25,0],"kozuka mincho pro l":[1.0833,0.25,0],"kozuka mincho pro m":[1.0833,0.25,0],"kozuka mincho pro r":[1.0833,0.25,0],"mesquite std":[0.9167,0.25,0],"minion pro cond":[1,0.3333,0],"minion pro med":[1,0.3333,0],"minion pro smbd":[1,0.3333,0],"myriad arabic":[1,0.4167,0],"nueva std":[0.75,0.25,0],"nueva std cond":[0.75,0.25,0],"ocr a std":[0.8333,0.25,
0],"orator std":[1.0833,0.25,0],"poplar std":[0.9167,0.25,0],"prestige elite std":[0.9167,0.25,0],"rosewood std regular":[0.8333,0.3333,0],"stencil std":[1,0.3333,0],"trajan pro":[1,0.25,0],"kozuka gothic pr6n b":[1.4167,0.4167,0],"kozuka gothic pr6n el":[1.4167,0.3333,0],"kozuka gothic pr6n h":[1.4167,0.4167,0],"kozuka gothic pr6n l":[1.4167,0.3333,0],"kozuka gothic pr6n m":[1.5,0.3333,0],"kozuka gothic pr6n r":[1.4167,0.3333,0],"kozuka mincho pr6n b":[1.3333,0.3333,0],"kozuka mincho pr6n el":[1.3333,
0.3333,0],"kozuka mincho pr6n h":[1.4167,0.3333,0],"kozuka mincho pr6n l":[1.3333,0.3333,0],"kozuka mincho pr6n m":[1.3333,0.3333,0],"kozuka mincho pr6n r":[1.3333,0.3333,0],"letter gothic std":[1,0.25,0],"minion pro":[1,0.3333,0],"myriad hebrew":[0.8333,0.3333,0],"myriad pro":[0.9167,0.25,0],"myriad pro cond":[0.9167,0.25,0],"myriad pro light":[1,0.25,0],marlett:[1,0,0],arial:[1,0.25,0],"arabic transparent":[1,0.25,0],"arial baltic":[1,0.25,0],"arial ce":[1,0.25,0],"arial cyr":[1,0.25,0],"arial greek":[1,
0.25,0],"arial tur":[1,0.25,0],batang:[0.8333,0.1667,0],batangche:[0.8333,0.1667,0],gungsuh:[0.8333,0.1667,0],gungsuhche:[0.8333,0.1667,0],"courier new":[1,0.25,0],"courier new baltic":[1,0.25,0],"courier new ce":[1,0.25,0],"courier new cyr":[1,0.25,0],"courier new greek":[1,0.25,0],"courier new tur":[1,0.25,0],daunpenh:[0.6667,0.6667,0],dokchampa:[1.4167,0.5833,0],"estrangelo edessa":[0.75,0.3333,0],euphemia:[1.0833,0.3333,0],gautami:[1.1667,0.8333,0],vani:[1.0833,0.75,0],gulim:[0.8333,0.1667,0],
gulimche:[0.8333,0.1667,0],dotum:[0.8333,0.1667,0],dotumche:[0.8333,0.1667,0],impact:[1.0833,0.25,0],"iskoola pota":[1,0.3333,0],kalinga:[1.0833,0.5,0],kartika:[1,0.4167,0],"khmer ui":[1.0833,0.3333,0],"lao ui":[1,0.25,0],latha:[1.0833,0.4167,0],"lucida console":[0.75,0.25,0],"malgun gothic":[1,0.25,0],mangal:[1.0833,0.3333,0],meiryo:[1.0833,0.4167,0],"meiryo ui":[1,0.25,0],"microsoft himalaya":[0.5833,0.4167,0],"microsoft jhenghei":[1,0.3333,0],"microsoft yahei":[1.0833,0.3333,0],mingliu:[0.8333,
0.1667,0],pmingliu:[0.8333,0.1667,0],mingliu_hkscs:[0.8333,0.1667,0],"mingliu-extb":[0.8333,0.1667,0],"pmingliu-extb":[0.8333,0.1667,0],"mingliu_hkscs-extb":[0.8333,0.1667,0],"mongolian baiti":[0.8333,0.25,0],"ms gothic":[0.8333,0.1667,0],"ms pgothic":[0.8333,0.1667,0],"ms ui gothic":[0.8333,0.1667,0],"ms mincho":[0.8333,0.1667,0],"ms pmincho":[0.8333,0.1667,0],"mv boli":[1.1667,0.25,0],"microsoft new tai lue":[1,0.4167,0],nyala:[0.9167,0.3333,0],"microsoft phagspa":[1.0833,0.25,0],"plantagenet cherokee":[1,
0.4167,0],raavi:[1.0833,0.6667,0],"segoe script":[1.0833,0.5,0],"segoe ui":[1,0.25,0],"segoe ui semibold":[1,0.25,0],"segoe ui light":[1,0.25,0],"segoe ui symbol":[1,0.25,0],shruti:[1.0833,0.5,0],simsun:[0.8333,0.1667,0],nsimsun:[0.8333,0.1667,0],"simsun-extb":[0.8333,0.1667,0],sylfaen:[1,0.3333,0],"microsoft tai le":[1,0.3333,0],"times new roman":[1,0.25,0],"times new roman baltic":[1,0.25,0],"times new roman ce":[1,0.25,0],"times new roman cyr":[1,0.25,0],"times new roman greek":[1,0.25,0],"times new roman tur":[1,
0.25,0],tunga:[1.0833,0.75,0],vrinda:[1,0.4167,0],"shonar bangla":[0.8333,0.5,0],"microsoft yi baiti":[0.8333,0.1667,0],tahoma:[1,0.1667,0],"microsoft sans serif":[1.0833,0.1667,0],"angsana new":[0.9167,0.4167,0],aparajita:[0.75,0.4167,0],"cordia new":[0.9167,0.5,0],ebrima:[1.0833,0.5,0],gisha:[0.9167,0.25,0],kokila:[0.8333,0.3333,0],leelawadee:[0.9167,0.25,0],"microsoft uighur":[1.0833,0.5,0],moolboran:[0.6667,0.6667,0],symbol:[1,0.25,0],utsaah:[0.8333,0.4167,0],vijaya:[1.0833,0.25,0],wingdings:[0.9167,
0.25,0],andalus:[1.3333,0.4167,0],"arabic typesetting":[0.8333,0.5,0],"simplified arabic":[1.3333,0.5,0],"simplified arabic fixed":[1,0.4167,0],"sakkal majalla":[0.9167,0.5,0],"traditional arabic":[1.3333,0.5,0],aharoni:[0.75,0.25,0],david:[0.75,0.25,0],frankruehl:[0.75,0.25,0],fangsong:[0.8333,0.1667,0],simhei:[0.8333,0.1667,0],kaiti:[0.8333,0.1667,0],"browallia new":[0.8333,0.4167,0],"lucida sans unicode":[1.0833,0.25,0],"arial black":[1.0833,0.3333,0],calibri:[0.9167,0.25,0],cambria:[0.9167,0.25,
0],"cambria math":[3.0833,2.5,0],candara:[0.9167,0.25,0],"comic sans ms":[1.0833,0.3333,0],consolas:[0.9167,0.25,0],constantia:[0.9167,0.25,0],corbel:[0.9167,0.25,0],"franklin gothic medium":[1,0.3333,0],gabriola:[1.1667,0.6667,0],georgia:[1,0.25,0],"palatino linotype":[1.0833,0.3333,0],"segoe print":[1.25,0.5,0],"trebuchet ms":[1.0833,0.4167,0],verdana:[1,0.1667,0],webdings:[1.0833,0.5,0],"lucida bright":[0.9167,0.25,0],"lucida sans":[0.9167,0.25,0],"lucida sans typewriter":[0.9167,0.25,0],"gentium basic":[0.8333,
0.25,0],"dejavu serif condensed":[0.9167,0.25,0],arimo:[1,0.25,0],"dejavu sans condensed":[0.9167,0.25,0],"dejavu sans":[0.9167,0.25,0],"dejavu sans light":[0.9167,0.25,0],opensymbol:[0.8333,0.1667,0],"gentium book basic":[0.8333,0.25,0],"dejavu sans mono":[0.9167,0.25,0],"dejavu serif":[0.9167,0.25,0],"calibri light":[0.9167,0.25,0]},DEVICE_FONT_METRICS_MAC={"al bayan plain":[1,0.5,0],"al bayan bold":[1,0.5833,0],"american typewriter":[0.9167,0.25,0],"american typewriter bold":[0.9167,0.25,0],"american typewriter condensed":[0.9167,
0.25,0],"american typewriter condensed bold":[0.9167,0.25,0],"american typewriter condensed light":[0.8333,0.25,0],"american typewriter light":[0.9167,0.25,0],"andale mono":[0.9167,0.25,0],"apple symbols":[0.6667,0.25,0],"arial bold italic":[0.9167,0.25,0],"arial bold":[0.9167,0.25,0],"arial italic":[0.9167,0.25,0],"arial hebrew":[0.75,0.3333,0],"arial hebrew bold":[0.75,0.3333,0],arial:[0.9167,0.25,0],"arial narrow":[0.9167,0.25,0],"arial narrow bold":[0.9167,0.25,0],"arial narrow bold italic":[0.9167,
0.25,0],"arial narrow italic":[0.9167,0.25,0],"arial rounded mt bold":[0.9167,0.25,0],"arial unicode ms":[1.0833,0.25,0],"avenir black":[1,0.3333,0],"avenir black oblique":[1,0.3333,0],"avenir book":[1,0.3333,0],"avenir book oblique":[1,0.3333,0],"avenir heavy":[1,0.3333,0],"avenir heavy oblique":[1,0.3333,0],"avenir light":[1,0.3333,0],"avenir light oblique":[1,0.3333,0],"avenir medium":[1,0.3333,0],"avenir medium oblique":[1,0.3333,0],"avenir oblique":[1,0.3333,0],"avenir roman":[1,0.3333,0],"avenir next bold":[1,
0.3333,0],"avenir next bold italic":[1,0.3333,0],"avenir next demi bold":[1,0.3333,0],"avenir next demi bold italic":[1,0.3333,0],"avenir next heavy":[1,0.3333,0],"avenir next heavy italic":[1,0.3333,0],"avenir next italic":[1,0.3333,0],"avenir next medium":[1,0.3333,0],"avenir next medium italic":[1,0.3333,0],"avenir next regular":[1,0.3333,0],"avenir next ultra light":[1,0.3333,0],"avenir next ultra light italic":[1,0.3333,0],"avenir next condensed bold":[1,0.3333,0],"avenir next condensed bold italic":[1,
0.3333,0],"avenir next condensed demi bold":[1,0.3333,0],"avenir next condensed demi bold italic":[1,0.3333,0],"avenir next condensed heavy":[1,0.3333,0],"avenir next condensed heavy italic":[1,0.3333,0],"avenir next condensed italic":[1,0.3333,0],"avenir next condensed medium":[1,0.3333,0],"avenir next condensed medium italic":[1,0.3333,0],"avenir next condensed regular":[1,0.3333,0],"avenir next condensed ultra light":[1,0.3333,0],"avenir next condensed ultra light italic":[1,0.3333,0],ayuthaya:[1.0833,
0.3333,0],baghdad:[0.9167,0.4167,0],"bangla mn":[0.9167,0.6667,0],"bangla mn bold":[0.9167,0.6667,0],"bangla sangam mn":[0.9167,0.4167,0],"bangla sangam mn bold":[0.9167,0.4167,0],baskerville:[0.9167,0.25,0],"baskerville bold":[0.9167,0.25,0],"baskerville bold italic":[0.9167,0.25,0],"baskerville italic":[0.9167,0.25,0],"baskerville semibold":[0.9167,0.25,0],"baskerville semibold italic":[0.9167,0.25,0],"big caslon medium":[0.9167,0.25,0],"brush script mt italic":[0.9167,0.3333,0],chalkboard:[1,0.25,
0],"chalkboard bold":[1,0.25,0],"chalkboard se bold":[1.1667,0.25,0],"chalkboard se light":[1.1667,0.25,0],"chalkboard se regular":[1.1667,0.25,0],chalkduster:[1,0.25,0],"charcoal cy":[1,0.25,0],cochin:[0.9167,0.25,0],"cochin bold":[0.9167,0.25,0],"cochin bold italic":[0.9167,0.25,0],"cochin italic":[0.9167,0.25,0],"comic sans ms":[1.0833,0.25,0],"comic sans ms bold":[1.0833,0.25,0],copperplate:[0.75,0.25,0],"copperplate bold":[0.75,0.25,0],"copperplate light":[0.75,0.25,0],"corsiva hebrew":[0.6667,
0.3333,0],"corsiva hebrew bold":[0.6667,0.3333,0],courier:[0.75,0.25,0],"courier bold":[0.75,0.25,0],"courier bold oblique":[0.75,0.25,0],"courier oblique":[0.75,0.25,0],"courier new bold italic":[0.8333,0.3333,0],"courier new bold":[0.8333,0.3333,0],"courier new italic":[0.8333,0.3333,0],"courier new":[0.8333,0.3333,0],biaukai:[0.8333,0.1667,0],damascus:[0.5833,0.4167,0],"damascus bold":[0.5833,0.4167,0],"decotype naskh":[1.1667,0.6667,0],"devanagari mt":[0.9167,0.6667,0],"devanagari mt bold":[0.9167,
0.6667,0],"devanagari sangam mn":[0.9167,0.4167,0],"devanagari sangam mn bold":[0.9167,0.4167,0],didot:[0.9167,0.3333,0],"didot bold":[1,0.3333,0],"didot italic":[0.9167,0.25,0],"euphemia ucas":[1.0833,0.25,0],"euphemia ucas bold":[1.0833,0.25,0],"euphemia ucas italic":[1.0833,0.25,0],"futura condensed extrabold":[1,0.25,0],"futura condensed medium":[1,0.25,0],"futura medium":[1,0.25,0],"futura medium italic":[1,0.25,0],"gb18030 bitmap":[1,0.6667,0],"geeza pro":[0.9167,0.3333,0],"geeza pro bold":[0.9167,
0.3333,0],geneva:[1,0.25,0],"geneva cy":[1,0.25,0],georgia:[0.9167,0.25,0],"georgia bold":[0.9167,0.25,0],"georgia bold italic":[0.9167,0.25,0],"georgia italic":[0.9167,0.25,0],"gill sans":[0.9167,0.25,0],"gill sans bold":[0.9167,0.25,0],"gill sans bold italic":[0.9167,0.25,0],"gill sans italic":[0.9167,0.25,0],"gill sans light":[0.9167,0.25,0],"gill sans light italic":[0.9167,0.25,0],"gujarati mt":[0.9167,0.6667,0],"gujarati mt bold":[0.9167,0.6667,0],"gujarati sangam mn":[0.8333,0.4167,0],"gujarati sangam mn bold":[0.8333,
0.4167,0],"gurmukhi mn":[0.9167,0.25,0],"gurmukhi mn bold":[0.9167,0.25,0],"gurmukhi sangam mn":[0.9167,0.3333,0],"gurmukhi sangam mn bold":[0.9167,0.3333,0],helvetica:[0.75,0.25,0],"helvetica bold":[0.75,0.25,0],"helvetica bold oblique":[0.75,0.25,0],"helvetica light":[0.75,0.25,0],"helvetica light oblique":[0.75,0.25,0],"helvetica oblique":[0.75,0.25,0],"helvetica neue":[0.9167,0.25,0],"helvetica neue bold":[1,0.25,0],"helvetica neue bold italic":[1,0.25,0],"helvetica neue condensed black":[1,0.25,
0],"helvetica neue condensed bold":[1,0.25,0],"helvetica neue italic":[0.9167,0.25,0],"helvetica neue light":[1,0.25,0],"helvetica neue light italic":[0.9167,0.25,0],"helvetica neue medium":[1,0.25,0],"helvetica neue ultralight":[0.9167,0.25,0],"helvetica neue ultralight italic":[0.9167,0.25,0],herculanum:[0.8333,0.1667,0],"hiragino kaku gothic pro w3":[0.9167,0.0833,0],"hiragino kaku gothic pro w6":[0.9167,0.0833,0],"hiragino kaku gothic pron w3":[0.9167,0.0833,0],"hiragino kaku gothic pron w6":[0.9167,
0.0833,0],"hiragino kaku gothic std w8":[0.9167,0.0833,0],"hiragino kaku gothic stdn w8":[0.9167,0.0833,0],"hiragino maru gothic pro w4":[0.9167,0.0833,0],"hiragino maru gothic pron w4":[0.9167,0.0833,0],"hiragino mincho pro w3":[0.9167,0.0833,0],"hiragino mincho pro w6":[0.9167,0.0833,0],"hiragino mincho pron w3":[0.9167,0.0833,0],"hiragino mincho pron w6":[0.9167,0.0833,0],"hiragino sans gb w3":[0.9167,0.0833,0],"hiragino sans gb w6":[0.9167,0.0833,0],"hoefler text black":[0.75,0.25,0],"hoefler text black italic":[0.75,
0.25,0],"hoefler text italic":[0.75,0.25,0],"hoefler text ornaments":[0.8333,0.1667,0],"hoefler text":[0.75,0.25,0],impact:[1,0.25,0],inaimathi:[0.8333,0.4167,0],"headlinea regular":[0.8333,0.1667,0],"pilgi regular":[0.8333,0.25,0],"gungseo regular":[0.8333,0.25,0],"pcmyungjo regular":[0.8333,0.25,0],"kailasa regular":[1.0833,0.5833,0],"kannada mn":[0.9167,0.25,0],"kannada mn bold":[0.9167,0.25,0],"kannada sangam mn":[1,0.5833,0],"kannada sangam mn bold":[1,0.5833,0],"kefa bold":[0.9167,0.25,0],"kefa regular":[0.9167,
0.25,0],"khmer mn":[1,0.6667,0],"khmer mn bold":[1,0.6667,0],"khmer sangam mn":[1.0833,0.6667,0],"kokonor regular":[1.0833,0.5833,0],krungthep:[1,0.25,0],kufistandardgk:[0.9167,0.5,0],"lao mn":[0.9167,0.4167,0],"lao mn bold":[0.9167,0.4167,0],"lao sangam mn":[1,0.3333,0],"apple ligothic medium":[0.8333,0.1667,0],"lihei pro":[0.8333,0.1667,0],"lisong pro":[0.8333,0.1667,0],"lucida grande":[1,0.25,0],"lucida grande bold":[1,0.25,0],"malayalam mn":[1,0.4167,0],"malayalam mn bold":[1,0.4167,0],"malayalam sangam mn":[0.8333,
0.4167,0],"malayalam sangam mn bold":[0.8333,0.4167,0],"marion bold":[0.6667,0.3333,0],"marion italic":[0.6667,0.3333,0],"marion regular":[0.6667,0.3333,0],"marker felt thin":[0.8333,0.25,0],"marker felt wide":[0.9167,0.25,0],"menlo bold":[0.9167,0.25,0],"menlo bold italic":[0.9167,0.25,0],"menlo italic":[0.9167,0.25,0],"menlo regular":[0.9167,0.25,0],"microsoft sans serif":[0.9167,0.25,0],monaco:[1,0.25,0],"gurmukhi mt":[0.8333,0.4167,0],mshtakan:[0.9167,0.25,0],"mshtakan bold":[0.9167,0.25,0],"mshtakan boldoblique":[0.9167,
0.25,0],"mshtakan oblique":[0.9167,0.25,0],"myanmar mn":[1,0.4167,0],"myanmar mn bold":[1,0.4167,0],"myanmar sangam mn":[0.9167,0.4167,0],nadeem:[0.9167,0.4167,0],"nanum brush script":[0.9167,0.25,0],nanumgothic:[0.9167,0.25,0],"nanumgothic bold":[0.9167,0.25,0],"nanumgothic extrabold":[0.9167,0.25,0],nanummyeongjo:[0.9167,0.25,0],"nanummyeongjo bold":[0.9167,0.25,0],"nanummyeongjo extrabold":[0.9167,0.25,0],"nanum pen script":[0.9167,0.25,0],"optima bold":[0.9167,0.25,0],"optima bold italic":[0.9167,
0.25,0],"optima extrablack":[1,0.25,0],"optima italic":[0.9167,0.25,0],"optima regular":[0.9167,0.25,0],"oriya mn":[0.9167,0.25,0],"oriya mn bold":[0.9167,0.25,0],"oriya sangam mn":[0.8333,0.4167,0],"oriya sangam mn bold":[0.8333,0.4167,0],osaka:[1,0.25,0],"osaka-mono":[0.8333,0.1667,0],"palatino bold":[0.8333,0.25,0],"palatino bold italic":[0.8333,0.25,0],"palatino italic":[0.8333,0.25,0],palatino:[0.8333,0.25,0],papyrus:[0.9167,0.5833,0],"papyrus condensed":[0.9167,0.5833,0],"plantagenet cherokee":[0.6667,
0.25,0],raanana:[0.75,0.25,0],"raanana bold":[0.75,0.25,0],"hei regular":[0.8333,0.1667,0],"kai regular":[0.8333,0.1667,0],stfangsong:[0.8333,0.1667,0],stheiti:[0.8333,0.1667,0],"heiti sc light":[0.8333,0.1667,0],"heiti sc medium":[0.8333,0.1667,0],"heiti tc light":[0.8333,0.1667,0],"heiti tc medium":[0.8333,0.1667,0],stkaiti:[0.8333,0.1667,0],"kaiti sc black":[1.0833,0.3333,0],"kaiti sc bold":[1.0833,0.3333,0],"kaiti sc regular":[1.0833,0.3333,0],stsong:[0.8333,0.1667,0],"songti sc black":[1.0833,
0.3333,0],"songti sc bold":[1.0833,0.3333,0],"songti sc light":[1.0833,0.3333,0],"songti sc regular":[1.0833,0.3333,0],stxihei:[0.8333,0.1667,0],sathu:[0.9167,0.3333,0],silom:[1,0.3333,0],"sinhala mn":[0.9167,0.25,0],"sinhala mn bold":[0.9167,0.25,0],"sinhala sangam mn":[1.1667,0.3333,0],"sinhala sangam mn bold":[1.1667,0.3333,0],"skia regular":[0.75,0.25,0],symbol:[0.6667,0.3333,0],"tahoma negreta":[1,0.1667,0],"tamil mn":[0.9167,0.25,0],"tamil mn bold":[0.9167,0.25,0],"tamil sangam mn":[0.75,0.25,
0],"tamil sangam mn bold":[0.75,0.25,0],"telugu mn":[0.9167,0.25,0],"telugu mn bold":[0.9167,0.25,0],"telugu sangam mn":[1,0.5833,0],"telugu sangam mn bold":[1,0.5833,0],thonburi:[1.0833,0.25,0],"thonburi bold":[1.0833,0.25,0],"times bold":[0.75,0.25,0],"times bold italic":[0.75,0.25,0],"times italic":[0.75,0.25,0],"times roman":[0.75,0.25,0],"times new roman bold italic":[0.9167,0.25,0],"times new roman bold":[0.9167,0.25,0],"times new roman italic":[0.9167,0.25,0],"times new roman":[0.9167,0.25,
0],"trebuchet ms bold italic":[0.9167,0.25,0],"trebuchet ms":[0.9167,0.25,0],"trebuchet ms bold":[0.9167,0.25,0],"trebuchet ms italic":[0.9167,0.25,0],verdana:[1,0.25,0],"verdana bold":[1,0.25,0],"verdana bold italic":[1,0.25,0],"verdana italic":[1,0.25,0],webdings:[0.8333,0.1667,0],"wingdings 2":[0.8333,0.25,0],"wingdings 3":[0.9167,0.25,0],"yuppy sc regular":[1.0833,0.3333,0],"yuppy tc regular":[1.0833,0.3333,0],"zapf dingbats":[0.8333,0.1667,0],zapfino:[1.9167,1.5,0]},DEVICE_FONT_METRICS_LINUX=
{kacstfarsi:[1.0831,0.5215,0],meera:[0.682,0.4413,0],freemono:[0.8023,0.2006,0],undotum:[1.0029,0.2808,0],loma:[1.1634,0.4814,0],"century schoolbook l":[1.0029,0.3209,0],kacsttitlel:[1.0831,0.5215,0],undinaru:[1.0029,0.2407,0],ungungseo:[1.0029,0.2808,0],garuda:[1.3238,0.6017,0],rekha:[1.1232,0.2808,0],purisa:[1.1232,0.5215,0],"dejavu sans mono":[0.9628,0.2407,0],vemana2000:[0.8825,0.8424,0],kacstoffice:[1.0831,0.5215,0],umpush:[1.2837,0.682,0],opensymbol:[0.8023,0.2006,0],sawasdee:[1.1232,0.4413,
0],"urw palladio l":[1.0029,0.3209,0],freeserif:[0.9227,0.3209,0],kacstdigital:[1.0831,0.5215,0],"ubuntu condensed":[0.9628,0.2006,0],unpilgi:[1.0029,0.4413,0],mry_kacstqurn:[1.4442,0.7221,0],"urw gothic l":[1.0029,0.2407,0],dingbats:[0.8424,0.1605,0],"urw chancery l":[1.0029,0.3209,0],"phetsarath ot":[1.0831,0.5215,0],"tlwg typist":[0.8825,0.4012,0],kacstletter:[1.0831,0.5215,0],utkal:[1.2035,0.6418,0],"dejavu sans light":[0.9628,0.2407,0],norasi:[1.2436,0.5215,0],"dejavu serif condensed":[0.9628,
0.2407,0],kacstone:[1.2436,0.6418,0],"liberation sans narrow":[0.9628,0.2407,0],symbol:[1.043,0.3209,0],nanummyeongjo:[0.9227,0.2407,0],untitled1:[0.682,0.5616,0],"lohit gujarati":[0.9628,0.4012,0],"liberation mono":[0.8424,0.3209,0],kacstart:[1.0831,0.5215,0],mallige:[1.0029,0.682,0],"bitstream charter":[1.0029,0.2407,0],nanumgothic:[0.9227,0.2407,0],"liberation serif":[0.9227,0.2407,0],"dejavu sans condensed":[0.9628,0.2407,0],ubuntu:[0.9628,0.2006,0],"courier 10 pitch":[0.8825,0.3209,0],"nimbus sans l":[0.9628,
0.3209,0],takaopgothic:[0.8825,0.2006,0],"wenquanyi micro hei mono":[0.9628,0.2407,0],"dejavu sans":[0.9628,0.2407,0],kedage:[1.0029,0.682,0],kinnari:[1.3238,0.5215,0],tlwgmono:[0.8825,0.4012,0],"standard symbols l":[1.043,0.3209,0],"lohit punjabi":[1.2035,0.682,0],"nimbus mono l":[0.8424,0.2808,0],rachana:[0.682,0.5616,0],waree:[1.2436,0.4413,0],kacstposter:[1.0831,0.5215,0],"khmer os":[1.2837,0.7622,0],freesans:[1.0029,0.3209,0],gargi:[0.9628,0.2808,0],"nimbus roman no9 l":[0.9628,0.3209,0],"dejavu serif":[0.9628,
0.2407,0],"wenquanyi micro hei":[0.9628,0.2407,0],"ubuntu light":[0.9628,0.2006,0],tlwgtypewriter:[0.9227,0.4012,0],kacstpen:[1.0831,0.5215,0],"tlwg typo":[0.8825,0.4012,0],"mukti narrow":[1.2837,0.4413,0],"ubuntu mono":[0.8424,0.2006,0],"lohit bengali":[1.0029,0.4413,0],"liberation sans":[0.9227,0.2407,0],unbatang:[1.0029,0.2808,0],kacstdecorative:[1.1232,0.5215,0],"khmer os system":[1.2436,0.6017,0],saab:[1.0029,0.682,0],kacsttitle:[1.0831,0.5215,0],"mukti narrow bold":[1.2837,0.4413,0],"lohit hindi":[1.0029,
0.5215,0],kacstqurn:[1.0831,0.5215,0],"urw bookman l":[0.9628,0.2808,0],kacstnaskh:[1.0831,0.5215,0],kacstscreen:[1.0831,0.5215,0],pothana2000:[0.8825,0.8424,0],ungraphic:[1.0029,0.2808,0],"lohit tamil":[0.8825,0.361,0],kacstbook:[1.0831,0.5215,0]};DEVICE_FONT_METRICS_MAC.__proto__=DEVICE_FONT_METRICS_WIN;DEVICE_FONT_METRICS_LINUX.__proto__=DEVICE_FONT_METRICS_MAC;
var StaticTextDefinition=function(){var a={__class__:"flash.text.StaticText",initialize:function(){var a=this.symbol;a&&(this.draw=a.draw)},get text(){return this._text},set text(a){this._text=a}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{text:b(a,"text")}}};return a}.call(this),StyleSheetDefinition=function(){return{__class__:"flash.text.StyleSheet",initialize:function(){},__glue__:{"native":{"static":{},instance:{_update:function(){somewhatImplemented("StyleSheet._update")},
_parseCSSInternal:function(){somewhatImplemented("StyleSheet._parseCSSInternal");return null},_parseCSSFontFamily:function(){notImplemented("StyleSheet._parseCSSFontFamily")},_parseColor:function(){notImplemented("StyleSheet._parseColor")},_styles:{get:function(){return this.__styles},set:function(a){somewhatImplemented("StyleSheet._styles");this.__styles=a}}}}}}}.call(this),TextFieldDefinition=function(){function a(a){this.width=this.x=0;this.y=a;this.leading=this.height=0;this.runs=[];this.largestFormat=
null}function b(a){var b={type:"SPAN",format:{ALIGN:a.align},children:[]};b.children[0]={type:"FONT",format:{FACE:a.face,LETTERSPACING:a.letterSpacing,KERNING:a.kerning,LEADING:a.leading,COLOR:a.color},children:[]};return b}function e(a,b,e,g){if((1===a.nodeType||3===a.nodeType)&&!a.prefix){var l;3===a.nodeType?(a=a.textContent,l={type:"text",text:a,format:null,children:null},e.text+=a,b.push(l)):(l=a.localName.toUpperCase(),!A[l]||!1===g&&("P"===l||"BR"===l)?("SBR"===l&&b.push({type:"BR",text:null,
format:null,children:null}),d(a.childNodes,b,e,g)):(l={type:l,text:null,format:f(a),children:[]},d(a.childNodes,l.children,e,g),b.push(l)))}}function d(a,b,d,f){for(var g=a.length,l=0;l<g;l++)e(a[l],b,d,f)}function f(a){a=a.attributes;for(var b={},d=0;d<a.length;d++){var e=a[d];e.prefix||(b[e.localName.toUpperCase()]=e.value)}return b}function g(a,b){var d=!1,e=!1;switch(a.type){case "plain-text":for(var e=a.lines,f=0;f<e.length;f++)l(b,e[f]),f<e.length-1&&p(b,!0);return;case "text":l(b,a.text);return;
case "BR":p(b,!0);return;case "LI":case "P":p(b,!1);r(b,a);e=!0;break;case "B":case "I":case "FONT":case "TEXTFORMAT":r(b,a),d=!0}for(f=0;f<a.children.length;f++)g(a.children[f],b);d&&(b.formats.pop(),f=b.currentFormat=b.formats[b.formats.length-1],b.runs.push({type:"f",format:f}),b.ctx.font=b.str);e&&p(b,!0)}function l(a,b){if(b)if(a.wordWrap)for(;b.length;){var d=a.ctx.measureText(b).width,e=a.w-a.line.width;0>=e&&(p(a,!1),e=a.w-a.line.width);if(d<=e){m(a,b,d);break}else{for(d=b.length/d*e|0;a.ctx.measureText(b.substr(0,
d)).width<e&&d<b.length;)d++;for(var f=d;-1<f;){if(u[b[f]]){f++;break}f--}if(-1===f){if(0<a.line.width){p(a,!1);continue}for(;a.ctx.measureText(b.substr(0,d)).width>e;)d--;0===d&&(d=1);f=d}e=b.substr(0,f);d=a.ctx.measureText(e).width;m(a,e,d);a.wordWrap&&p(a,!1);b=b.substr(f)}}else m(a,b,a.ctx.measureText(b).width)}function m(a,b,d){if(0!==b.length){var e=a.line,f=a.currentFormat,g=f.size;b={type:"t",text:b,x:e.width};a.runs.push(b);a.line.runs.push(b);e.width+=d|0;0===e.leading&&f.leading>e.leading&&
(e.leading=f.leading);if(!e.largestFormat||g>e.largestFormat.size)e.largestFormat=f}}function p(b,d){var e=b.line;if(0===e.runs.length){if(d){var f=b.currentFormat;b.line.y+=f.font._metrics.height*f.size+f.leading|0}}else{for(var g=e.runs,f=e.largestFormat,l=e.y+f.font._metrics.ascent*f.size,m=g.length;m--;)g[m].y=l;m=(b.currentFormat.align||"").toLowerCase();null===b.combinedAlign?b.combinedAlign=m:b.combinedAlign!==m&&(b.combinedAlign="mixed");if("center"===m||"right"===m){l=Math.max(b.w-e.width,
0);"center"===m&&(l>>=1);for(m=g.length;m--;)g[m].x+=l}e.height=f.font._metrics.height*f.size+e.leading|0;b.maxLineWidth=Math.max(b.maxLineWidth,e.width);b.lines.push(e);b.line=new a(e.y+e.height)}}function r(a,b){var d=b.format,e=Object.create(a.formats[a.formats.length-1]),f=!1;switch(b.type){case "P":if(d.ALIGN===e.align)return;e.align=d.ALIGN;break;case "B":f=e.bold=!0;break;case "I":f=e.italic=!0;break;case "FONT":void 0!==d.COLOR&&(e.color=d.COLOR),void 0!==d.FACE&&(e.face=d.FACE,f=!0),void 0!==
d.SIZE&&(e.size=parseFloat(d.SIZE)),void 0!==d.LETTERSPACING&&(e.letterspacing=parseFloat(d.LETTERSPACING)),void 0!==d.KERNING&&(e.kerning=d.KERNING&&!0);case "TEXTFORMAT":void 0!==d.LEADING&&(e.leading=parseFloat(d.LEADING));void 0!==d.INDENT&&(a.line.x=d.INDENT,a.line.width+=d.INDENT|0);break;default:warning("Unknown format node encountered: "+b.type);return}null!==a.textColor&&(e.color=rgbIntAlphaToStr(a.textColor,1));f&&w(e,a.embedFonts);e.str=s(e);a.formats.push(e);a.runs.push({type:"f",format:e});
a.currentFormat=e;a.ctx.font=e.str}function s(a){var b="";a.italic&&(b+="italic");a.bold&&(b+=" bold");return b+" "+a.size+"px "+(a.font._uniqueName||a.font._fontName)}function w(a,b){var d=a.face.toLowerCase();"_sans"===d?d="sans-serif":"_serif"===d?d="serif":"_typewriter"===d&&(d="monospace");d=FontDefinition.getFont(d,a.bold?a.italic?"boldItalic":"bold":a.italic?"italic":"regular",b);a.font=d}var v=document.createElement("p"),z=document.createElement("canvas").getContext("2d"),A={BR:!0,LI:!0,P:!0,
B:!0,I:!0,FONT:!0,TEXTFORMAT:!0,U:!0,A:!0,IMG:!0,SPAN:!0},u={" ":!0,".":!0,"-":!0,"\t":!0},B={__class__:"flash.text.TextField",initialize:function(){var a=this._defaultTextFormat={align:"LEFT",face:"serif",size:12,letterspacing:0,kerning:0,color:0,leading:0};this._type="dynamic";this._selectable=!0;this._textHeight=this._textWidth=0;this._bottomScrollV=this._maxScrollV=this._scrollV=1;this._lines=[];this._embedFonts=!1;this._autoSize="none";this._border=this._background=this._condenseWhite=this._multiline=
this._wordWrap=!1;this._backgroundColor=16777215;this._backgroundColorStr="#ffffff";this._borderColor=0;this._borderColorStr="#000000";this._textColor=null;this._drawingOffsetH=0;this._bbox={xMin:0,yMin:0,xMax:2E3,yMax:2E3};var b=this.symbol;if(b){var b=b.tag,d=b.bbox;this._currentTransform.tx+=d.xMin;this._currentTransform.ty+=d.yMin;this._bbox.xMax=d.xMax-d.xMin;this._bbox.yMax=d.yMax-d.yMin;b.hasLayout&&(a.size=b.fontHeight/20,"number"===typeof a.leading&&(a.leading=b.leading/20));b.hasColor&&
(a.color=rgbaObjToStr(b.color));b.hasFont&&(d=FontDefinition.getFontByUniqueName(b.font),a.font=d,a.face=d._fontName,a.bold=d.symbol.bold,a.italic=d.symbol.italic,a.str=s(a));this._embedFonts=!!b.useOutlines;switch(b.align){case 1:a.align="right";break;case 2:a.align="center";break;case 3:a.align="justified"}this._selectable=!b.noSelect;this._multiline=!!b.multiline;this._wordWrap=!!b.wordWrap;this._border=!!b.border;b.initialText?b.html?this.htmlText=b.initialText:this.text=b.initialText:this.text=
""}else this._currentTransform.tx-=40,this._currentTransform.ty-=40,w(a,!1),this.text=""},_getAS2Object:function(){this.$as2Object||new avm1lib.AS2TextField(this);return this.$as2Object},replaceText:function(a,b,d){var e=this._content.text;this.text=e.substring(0,a)+d+e.substring(b)},draw:function(a,b,d){this.ensureDimensions();var e=this._bbox;b=e.xMax/20;e=e.yMax/20;if(!(0>=b||0>=e)){a.save();a.beginPath();a.rect(0,0,b+1,e+1);a.clip();this._background&&(d.setFillStyle(a,this._backgroundColorStr),
a.fill());this._border&&(d.setStrokeStyle(a,this._borderColorStr),a.lineCap="square",a.lineWidth=1,a.strokeRect(0.5,0.5,b|0,e|0));a.closePath();if(0!==this._lines.length){a.translate(2,2);a.save();d.setAlpha(a);b=this._content.textruns;for(var e=this._lines[this._scrollV-1].y,f=0;f<b.length;f++){var g=b[f];"f"===g.type?(a.restore(),a.font=g.format.str,d.setFillStyle(a,g.format.color),a.save(),d.setAlpha(a)):g.y<e||a.fillText(g.text,g.x-this._drawingOffsetH,g.y-e)}a.restore()}a.restore()}},invalidateDimensions:function(){this._invalidate();
this._invalidateBounds();this._dimensionsValid=!1},ensureDimensions:function(){if(!this._dimensionsValid){var b=this._bbox,d=this._defaultTextFormat;w(d,this._embedFonts);var e={type:"f",format:d},f=Math.max(b.xMax/20-4,1),l=Math.max(b.yMax/20-4,1),d={ctx:z,w:f,h:l,maxLineWidth:0,formats:[d],currentFormat:d,line:new a(0),lines:[],runs:[e],wordWrap:this._wordWrap,combinedAlign:null,textColor:this._textColor,embedFonts:this._embedFonts};g(this._content.tree,d);p(d,!1);this._textWidth=d.maxLineWidth|
0;this._textHeight=d.line.y|0;this._lines=d.lines;this._content.textruns=d.runs;this._bottomScrollV=this._maxScrollV=this._scrollV=1;e=this._autoSize;if("none"===e){if(b=(b.yMax-80)/20,this._textHeight>b)for(f=0;f<d.lines.length;f++){var m=d.lines[f];if(m.y+m.height>b){this._maxScrollV=f+1;this._bottomScrollV=0===f?1:f;break}}}else{var l=this._textWidth,d=d.combinedAlign,r=0;if("mixed"!==d){switch(e){case "center":r=f-l>>1;break;case "right":r=f-l}if("left"===d)this._drawingOffsetH=0;else{switch(e){case "left":m=
f-l;break;case "center":m=r<<1;break;case "right":m=r}"center"===d&&(m>>=1);this._drawingOffsetH=m}this._invalidateTransform();this._currentTransform.tx+=20*r|0;b.xMax=(20*l|0)+80}b.yMax=(20*this._textHeight|0)+80;this._invalidateBounds()}this._dimensionsValid=!0}},get text(){return this._content.text},set text(a){a=String(a);if(!(this._content&&this._content.text===a)){for(var d=[],e=0,f=0;f<a.length;){var g=a[f];if("\r"===g||"\n"===g)d.push(a.substring(e,f)),e=f,"\r"===g&&"\n"===a[f+1]&&f++;f++}d.push(a.substring(e,
f));this._content={tree:b(this._defaultTextFormat),text:a,htmlText:a};this._content.tree.children[0].children[0]={type:"plain-text",lines:d};this.invalidateDimensions()}},get htmlText(){return this._content.htmlText},set htmlText(a){if(this._htmlText!==a){this._defaultTextFormat.bold=!1;this._defaultTextFormat.italic=!1;var g=this._defaultTextFormat,l=this._multiline;v.innerHTML=a;var m=1!==v.childNodes.length?v:v.childNodes[0];a={text:"",htmlText:a,tree:b(g)};if(3===m.nodeType)e(m,a.tree.children[0].children,
a,l);else{var g=[m],p,r;if(1==g.length&&"P"==m.localName.toUpperCase()){g=f(m);p=a.tree.format;for(r in g)p[r]=g[r];g=m.childNodes;m=m.childNodes[0]}if(1==g.length&&"FONT"==m.localName.toUpperCase()){g=f(m);p=a.tree.children[0].format;for(r in g)p[r]=g[r];g=m.childNodes}d(g,a.tree.children[0].children,a,l)}this._content=a;this.invalidateDimensions()}},get defaultTextFormat(){return(new flash.text.TextFormat).fromObject(this._defaultTextFormat)},set defaultTextFormat(a){this._defaultTextFormat=a.toObject();
this.invalidateDimensions()},getTextFormat:function(){return this.defaultTextFormat},setTextFormat:function(a){this.defaultTextFormat=a;this._content&&this._content.text===this._content.htmlText&&(a=this.text,this._content=null,this.text=a);this.invalidateDimensions()},get x(){this.ensureDimensions();return this._currentTransform.tx},set x(a){a!==this._currentTransform.tx&&(this._invalidate(),this._invalidateBounds(),this._invalidateTransform(),this._currentTransform.tx=a)},get width(){this.ensureDimensions();
return this._bbox.xMax},set width(a){0>a||(this._bbox.xMax=a,this.invalidateDimensions())},get height(){this.ensureDimensions();return this._bbox.yMax},set height(a){0>a||(this._bbox.yMax=a,this._invalidate())},_getContentBounds:function(){this.ensureDimensions();return this._bbox},_getRegion:function(a){return this._getTransformedRect(this._getContentBounds(),a)},getLineMetrics:function(a){this.ensureDimensions();(0>a||a>=this._lines.length)&&throwError("RangeError",Errors.ParamRangeError);a=this._lines[a];
var b=a.largestFormat,d=b.font._metrics,b=b.size;return new flash.text.TextLineMetrics(a.x+2,a.width,a.height,d.ascent*b+0.49999|0,d.descent*b+0.49999|0,d.leading*b+0.49999+a.leading|0)}},y=Object.getOwnPropertyDescriptor;B.__glue__={"native":{instance:{text:y(B,"text"),defaultTextFormat:y(B,"defaultTextFormat"),draw:B.draw,htmlText:y(B,"htmlText"),replaceText:B.replaceText,getTextFormat:B.getTextFormat,setTextFormat:B.setTextFormat,autoSize:{get:function(){return this._autoSize},set:function(a){this._autoSize!==
a&&(this._autoSize=a,this.invalidateDimensions())}},multiline:{get:function(){return this._multiline},set:function(a){this._multiline!==a&&(this._multiline=a,this.invalidateDimensions())}},textColor:{get:function(){return this._textColor},set:function(a){this._textColor!==a&&(this._textColor=a,this._invalidate())}},selectable:{get:function(){return this._selectable},set:function(a){somewhatImplemented("TextField.selectable");this._selectable=a}},wordWrap:{get:function(){return this._wordWrap},set:function(a){this._wordWrap!==
a&&(this._wordWrap=a,this.invalidateDimensions())}},textHeight:{get:function(){this.ensureDimensions();return this._textHeight}},textWidth:{get:function(){this.ensureDimensions();return this._textWidth}},length:{get:function(){return this._content.text.length}},numLines:{get:function(){this.ensureDimensions();return this._lines.length}},getLineMetrics:function(a){return this.getLineMetrics(a)},setSelection:function(){somewhatImplemented("TextField.setSelection")},scrollV:{get:function(){return this._scrollV},
set:function(a){this.ensureDimensions();this._scrollV=a=Math.max(1,Math.min(this._maxScrollV,a))}},bottomScrollV:{get:function(){this.ensureDimensions();if(1===this._scrollV)return this._bottomScrollV;for(var a=(this._bbox.yMax-80)/20,b=this._lines[this._scrollV-1].y,d=this._bottomScrollV;d<this._lines.length;d++){var e=this._lines[d];if(e.y+e.height+b>a)return d+1}}},maxScrollV:{get:function(){this.ensureDimensions();return this._maxScrollV}},maxScrollH:{get:function(){this.ensureDimensions();return Math.max(this._textWidth-
this._bbox.xMax/20+4,0)}},background:{get:function(){return this._background},set:function(a){this._background!==a&&(this._background=a,this._invalidate())}},backgroundColor:{get:function(){return this._backgroundColor},set:function(a){this._backgroundColor!==a&&(this._backgroundColor=a,this._backgroundColorStr=rgbIntAlphaToStr(a,1),this._background&&this._invalidate())}},border:{get:function(){return this._border},set:function(a){this._border!==a&&(this._border=a,this._invalidate())}},borderColor:{get:function(){return this._borderColor},
set:function(a){this._borderColor!==a&&(this._borderColor=a,this._borderColorStr=rgbIntAlphaToStr(a,1),this._border&&this._invalidate())}},type:{get:function(){return this._type},set:function(a){somewhatImplemented("TextField.type");this._type=a}},embedFonts:{get:function(){return this._embedFonts},set:function(a){this.invalidateDimensions();this._embedFonts=a}},condenseWhite:{get:function(){return this._condenseWhite},set:function(a){somewhatImplemented("TextField.condenseWhite");this._condenseWhite=
a}},sharpness:{get:function(){return this._sharpness},set:function(a){somewhatImplemented("TextField.sharpness");this._sharpness=a}}}}};return B}.call(this),TextFormatDefinition=function(){var a;return{__class__:"flash.text.TextFormat",initialize:function(){},fromObject:function(a){this._font=a.face||null;this._size="number"===typeof a.size?a.size:null;this._color="number"===typeof a.color?a.color:null;this._bold="boolean"===typeof a.bold?a.bold:null;this._italic="boolean"===typeof a.italic?a.italic:
null;this._underline="boolean"===typeof a.underline?a.underline:null;this._url=a.url||null;this._target=a.target||null;this._align=a.align||null;this._leftMargin="number"===typeof a.leftMargin?a.leftMargin:null;this._rightMargin="number"===typeof a.rightMargin?a.rightMargin:null;this._indent="number"===typeof a.indent?a.indent:null;this._leading="number"===typeof a.leading?a.leading:null;return this},toObject:function(){return{face:this._font||"serif",size:this._size||12,color:this._color||0,bold:this._bold||
!1,italic:this._italic||!1,underline:this._underline||!1,url:this._url,target:this._target,align:this._align||"left",leftMargin:this._leftMargin||0,rightMargin:this._rightMargin||0,indent:this._indent||0,leading:this._leading||0}},as2GetTextExtent:function(b,e){a||(a=new flash.text.TextField,a._multiline=!0);!isNaN(e)&&0<e?(a.width=e+4,a._wordWrap=!0):a._wordWrap=!1;a.defaultTextFormat=this;a.text=b;a.ensureDimensions();var d={},f=a._textWidth,g=a._textHeight;d.asSetPublicProperty("width",f);d.asSetPublicProperty("height",
g);d.asSetPublicProperty("textFieldWidth",f+4);d.asSetPublicProperty("textFieldHeight",g+4);f=a.getLineMetrics(0);d.asSetPublicProperty("ascent",f.asGetPublicProperty("ascent"));d.asSetPublicProperty("descent",f.asGetPublicProperty("descent"));return d},__glue__:{"native":{"static":{},instance:{align:{get:function(){return this._align},set:function(a){this._align=a}},blockIndent:{get:function(){return this._blockIndent},set:function(a){this._blockIndent=a}},bold:{get:function(){return this._bold},
set:function(a){this._bold=a}},bullet:{get:function(){return this._bullet},set:function(a){this._bullet=a}},color:{get:function(){return this._color},set:function(a){this._color=a}},display:{get:function(){return this._display},set:function(a){this._display=a}},font:{get:function(){return this._font},set:function(a){this._font=a}},indent:{get:function(){return this._indent},set:function(a){this._indent=a}},italic:{get:function(){return this._italic},set:function(a){this._italic=a}},kerning:{get:function(){return this._kerning},
set:function(a){this._kerning=a}},leading:{get:function(){return this._leading},set:function(a){this._leading=a}},leftMargin:{get:function(){return this._leftMargin},set:function(a){this._leftMargin=a}},letterSpacing:{get:function(){return this._letterSpacing},set:function(a){this._letterSpacing=a}},rightMargin:{get:function(){return this._rightMargin},set:function(a){this._rightMargin=a}},size:{get:function(){return this._size},set:function(a){this._size=a}},tabStops:{get:function(){return this._tabStops},
set:function(a){this._tabStops=a}},target:{get:function(){return this._target},set:function(a){this._target=a}},underline:{get:function(){return this._underline},set:function(a){this._underline=a}},url:{get:function(){return this._url},set:function(a){this._url=a}}}}}}}.call(this),ContentElementDefinition=function(){return{__class__:"flash.text.engine.ContentElement",initialize:function(){},__glue__:{"native":{"static":{},instance:{textBlock:{get:function(){notImplemented("ContentElement.textBlock");
return this._textBlock}},textBlockBeginIndex:{get:function(){notImplemented("ContentElement.textBlockBeginIndex");return this._textBlockBeginIndex}},elementFormat:{get:function(){return this._elementFormat},set:function(a){somewhatImplemented("ContentElement.elementFormat");this._elementFormat=a}},eventMirror:{get:function(){return this._eventMirror},set:function(a){somewhatImplemented("ContentElement.eventMirror");this._eventMirror=a}},groupElement:{get:function(){notImplemented("ContentElement.groupElement");
return this._groupElement}},rawText:{get:function(){notImplemented("ContentElement.rawText");return this._rawText}},text:{get:function(){notImplemented("ContentElement.text");return this._text}},textRotation:{get:function(){return this._textRotation},set:function(a){somewhatImplemented("ContentElement.textRotation");this._textRotation=a}}}}}}}.call(this),ElementFormatDefinition=function(){return{__class__:"flash.text.engine.ElementFormat",initialize:function(){},__glue__:{"native":{"static":{},instance:{getFontMetrics:function(){notImplemented("ElementFormat.getFontMetrics")},
alignmentBaseline:{get:function(){return this._alignmentBaseline},set:function(a){somewhatImplemented("ElementFormat.alignmentBaseline");this._alignmentBaseline=a}},alpha:{get:function(){return this._alpha},set:function(a){somewhatImplemented("ElementFormat.alpha");this._alpha=a}},baselineShift:{get:function(){return this._baselineShift},set:function(a){somewhatImplemented("ElementFormat.baselineShift");this._baselineShift=a}},breakOpportunity:{get:function(){return this._breakOpportunity},set:function(a){somewhatImplemented("ElementFormat.breakOpportunity");
this._breakOpportunity=a}},color:{get:function(){return this._color},set:function(a){somewhatImplemented("ElementFormat.color");this._color=a}},dominantBaseline:{get:function(){return this._dominantBaseline},set:function(a){somewhatImplemented("ElementFormat.dominantBaseline");this._dominantBaseline=a}},fontDescription:{get:function(){return this._fontDescription},set:function(a){somewhatImplemented("ElementFormat.fontDescription");this._fontDescription=a}},digitCase:{get:function(){return this._digitCase},
set:function(a){somewhatImplemented("ElementFormat.digitCase");this._digitCase=a}},digitWidth:{get:function(){return this._digitWidth},set:function(a){somewhatImplemented("ElementFormat.digitWidth");this._digitWidth=a}},ligatureLevel:{get:function(){return this._ligatureLevel},set:function(a){somewhatImplemented("ElementFormat.ligatureLevel");this._ligatureLevel=a}},fontSize:{get:function(){return this._fontSize},set:function(a){somewhatImplemented("ElementFormat.fontSize");this._fontSize=a}},kerning:{get:function(){return this._kerning},
set:function(a){somewhatImplemented("ElementFormat.kerning");this._kerning=a}},locale:{get:function(){return this._locale},set:function(a){somewhatImplemented("ElementFormat.locale");this._locale=a}},textRotation:{get:function(){return this._textRotation},set:function(a){somewhatImplemented("ElementFormat.textRotation");this._textRotation=a}},trackingRight:{get:function(){return this._trackingRight},set:function(a){somewhatImplemented("ElementFormat.trackingRight");this._trackingRight=a}},trackingLeft:{get:function(){return this._trackingLeft},
set:function(a){somewhatImplemented("ElementFormat.trackingLeft");this._trackingLeft=a}},typographicCase:{get:function(){return this._typographicCase},set:function(a){somewhatImplemented("ElementFormat.typographicCase");this._typographicCase=a}},locked:{get:function(){notImplemented("ElementFormat.locked");return this._locked},set:function(a){notImplemented("ElementFormat.locked");this._locked=a}}}}}}}.call(this),FontDescriptionDefinition=function(){return{__class__:"flash.text.engine.FontDescription",
initialize:function(){},__glue__:{"native":{"static":{isFontCompatible:function(){notImplemented("FontDescription.isFontCompatible")},isDeviceFontCompatible:function(){notImplemented("FontDescription.isDeviceFontCompatible")}},instance:{renderingMode:{get:function(){return this._renderingMode},set:function(a){somewhatImplemented("FontDescription.renderingMode");this._renderingMode=a}},fontLookup:{get:function(){return this._fontLookup},set:function(a){somewhatImplemented("FontDescription.fontLookup");
this._fontLookup=a}},fontName:{get:function(){return this._fontName},set:function(a){somewhatImplemented("FontDescription.fontName");this._fontName=a}},fontPosture:{get:function(){return this._fontPosture},set:function(a){somewhatImplemented("FontDescription.fontPosture");this._fontPosture=a}},fontWeight:{get:function(){return this._fontWeight},set:function(a){somewhatImplemented("FontDescription.fontWeight");this._fontWeight=a}},cffHinting:{get:function(){return this._cffHinting},set:function(a){somewhatImplemented("FontDescription.cffHinting");
this._cffHinting=a}},locked:{get:function(){notImplemented("FontDescription.locked");return this._locked},set:function(a){notImplemented("FontDescription.locked");this._locked=a}}}},script:{"static":{},instance:{}}}}}.call(this),GroupElementDefinition=function(){return{__class__:"flash.text.engine.GroupElement",initialize:function(){},__glue__:{"native":{"static":{},instance:{getElementAt:function(){notImplemented("GroupElement.getElementAt")},setElements:function(a){somewhatImplemented("GroupElement.setElements");
this._elements=a},groupElements:function(){notImplemented("GroupElement.groupElements")},ungroupElements:function(){notImplemented("GroupElement.ungroupElements")},mergeTextElements:function(){notImplemented("GroupElement.mergeTextElements")},splitTextElement:function(){notImplemented("GroupElement.splitTextElement")},replaceElements:function(){notImplemented("GroupElement.replaceElements")},getElementAtCharIndex:function(){notImplemented("GroupElement.getElementAtCharIndex")},elementCount:{get:function(){notImplemented("GroupElement.elementCount");
return this._elementCount}}}}}}}.call(this),SpaceJustifierDefinition=function(){return{__class__:"flash.text.engine.SpaceJustifier",initialize:function(){this._letterSpacing=!1;this._optimumSpacing=1;this._minimumSpacing=0.5;this._maximumSpacing=1.5},__glue__:{"native":{"static":{},instance:{cloneSpacing:function(a){somewhatImplemented("SpaceJustifier.cloneSpacing");a._optimumSpacing=this._optimumSpacing;a._minimumSpacing=this._minimumSpacing;a._maximumSpacing=this._maximumSpacing},letterSpacing:{get:function(){return this._letterSpacing},
set:function(a){somewhatImplemented("SpaceJustifier.letterSpacing");this._letterSpacing=a}},minimumSpacing:{get:function(){return this._minimumSpacing},set:function(a){somewhatImplemented("SpaceJustifier.minimumSpacing");this._minimumSpacing=a}},optimumSpacing:{get:function(){return this._optimumSpacing},set:function(a){somewhatImplemented("SpaceJustifier.optimumSpacing");this._optimumSpacing=a}},maximumSpacing:{get:function(){return this._maximumSpacing},set:function(a){somewhatImplemented("SpaceJustifier.maximumSpacing");
this._maximumSpacing=a}}}}}}}.call(this),TextBlockDefinition=function(){return{__class__:"flash.text.engine.TextBlock",initialize:function(){this._lastLine=this._firstLine=null},__glue__:{"native":{"static":{},instance:{getTextJustifier:function(){return this._textJustifier},setTextJustifier:function(a){somewhatImplemented("TextBlock.setTextJustifier");this._textJustifier=a},getTabStops:function(){return this._tabStops},setTabStops:function(a){somewhatImplemented("TextBlock.setTabStops");this._tabStops=
a},findNextAtomBoundary:function(){notImplemented("TextBlock.findNextAtomBoundary")},findPreviousAtomBoundary:function(){notImplemented("TextBlock.findPreviousAtomBoundary")},findNextWordBoundary:function(){notImplemented("TextBlock.findNextWordBoundary")},findPreviousWordBoundary:function(){notImplemented("TextBlock.findPreviousWordBoundary")},getTextLineAtCharIndex:function(){notImplemented("TextBlock.getTextLineAtCharIndex")},DoCreateTextLine:function(a,b){somewhatImplemented("TextBlock.DoCreateTextLine");
if(a)return null;var e=new flash.text.engine.TextLine;e._textBlock=this;e._specifiedWidth=b;e._rawTextLength=0;e._textWidth=0;e._textHeight=0;e._ascent=0;e._descent=0;e._unjustifiedTextWidth=0;e._validity="valid";e._previousLine=null;e._nextLine=null;return this._lastLine=this._firstLine=e},releaseLineCreationData:function(){notImplemented("TextBlock.releaseLineCreationData")},releaseLines:function(){notImplemented("TextBlock.releaseLines")},dump:function(){notImplemented("TextBlock.dump")},applyNonLinearFontScaling:{get:function(){return this._applyNonLinearFontScaling},
set:function(a){somewhatImplemented("TextBlock.applyNonLinearFontScaling");this._applyNonLinearFontScaling=a}},baselineFontDescription:{get:function(){return this._baselineFontDescription},set:function(a){somewhatImplemented("TextBlock.baselineFontDescription");this._baselineFontDescription=a}},baselineFontSize:{get:function(){return this._baselineFontSize},set:function(a){somewhatImplemented("TextBlock.baselineFontSize");this._baselineFontSize=a}},baselineZero:{get:function(){return this._baselineZero},
set:function(a){somewhatImplemented("TextBlock.baselineZero");this._baselineZero=a}},content:{get:function(){return this._content},set:function(a){somewhatImplemented("TextBlock.content");this._content=a}},bidiLevel:{get:function(){return this._bidiLevel},set:function(a){somewhatImplemented("TextBlock.bidiLevel");this._bidiLevel=a}},firstInvalidLine:{get:function(){notImplemented("TextBlock.firstInvalidLine");return this._firstInvalidLine}},firstLine:{get:function(){somewhatImplemented("TextBlock.firstLine");
return this._firstLine}},lastLine:{get:function(){somewhatImplemented("TextBlock.lastLine");return this._lastLine}},textLineCreationResult:{get:function(){notImplemented("TextBlock.textLineCreationResult");return this._textLineCreationResult}},lineRotation:{get:function(){return this._lineRotation},set:function(a){somewhatImplemented("TextBlock.lineRotation");this._lineRotation=a}}}}}}}.call(this),TextElementDefinition=function(){return{__class__:"flash.text.engine.TextElement",initialize:function(){},
__glue__:{"native":{"static":{},instance:{replaceText:function(a,b,e){somewhatImplemented("TextElement.replaceText");var d=this._text||"";this._text=d.slice(0,a)+e+d.slice(b)},text:{set:function(a){somewhatImplemented("TextElement.text");this._text=a}}}}}}}.call(this),TextJustifierDefinition=function(){return{__class__:"flash.text.engine.TextJustifier",initialize:function(){this._lineJustification=this._locale=null},__glue__:{"native":{"static":{},instance:{setLocale:function(a){somewhatImplemented("TextJustifier.setLocale");
this._locale=a},locale:{get:function(){return this._locale}},lineJustification:{get:function(){return this._lineJustification},set:function(a){somewhatImplemented("TextJustifier.lineJustification");this._lineJustification=a}}}}}}}.call(this),TextLineDefinition=function(){return{__class__:"flash.text.engine.TextLine",initialize:function(){},__glue__:{"native":{"static":{},instance:{getAtomIndexAtPoint:function(){notImplemented("TextLine.getAtomIndexAtPoint")},getAtomIndexAtCharIndex:function(){notImplemented("TextLine.getAtomIndexAtCharIndex")},
getAtomBounds:function(){notImplemented("TextLine.getAtomBounds")},getAtomBidiLevel:function(){notImplemented("TextLine.getAtomBidiLevel")},getAtomTextRotation:function(){notImplemented("TextLine.getAtomTextRotation")},getAtomTextBlockBeginIndex:function(){notImplemented("TextLine.getAtomTextBlockBeginIndex")},getAtomTextBlockEndIndex:function(){notImplemented("TextLine.getAtomTextBlockEndIndex")},getAtomCenter:function(){notImplemented("TextLine.getAtomCenter")},getAtomWordBoundaryOnLeft:function(){notImplemented("TextLine.getAtomWordBoundaryOnLeft")},
getAtomGraphic:function(){notImplemented("TextLine.getAtomGraphic")},getBaselinePosition:function(){notImplemented("TextLine.getBaselinePosition")},dump:function(){notImplemented("TextLine.dump")},textBlock:{get:function(){notImplemented("TextLine.textBlock");return this._textBlock}},hasGraphicElement:{get:function(){notImplemented("TextLine.hasGraphicElement");return this._hasGraphicElement}},hasTabs:{get:function(){notImplemented("TextLine.hasTabs");return this._hasTabs}},nextLine:{get:function(){somewhatImplemented("TextLine.nextLine");
return this._nextLine}},previousLine:{get:function(){somewhatImplemented("TextLine.previousLine");return this._previousLine}},ascent:{get:function(){somewhatImplemented("TextLine.ascent");return this._ascent}},descent:{get:function(){somewhatImplemented("TextLine.descent");return this._descent}},textHeight:{get:function(){somewhatImplemented("TextLine.textHeight");return this._textHeight}},textWidth:{get:function(){somewhatImplemented("TextLine.textWidth");return this._textWidth}},totalAscent:{get:function(){notImplemented("TextLine.totalAscent");
return this._totalAscent}},totalDescent:{get:function(){notImplemented("TextLine.totalDescent");return this._totalDescent}},totalHeight:{get:function(){notImplemented("TextLine.totalHeight");return this._totalHeight}},textBlockBeginIndex:{get:function(){notImplemented("TextLine.textBlockBeginIndex");return this._textBlockBeginIndex}},rawTextLength:{get:function(){somewhatImplemented("TextLine.rawTextLength");return this._rawTextLength}},specifiedWidth:{get:function(){somewhatImplemented("TextLine.specifiedWidth");
return this._specifiedWidth}},unjustifiedTextWidth:{get:function(){somewhatImplemented("TextLine.unjustifiedTextWidth");return this._unjustifiedTextWidth}},validity:{get:function(){return this._validity},set:function(a){somewhatImplemented("TextLine.validity");this._validity=a}},atomCount:{get:function(){notImplemented("TextLine.atomCount");return this._atomCount}},mirrorRegions:{get:function(){notImplemented("TextLine.mirrorRegions");return this._mirrorRegions}}}}}}}.call(this),ContextMenuDefinition=
function(){return{__class__:"flash.ui.ContextMenu",initialize:function(){},__glue__:{"native":{"static":{_checkSupported:function(){notImplemented("ContextMenu._checkSupported")}},instance:{cloneLinkAndClipboardProperties:function(){notImplemented("ContextMenu.cloneLinkAndClipboardProperties")},builtInItems:{get:function(){somewhatImplemented("ContextMenu.builtInItems");return this._builtInItems},set:function(a){somewhatImplemented("ContextMenu.builtInItems");this._builtInItems=a}},customItems:{get:function(){somewhatImplemented("ContextMenu.customItems");
return this._customItems},set:function(a){somewhatImplemented("ContextMenu.customItems");this._customItems=a}},link:{get:function(){notImplemented("ContextMenu.link");return this._link},set:function(a){notImplemented("ContextMenu.link");this._link=a}},clipboardMenu:{get:function(){notImplemented("ContextMenu.clipboardMenu");return this._clipboardMenu},set:function(a){notImplemented("ContextMenu.clipboardMenu");this._clipboardMenu=a}},clipboardItems:{get:function(){notImplemented("ContextMenu.clipboardItems");
return this._clipboardItems},set:function(a){notImplemented("ContextMenu.clipboardItems");this._clipboardItems=a}}}}}}}.call(this),ContextMenuItemDefinition=function(){return{__class__:"flash.ui.ContextMenuItem",initialize:function(){},__glue__:{"native":{"static":{},instance:{caption:{get:function(){somewhatImplemented("ContextMenuItem.caption");return this._caption},set:function(a){somewhatImplemented("ContextMenuItem.caption");this._caption=a}},separatorBefore:{get:function(){somewhatImplemented("ContextMenuItem.separatorBefore");
return this._separatorBefore},set:function(a){somewhatImplemented("ContextMenuItem.separatorBefore");this._separatorBefore=a}},visible:{get:function(){somewhatImplemented("ContextMenuItem.visible");return this._visible},set:function(a){somewhatImplemented("ContextMenuItem.visible");this._visible=a}}}}}}}.call(this),ShumwayKeyboardListener={_lastKeyCode:0,_captureKeyPress:!1,_charCodeMap:[],focus:null,handleEvent:function(a){var b=a.keyCode;if("keydown"===a.type){this._lastKeyCode=b;if(this._captureKeyPress=
8===b||9===b||13===b||32===b||48<=b&&90>=b||145<b)return;this._charCodeMap[b]=0}else if("keypress"===a.type)if(this._captureKeyPress)b=this._lastKeyCode,this._charCodeMap[b]=a.charCode;else return;this.focus&&this.focus._dispatchEvent(new flash.events.KeyboardEvent("keyup"===a.type?"keyUp":"keyDown",!0,!1,"keyup"===a.type?this._charCodeMap[b]:a.charCode,"keyup"===a.type?a.keyCode:this._lastKeyCode,a.keyLocation,a.ctrlKey,a.altKey,a.shiftKey))}};window.addEventListener("keydown",ShumwayKeyboardListener);
window.addEventListener("keypress",ShumwayKeyboardListener);window.addEventListener("keyup",ShumwayKeyboardListener);
var KeyboardDefinition=function(){var a={get capsLock(){return!1},get hasVirtualKeyboard(){return!1},get numLock(){return!1},get physicalKeyboardType(){return"alphanumeric"},get isAccessible(){return!0}},b=Object.getOwnPropertyDescriptor;a.__glue__={script:{"static":scriptProperties("public","A ALTERNATE AUDIO B BACK BACKQUOTE BACKSLASH BACKSPACE BLUE C CAPS_LOCK CHANNEL_DOWN CHANNEL_UP COMMA COMMAND CONTROL D DELETE DOWN DVR E END ENTER EQUAL ESCAPE EXIT F F1 F10 F11 F12 F13 F14 F15 F2 F3 F4 F5 F6 F7 F8 F9 FAST_FORWARD G GREEN GUIDE H HELP HOME I INFO INPUT INSERT J K KEYNAME_BEGIN KEYNAME_BREAK KEYNAME_CLEARDISPLAY KEYNAME_CLEARLINE KEYNAME_DELETE KEYNAME_DELETECHAR KEYNAME_DELETELINE KEYNAME_DOWNARROW KEYNAME_END KEYNAME_EXECUTE KEYNAME_F1 KEYNAME_F10 KEYNAME_F11 KEYNAME_F12 KEYNAME_F13 KEYNAME_F14 KEYNAME_F15 KEYNAME_F16 KEYNAME_F17 KEYNAME_F18 KEYNAME_F19 KEYNAME_F2 KEYNAME_F20 KEYNAME_F21 KEYNAME_F22 KEYNAME_F23 KEYNAME_F24 KEYNAME_F25 KEYNAME_F26 KEYNAME_F27 KEYNAME_F28 KEYNAME_F29 KEYNAME_F3 KEYNAME_F30 KEYNAME_F31 KEYNAME_F32 KEYNAME_F33 KEYNAME_F34 KEYNAME_F35 KEYNAME_F4 KEYNAME_F5 KEYNAME_F6 KEYNAME_F7 KEYNAME_F8 KEYNAME_F9 KEYNAME_FIND KEYNAME_HELP KEYNAME_HOME KEYNAME_INSERT KEYNAME_INSERTCHAR KEYNAME_INSERTLINE KEYNAME_LEFTARROW KEYNAME_MENU KEYNAME_MODESWITCH KEYNAME_NEXT KEYNAME_PAGEDOWN KEYNAME_PAGEUP KEYNAME_PAUSE KEYNAME_PREV KEYNAME_PRINT KEYNAME_PRINTSCREEN KEYNAME_REDO KEYNAME_RESET KEYNAME_RIGHTARROW KEYNAME_SCROLLLOCK KEYNAME_SELECT KEYNAME_STOP KEYNAME_SYSREQ KEYNAME_SYSTEM KEYNAME_UNDO KEYNAME_UPARROW KEYNAME_USER L LAST LEFT LEFTBRACKET LIVE M MASTER_SHELL MENU MINUS N NEXT NUMBER_0 NUMBER_1 NUMBER_2 NUMBER_3 NUMBER_4 NUMBER_5 NUMBER_6 NUMBER_7 NUMBER_8 NUMBER_9 NUMPAD NUMPAD_0 NUMPAD_1 NUMPAD_2 NUMPAD_3 NUMPAD_4 NUMPAD_5 NUMPAD_6 NUMPAD_7 NUMPAD_8 NUMPAD_9 NUMPAD_ADD NUMPAD_DECIMAL NUMPAD_DIVIDE NUMPAD_ENTER NUMPAD_MULTIPLY NUMPAD_SUBTRACT O P PAGE_DOWN PAGE_UP PAUSE PERIOD PLAY PREVIOUS Q QUOTE R RECORD RED REWIND RIGHT RIGHTBRACKET S SEARCH SEMICOLON SETUP SHIFT SKIP_BACKWARD SKIP_FORWARD SLASH SPACE STOP STRING_BEGIN STRING_BREAK STRING_CLEARDISPLAY STRING_CLEARLINE STRING_DELETE STRING_DELETECHAR STRING_DELETELINE STRING_DOWNARROW STRING_END STRING_EXECUTE STRING_F1 STRING_F10 STRING_F11 STRING_F12 STRING_F13 STRING_F14 STRING_F15 STRING_F16 STRING_F17 STRING_F18 STRING_F19 STRING_F2 STRING_F20 STRING_F21 STRING_F22 STRING_F23 STRING_F24 STRING_F25 STRING_F26 STRING_F27 STRING_F28 STRING_F29 STRING_F3 STRING_F30 STRING_F31 STRING_F32 STRING_F33 STRING_F34 STRING_F35 STRING_F4 STRING_F5 STRING_F6 STRING_F7 STRING_F8 STRING_F9 STRING_FIND STRING_HELP STRING_HOME STRING_INSERT STRING_INSERTCHAR STRING_INSERTLINE STRING_LEFTARROW STRING_MENU STRING_MODESWITCH STRING_NEXT STRING_PAGEDOWN STRING_PAGEUP STRING_PAUSE STRING_PREV STRING_PRINT STRING_PRINTSCREEN STRING_REDO STRING_RESET STRING_RIGHTARROW STRING_SCROLLLOCK STRING_SELECT STRING_STOP STRING_SYSREQ STRING_SYSTEM STRING_UNDO STRING_UPARROW STRING_USER SUBTITLE T TAB U UP V VOD W X Y YELLOW Z CharCodeStrings".split(" "))},"native":{instance:{capsLock:b(a,
"capsLock"),hasVirtualKeyboard:b(a,"hasVirtualKeyboard"),numLock:b(a,"numLock"),physicalKeyboardType:b(a,"physicalKeyboardType"),isAccessible:b(a,"isAccessible")}}};return a}.call(this),MouseDefinition=function(){return{__class__:"flash.ui.Mouse",__glue__:{"native":{"static":{cursor:{get:function(){return"auto"},set:function(){notImplemented()}},supportsCursor:{get:function(){return!0}},supportsNativeCursor:{get:function(){return!0}},hide:function(){},show:function(){},registerCursor:function(){notImplemented()},
unregisterCursor:function(){notImplemented()}}}}}}.call(this),DictionaryDefinition=function(){return{__class__:"flash.utils.Dictionary",initialize:function(){},__glue__:{"native":{"static":{},instance:{init:function(){notImplemented("Dictionary.init")}}}}}}.call(this),TimerDefinition=function(){return{__class__:"flash.utils.Timer",initialize:function(){this.running=!1;this.private$flash$utils$Timer$m_iteration=0},__glue__:{"native":{instance:{running:{get:function(){return this.running}},_start:function(a,
b){this.running=!0;this.interval=setInterval(b,a)},stop:function(){this.running=!1;clearInterval(this.interval)},_timerDispatch:function(){this._dispatchEvent(new flash.events.TimerEvent("timer",!0,!1))}}}}}}.call(this),AccessibilityDefinition=function(){return{__class__:"flash.accessibility.Accessibility",initialize:function(){},__glue__:{"native":{"static":{sendEvent:function(){notImplemented("Accessibility.sendEvent")},updateProperties:function(){notImplemented("Accessibility.updateProperties")},
active:{get:function(){somewhatImplemented("Accessibility.active");return!1}}},instance:{}}}}}.call(this),AS2ButtonDefinition=function(){var a={__class__:"avm1lib.AS2Button",initialize:function(){}};a.__glue__={"native":{instance:{_as3Object:{get:function(){return this.$nativeObject}},_init:function(a){Object.defineProperty(this,"$nativeObject",{value:a});a.$as2Object=this;initDefaultListeners(this)}}},script:{instance:Glue.ALL}};return a}.call(this),AS2GlobalsDefinition=function(){var a={__class__:"avm1lib.AS2Globals",
initialize:function(){flash.text.TextFormat.prototype.asDefinePublicProperty("getTextExtent",{value:TextFormatDefinition.as2GetTextExtent,writable:!1,enumerable:!1,configurable:!1})}};a.__glue__={"native":{instance:{ASSetPropFlags:function(){},_addToPendingScripts:function(a,e,d){AS2Context.instance.addToPendingScripts(function(){e.apply(a,d)})},_setLevel:function(a,e){AS2Context.instance.stage._as2SetLevel(a,e)},trace:function(a){avm2.applicationDomain.getProperty(Multiname.fromSimpleName("trace"),
!0,!0)(a)}},"static":{_addInternalClasses:function(a){a.asSetPublicProperty("Object",Stubs.Object);a.asSetPublicProperty("Function",Stubs.Function);a.asSetPublicProperty("Array",Stubs.Array);a.asSetPublicProperty("Number",Stubs.Number);a.asSetPublicProperty("Math",avm2.systemDomain.getClass("Math"));a.asSetPublicProperty("Boolean",Stubs.Boolean);a.asSetPublicProperty("Date",Stubs.Date);a.asSetPublicProperty("RegExp",Stubs.RegExp);a.asSetPublicProperty("String",Stubs.String)}}},script:{instance:Glue.ALL}};
return a}.call(this),AS2MovieClipDefinition=function(){var a={__class__:"avm1lib.AS2MovieClip",initialize:function(){},_insertChildAtDepth:function(a,e){return this.$nativeObject._insertChildAtDepth(a,e)},_duplicate:function(a,e,d){return this.$nativeObject._duplicate(a,e,d)},_constructSymbol:function(a){var e=AS2Context.instance.classes&&AS2Context.instance.classes[a],d=flash.display.MovieClip.class;a=d.createAsSymbol(AS2Context.instance.assets[a]);a._avm1SymbolClass=e;d.instanceConstructor.call(a);
this.$nativeObject.addChild(a);return a},_gotoLabel:function(a){this.$nativeObject.gotoLabel(a)},_callFrame:function(a){this.$nativeObject._callFrame(a)},init:function(a){a&&(Object.defineProperty(this,"$nativeObject",{value:a}),a.$as2Object=this,initDefaultListeners(this))}};a.__glue__={"native":{instance:{_as3Object:{get:function(){return this.$nativeObject}},_init:a.init,_insertChildAtDepth:a._insertChildAtDepth,_duplicate:a._duplicate,_constructSymbol:a._constructSymbol,_callFrame:a._callFrame,
_gotoLabel:a._gotoLabel}},script:{instance:Glue.ALL}};return a}.call(this),AS2MovieClipLoaderDefinition=function(){var a={__class__:"avm1lib.AS2MovieClipLoader",initialize:function(){},get _bytesLoaded(){return this.$nativeObject._bytesLoaded}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{$nativeObject:{get:function(){return this.$nativeObject}},_bytesLoaded:b(a,"_bytesLoaded")}},script:{instance:Glue.ALL}};return a}.call(this),AS2TextFieldDefinition=function(){var a={__class__:"avm1lib.AS2TextField",
initialize:function(){this._variable=""}};a.__glue__={"native":{instance:{variable:{get:function(){return this._variable},set:function(a){if(a!==this._variable){this._variable=a;var e=this.$nativeObject,d;if(0<=a.indexOf(".")||0<=a.indexOf(":")){var f=a.split(/[.:\/]/g);a=f.pop();"_root"==f[0]||""===f[0]?(d=e.root._getAS2Object(),f.shift(),""===f[0]&&f.shift()):d=e._parent._getAS2Object();for(;0<f.length;){var g=f.shift();d=d.asGetPublicProperty(g)||d[g];if(!d)throw Error("Cannot find "+g+" variable");
}}else d=e._parent._getAS2Object();d.asHasProperty(void 0,a,0)||d.asSetPublicProperty(a,e.text);e._addEventListener("advanceFrame",function(){e.text=""+d.asGetPublicProperty(a)})}}},_as3Object:{get:function(){return this.$nativeObject}},_init:function(a){Object.defineProperty(this,"$nativeObject",{value:a});a.$as2Object=this;initDefaultListeners(this)}}},script:{instance:Glue.ALL}};return a}.call(this),AS2UtilsDefinition=function(){return{__class__:"avm1lib.AS2Utils",initialize:function(){},__glue__:{"native":{"static":{getAS2Object:function(a){return a&&
a._getAS2Object?a._getAS2Object():null},addProperty:function(a,b,e,d){a.asDefinePublicProperty(b,{get:e,set:d||void 0,enumerable:!0,configurable:!0})},resolveTarget:function(a){return AS2Context.instance.resolveTarget(a)},resolveLevel:function(a){return AS2Context.instance.resolveLevel(a)},currentStage:{get:function(){return AS2Context.instance.stage}},_installObjectMethods:function(){var a=Stubs.Object,b=a.asGetPublicProperty("prototype");a.asSetPublicProperty("registerClass",function(a,b){(AS2Context.instance.classes||
(AS2Context.instance.classes={}))[a]=b});b.asDefinePublicProperty("addProperty",{value:function(a,b,f){if("string"!==typeof a||""===a||"function"!==typeof b||"function"!==typeof f&&null!==f)return!1;this.asDefinePublicProperty(a,{get:b,set:f||void 0,configurable:!0,enumerable:!0});return!0},writable:!1,enumerable:!1,configurable:!1})}}}}}}.call(this);
function initDefaultListeners(a){var b=a.asGetPublicProperty("$defaultListeners");if(b)for(var e=0;e<b.length;e++){var d=b[e];d.asGetPublicProperty("setter").call(a,d.value)}}function bindNativeClassDefinition(a,b){natives[a]=function(a,d,f,g){a=new Class(void 0,f,ApplicationDomain.coerceCallable);a.extend(g);a.linkNatives(b);return a}}
var Stubs=new function(){function a(a,b,d){Object.defineProperty(a,d,{get:function(){var e=avm2.systemDomain.getClass(b);!0;Object.defineProperty(a,d,{value:e.instanceConstructor,writable:!1});return a[d]},configurable:!0})}function b(a,b,d){return{classSimpleName:a,nativeName:b,definition:d}}var e=this,d=createEmptyObject(),f={__glue__:{script:{instance:Glue.ALL,"static":Glue.ALL}}};this.getClassNames=function(){return Object.keys(d)};this.onClassCreated=function(a,b){var e=b.classInfo.instanceInfo.name.getOriginalName();
e in d&&b.link(d[e]||f)};"Boolean Date String Function Object Number Math Array RegExp".split(" ").forEach(function(b){a(e,b,b)});"Error DefinitionError EvalError RangeError ReferenceError SecurityError SyntaxError TypeError URIError VerifyError UninitializedError ArgumentError".split(" ").forEach(function(b){a(e,b,b)});[b("flash.display.DisplayObject","DisplayObjectClass",DisplayObjectDefinition),b("flash.display.InteractiveObject","InteractiveObjectClass",InteractiveObjectDefinition),b("flash.display.DisplayObjectContainer",
"ContainerClass",DisplayObjectContainerDefinition),b("flash.display.Sprite","SpriteClass",SpriteDefinition),b("flash.display.MovieClip","MovieClipClass",MovieClipDefinition),b("flash.display.Shape","ShapeClass",ShapeDefinition),b("flash.display.Bitmap","BitmapClass",BitmapDefinition),b("flash.display.BitmapData","BitmapDataClass",BitmapDataDefinition),b("flash.display.Stage","StageClass",StageDefinition),b("flash.display.Loader","LoaderClass",LoaderDefinition),b("flash.display.LoaderInfo","LoaderInfoClass",
LoaderInfoDefinition),b("flash.display.Graphics","GraphicsClass",GraphicsDefinition),b("flash.display.SimpleButton","SimpleButtonClass",SimpleButtonDefinition),b("flash.display.MorphShape","MorphShapeClass",MorphShapeDefinition),b("flash.display.NativeMenu","MenuClass",NativeMenuDefinition),b("flash.display.NativeMenuItem","MenuItemClass",NativeMenuItemDefinition),b("flash.display.FrameLabel","FrameLabelClass",FrameLabelDefinition),b("flash.display.Scene"),b("flash.display.BlendMode"),b("flash.display.Shader",
"ShaderClass",ShaderDefinition),b("flash.display.ShaderData","ShaderDataClass",ShaderDataDefinition),b("flash.filters.BevelFilter","BevelFilterClass",BevelFilterDefinition),b("flash.filters.BitmapFilter","BitmapFilterClass",BitmapFilterDefinition),b("flash.filters.BlurFilter","BlurFilterClass",BlurFilterDefinition),b("flash.filters.ColorMatrixFilter","ColorMatrixFilterClass",ColorMatrixFilterDefinition),b("flash.filters.ConvolutionFilter","ConvolutionFilterClass",ConvolutionFilterDefinition),b("flash.filters.DisplacementMapFilter",
"DisplacementMapFilterClass",DisplacementMapFilterDefinition),b("flash.filters.DropShadowFilter","DropShadowFilterClass",DropShadowFilterDefinition),b("flash.filters.GlowFilter","GlowFilterClass",GlowFilterDefinition),b("flash.filters.GradientBevelFilter","GradientBevelFilterClass",GradientBevelFilterDefinition),b("flash.filters.GradientGlowFilter","GradientGlowFilterClass",GradientGlowFilterDefinition),b("flash.filters.ShaderFilter","ShaderFilterClass",ShaderFilterDefinition),b("flash.geom.Point",
"PointClass",PointDefinition),b("flash.geom.Rectangle","RectangleClass",RectangleDefinition),b("flash.geom.Matrix","MatrixClass",MatrixDefinition),b("flash.geom.Matrix3D","Matrix3DClass",Matrix3DDefinition),b("flash.geom.Vector3D","Vector3DClass",Vector3DDefinition),b("flash.geom.Transform","TransformClass",TransformDefinition),b("flash.geom.ColorTransform","ColorTransformClass",ColorTransformDefinition),b("flash.events.EventDispatcher","EventDispatcherClass",EventDispatcherDefinition),b("flash.events.Event",
"EventClass",EventDefinition),b("flash.events.IOErrorEvent"),b("flash.events.NetStatusEvent"),b("flash.events.KeyboardEvent","KeyboardEventClass",KeyboardEventDefinition),b("flash.events.MouseEvent","MouseEventClass",MouseEventDefinition),b("flash.events.TextEvent","TextEventClass",TextEventDefinition),b("flash.events.TimerEvent","TimerEventClass",TimerEventDefinition),b("flash.events.ProgressEvent"),b("flash.events.NetStatusEvent"),b("flash.external.ExternalInterface","ExternalInterfaceClass",ExternalInterfaceDefinition),
b("flash.ui.ContextMenu","ContextMenuClass",ContextMenuDefinition),b("flash.ui.ContextMenuItem","ContextMenuItemClass",ContextMenuItemDefinition),b("flash.ui.Keyboard","KeyboardClass",KeyboardDefinition),b("flash.ui.Mouse","MouseClass",MouseDefinition),b("flash.text.Font","FontClass",FontDefinition),b("flash.text.TextField","TextFieldClass",TextFieldDefinition),b("flash.text.StaticText","StaticTextClass",StaticTextDefinition),b("flash.text.StyleSheet","StyleSheetClass",StyleSheetDefinition),b("flash.text.TextFormat",
"TextFormatClass",TextFormatDefinition),b("flash.text.TextLineMetrics"),b("flash.text.engine.ContentElement","ContentElementClass",ContentElementDefinition),b("flash.text.engine.ElementFormat","ElementFormatClass",ElementFormatDefinition),b("flash.text.engine.FontDescription","FontDescriptionClass",FontDescriptionDefinition),b("flash.text.engine.GroupElement","GroupElementClass",GroupElementDefinition),b("flash.text.engine.SpaceJustifier","SpaceJustifierClass",SpaceJustifierDefinition),b("flash.text.engine.TextBlock",
"TextBlockClass",TextBlockDefinition),b("flash.text.engine.TextElement","TextElementClass",TextElementDefinition),b("flash.text.engine.TextJustifier","TextJustifierClass",TextJustifierDefinition),b("flash.text.engine.TextLine","TextLineClass",TextLineDefinition),b("flash.media.Sound","SoundClass",SoundDefinition),b("flash.media.SoundChannel","SoundChannelClass",SoundChannelDefinition),b("flash.media.SoundMixer","SoundMixerClass",SoundMixerDefinition),b("flash.media.SoundTransform","SoundTransformClass",
SoundTransformDefinition),b("flash.media.Video","VideoClass",VideoDefinition),b("flash.media.ID3Info","ID3InfoClass",ID3InfoDefinition),b("flash.media.Microphone","MicrophoneClass",MicrophoneDefinition),b("flash.net.FileFilter","FileFilterClass",FileFilterDefinition),b("flash.net.NetConnection","NetConnectionClass",NetConnectionDefinition),b("flash.net.NetStream","NetStreamClass",NetStreamDefinition),b("flash.net.Responder","ResponderClass",ResponderDefinition),b("flash.net.URLRequest","URLRequestClass",
URLRequestDefinition),b("flash.net.URLStream","URLStreamClass",URLStreamDefinition),b("flash.net.URLLoader","URLLoaderClass",URLLoaderDefinition),b("flash.net.SharedObject","SharedObjectClass",SharedObjectDefinition),b("flash.net.ObjectEncoding","ObjectEncodingClass",ObjectEncodingDefinition),b("flash.net.LocalConnection","LocalConnectionClass",LocalConnectionDefinition),b("flash.net.Socket","SocketClass",SocketDefinition),b("flash.net.URLVariables"),b("packageInternal flash.system.FSCommand","FSCommandClass",
FSCommandDefinition),b("flash.system.Capabilities","CapabilitiesClass",CapabilitiesDefinition),b("flash.system.System","SystemClass",SystemDefinition),b("flash.system.Security","SecurityClass",SecurityDefinition),b("flash.system.SecurityDomain","SecurityDomainClass",SecurityDomainDefinition),b("flash.system.ApplicationDomain","ApplicationDomainClass",ApplicationDomainDefinition),b("flash.accessibility.Accessibility","AccessibilityClass",AccessibilityDefinition),b("flash.utils.Timer","TimerClass",
TimerDefinition),b("avm1lib.AS2Utils","AS2Utils",AS2UtilsDefinition),b("avm1lib.AS2Broadcaster"),b("avm1lib.AS2Key"),b("avm1lib.AS2Mouse"),b("avm1lib.AS2MovieClip","AS2MovieClip",AS2MovieClipDefinition),b("avm1lib.AS2Button","AS2Button",AS2ButtonDefinition),b("avm1lib.AS2TextField","AS2TextField",AS2TextFieldDefinition),b("avm1lib.AS2Stage"),b("avm1lib.AS2System"),b("avm1lib.AS2Color"),b("avm1lib.AS2Globals","AS2Globals",AS2GlobalsDefinition),b("avm1lib.AS2MovieClipLoader","AS2MovieClipLoader",AS2MovieClipLoaderDefinition)].forEach(function(b){for(var e=
Multiname.fromSimpleName(b.classSimpleName),f=e.getOriginalName().split("."),p=this,r=0,s=f.length-1;r<s;r++)p[f[r]]||(p[f[r]]={}),p=p[f[r]];a(p,b.classSimpleName,f[f.length-1]);b.nativeName&&bindNativeClassDefinition(b.nativeName,b.definition);d[e.getOriginalName()]=b.definition})};natives["FlashUtilScript::getAliasName"]=function(){return function(a){return a.debugName}};natives["FlashUtilScript::getDefinitionByName"]=natives.getDefinitionByName;
natives["FlashUtilScript::getTimer"]=function(){var a=Date.now();return function(){return Date.now()-a}};natives["FlashUtilScript::escapeMultiByte"]=function(){return escape};natives["FlashUtilScript::unescapeMultiByte"]=function(){return unescape};
natives["FlashNetScript::navigateToURL"]=function(){return function(a,b){(null===a||void 0===a)&&throwError("TypeError",Errors.NullPointerError,"request");avm2.systemDomain.getClass("flash.net.URLRequest").isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.net.URLRequest");var e=a.url;/^fscommand:/i.test(e)?avm2.applicationDomain.getProperty(Multiname.fromSimpleName("flash.system.fscommand"),!0,!0).call(null,e.substring(10),b):window.open(FileLoadingService.resolveUrl(e),
b)}};natives["FlashNetScript::sendToURL"]=function(){return function(a){(null===a||void 0===a)&&throwError("TypeError",Errors.NullPointerError,"request");avm2.systemDomain.getClass("flash.net.URLRequest").isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.net.URLRequest");var b=FileLoadingService.createSession();b.onprogress=function(){};b.open(a)}};
natives["Toplevel::registerClassAlias"]=function(){return function(a,b){a||throwError("TypeError",Errors.NullPointerError,"aliasName");b||throwError("TypeError",Errors.NullPointerError,"classObject");AMFUtils.aliasesCache.classes.set(b,a);AMFUtils.aliasesCache.names[a]=b}};
natives["Toplevel::getClassByAlias"]=function(){return function(a){a||throwError("TypeError",Errors.NullPointerError,"aliasName");var b=AMFUtils.aliasesCache.names[a];b||throwError("ReferenceError",Errors.ClassNotFoundError,a);return b}};
